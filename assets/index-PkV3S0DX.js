var wg=Object.defineProperty;var Ag=(n,e,t)=>e in n?wg(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var tn=(n,e,t)=>(Ag(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function bd(n,e){const t=Object.create(null),i=n.split(",");for(let s=0;s<i.length;s++)t[i[s]]=!0;return e?s=>!!t[s.toLowerCase()]:s=>!!t[s]}const Et={},rr=[],ei=()=>{},Cg=()=>!1,Rg=/^on[^a-z]/,za=n=>Rg.test(n),yd=n=>n.startsWith("onUpdate:"),kt=Object.assign,Sd=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},Lg=Object.prototype.hasOwnProperty,ut=(n,e)=>Lg.call(n,e),Xe=Array.isArray,or=n=>Ga(n)==="[object Map]",ip=n=>Ga(n)==="[object Set]",Qe=n=>typeof n=="function",Ot=n=>typeof n=="string",Va=n=>typeof n=="symbol",Tt=n=>n!==null&&typeof n=="object",sp=n=>(Tt(n)||Qe(n))&&Qe(n.then)&&Qe(n.catch),rp=Object.prototype.toString,Ga=n=>rp.call(n),Pg=n=>Ga(n).slice(8,-1),op=n=>Ga(n)==="[object Object]",Md=n=>Ot(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,ca=bd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),$a=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},Ig=/-(\w)/g,ni=$a(n=>n.replace(Ig,(e,t)=>t?t.toUpperCase():"")),Dg=/\B([A-Z])/g,Us=$a(n=>n.replace(Dg,"-$1").toLowerCase()),Wa=$a(n=>n.charAt(0).toUpperCase()+n.slice(1)),ll=$a(n=>n?`on${Wa(n)}`:""),Is=(n,e)=>!Object.is(n,e),cl=(n,e)=>{for(let t=0;t<n.length;t++)n[t](e)},Sa=(n,e,t)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value:t})},Ng=n=>{const e=parseFloat(n);return isNaN(e)?n:e},Ug=n=>{const e=Ot(n)?Number(n):NaN;return isNaN(e)?n:e};let wu;const cc=()=>wu||(wu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function fn(n){if(Xe(n)){const e={};for(let t=0;t<n.length;t++){const i=n[t],s=Ot(i)?Bg(i):fn(i);if(s)for(const r in s)e[r]=s[r]}return e}else if(Ot(n)||Tt(n))return n}const Og=/;(?![^(]*\))/g,kg=/:([^]+)/,Fg=/\/\*[^]*?\*\//g;function Bg(n){const e={};return n.replace(Fg,"").split(Og).forEach(t=>{if(t){const i=t.split(kg);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Dt(n){let e="";if(Ot(n))e=n;else if(Xe(n))for(let t=0;t<n.length;t++){const i=Dt(n[t]);i&&(e+=i+" ")}else if(Tt(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const Hg="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",zg=bd(Hg);function ap(n){return!!n||n===""}const _t=n=>Ot(n)?n:n==null?"":Xe(n)||Tt(n)&&(n.toString===rp||!Qe(n.toString))?JSON.stringify(n,lp,2):String(n),lp=(n,e)=>e&&e.__v_isRef?lp(n,e.value):or(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,s])=>(t[`${i} =>`]=s,t),{})}:ip(e)?{[`Set(${e.size})`]:[...e.values()]}:Tt(e)&&!Xe(e)&&!op(e)?String(e):e;let kn;class Vg{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=kn,!e&&kn&&(this.index=(kn.scopes||(kn.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=kn;try{return kn=this,e()}finally{kn=t}}}on(){kn=this}off(){kn=this.parent}stop(e){if(this._active){let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Gg(n,e=kn){e&&e.active&&e.effects.push(n)}function $g(){return kn}const Ed=n=>{const e=new Set(n);return e.w=0,e.n=0,e},cp=n=>(n.w&Zi)>0,dp=n=>(n.n&Zi)>0,Wg=({deps:n})=>{if(n.length)for(let e=0;e<n.length;e++)n[e].w|=Zi},Xg=n=>{const{deps:e}=n;if(e.length){let t=0;for(let i=0;i<e.length;i++){const s=e[i];cp(s)&&!dp(s)?s.delete(n):e[t++]=s,s.w&=~Zi,s.n&=~Zi}e.length=t}},dc=new WeakMap;let Zr=0,Zi=1;const uc=30;let Bn;const Ls=Symbol(""),fc=Symbol("");class Td{constructor(e,t=null,i){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,Gg(this,i)}run(){if(!this.active)return this.fn();let e=Bn,t=ji;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Bn,Bn=this,ji=!0,Zi=1<<++Zr,Zr<=uc?Wg(this):Au(this),this.fn()}finally{Zr<=uc&&Xg(this),Zi=1<<--Zr,Bn=this.parent,ji=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Bn===this?this.deferStop=!0:this.active&&(Au(this),this.onStop&&this.onStop(),this.active=!1)}}function Au(n){const{deps:e}=n;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(n);e.length=0}}let ji=!0;const up=[];function Rr(){up.push(ji),ji=!1}function Lr(){const n=up.pop();ji=n===void 0?!0:n}function hn(n,e,t){if(ji&&Bn){let i=dc.get(n);i||dc.set(n,i=new Map);let s=i.get(t);s||i.set(t,s=Ed()),fp(s)}}function fp(n,e){let t=!1;Zr<=uc?dp(n)||(n.n|=Zi,t=!cp(n)):t=!n.has(Bn),t&&(n.add(Bn),Bn.deps.push(n))}function bi(n,e,t,i,s,r){const o=dc.get(n);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(t==="length"&&Xe(n)){const l=Number(i);o.forEach((c,d)=>{(d==="length"||!Va(d)&&d>=l)&&a.push(c)})}else switch(t!==void 0&&a.push(o.get(t)),e){case"add":Xe(n)?Md(t)&&a.push(o.get("length")):(a.push(o.get(Ls)),or(n)&&a.push(o.get(fc)));break;case"delete":Xe(n)||(a.push(o.get(Ls)),or(n)&&a.push(o.get(fc)));break;case"set":or(n)&&a.push(o.get(Ls));break}if(a.length===1)a[0]&&hc(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);hc(Ed(l))}}function hc(n,e){const t=Xe(n)?n:[...n];for(const i of t)i.computed&&Cu(i);for(const i of t)i.computed||Cu(i)}function Cu(n,e){(n!==Bn||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const jg=bd("__proto__,__v_isRef,__isVue"),hp=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Va)),Ru=qg();function qg(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const i=ht(this);for(let r=0,o=this.length;r<o;r++)hn(i,"get",r+"");const s=i[e](...t);return s===-1||s===!1?i[e](...t.map(ht)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){Rr();const i=ht(this)[e].apply(this,t);return Lr(),i}}),n}function Yg(n){const e=ht(this);return hn(e,"has",n),e.hasOwnProperty(n)}class pp{constructor(e=!1,t=!1){this._isReadonly=e,this._shallow=t}get(e,t,i){const s=this._isReadonly,r=this._shallow;if(t==="__v_isReactive")return!s;if(t==="__v_isReadonly")return s;if(t==="__v_isShallow")return r;if(t==="__v_raw"&&i===(s?r?l1:vp:r?_p:gp).get(e))return e;const o=Xe(e);if(!s){if(o&&ut(Ru,t))return Reflect.get(Ru,t,i);if(t==="hasOwnProperty")return Yg}const a=Reflect.get(e,t,i);return(Va(t)?hp.has(t):jg(t))||(s||hn(e,"get",t),r)?a:Zt(a)?o&&Md(t)?a:a.value:Tt(a)?s?bp(a):Ln(a):a}}class mp extends pp{constructor(e=!1){super(!1,e)}set(e,t,i,s){let r=e[t];if(pr(r)&&Zt(r)&&!Zt(i))return!1;if(!this._shallow&&(!Ma(i)&&!pr(i)&&(r=ht(r),i=ht(i)),!Xe(e)&&Zt(r)&&!Zt(i)))return r.value=i,!0;const o=Xe(e)&&Md(t)?Number(t)<e.length:ut(e,t),a=Reflect.set(e,t,i,s);return e===ht(s)&&(o?Is(i,r)&&bi(e,"set",t,i):bi(e,"add",t,i)),a}deleteProperty(e,t){const i=ut(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&i&&bi(e,"delete",t,void 0),s}has(e,t){const i=Reflect.has(e,t);return(!Va(t)||!hp.has(t))&&hn(e,"has",t),i}ownKeys(e){return hn(e,"iterate",Xe(e)?"length":Ls),Reflect.ownKeys(e)}}class Kg extends pp{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const Zg=new mp,Jg=new Kg,Qg=new mp(!0),wd=n=>n,Xa=n=>Reflect.getPrototypeOf(n);function Ao(n,e,t=!1,i=!1){n=n.__v_raw;const s=ht(n),r=ht(e);t||(Is(e,r)&&hn(s,"get",e),hn(s,"get",r));const{has:o}=Xa(s),a=i?wd:t?Rd:co;if(o.call(s,e))return a(n.get(e));if(o.call(s,r))return a(n.get(r));n!==s&&n.get(e)}function Co(n,e=!1){const t=this.__v_raw,i=ht(t),s=ht(n);return e||(Is(n,s)&&hn(i,"has",n),hn(i,"has",s)),n===s?t.has(n):t.has(n)||t.has(s)}function Ro(n,e=!1){return n=n.__v_raw,!e&&hn(ht(n),"iterate",Ls),Reflect.get(n,"size",n)}function Lu(n){n=ht(n);const e=ht(this);return Xa(e).has.call(e,n)||(e.add(n),bi(e,"add",n,n)),this}function Pu(n,e){e=ht(e);const t=ht(this),{has:i,get:s}=Xa(t);let r=i.call(t,n);r||(n=ht(n),r=i.call(t,n));const o=s.call(t,n);return t.set(n,e),r?Is(e,o)&&bi(t,"set",n,e):bi(t,"add",n,e),this}function Iu(n){const e=ht(this),{has:t,get:i}=Xa(e);let s=t.call(e,n);s||(n=ht(n),s=t.call(e,n)),i&&i.call(e,n);const r=e.delete(n);return s&&bi(e,"delete",n,void 0),r}function Du(){const n=ht(this),e=n.size!==0,t=n.clear();return e&&bi(n,"clear",void 0,void 0),t}function Lo(n,e){return function(i,s){const r=this,o=r.__v_raw,a=ht(o),l=e?wd:n?Rd:co;return!n&&hn(a,"iterate",Ls),o.forEach((c,d)=>i.call(s,l(c),l(d),r))}}function Po(n,e,t){return function(...i){const s=this.__v_raw,r=ht(s),o=or(r),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=s[n](...i),d=t?wd:e?Rd:co;return!e&&hn(r,"iterate",l?fc:Ls),{next(){const{value:u,done:f}=c.next();return f?{value:u,done:f}:{value:a?[d(u[0]),d(u[1])]:d(u),done:f}},[Symbol.iterator](){return this}}}}function Ri(n){return function(...e){return n==="delete"?!1:this}}function e1(){const n={get(r){return Ao(this,r)},get size(){return Ro(this)},has:Co,add:Lu,set:Pu,delete:Iu,clear:Du,forEach:Lo(!1,!1)},e={get(r){return Ao(this,r,!1,!0)},get size(){return Ro(this)},has:Co,add:Lu,set:Pu,delete:Iu,clear:Du,forEach:Lo(!1,!0)},t={get(r){return Ao(this,r,!0)},get size(){return Ro(this,!0)},has(r){return Co.call(this,r,!0)},add:Ri("add"),set:Ri("set"),delete:Ri("delete"),clear:Ri("clear"),forEach:Lo(!0,!1)},i={get(r){return Ao(this,r,!0,!0)},get size(){return Ro(this,!0)},has(r){return Co.call(this,r,!0)},add:Ri("add"),set:Ri("set"),delete:Ri("delete"),clear:Ri("clear"),forEach:Lo(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=Po(r,!1,!1),t[r]=Po(r,!0,!1),e[r]=Po(r,!1,!0),i[r]=Po(r,!0,!0)}),[n,t,e,i]}const[t1,n1,i1,s1]=e1();function Ad(n,e){const t=e?n?s1:i1:n?n1:t1;return(i,s,r)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?i:Reflect.get(ut(t,s)&&s in i?t:i,s,r)}const r1={get:Ad(!1,!1)},o1={get:Ad(!1,!0)},a1={get:Ad(!0,!1)},gp=new WeakMap,_p=new WeakMap,vp=new WeakMap,l1=new WeakMap;function c1(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function d1(n){return n.__v_skip||!Object.isExtensible(n)?0:c1(Pg(n))}function Ln(n){return pr(n)?n:Cd(n,!1,Zg,r1,gp)}function xp(n){return Cd(n,!1,Qg,o1,_p)}function bp(n){return Cd(n,!0,Jg,a1,vp)}function Cd(n,e,t,i,s){if(!Tt(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const r=s.get(n);if(r)return r;const o=d1(n);if(o===0)return n;const a=new Proxy(n,o===2?i:t);return s.set(n,a),a}function ar(n){return pr(n)?ar(n.__v_raw):!!(n&&n.__v_isReactive)}function pr(n){return!!(n&&n.__v_isReadonly)}function Ma(n){return!!(n&&n.__v_isShallow)}function yp(n){return ar(n)||pr(n)}function ht(n){const e=n&&n.__v_raw;return e?ht(e):n}function Sp(n){return Sa(n,"__v_skip",!0),n}const co=n=>Tt(n)?Ln(n):n,Rd=n=>Tt(n)?bp(n):n;function Mp(n){ji&&Bn&&(n=ht(n),fp(n.dep||(n.dep=Ed())))}function Ep(n,e){n=ht(n);const t=n.dep;t&&hc(t)}function Zt(n){return!!(n&&n.__v_isRef===!0)}function Ct(n){return Tp(n,!1)}function u1(n){return Tp(n,!0)}function Tp(n,e){return Zt(n)?n:new f1(n,e)}class f1{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:ht(e),this._value=t?e:co(e)}get value(){return Mp(this),this._value}set value(e){const t=this.__v_isShallow||Ma(e)||pr(e);e=t?e:ht(e),Is(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:co(e),Ep(this))}}function Fe(n){return Zt(n)?n.value:n}const h1={get:(n,e,t)=>Fe(Reflect.get(n,e,t)),set:(n,e,t,i)=>{const s=n[e];return Zt(s)&&!Zt(t)?(s.value=t,!0):Reflect.set(n,e,t,i)}};function wp(n){return ar(n)?n:new Proxy(n,h1)}class p1{constructor(e,t,i,s){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Td(e,()=>{this._dirty||(this._dirty=!0,Ep(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const e=ht(this);return Mp(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function m1(n,e,t=!1){let i,s;const r=Qe(n);return r?(i=n,s=ei):(i=n.get,s=n.set),new p1(i,s,r||!s,t)}function qi(n,e,t,i){let s;try{s=i?n(...i):n()}catch(r){ja(r,e,t)}return s}function Cn(n,e,t,i){if(Qe(n)){const r=qi(n,e,t,i);return r&&sp(r)&&r.catch(o=>{ja(o,e,t)}),r}const s=[];for(let r=0;r<n.length;r++)s.push(Cn(n[r],e,t,i));return s}function ja(n,e,t,i=!0){const s=e?e.vnode:null;if(e){let r=e.parent;const o=e.proxy,a=t;for(;r;){const c=r.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](n,o,a)===!1)return}r=r.parent}const l=e.appContext.config.errorHandler;if(l){qi(l,null,10,[n,o,a]);return}}g1(n,t,s,i)}function g1(n,e,t,i=!0){console.error(n)}let uo=!1,pc=!1;const Kt=[];let Zn=0;const lr=[];let gi=null,ys=0;const Ap=Promise.resolve();let Ld=null;function Cp(n){const e=Ld||Ap;return n?e.then(this?n.bind(this):n):e}function _1(n){let e=Zn+1,t=Kt.length;for(;e<t;){const i=e+t>>>1,s=Kt[i],r=fo(s);r<n||r===n&&s.pre?e=i+1:t=i}return e}function Pd(n){(!Kt.length||!Kt.includes(n,uo&&n.allowRecurse?Zn+1:Zn))&&(n.id==null?Kt.push(n):Kt.splice(_1(n.id),0,n),Rp())}function Rp(){!uo&&!pc&&(pc=!0,Ld=Ap.then(Pp))}function v1(n){const e=Kt.indexOf(n);e>Zn&&Kt.splice(e,1)}function x1(n){Xe(n)?lr.push(...n):(!gi||!gi.includes(n,n.allowRecurse?ys+1:ys))&&lr.push(n),Rp()}function Nu(n,e=uo?Zn+1:0){for(;e<Kt.length;e++){const t=Kt[e];t&&t.pre&&(Kt.splice(e,1),e--,t())}}function Lp(n){if(lr.length){const e=[...new Set(lr)];if(lr.length=0,gi){gi.push(...e);return}for(gi=e,gi.sort((t,i)=>fo(t)-fo(i)),ys=0;ys<gi.length;ys++)gi[ys]();gi=null,ys=0}}const fo=n=>n.id==null?1/0:n.id,b1=(n,e)=>{const t=fo(n)-fo(e);if(t===0){if(n.pre&&!e.pre)return-1;if(e.pre&&!n.pre)return 1}return t};function Pp(n){pc=!1,uo=!0,Kt.sort(b1);try{for(Zn=0;Zn<Kt.length;Zn++){const e=Kt[Zn];e&&e.active!==!1&&qi(e,null,14)}}finally{Zn=0,Kt.length=0,Lp(),uo=!1,Ld=null,(Kt.length||lr.length)&&Pp()}}function y1(n,e,...t){if(n.isUnmounted)return;const i=n.vnode.props||Et;let s=t;const r=e.startsWith("update:"),o=r&&e.slice(7);if(o&&o in i){const d=`${o==="modelValue"?"model":o}Modifiers`,{number:u,trim:f}=i[d]||Et;f&&(s=t.map(p=>Ot(p)?p.trim():p)),u&&(s=t.map(Ng))}let a,l=i[a=ll(e)]||i[a=ll(ni(e))];!l&&r&&(l=i[a=ll(Us(e))]),l&&Cn(l,n,6,s);const c=i[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Cn(c,n,6,s)}}function Ip(n,e,t=!1){const i=e.emitsCache,s=i.get(n);if(s!==void 0)return s;const r=n.emits;let o={},a=!1;if(!Qe(n)){const l=c=>{const d=Ip(c,e,!0);d&&(a=!0,kt(o,d))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!r&&!a?(Tt(n)&&i.set(n,null),null):(Xe(r)?r.forEach(l=>o[l]=null):kt(o,r),Tt(n)&&i.set(n,o),o)}function qa(n,e){return!n||!za(e)?!1:(e=e.slice(2).replace(/Once$/,""),ut(n,e[0].toLowerCase()+e.slice(1))||ut(n,Us(e))||ut(n,e))}let $t=null,Dp=null;function Ea(n){const e=$t;return $t=n,Dp=n&&n.type.__scopeId||null,e}function Me(n,e=$t,t){if(!e||n._n)return n;const i=(...s)=>{i._d&&Xu(-1);const r=Ea(e);let o;try{o=n(...s)}finally{Ea(r),i._d&&Xu(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function dl(n){const{type:e,vnode:t,proxy:i,withProxy:s,props:r,propsOptions:[o],slots:a,attrs:l,emit:c,render:d,renderCache:u,data:f,setupState:p,ctx:_,inheritAttrs:v}=n;let g,m;const x=Ea(n);try{if(t.shapeFlag&4){const b=s||i;g=Yn(d.call(b,b,u,r,p,f,_)),m=l}else{const b=e;g=Yn(b.length>1?b(r,{attrs:l,slots:a,emit:c}):b(r,null)),m=e.props?l:S1(l)}}catch(b){io.length=0,ja(b,n,1),g=j(Rn)}let y=g;if(m&&v!==!1){const b=Object.keys(m),{shapeFlag:L}=y;b.length&&L&7&&(o&&b.some(yd)&&(m=M1(m,o)),y=es(y,m))}return t.dirs&&(y=es(y),y.dirs=y.dirs?y.dirs.concat(t.dirs):t.dirs),t.transition&&(y.transition=t.transition),g=y,Ea(x),g}const S1=n=>{let e;for(const t in n)(t==="class"||t==="style"||za(t))&&((e||(e={}))[t]=n[t]);return e},M1=(n,e)=>{const t={};for(const i in n)(!yd(i)||!(i.slice(9)in e))&&(t[i]=n[i]);return t};function E1(n,e,t){const{props:i,children:s,component:r}=n,{props:o,children:a,patchFlag:l}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return i?Uu(i,o,c):!!o;if(l&8){const d=e.dynamicProps;for(let u=0;u<d.length;u++){const f=d[u];if(o[f]!==i[f]&&!qa(c,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?Uu(i,o,c):!0:!!o;return!1}function Uu(n,e,t){const i=Object.keys(e);if(i.length!==Object.keys(n).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(e[r]!==n[r]&&!qa(t,r))return!0}return!1}function T1({vnode:n,parent:e},t){for(;e&&e.subTree===n;)(n=e.vnode).el=t,e=e.parent}const Np="components",w1="directives";function ke(n,e){return Up(Np,n,!0,e)||n}const A1=Symbol.for("v-ndc");function Os(n){return Up(w1,n)}function Up(n,e,t=!0,i=!1){const s=$t||zt;if(s){const r=s.type;if(n===Np){const a=v_(r,!1);if(a&&(a===e||a===ni(e)||a===Wa(ni(e))))return r}const o=Ou(s[n]||r[n],e)||Ou(s.appContext[n],e);return!o&&i?r:o}}function Ou(n,e){return n&&(n[e]||n[ni(e)]||n[Wa(ni(e))])}const C1=n=>n.__isSuspense;function R1(n,e){e&&e.pendingBranch?Xe(n)?e.effects.push(...n):e.effects.push(n):x1(n)}const Io={};function cr(n,e,t){return Op(n,e,t)}function Op(n,e,{immediate:t,deep:i,flush:s,onTrack:r,onTrigger:o}=Et){var a;const l=$g()===((a=zt)==null?void 0:a.scope)?zt:null;let c,d=!1,u=!1;if(Zt(n)?(c=()=>n.value,d=Ma(n)):ar(n)?(c=()=>n,i=!0):Xe(n)?(u=!0,d=n.some(b=>ar(b)||Ma(b)),c=()=>n.map(b=>{if(Zt(b))return b.value;if(ar(b))return ws(b);if(Qe(b))return qi(b,l,2)})):Qe(n)?e?c=()=>qi(n,l,2):c=()=>{if(!(l&&l.isUnmounted))return f&&f(),Cn(n,l,3,[p])}:c=ei,e&&i){const b=c;c=()=>ws(b())}let f,p=b=>{f=x.onStop=()=>{qi(b,l,4)}},_;if(po)if(p=ei,e?t&&Cn(e,l,3,[c(),u?[]:void 0,p]):c(),s==="sync"){const b=y_();_=b.__watcherHandles||(b.__watcherHandles=[])}else return ei;let v=u?new Array(n.length).fill(Io):Io;const g=()=>{if(x.active)if(e){const b=x.run();(i||d||(u?b.some((L,P)=>Is(L,v[P])):Is(b,v)))&&(f&&f(),Cn(e,l,3,[b,v===Io?void 0:u&&v[0]===Io?[]:v,p]),v=b)}else x.run()};g.allowRecurse=!!e;let m;s==="sync"?m=g:s==="post"?m=()=>dn(g,l&&l.suspense):(g.pre=!0,l&&(g.id=l.uid),m=()=>Pd(g));const x=new Td(c,m);e?t?g():v=x.run():s==="post"?dn(x.run.bind(x),l&&l.suspense):x.run();const y=()=>{x.stop(),l&&l.scope&&Sd(l.scope.effects,x)};return _&&_.push(y),y}function L1(n,e,t){const i=this.proxy,s=Ot(n)?n.includes(".")?kp(i,n):()=>i[n]:n.bind(i,i);let r;Qe(e)?r=e:(r=e.handler,t=e);const o=zt;mr(this);const a=Op(s,r.bind(i),t);return o?mr(o):Ps(),a}function kp(n,e){const t=e.split(".");return()=>{let i=n;for(let s=0;s<t.length&&i;s++)i=i[t[s]];return i}}function ws(n,e){if(!Tt(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),Zt(n))ws(n.value,e);else if(Xe(n))for(let t=0;t<n.length;t++)ws(n[t],e);else if(ip(n)||or(n))n.forEach(t=>{ws(t,e)});else if(op(n))for(const t in n)ws(n[t],e);return n}function is(n,e){const t=$t;if(t===null)return n;const i=Qa(t)||t.proxy,s=n.dirs||(n.dirs=[]);for(let r=0;r<e.length;r++){let[o,a,l,c=Et]=e[r];o&&(Qe(o)&&(o={mounted:o,updated:o}),o.deep&&ws(a),s.push({dir:o,instance:i,value:a,oldValue:void 0,arg:l,modifiers:c}))}return n}function ls(n,e,t,i){const s=n.dirs,r=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[i];l&&(Rr(),Cn(l,t,8,[n.el,a,n,e]),Lr())}}const Hi=Symbol("_leaveCb"),Do=Symbol("_enterCb");function P1(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ks(()=>{n.isMounted=!0}),Dd(()=>{n.isUnmounting=!0}),n}const Mn=[Function,Array],Fp={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Mn,onEnter:Mn,onAfterEnter:Mn,onEnterCancelled:Mn,onBeforeLeave:Mn,onLeave:Mn,onAfterLeave:Mn,onLeaveCancelled:Mn,onBeforeAppear:Mn,onAppear:Mn,onAfterAppear:Mn,onAppearCancelled:Mn},I1={name:"BaseTransition",props:Fp,setup(n,{slots:e}){const t=em(),i=P1();let s;return()=>{const r=e.default&&Hp(e.default(),!0);if(!r||!r.length)return;let o=r[0];if(r.length>1){for(const v of r)if(v.type!==Rn){o=v;break}}const a=ht(n),{mode:l}=a;if(i.isLeaving)return ul(o);const c=ku(o);if(!c)return ul(o);const d=mc(c,a,i,t);gc(c,d);const u=t.subTree,f=u&&ku(u);let p=!1;const{getTransitionKey:_}=c.type;if(_){const v=_();s===void 0?s=v:v!==s&&(s=v,p=!0)}if(f&&f.type!==Rn&&(!Ss(c,f)||p)){const v=mc(f,a,i,t);if(gc(f,v),l==="out-in")return i.isLeaving=!0,v.afterLeave=()=>{i.isLeaving=!1,t.update.active!==!1&&t.update()},ul(o);l==="in-out"&&c.type!==Rn&&(v.delayLeave=(g,m,x)=>{const y=Bp(i,f);y[String(f.key)]=f,g[Hi]=()=>{m(),g[Hi]=void 0,delete d.delayedLeave},d.delayedLeave=x})}return o}}},D1=I1;function Bp(n,e){const{leavingVNodes:t}=n;let i=t.get(e.type);return i||(i=Object.create(null),t.set(e.type,i)),i}function mc(n,e,t,i){const{appear:s,mode:r,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:u,onLeave:f,onAfterLeave:p,onLeaveCancelled:_,onBeforeAppear:v,onAppear:g,onAfterAppear:m,onAppearCancelled:x}=e,y=String(n.key),b=Bp(t,n),L=(N,w)=>{N&&Cn(N,i,9,w)},P=(N,w)=>{const M=w[1];L(N,w),Xe(N)?N.every(R=>R.length<=1)&&M():N.length<=1&&M()},I={mode:r,persisted:o,beforeEnter(N){let w=a;if(!t.isMounted)if(s)w=v||a;else return;N[Hi]&&N[Hi](!0);const M=b[y];M&&Ss(n,M)&&M.el[Hi]&&M.el[Hi](),L(w,[N])},enter(N){let w=l,M=c,R=d;if(!t.isMounted)if(s)w=g||l,M=m||c,R=x||d;else return;let O=!1;const U=N[Do]=X=>{O||(O=!0,X?L(R,[N]):L(M,[N]),I.delayedLeave&&I.delayedLeave(),N[Do]=void 0)};w?P(w,[N,U]):U()},leave(N,w){const M=String(n.key);if(N[Do]&&N[Do](!0),t.isUnmounting)return w();L(u,[N]);let R=!1;const O=N[Hi]=U=>{R||(R=!0,w(),U?L(_,[N]):L(p,[N]),N[Hi]=void 0,b[M]===n&&delete b[M])};b[M]=n,f?P(f,[N,O]):O()},clone(N){return mc(N,e,t,i)}};return I}function ul(n){if(Ya(n))return n=es(n),n.children=null,n}function ku(n){return Ya(n)?n.children?n.children[0]:void 0:n}function gc(n,e){n.shapeFlag&6&&n.component?gc(n.component.subTree,e):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function Hp(n,e=!1,t){let i=[],s=0;for(let r=0;r<n.length;r++){let o=n[r];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:r);o.type===$e?(o.patchFlag&128&&s++,i=i.concat(Hp(o.children,e,a))):(e||o.type!==Rn)&&i.push(a!=null?es(o,{key:a}):o)}if(s>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}/*! #__NO_SIDE_EFFECTS__ */function Ne(n,e){return Qe(n)?(()=>kt({name:n.name},e,{setup:n}))():n}const to=n=>!!n.type.__asyncLoader,Ya=n=>n.type.__isKeepAlive;function N1(n,e){zp(n,"a",e)}function U1(n,e){zp(n,"da",e)}function zp(n,e,t=zt){const i=n.__wdc||(n.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(Ka(e,i,t),t){let s=t.parent;for(;s&&s.parent;)Ya(s.parent.vnode)&&O1(i,e,t,s),s=s.parent}}function O1(n,e,t,i){const s=Ka(e,n,i,!0);Nd(()=>{Sd(i[e],s)},t)}function Ka(n,e,t=zt,i=!1){if(t){const s=t[n]||(t[n]=[]),r=e.__weh||(e.__weh=(...o)=>{if(t.isUnmounted)return;Rr(),mr(t);const a=Cn(e,t,n,o);return Ps(),Lr(),a});return i?s.unshift(r):s.push(r),r}}const Ai=n=>(e,t=zt)=>(!po||n==="sp")&&Ka(n,(...i)=>e(...i),t),Id=Ai("bm"),ks=Ai("m"),k1=Ai("bu"),Vp=Ai("u"),Dd=Ai("bum"),Nd=Ai("um"),F1=Ai("sp"),B1=Ai("rtg"),H1=Ai("rtc");function z1(n,e=zt){Ka("ec",n,e)}function Rt(n,e,t,i){let s;const r=t&&t[i];if(Xe(n)||Ot(n)){s=new Array(n.length);for(let o=0,a=n.length;o<a;o++)s[o]=e(n[o],o,void 0,r&&r[o])}else if(typeof n=="number"){s=new Array(n);for(let o=0;o<n;o++)s[o]=e(o+1,o,void 0,r&&r[o])}else if(Tt(n))if(n[Symbol.iterator])s=Array.from(n,(o,a)=>e(o,a,void 0,r&&r[a]));else{const o=Object.keys(n);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];s[a]=e(n[c],c,a,r&&r[a])}}else s=[];return t&&(t[i]=s),s}function Ji(n,e,t={},i,s){if($t.isCE||$t.parent&&to($t.parent)&&$t.parent.isCE)return e!=="default"&&(t.name=e),j("slot",t,i&&i());let r=n[e];r&&r._c&&(r._d=!1),J();const o=r&&Gp(r(t)),a=Qi($e,{key:t.key||o&&o.key||`_${e}`},o||(i?i():[]),o&&n._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function Gp(n){return n.some(e=>Aa(e)?!(e.type===Rn||e.type===$e&&!Gp(e.children)):!0)?n:null}const _c=n=>n?tm(n)?Qa(n)||n.proxy:_c(n.parent):null,no=kt(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>_c(n.parent),$root:n=>_c(n.root),$emit:n=>n.emit,$options:n=>Ud(n),$forceUpdate:n=>n.f||(n.f=()=>Pd(n.update)),$nextTick:n=>n.n||(n.n=Cp.bind(n.proxy)),$watch:n=>L1.bind(n)}),fl=(n,e)=>n!==Et&&!n.__isScriptSetup&&ut(n,e),V1={get({_:n},e){const{ctx:t,setupState:i,data:s,props:r,accessCache:o,type:a,appContext:l}=n;let c;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return i[e];case 2:return s[e];case 4:return t[e];case 3:return r[e]}else{if(fl(i,e))return o[e]=1,i[e];if(s!==Et&&ut(s,e))return o[e]=2,s[e];if((c=n.propsOptions[0])&&ut(c,e))return o[e]=3,r[e];if(t!==Et&&ut(t,e))return o[e]=4,t[e];vc&&(o[e]=0)}}const d=no[e];let u,f;if(d)return e==="$attrs"&&hn(n,"get",e),d(n);if((u=a.__cssModules)&&(u=u[e]))return u;if(t!==Et&&ut(t,e))return o[e]=4,t[e];if(f=l.config.globalProperties,ut(f,e))return f[e]},set({_:n},e,t){const{data:i,setupState:s,ctx:r}=n;return fl(s,e)?(s[e]=t,!0):i!==Et&&ut(i,e)?(i[e]=t,!0):ut(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(r[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:i,appContext:s,propsOptions:r}},o){let a;return!!t[o]||n!==Et&&ut(n,o)||fl(e,o)||(a=r[0])&&ut(a,o)||ut(i,o)||ut(no,o)||ut(s.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:ut(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function G1(){return $1().slots}function $1(){const n=em();return n.setupContext||(n.setupContext=im(n))}function Fu(n){return Xe(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let vc=!0;function W1(n){const e=Ud(n),t=n.proxy,i=n.ctx;vc=!1,e.beforeCreate&&Bu(e.beforeCreate,n,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:c,created:d,beforeMount:u,mounted:f,beforeUpdate:p,updated:_,activated:v,deactivated:g,beforeDestroy:m,beforeUnmount:x,destroyed:y,unmounted:b,render:L,renderTracked:P,renderTriggered:I,errorCaptured:N,serverPrefetch:w,expose:M,inheritAttrs:R,components:O,directives:U,filters:X}=e;if(c&&X1(c,i,null),o)for(const oe in o){const W=o[oe];Qe(W)&&(i[oe]=W.bind(t))}if(s){const oe=s.call(t,t);Tt(oe)&&(n.data=Ln(oe))}if(vc=!0,r)for(const oe in r){const W=r[oe],be=Qe(W)?W.bind(t,t):Qe(W.get)?W.get.bind(t,t):ei,Te=!Qe(W)&&Qe(W.set)?W.set.bind(t):ei,Ie=an({get:be,set:Te});Object.defineProperty(i,oe,{enumerable:!0,configurable:!0,get:()=>Ie.value,set:He=>Ie.value=He})}if(a)for(const oe in a)$p(a[oe],i,t,oe);if(l){const oe=Qe(l)?l.call(t):l;Reflect.ownKeys(oe).forEach(W=>{da(W,oe[W])})}d&&Bu(d,n,"c");function Y(oe,W){Xe(W)?W.forEach(be=>oe(be.bind(t))):W&&oe(W.bind(t))}if(Y(Id,u),Y(ks,f),Y(k1,p),Y(Vp,_),Y(N1,v),Y(U1,g),Y(z1,N),Y(H1,P),Y(B1,I),Y(Dd,x),Y(Nd,b),Y(F1,w),Xe(M))if(M.length){const oe=n.exposed||(n.exposed={});M.forEach(W=>{Object.defineProperty(oe,W,{get:()=>t[W],set:be=>t[W]=be})})}else n.exposed||(n.exposed={});L&&n.render===ei&&(n.render=L),R!=null&&(n.inheritAttrs=R),O&&(n.components=O),U&&(n.directives=U)}function X1(n,e,t=ei){Xe(n)&&(n=xc(n));for(const i in n){const s=n[i];let r;Tt(s)?"default"in s?r=yi(s.from||i,s.default,!0):r=yi(s.from||i):r=yi(s),Zt(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[i]=r}}function Bu(n,e,t){Cn(Xe(n)?n.map(i=>i.bind(e.proxy)):n.bind(e.proxy),e,t)}function $p(n,e,t,i){const s=i.includes(".")?kp(t,i):()=>t[i];if(Ot(n)){const r=e[n];Qe(r)&&cr(s,r)}else if(Qe(n))cr(s,n.bind(t));else if(Tt(n))if(Xe(n))n.forEach(r=>$p(r,e,t,i));else{const r=Qe(n.handler)?n.handler.bind(t):e[n.handler];Qe(r)&&cr(s,r,n)}}function Ud(n){const e=n.type,{mixins:t,extends:i}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=n.appContext,a=r.get(e);let l;return a?l=a:!s.length&&!t&&!i?l=e:(l={},s.length&&s.forEach(c=>Ta(l,c,o,!0)),Ta(l,e,o)),Tt(e)&&r.set(e,l),l}function Ta(n,e,t,i=!1){const{mixins:s,extends:r}=e;r&&Ta(n,r,t,!0),s&&s.forEach(o=>Ta(n,o,t,!0));for(const o in e)if(!(i&&o==="expose")){const a=j1[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const j1={data:Hu,props:zu,emits:zu,methods:Jr,computed:Jr,beforeCreate:sn,created:sn,beforeMount:sn,mounted:sn,beforeUpdate:sn,updated:sn,beforeDestroy:sn,beforeUnmount:sn,destroyed:sn,unmounted:sn,activated:sn,deactivated:sn,errorCaptured:sn,serverPrefetch:sn,components:Jr,directives:Jr,watch:Y1,provide:Hu,inject:q1};function Hu(n,e){return e?n?function(){return kt(Qe(n)?n.call(this,this):n,Qe(e)?e.call(this,this):e)}:e:n}function q1(n,e){return Jr(xc(n),xc(e))}function xc(n){if(Xe(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function sn(n,e){return n?[...new Set([].concat(n,e))]:e}function Jr(n,e){return n?kt(Object.create(null),n,e):e}function zu(n,e){return n?Xe(n)&&Xe(e)?[...new Set([...n,...e])]:kt(Object.create(null),Fu(n),Fu(e??{})):e}function Y1(n,e){if(!n)return e;if(!e)return n;const t=kt(Object.create(null),n);for(const i in e)t[i]=sn(n[i],e[i]);return t}function Wp(){return{app:null,config:{isNativeTag:Cg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let K1=0;function Z1(n,e){return function(i,s=null){Qe(i)||(i=kt({},i)),s!=null&&!Tt(s)&&(s=null);const r=Wp(),o=new WeakSet;let a=!1;const l=r.app={_uid:K1++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:S_,get config(){return r.config},set config(c){},use(c,...d){return o.has(c)||(c&&Qe(c.install)?(o.add(c),c.install(l,...d)):Qe(c)&&(o.add(c),c(l,...d))),l},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),l},component(c,d){return d?(r.components[c]=d,l):r.components[c]},directive(c,d){return d?(r.directives[c]=d,l):r.directives[c]},mount(c,d,u){if(!a){const f=j(i,s);return f.appContext=r,d&&e?e(f,c):n(f,c,u),a=!0,l._container=c,c.__vue_app__=l,Qa(f.component)||f.component.proxy}},unmount(){a&&(n(null,l._container),delete l._container.__vue_app__)},provide(c,d){return r.provides[c]=d,l},runWithContext(c){wa=l;try{return c()}finally{wa=null}}};return l}}let wa=null;function da(n,e){if(zt){let t=zt.provides;const i=zt.parent&&zt.parent.provides;i===t&&(t=zt.provides=Object.create(i)),t[n]=e}}function yi(n,e,t=!1){const i=zt||$t;if(i||wa){const s=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:wa._context.provides;if(s&&n in s)return s[n];if(arguments.length>1)return t&&Qe(e)?e.call(i&&i.proxy):e}}function J1(n,e,t,i=!1){const s={},r={};Sa(r,Ja,1),n.propsDefaults=Object.create(null),Xp(n,e,s,r);for(const o in n.propsOptions[0])o in s||(s[o]=void 0);t?n.props=i?s:xp(s):n.type.props?n.props=s:n.props=r,n.attrs=r}function Q1(n,e,t,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=n,a=ht(s),[l]=n.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const d=n.vnode.dynamicProps;for(let u=0;u<d.length;u++){let f=d[u];if(qa(n.emitsOptions,f))continue;const p=e[f];if(l)if(ut(r,f))p!==r[f]&&(r[f]=p,c=!0);else{const _=ni(f);s[_]=bc(l,a,_,p,n,!1)}else p!==r[f]&&(r[f]=p,c=!0)}}}else{Xp(n,e,s,r)&&(c=!0);let d;for(const u in a)(!e||!ut(e,u)&&((d=Us(u))===u||!ut(e,d)))&&(l?t&&(t[u]!==void 0||t[d]!==void 0)&&(s[u]=bc(l,a,u,void 0,n,!0)):delete s[u]);if(r!==a)for(const u in r)(!e||!ut(e,u))&&(delete r[u],c=!0)}c&&bi(n,"set","$attrs")}function Xp(n,e,t,i){const[s,r]=n.propsOptions;let o=!1,a;if(e)for(let l in e){if(ca(l))continue;const c=e[l];let d;s&&ut(s,d=ni(l))?!r||!r.includes(d)?t[d]=c:(a||(a={}))[d]=c:qa(n.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(r){const l=ht(t),c=a||Et;for(let d=0;d<r.length;d++){const u=r[d];t[u]=bc(s,l,u,c[u],n,!ut(c,u))}}return o}function bc(n,e,t,i,s,r){const o=n[t];if(o!=null){const a=ut(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Qe(l)){const{propsDefaults:c}=s;t in c?i=c[t]:(mr(s),i=c[t]=l.call(null,e),Ps())}else i=l}o[0]&&(r&&!a?i=!1:o[1]&&(i===""||i===Us(t))&&(i=!0))}return i}function jp(n,e,t=!1){const i=e.propsCache,s=i.get(n);if(s)return s;const r=n.props,o={},a=[];let l=!1;if(!Qe(n)){const d=u=>{l=!0;const[f,p]=jp(u,e,!0);kt(o,f),p&&a.push(...p)};!t&&e.mixins.length&&e.mixins.forEach(d),n.extends&&d(n.extends),n.mixins&&n.mixins.forEach(d)}if(!r&&!l)return Tt(n)&&i.set(n,rr),rr;if(Xe(r))for(let d=0;d<r.length;d++){const u=ni(r[d]);Vu(u)&&(o[u]=Et)}else if(r)for(const d in r){const u=ni(d);if(Vu(u)){const f=r[d],p=o[u]=Xe(f)||Qe(f)?{type:f}:kt({},f);if(p){const _=Wu(Boolean,p.type),v=Wu(String,p.type);p[0]=_>-1,p[1]=v<0||_<v,(_>-1||ut(p,"default"))&&a.push(u)}}}const c=[o,a];return Tt(n)&&i.set(n,c),c}function Vu(n){return n[0]!=="$"}function Gu(n){const e=n&&n.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:n===null?"null":""}function $u(n,e){return Gu(n)===Gu(e)}function Wu(n,e){return Xe(e)?e.findIndex(t=>$u(t,n)):Qe(e)&&$u(e,n)?0:-1}const qp=n=>n[0]==="_"||n==="$stable",Od=n=>Xe(n)?n.map(Yn):[Yn(n)],e_=(n,e,t)=>{if(e._n)return e;const i=Me((...s)=>Od(e(...s)),t);return i._c=!1,i},Yp=(n,e,t)=>{const i=n._ctx;for(const s in n){if(qp(s))continue;const r=n[s];if(Qe(r))e[s]=e_(s,r,i);else if(r!=null){const o=Od(r);e[s]=()=>o}}},Kp=(n,e)=>{const t=Od(e);n.slots.default=()=>t},t_=(n,e)=>{if(n.vnode.shapeFlag&32){const t=e._;t?(n.slots=ht(e),Sa(e,"_",t)):Yp(e,n.slots={})}else n.slots={},e&&Kp(n,e);Sa(n.slots,Ja,1)},n_=(n,e,t)=>{const{vnode:i,slots:s}=n;let r=!0,o=Et;if(i.shapeFlag&32){const a=e._;a?t&&a===1?r=!1:(kt(s,e),!t&&a===1&&delete s._):(r=!e.$stable,Yp(e,s)),o=e}else e&&(Kp(n,e),o={default:1});if(r)for(const a in s)!qp(a)&&o[a]==null&&delete s[a]};function yc(n,e,t,i,s=!1){if(Xe(n)){n.forEach((f,p)=>yc(f,e&&(Xe(e)?e[p]:e),t,i,s));return}if(to(i)&&!s)return;const r=i.shapeFlag&4?Qa(i.component)||i.component.proxy:i.el,o=s?null:r,{i:a,r:l}=n,c=e&&e.r,d=a.refs===Et?a.refs={}:a.refs,u=a.setupState;if(c!=null&&c!==l&&(Ot(c)?(d[c]=null,ut(u,c)&&(u[c]=null)):Zt(c)&&(c.value=null)),Qe(l))qi(l,a,12,[o,d]);else{const f=Ot(l),p=Zt(l);if(f||p){const _=()=>{if(n.f){const v=f?ut(u,l)?u[l]:d[l]:l.value;s?Xe(v)&&Sd(v,r):Xe(v)?v.includes(r)||v.push(r):f?(d[l]=[r],ut(u,l)&&(u[l]=d[l])):(l.value=[r],n.k&&(d[n.k]=l.value))}else f?(d[l]=o,ut(u,l)&&(u[l]=o)):p&&(l.value=o,n.k&&(d[n.k]=o))};o?(_.id=-1,dn(_,t)):_()}}}const dn=R1;function i_(n){return s_(n)}function s_(n,e){const t=cc();t.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:d,parentNode:u,nextSibling:f,setScopeId:p=ei,insertStaticContent:_}=n,v=(C,D,E,ie=null,te=null,se=null,le=!1,fe=null,re=!!D.dynamicChildren)=>{if(C===D)return;C&&!Ss(C,D)&&(ie=F(C),He(C,te,se,!0),C=null),D.patchFlag===-2&&(re=!1,D.dynamicChildren=null);const{type:T,ref:S,shapeFlag:k}=D;switch(T){case Za:g(C,D,E,ie);break;case Rn:m(C,D,E,ie);break;case ua:C==null&&x(D,E,ie,le);break;case $e:O(C,D,E,ie,te,se,le,fe,re);break;default:k&1?L(C,D,E,ie,te,se,le,fe,re):k&6?U(C,D,E,ie,te,se,le,fe,re):(k&64||k&128)&&T.process(C,D,E,ie,te,se,le,fe,re,ce)}S!=null&&te&&yc(S,C&&C.ref,se,D||C,!D)},g=(C,D,E,ie)=>{if(C==null)i(D.el=a(D.children),E,ie);else{const te=D.el=C.el;D.children!==C.children&&c(te,D.children)}},m=(C,D,E,ie)=>{C==null?i(D.el=l(D.children||""),E,ie):D.el=C.el},x=(C,D,E,ie)=>{[C.el,C.anchor]=_(C.children,D,E,ie,C.el,C.anchor)},y=({el:C,anchor:D},E,ie)=>{let te;for(;C&&C!==D;)te=f(C),i(C,E,ie),C=te;i(D,E,ie)},b=({el:C,anchor:D})=>{let E;for(;C&&C!==D;)E=f(C),s(C),C=E;s(D)},L=(C,D,E,ie,te,se,le,fe,re)=>{le=le||D.type==="svg",C==null?P(D,E,ie,te,se,le,fe,re):w(C,D,te,se,le,fe,re)},P=(C,D,E,ie,te,se,le,fe)=>{let re,T;const{type:S,props:k,shapeFlag:$,transition:Z,dirs:q}=C;if(re=C.el=o(C.type,se,k&&k.is,k),$&8?d(re,C.children):$&16&&N(C.children,re,null,ie,te,se&&S!=="foreignObject",le,fe),q&&ls(C,null,ie,"created"),I(re,C,C.scopeId,le,ie),k){for(const pe in k)pe!=="value"&&!ca(pe)&&r(re,pe,null,k[pe],se,C.children,ie,te,we);"value"in k&&r(re,"value",null,k.value),(T=k.onVnodeBeforeMount)&&qn(T,ie,C)}q&&ls(C,null,ie,"beforeMount");const Se=r_(te,Z);Se&&Z.beforeEnter(re),i(re,D,E),((T=k&&k.onVnodeMounted)||Se||q)&&dn(()=>{T&&qn(T,ie,C),Se&&Z.enter(re),q&&ls(C,null,ie,"mounted")},te)},I=(C,D,E,ie,te)=>{if(E&&p(C,E),ie)for(let se=0;se<ie.length;se++)p(C,ie[se]);if(te){let se=te.subTree;if(D===se){const le=te.vnode;I(C,le,le.scopeId,le.slotScopeIds,te.parent)}}},N=(C,D,E,ie,te,se,le,fe,re=0)=>{for(let T=re;T<C.length;T++){const S=C[T]=fe?zi(C[T]):Yn(C[T]);v(null,S,D,E,ie,te,se,le,fe)}},w=(C,D,E,ie,te,se,le)=>{const fe=D.el=C.el;let{patchFlag:re,dynamicChildren:T,dirs:S}=D;re|=C.patchFlag&16;const k=C.props||Et,$=D.props||Et;let Z;E&&cs(E,!1),(Z=$.onVnodeBeforeUpdate)&&qn(Z,E,D,C),S&&ls(D,C,E,"beforeUpdate"),E&&cs(E,!0);const q=te&&D.type!=="foreignObject";if(T?M(C.dynamicChildren,T,fe,E,ie,q,se):le||W(C,D,fe,null,E,ie,q,se,!1),re>0){if(re&16)R(fe,D,k,$,E,ie,te);else if(re&2&&k.class!==$.class&&r(fe,"class",null,$.class,te),re&4&&r(fe,"style",k.style,$.style,te),re&8){const Se=D.dynamicProps;for(let pe=0;pe<Se.length;pe++){const xe=Se[pe],je=k[xe],ge=$[xe];(ge!==je||xe==="value")&&r(fe,xe,je,ge,te,C.children,E,ie,we)}}re&1&&C.children!==D.children&&d(fe,D.children)}else!le&&T==null&&R(fe,D,k,$,E,ie,te);((Z=$.onVnodeUpdated)||S)&&dn(()=>{Z&&qn(Z,E,D,C),S&&ls(D,C,E,"updated")},ie)},M=(C,D,E,ie,te,se,le)=>{for(let fe=0;fe<D.length;fe++){const re=C[fe],T=D[fe],S=re.el&&(re.type===$e||!Ss(re,T)||re.shapeFlag&70)?u(re.el):E;v(re,T,S,null,ie,te,se,le,!0)}},R=(C,D,E,ie,te,se,le)=>{if(E!==ie){if(E!==Et)for(const fe in E)!ca(fe)&&!(fe in ie)&&r(C,fe,E[fe],null,le,D.children,te,se,we);for(const fe in ie){if(ca(fe))continue;const re=ie[fe],T=E[fe];re!==T&&fe!=="value"&&r(C,fe,T,re,le,D.children,te,se,we)}"value"in ie&&r(C,"value",E.value,ie.value)}},O=(C,D,E,ie,te,se,le,fe,re)=>{const T=D.el=C?C.el:a(""),S=D.anchor=C?C.anchor:a("");let{patchFlag:k,dynamicChildren:$,slotScopeIds:Z}=D;Z&&(fe=fe?fe.concat(Z):Z),C==null?(i(T,E,ie),i(S,E,ie),N(D.children,E,S,te,se,le,fe,re)):k>0&&k&64&&$&&C.dynamicChildren?(M(C.dynamicChildren,$,E,te,se,le,fe),(D.key!=null||te&&D===te.subTree)&&Zp(C,D,!0)):W(C,D,E,S,te,se,le,fe,re)},U=(C,D,E,ie,te,se,le,fe,re)=>{D.slotScopeIds=fe,C==null?D.shapeFlag&512?te.ctx.activate(D,E,ie,le,re):X(D,E,ie,te,se,le,re):ee(C,D,re)},X=(C,D,E,ie,te,se,le)=>{const fe=C.component=p_(C,ie,te);if(Ya(C)&&(fe.ctx.renderer=ce),m_(fe),fe.asyncDep){if(te&&te.registerDep(fe,Y),!C.el){const re=fe.subTree=j(Rn);m(null,re,D,E)}return}Y(fe,C,D,E,te,se,le)},ee=(C,D,E)=>{const ie=D.component=C.component;if(E1(C,D,E))if(ie.asyncDep&&!ie.asyncResolved){oe(ie,D,E);return}else ie.next=D,v1(ie.update),ie.update();else D.el=C.el,ie.vnode=D},Y=(C,D,E,ie,te,se,le)=>{const fe=()=>{if(C.isMounted){let{next:S,bu:k,u:$,parent:Z,vnode:q}=C,Se=S,pe;cs(C,!1),S?(S.el=q.el,oe(C,S,le)):S=q,k&&cl(k),(pe=S.props&&S.props.onVnodeBeforeUpdate)&&qn(pe,Z,S,q),cs(C,!0);const xe=dl(C),je=C.subTree;C.subTree=xe,v(je,xe,u(je.el),F(je),C,te,se),S.el=xe.el,Se===null&&T1(C,xe.el),$&&dn($,te),(pe=S.props&&S.props.onVnodeUpdated)&&dn(()=>qn(pe,Z,S,q),te)}else{let S;const{el:k,props:$}=D,{bm:Z,m:q,parent:Se}=C,pe=to(D);if(cs(C,!1),Z&&cl(Z),!pe&&(S=$&&$.onVnodeBeforeMount)&&qn(S,Se,D),cs(C,!0),k&&ze){const xe=()=>{C.subTree=dl(C),ze(k,C.subTree,C,te,null)};pe?D.type.__asyncLoader().then(()=>!C.isUnmounted&&xe()):xe()}else{const xe=C.subTree=dl(C);v(null,xe,E,ie,C,te,se),D.el=xe.el}if(q&&dn(q,te),!pe&&(S=$&&$.onVnodeMounted)){const xe=D;dn(()=>qn(S,Se,xe),te)}(D.shapeFlag&256||Se&&to(Se.vnode)&&Se.vnode.shapeFlag&256)&&C.a&&dn(C.a,te),C.isMounted=!0,D=E=ie=null}},re=C.effect=new Td(fe,()=>Pd(T),C.scope),T=C.update=()=>re.run();T.id=C.uid,cs(C,!0),T()},oe=(C,D,E)=>{D.component=C;const ie=C.vnode.props;C.vnode=D,C.next=null,Q1(C,D.props,ie,E),n_(C,D.children,E),Rr(),Nu(),Lr()},W=(C,D,E,ie,te,se,le,fe,re=!1)=>{const T=C&&C.children,S=C?C.shapeFlag:0,k=D.children,{patchFlag:$,shapeFlag:Z}=D;if($>0){if($&128){Te(T,k,E,ie,te,se,le,fe,re);return}else if($&256){be(T,k,E,ie,te,se,le,fe,re);return}}Z&8?(S&16&&we(T,te,se),k!==T&&d(E,k)):S&16?Z&16?Te(T,k,E,ie,te,se,le,fe,re):we(T,te,se,!0):(S&8&&d(E,""),Z&16&&N(k,E,ie,te,se,le,fe,re))},be=(C,D,E,ie,te,se,le,fe,re)=>{C=C||rr,D=D||rr;const T=C.length,S=D.length,k=Math.min(T,S);let $;for($=0;$<k;$++){const Z=D[$]=re?zi(D[$]):Yn(D[$]);v(C[$],Z,E,null,te,se,le,fe,re)}T>S?we(C,te,se,!0,!1,k):N(D,E,ie,te,se,le,fe,re,k)},Te=(C,D,E,ie,te,se,le,fe,re)=>{let T=0;const S=D.length;let k=C.length-1,$=S-1;for(;T<=k&&T<=$;){const Z=C[T],q=D[T]=re?zi(D[T]):Yn(D[T]);if(Ss(Z,q))v(Z,q,E,null,te,se,le,fe,re);else break;T++}for(;T<=k&&T<=$;){const Z=C[k],q=D[$]=re?zi(D[$]):Yn(D[$]);if(Ss(Z,q))v(Z,q,E,null,te,se,le,fe,re);else break;k--,$--}if(T>k){if(T<=$){const Z=$+1,q=Z<S?D[Z].el:ie;for(;T<=$;)v(null,D[T]=re?zi(D[T]):Yn(D[T]),E,q,te,se,le,fe,re),T++}}else if(T>$)for(;T<=k;)He(C[T],te,se,!0),T++;else{const Z=T,q=T,Se=new Map;for(T=q;T<=$;T++){const Ee=D[T]=re?zi(D[T]):Yn(D[T]);Ee.key!=null&&Se.set(Ee.key,T)}let pe,xe=0;const je=$-q+1;let ge=!1,De=0;const Be=new Array(je);for(T=0;T<je;T++)Be[T]=0;for(T=Z;T<=k;T++){const Ee=C[T];if(xe>=je){He(Ee,te,se,!0);continue}let qe;if(Ee.key!=null)qe=Se.get(Ee.key);else for(pe=q;pe<=$;pe++)if(Be[pe-q]===0&&Ss(Ee,D[pe])){qe=pe;break}qe===void 0?He(Ee,te,se,!0):(Be[qe-q]=T+1,qe>=De?De=qe:ge=!0,v(Ee,D[qe],E,null,te,se,le,fe,re),xe++)}const We=ge?o_(Be):rr;for(pe=We.length-1,T=je-1;T>=0;T--){const Ee=q+T,qe=D[Ee],Je=Ee+1<S?D[Ee+1].el:ie;Be[T]===0?v(null,qe,E,Je,te,se,le,fe,re):ge&&(pe<0||T!==We[pe]?Ie(qe,E,Je,2):pe--)}}},Ie=(C,D,E,ie,te=null)=>{const{el:se,type:le,transition:fe,children:re,shapeFlag:T}=C;if(T&6){Ie(C.component.subTree,D,E,ie);return}if(T&128){C.suspense.move(D,E,ie);return}if(T&64){le.move(C,D,E,ce);return}if(le===$e){i(se,D,E);for(let k=0;k<re.length;k++)Ie(re[k],D,E,ie);i(C.anchor,D,E);return}if(le===ua){y(C,D,E);return}if(ie!==2&&T&1&&fe)if(ie===0)fe.beforeEnter(se),i(se,D,E),dn(()=>fe.enter(se),te);else{const{leave:k,delayLeave:$,afterLeave:Z}=fe,q=()=>i(se,D,E),Se=()=>{k(se,()=>{q(),Z&&Z()})};$?$(se,q,Se):Se()}else i(se,D,E)},He=(C,D,E,ie=!1,te=!1)=>{const{type:se,props:le,ref:fe,children:re,dynamicChildren:T,shapeFlag:S,patchFlag:k,dirs:$}=C;if(fe!=null&&yc(fe,null,E,C,!0),S&256){D.ctx.deactivate(C);return}const Z=S&1&&$,q=!to(C);let Se;if(q&&(Se=le&&le.onVnodeBeforeUnmount)&&qn(Se,D,C),S&6)ye(C.component,E,ie);else{if(S&128){C.suspense.unmount(E,ie);return}Z&&ls(C,null,D,"beforeUnmount"),S&64?C.type.remove(C,D,E,te,ce,ie):T&&(se!==$e||k>0&&k&64)?we(T,D,E,!1,!0):(se===$e&&k&384||!te&&S&16)&&we(re,D,E),ie&&at(C)}(q&&(Se=le&&le.onVnodeUnmounted)||Z)&&dn(()=>{Se&&qn(Se,D,C),Z&&ls(C,null,D,"unmounted")},E)},at=C=>{const{type:D,el:E,anchor:ie,transition:te}=C;if(D===$e){de(E,ie);return}if(D===ua){b(C);return}const se=()=>{s(E),te&&!te.persisted&&te.afterLeave&&te.afterLeave()};if(C.shapeFlag&1&&te&&!te.persisted){const{leave:le,delayLeave:fe}=te,re=()=>le(E,se);fe?fe(C.el,se,re):re()}else se()},de=(C,D)=>{let E;for(;C!==D;)E=f(C),s(C),C=E;s(D)},ye=(C,D,E)=>{const{bum:ie,scope:te,update:se,subTree:le,um:fe}=C;ie&&cl(ie),te.stop(),se&&(se.active=!1,He(le,C,D,E)),fe&&dn(fe,D),dn(()=>{C.isUnmounted=!0},D),D&&D.pendingBranch&&!D.isUnmounted&&C.asyncDep&&!C.asyncResolved&&C.suspenseId===D.pendingId&&(D.deps--,D.deps===0&&D.resolve())},we=(C,D,E,ie=!1,te=!1,se=0)=>{for(let le=se;le<C.length;le++)He(C[le],D,E,ie,te)},F=C=>C.shapeFlag&6?F(C.component.subTree):C.shapeFlag&128?C.suspense.next():f(C.anchor||C.el),ue=(C,D,E)=>{C==null?D._vnode&&He(D._vnode,null,null,!0):v(D._vnode||null,C,D,null,null,null,E),Nu(),Lp(),D._vnode=C},ce={p:v,um:He,m:Ie,r:at,mt:X,mc:N,pc:W,pbc:M,n:F,o:n};let me,ze;return e&&([me,ze]=e(ce)),{render:ue,hydrate:me,createApp:Z1(ue,me)}}function cs({effect:n,update:e},t){n.allowRecurse=e.allowRecurse=t}function r_(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function Zp(n,e,t=!1){const i=n.children,s=e.children;if(Xe(i)&&Xe(s))for(let r=0;r<i.length;r++){const o=i[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=zi(s[r]),a.el=o.el),t||Zp(o,a)),a.type===Za&&(a.el=o.el)}}function o_(n){const e=n.slice(),t=[0];let i,s,r,o,a;const l=n.length;for(i=0;i<l;i++){const c=n[i];if(c!==0){if(s=t[t.length-1],n[s]<c){e[i]=s,t.push(i);continue}for(r=0,o=t.length-1;r<o;)a=r+o>>1,n[t[a]]<c?r=a+1:o=a;c<n[t[r]]&&(r>0&&(e[i]=t[r-1]),t[r]=i)}}for(r=t.length,o=t[r-1];r-- >0;)t[r]=o,o=e[o];return t}const a_=n=>n.__isTeleport,$e=Symbol.for("v-fgt"),Za=Symbol.for("v-txt"),Rn=Symbol.for("v-cmt"),ua=Symbol.for("v-stc"),io=[];let Gn=null;function J(n=!1){io.push(Gn=n?null:[])}function l_(){io.pop(),Gn=io[io.length-1]||null}let ho=1;function Xu(n){ho+=n}function Jp(n){return n.dynamicChildren=ho>0?Gn||rr:null,l_(),ho>0&&Gn&&Gn.push(n),n}function ne(n,e,t,i,s,r){return Jp(h(n,e,t,i,s,r,!0))}function Qi(n,e,t,i,s){return Jp(j(n,e,t,i,s,!0))}function Aa(n){return n?n.__v_isVNode===!0:!1}function Ss(n,e){return n.type===e.type&&n.key===e.key}const Ja="__vInternal",Qp=({key:n})=>n??null,fa=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Ot(n)||Zt(n)||Qe(n)?{i:$t,r:n,k:e,f:!!t}:n:null);function h(n,e=null,t=null,i=0,s=null,r=n===$e?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&Qp(e),ref:e&&fa(e),scopeId:Dp,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:$t};return a?(kd(l,t),r&128&&n.normalize(l)):t&&(l.shapeFlag|=Ot(t)?8:16),ho>0&&!o&&Gn&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Gn.push(l),l}const j=c_;function c_(n,e=null,t=null,i=0,s=null,r=!1){if((!n||n===A1)&&(n=Rn),Aa(n)){const a=es(n,e,!0);return t&&kd(a,t),ho>0&&!r&&Gn&&(a.shapeFlag&6?Gn[Gn.indexOf(n)]=a:Gn.push(a)),a.patchFlag|=-2,a}if(x_(n)&&(n=n.__vccOpts),e){e=d_(e);let{class:a,style:l}=e;a&&!Ot(a)&&(e.class=Dt(a)),Tt(l)&&(yp(l)&&!Xe(l)&&(l=kt({},l)),e.style=fn(l))}const o=Ot(n)?1:C1(n)?128:a_(n)?64:Tt(n)?4:Qe(n)?2:0;return h(n,e,t,i,s,o,r,!0)}function d_(n){return n?yp(n)||Ja in n?kt({},n):n:null}function es(n,e,t=!1){const{props:i,ref:s,patchFlag:r,children:o}=n,a=e?u_(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:a,key:a&&Qp(a),ref:e&&e.ref?t&&s?Xe(s)?s.concat(fa(e)):[s,fa(e)]:fa(e):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:o,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==$e?r===-1?16:r|16:r,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&es(n.ssContent),ssFallback:n.ssFallback&&es(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce}}function _e(n=" ",e=0){return j(Za,null,n,e)}function ct(n,e){const t=j(ua,null,n);return t.staticCount=e,t}function Ei(n="",e=!1){return e?(J(),Qi(Rn,null,n)):j(Rn,null,n)}function Yn(n){return n==null||typeof n=="boolean"?j(Rn):Xe(n)?j($e,null,n.slice()):typeof n=="object"?zi(n):j(Za,null,String(n))}function zi(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:es(n)}function kd(n,e){let t=0;const{shapeFlag:i}=n;if(e==null)e=null;else if(Xe(e))t=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),kd(n,s()),s._c&&(s._d=!0));return}else{t=32;const s=e._;!s&&!(Ja in e)?e._ctx=$t:s===3&&$t&&($t.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Qe(e)?(e={default:e,_ctx:$t},t=32):(e=String(e),i&64?(t=16,e=[_e(e)]):t=8);n.children=e,n.shapeFlag|=t}function u_(...n){const e={};for(let t=0;t<n.length;t++){const i=n[t];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=Dt([e.class,i.class]));else if(s==="style")e.style=fn([e.style,i.style]);else if(za(s)){const r=e[s],o=i[s];o&&r!==o&&!(Xe(r)&&r.includes(o))&&(e[s]=r?[].concat(r,o):o)}else s!==""&&(e[s]=i[s])}return e}function qn(n,e,t,i=null){Cn(n,e,7,[t,i])}const f_=Wp();let h_=0;function p_(n,e,t){const i=n.type,s=(e?e.appContext:n.appContext)||f_,r={uid:h_++,vnode:n,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Vg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:jp(i,s),emitsOptions:Ip(i,s),emit:null,emitted:null,propsDefaults:Et,inheritAttrs:i.inheritAttrs,ctx:Et,data:Et,props:Et,attrs:Et,slots:Et,refs:Et,setupState:Et,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=y1.bind(null,r),n.ce&&n.ce(r),r}let zt=null;const em=()=>zt||$t;let Fd,Bs,ju="__VUE_INSTANCE_SETTERS__";(Bs=cc()[ju])||(Bs=cc()[ju]=[]),Bs.push(n=>zt=n),Fd=n=>{Bs.length>1?Bs.forEach(e=>e(n)):Bs[0](n)};const mr=n=>{Fd(n),n.scope.on()},Ps=()=>{zt&&zt.scope.off(),Fd(null)};function tm(n){return n.vnode.shapeFlag&4}let po=!1;function m_(n,e=!1){po=e;const{props:t,children:i}=n.vnode,s=tm(n);J1(n,t,s,e),t_(n,i);const r=s?g_(n,e):void 0;return po=!1,r}function g_(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=Sp(new Proxy(n.ctx,V1));const{setup:i}=t;if(i){const s=n.setupContext=i.length>1?im(n):null;mr(n),Rr();const r=qi(i,n,0,[n.props,s]);if(Lr(),Ps(),sp(r)){if(r.then(Ps,Ps),e)return r.then(o=>{qu(n,o,e)}).catch(o=>{ja(o,n,0)});n.asyncDep=r}else qu(n,r,e)}else nm(n,e)}function qu(n,e,t){Qe(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Tt(e)&&(n.setupState=wp(e)),nm(n,t)}let Yu;function nm(n,e,t){const i=n.type;if(!n.render){if(!e&&Yu&&!i.render){const s=i.template||Ud(n).template;if(s){const{isCustomElement:r,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:l}=i,c=kt(kt({isCustomElement:r,delimiters:a},o),l);i.render=Yu(s,c)}}n.render=i.render||ei}{mr(n),Rr();try{W1(n)}finally{Lr(),Ps()}}}function __(n){return n.attrsProxy||(n.attrsProxy=new Proxy(n.attrs,{get(e,t){return hn(n,"get","$attrs"),e[t]}}))}function im(n){const e=t=>{n.exposed=t||{}};return{get attrs(){return __(n)},slots:n.slots,emit:n.emit,expose:e}}function Qa(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(wp(Sp(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in no)return no[t](n)},has(e,t){return t in e||t in no}}))}function v_(n,e=!0){return Qe(n)?n.displayName||n.name:n.name||e&&n.__name}function x_(n){return Qe(n)&&"__vccOpts"in n}const an=(n,e)=>m1(n,e,po);function Bd(n,e,t){const i=arguments.length;return i===2?Tt(e)&&!Xe(e)?Aa(e)?j(n,null,[e]):j(n,e):j(n,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&Aa(t)&&(t=[t]),j(n,e,t))}const b_=Symbol.for("v-scx"),y_=()=>yi(b_),S_="3.3.8",M_="http://www.w3.org/2000/svg",Ms=typeof document<"u"?document:null,Ku=Ms&&Ms.createElement("template"),E_={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,i)=>{const s=e?Ms.createElementNS(M_,n):Ms.createElement(n,t?{is:t}:void 0);return n==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:n=>Ms.createTextNode(n),createComment:n=>Ms.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Ms.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,i,s,r){const o=t?t.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),t),!(s===r||!(s=s.nextSibling)););else{Ku.innerHTML=i?`<svg>${n}</svg>`:n;const a=Ku.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Li="transition",Fr="animation",mo=Symbol("_vtc"),Hd=(n,{slots:e})=>Bd(D1,T_(n),e);Hd.displayName="Transition";const sm={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Hd.props=kt({},Fp,sm);const ds=(n,e=[])=>{Xe(n)?n.forEach(t=>t(...e)):n&&n(...e)},Zu=n=>n?Xe(n)?n.some(e=>e.length>1):n.length>1:!1;function T_(n){const e={};for(const O in n)O in sm||(e[O]=n[O]);if(n.css===!1)return e;const{name:t="v",type:i,duration:s,enterFromClass:r=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:l=r,appearActiveClass:c=o,appearToClass:d=a,leaveFromClass:u=`${t}-leave-from`,leaveActiveClass:f=`${t}-leave-active`,leaveToClass:p=`${t}-leave-to`}=n,_=w_(s),v=_&&_[0],g=_&&_[1],{onBeforeEnter:m,onEnter:x,onEnterCancelled:y,onLeave:b,onLeaveCancelled:L,onBeforeAppear:P=m,onAppear:I=x,onAppearCancelled:N=y}=e,w=(O,U,X)=>{us(O,U?d:a),us(O,U?c:o),X&&X()},M=(O,U)=>{O._isLeaving=!1,us(O,u),us(O,p),us(O,f),U&&U()},R=O=>(U,X)=>{const ee=O?I:x,Y=()=>w(U,O,X);ds(ee,[U,Y]),Ju(()=>{us(U,O?l:r),Pi(U,O?d:a),Zu(ee)||Qu(U,i,v,Y)})};return kt(e,{onBeforeEnter(O){ds(m,[O]),Pi(O,r),Pi(O,o)},onBeforeAppear(O){ds(P,[O]),Pi(O,l),Pi(O,c)},onEnter:R(!1),onAppear:R(!0),onLeave(O,U){O._isLeaving=!0;const X=()=>M(O,U);Pi(O,u),R_(),Pi(O,f),Ju(()=>{O._isLeaving&&(us(O,u),Pi(O,p),Zu(b)||Qu(O,i,g,X))}),ds(b,[O,X])},onEnterCancelled(O){w(O,!1),ds(y,[O])},onAppearCancelled(O){w(O,!0),ds(N,[O])},onLeaveCancelled(O){M(O),ds(L,[O])}})}function w_(n){if(n==null)return null;if(Tt(n))return[hl(n.enter),hl(n.leave)];{const e=hl(n);return[e,e]}}function hl(n){return Ug(n)}function Pi(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[mo]||(n[mo]=new Set)).add(e)}function us(n,e){e.split(/\s+/).forEach(i=>i&&n.classList.remove(i));const t=n[mo];t&&(t.delete(e),t.size||(n[mo]=void 0))}function Ju(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let A_=0;function Qu(n,e,t,i){const s=n._endId=++A_,r=()=>{s===n._endId&&i()};if(t)return setTimeout(r,t);const{type:o,timeout:a,propCount:l}=C_(n,e);if(!o)return i();const c=o+"end";let d=0;const u=()=>{n.removeEventListener(c,f),r()},f=p=>{p.target===n&&++d>=l&&u()};setTimeout(()=>{d<l&&u()},a+1),n.addEventListener(c,f)}function C_(n,e){const t=window.getComputedStyle(n),i=_=>(t[_]||"").split(", "),s=i(`${Li}Delay`),r=i(`${Li}Duration`),o=ef(s,r),a=i(`${Fr}Delay`),l=i(`${Fr}Duration`),c=ef(a,l);let d=null,u=0,f=0;e===Li?o>0&&(d=Li,u=o,f=r.length):e===Fr?c>0&&(d=Fr,u=c,f=l.length):(u=Math.max(o,c),d=u>0?o>c?Li:Fr:null,f=d?d===Li?r.length:l.length:0);const p=d===Li&&/\b(transform|all)(,|$)/.test(i(`${Li}Property`).toString());return{type:d,timeout:u,propCount:f,hasTransform:p}}function ef(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,i)=>tf(t)+tf(n[i])))}function tf(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function R_(){return document.body.offsetHeight}function L_(n,e,t){const i=n[mo];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const zd=Symbol("_vod"),P_={beforeMount(n,{value:e},{transition:t}){n[zd]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):Br(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:i}){!e!=!t&&(i?e?(i.beforeEnter(n),Br(n,!0),i.enter(n)):i.leave(n,()=>{Br(n,!1)}):Br(n,e))},beforeUnmount(n,{value:e}){Br(n,e)}};function Br(n,e){n.style.display=e?n[zd]:"none"}function I_(n,e,t){const i=n.style,s=Ot(t);if(t&&!s){if(e&&!Ot(e))for(const r in e)t[r]==null&&Sc(i,r,"");for(const r in t)Sc(i,r,t[r])}else{const r=i.display;s?e!==t&&(i.cssText=t):e&&n.removeAttribute("style"),zd in n&&(i.display=r)}}const nf=/\s*!important$/;function Sc(n,e,t){if(Xe(t))t.forEach(i=>Sc(n,e,i));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const i=D_(n,e);nf.test(t)?n.setProperty(Us(i),t.replace(nf,""),"important"):n[i]=t}}const sf=["Webkit","Moz","ms"],pl={};function D_(n,e){const t=pl[e];if(t)return t;let i=ni(e);if(i!=="filter"&&i in n)return pl[e]=i;i=Wa(i);for(let s=0;s<sf.length;s++){const r=sf[s]+i;if(r in n)return pl[e]=r}return e}const rf="http://www.w3.org/1999/xlink";function N_(n,e,t,i,s){if(i&&e.startsWith("xlink:"))t==null?n.removeAttributeNS(rf,e.slice(6,e.length)):n.setAttributeNS(rf,e,t);else{const r=zg(e);t==null||r&&!ap(t)?n.removeAttribute(e):n.setAttribute(e,r?"":t)}}function U_(n,e,t,i,s,r,o){if(e==="innerHTML"||e==="textContent"){i&&o(i,s,r),n[e]=t??"";return}const a=n.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){n._value=t;const c=a==="OPTION"?n.getAttribute("value"):n.value,d=t??"";c!==d&&(n.value=d),t==null&&n.removeAttribute(e);return}let l=!1;if(t===""||t==null){const c=typeof n[e];c==="boolean"?t=ap(t):t==null&&c==="string"?(t="",l=!0):c==="number"&&(t=0,l=!0)}try{n[e]=t}catch{}l&&n.removeAttribute(e)}function O_(n,e,t,i){n.addEventListener(e,t,i)}function k_(n,e,t,i){n.removeEventListener(e,t,i)}const of=Symbol("_vei");function F_(n,e,t,i,s=null){const r=n[of]||(n[of]={}),o=r[e];if(i&&o)o.value=i;else{const[a,l]=B_(e);if(i){const c=r[e]=V_(i,s);O_(n,a,c,l)}else o&&(k_(n,a,o,l),r[e]=void 0)}}const af=/(?:Once|Passive|Capture)$/;function B_(n){let e;if(af.test(n)){e={};let i;for(;i=n.match(af);)n=n.slice(0,n.length-i[0].length),e[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Us(n.slice(2)),e]}let ml=0;const H_=Promise.resolve(),z_=()=>ml||(H_.then(()=>ml=0),ml=Date.now());function V_(n,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;Cn(G_(i,t.value),e,5,[i])};return t.value=n,t.attached=z_(),t}function G_(n,e){if(Xe(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const lf=/^on[a-z]/,$_=(n,e,t,i,s=!1,r,o,a,l)=>{e==="class"?L_(n,i,s):e==="style"?I_(n,t,i):za(e)?yd(e)||F_(n,e,t,i,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):W_(n,e,i,s))?U_(n,e,i,r,o,a,l):(e==="true-value"?n._trueValue=i:e==="false-value"&&(n._falseValue=i),N_(n,e,i,s))};function W_(n,e,t,i){return i?!!(e==="innerHTML"||e==="textContent"||e in n&&lf.test(e)&&Qe(t)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA"||lf.test(e)&&Ot(t)?!1:e in n}const X_=["ctrl","shift","alt","meta"],j_={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>X_.some(t=>n[`${t}Key`]&&!e.includes(t))},Jt=(n,e)=>(t,...i)=>{for(let s=0;s<e.length;s++){const r=j_[e[s]];if(r&&r(t,e))return}return n(t,...i)},q_={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},rm=(n,e)=>t=>{if(!("key"in t))return;const i=Us(t.key);if(e.some(s=>s===i||q_[s]===i))return n(t)},Y_=kt({patchProp:$_},E_);let cf;function K_(){return cf||(cf=i_(Y_))}const Z_=(...n)=>{const e=K_().createApp(...n),{mount:t}=e;return e.mount=i=>{const s=J_(i);if(!s)return;const r=e._component;!Qe(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.innerHTML="";const o=t(s,!1,s instanceof SVGElement);return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function J_(n){return Ot(n)?document.querySelector(n):n}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const nr=typeof window<"u";function Q_(n){return n.__esModule||n[Symbol.toStringTag]==="Module"}const xt=Object.assign;function gl(n,e){const t={};for(const i in e){const s=e[i];t[i]=Xn(s)?s.map(n):n(s)}return t}const so=()=>{},Xn=Array.isArray,e0=/\/$/,t0=n=>n.replace(e0,"");function _l(n,e,t="/"){let i,s={},r="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=e.slice(0,l),r=e.slice(l+1,a>-1?a:e.length),s=n(r)),a>-1&&(i=i||e.slice(0,a),o=e.slice(a,e.length)),i=r0(i??e,t),{fullPath:i+(r&&"?")+r+o,path:i,query:s,hash:o}}function n0(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function df(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function i0(n,e,t){const i=e.matched.length-1,s=t.matched.length-1;return i>-1&&i===s&&gr(e.matched[i],t.matched[s])&&om(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function gr(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function om(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!s0(n[t],e[t]))return!1;return!0}function s0(n,e){return Xn(n)?uf(n,e):Xn(e)?uf(e,n):n===e}function uf(n,e){return Xn(e)?n.length===e.length&&n.every((t,i)=>t===e[i]):n.length===1&&n[0]===e}function r0(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),i=n.split("/"),s=i[i.length-1];(s===".."||s===".")&&i.push("");let r=t.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")r>1&&r--;else break;return t.slice(0,r).join("/")+"/"+i.slice(o-(o===i.length?1:0)).join("/")}var go;(function(n){n.pop="pop",n.push="push"})(go||(go={}));var ro;(function(n){n.back="back",n.forward="forward",n.unknown=""})(ro||(ro={}));function o0(n){if(!n)if(nr){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),t0(n)}const a0=/^[^#]+#/;function l0(n,e){return n.replace(a0,"#")+e}function c0(n,e){const t=document.documentElement.getBoundingClientRect(),i=n.getBoundingClientRect();return{behavior:e.behavior,left:i.left-t.left-(e.left||0),top:i.top-t.top-(e.top||0)}}const el=()=>({left:window.pageXOffset,top:window.pageYOffset});function d0(n){let e;if("el"in n){const t=n.el,i=typeof t=="string"&&t.startsWith("#"),s=typeof t=="string"?i?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!s)return;e=c0(s,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function ff(n,e){return(history.state?history.state.position-e:-1)+n}const Mc=new Map;function u0(n,e){Mc.set(n,e)}function f0(n){const e=Mc.get(n);return Mc.delete(n),e}let h0=()=>location.protocol+"//"+location.host;function am(n,e){const{pathname:t,search:i,hash:s}=e,r=n.indexOf("#");if(r>-1){let a=s.includes(n.slice(r))?n.slice(r).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),df(l,"")}return df(t,n)+i+s}function p0(n,e,t,i){let s=[],r=[],o=null;const a=({state:f})=>{const p=am(n,location),_=t.value,v=e.value;let g=0;if(f){if(t.value=p,e.value=f,o&&o===_){o=null;return}g=v?f.position-v.position:0}else i(p);s.forEach(m=>{m(t.value,_,{delta:g,type:go.pop,direction:g?g>0?ro.forward:ro.back:ro.unknown})})};function l(){o=t.value}function c(f){s.push(f);const p=()=>{const _=s.indexOf(f);_>-1&&s.splice(_,1)};return r.push(p),p}function d(){const{history:f}=window;f.state&&f.replaceState(xt({},f.state,{scroll:el()}),"")}function u(){for(const f of r)f();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:l,listen:c,destroy:u}}function hf(n,e,t,i=!1,s=!1){return{back:n,current:e,forward:t,replaced:i,position:window.history.length,scroll:s?el():null}}function m0(n){const{history:e,location:t}=window,i={value:am(n,t)},s={value:e.state};s.value||r(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(l,c,d){const u=n.indexOf("#"),f=u>-1?(t.host&&document.querySelector("base")?n:n.slice(u))+l:h0()+n+l;try{e[d?"replaceState":"pushState"](c,"",f),s.value=c}catch(p){console.error(p),t[d?"replace":"assign"](f)}}function o(l,c){const d=xt({},e.state,hf(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});r(l,d,!0),i.value=l}function a(l,c){const d=xt({},s.value,e.state,{forward:l,scroll:el()});r(d.current,d,!0);const u=xt({},hf(i.value,l,null),{position:d.position+1},c);r(l,u,!1),i.value=l}return{location:i,state:s,push:a,replace:o}}function g0(n){n=o0(n);const e=m0(n),t=p0(n,e.state,e.location,e.replace);function i(r,o=!0){o||t.pauseListeners(),history.go(r)}const s=xt({location:"",base:n,go:i,createHref:l0.bind(null,n)},e,t);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function _0(n){return typeof n=="string"||n&&typeof n=="object"}function lm(n){return typeof n=="string"||typeof n=="symbol"}const Ii={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},cm=Symbol("");var pf;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(pf||(pf={}));function _r(n,e){return xt(new Error,{type:n,[cm]:!0},e)}function li(n,e){return n instanceof Error&&cm in n&&(e==null||!!(n.type&e))}const mf="[^/]+?",v0={sensitive:!1,strict:!1,start:!0,end:!0},x0=/[.+*?^${}()[\]/\\]/g;function b0(n,e){const t=xt({},v0,e),i=[];let s=t.start?"^":"";const r=[];for(const c of n){const d=c.length?[]:[90];t.strict&&!c.length&&(s+="/");for(let u=0;u<c.length;u++){const f=c[u];let p=40+(t.sensitive?.25:0);if(f.type===0)u||(s+="/"),s+=f.value.replace(x0,"\\$&"),p+=40;else if(f.type===1){const{value:_,repeatable:v,optional:g,regexp:m}=f;r.push({name:_,repeatable:v,optional:g});const x=m||mf;if(x!==mf){p+=10;try{new RegExp(`(${x})`)}catch(b){throw new Error(`Invalid custom RegExp for param "${_}" (${x}): `+b.message)}}let y=v?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;u||(y=g&&c.length<2?`(?:/${y})`:"/"+y),g&&(y+="?"),s+=y,p+=20,g&&(p+=-8),v&&(p+=-20),x===".*"&&(p+=-50)}d.push(p)}i.push(d)}if(t.strict&&t.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}t.strict||(s+="/?"),t.end?s+="$":t.strict&&(s+="(?:/|$)");const o=new RegExp(s,t.sensitive?"":"i");function a(c){const d=c.match(o),u={};if(!d)return null;for(let f=1;f<d.length;f++){const p=d[f]||"",_=r[f-1];u[_.name]=p&&_.repeatable?p.split("/"):p}return u}function l(c){let d="",u=!1;for(const f of n){(!u||!d.endsWith("/"))&&(d+="/"),u=!1;for(const p of f)if(p.type===0)d+=p.value;else if(p.type===1){const{value:_,repeatable:v,optional:g}=p,m=_ in c?c[_]:"";if(Xn(m)&&!v)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const x=Xn(m)?m.join("/"):m;if(!x)if(g)f.length<2&&(d.endsWith("/")?d=d.slice(0,-1):u=!0);else throw new Error(`Missing required param "${_}"`);d+=x}}return d||"/"}return{re:o,score:i,keys:r,parse:a,stringify:l}}function y0(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=e[t]-n[t];if(i)return i;t++}return n.length<e.length?n.length===1&&n[0]===40+40?-1:1:n.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function S0(n,e){let t=0;const i=n.score,s=e.score;for(;t<i.length&&t<s.length;){const r=y0(i[t],s[t]);if(r)return r;t++}if(Math.abs(s.length-i.length)===1){if(gf(i))return 1;if(gf(s))return-1}return s.length-i.length}function gf(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const M0={type:0,value:""},E0=/[a-zA-Z0-9_]/;function T0(n){if(!n)return[[]];if(n==="/")return[[M0]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(p){throw new Error(`ERR (${t})/"${c}": ${p}`)}let t=0,i=t;const s=[];let r;function o(){r&&s.push(r),r=[]}let a=0,l,c="",d="";function u(){c&&(t===0?r.push({type:0,value:c}):t===1||t===2||t===3?(r.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&t!==2){i=t,t=4;continue}switch(t){case 0:l==="/"?(c&&u(),o()):l===":"?(u(),t=1):f();break;case 4:f(),t=i;break;case 1:l==="("?t=2:E0.test(l)?f():(u(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:t=3:d+=l;break;case 3:u(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,d="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${c}"`),u(),o(),s}function w0(n,e,t){const i=b0(T0(n.path),t),s=xt(i,{record:n,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function A0(n,e){const t=[],i=new Map;e=xf({strict:!1,end:!0,sensitive:!1},e);function s(d){return i.get(d)}function r(d,u,f){const p=!f,_=C0(d);_.aliasOf=f&&f.record;const v=xf(e,d),g=[_];if("alias"in d){const y=typeof d.alias=="string"?[d.alias]:d.alias;for(const b of y)g.push(xt({},_,{components:f?f.record.components:_.components,path:b,aliasOf:f?f.record:_}))}let m,x;for(const y of g){const{path:b}=y;if(u&&b[0]!=="/"){const L=u.record.path,P=L[L.length-1]==="/"?"":"/";y.path=u.record.path+(b&&P+b)}if(m=w0(y,u,v),f?f.alias.push(m):(x=x||m,x!==m&&x.alias.push(m),p&&d.name&&!vf(m)&&o(d.name)),_.children){const L=_.children;for(let P=0;P<L.length;P++)r(L[P],m,f&&f.children[P])}f=f||m,(m.record.components&&Object.keys(m.record.components).length||m.record.name||m.record.redirect)&&l(m)}return x?()=>{o(x)}:so}function o(d){if(lm(d)){const u=i.get(d);u&&(i.delete(d),t.splice(t.indexOf(u),1),u.children.forEach(o),u.alias.forEach(o))}else{const u=t.indexOf(d);u>-1&&(t.splice(u,1),d.record.name&&i.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return t}function l(d){let u=0;for(;u<t.length&&S0(d,t[u])>=0&&(d.record.path!==t[u].record.path||!dm(d,t[u]));)u++;t.splice(u,0,d),d.record.name&&!vf(d)&&i.set(d.record.name,d)}function c(d,u){let f,p={},_,v;if("name"in d&&d.name){if(f=i.get(d.name),!f)throw _r(1,{location:d});v=f.record.name,p=xt(_f(u.params,f.keys.filter(x=>!x.optional).map(x=>x.name)),d.params&&_f(d.params,f.keys.map(x=>x.name))),_=f.stringify(p)}else if("path"in d)_=d.path,f=t.find(x=>x.re.test(_)),f&&(p=f.parse(_),v=f.record.name);else{if(f=u.name?i.get(u.name):t.find(x=>x.re.test(u.path)),!f)throw _r(1,{location:d,currentLocation:u});v=f.record.name,p=xt({},u.params,d.params),_=f.stringify(p)}const g=[];let m=f;for(;m;)g.unshift(m.record),m=m.parent;return{name:v,path:_,params:p,matched:g,meta:L0(g)}}return n.forEach(d=>r(d)),{addRoute:r,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function _f(n,e){const t={};for(const i of e)i in n&&(t[i]=n[i]);return t}function C0(n){return{path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:void 0,beforeEnter:n.beforeEnter,props:R0(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}}}function R0(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const i in n.components)e[i]=typeof t=="object"?t[i]:t;return e}function vf(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function L0(n){return n.reduce((e,t)=>xt(e,t.meta),{})}function xf(n,e){const t={};for(const i in n)t[i]=i in e?e[i]:n[i];return t}function dm(n,e){return e.children.some(t=>t===n||dm(n,t))}const um=/#/g,P0=/&/g,I0=/\//g,D0=/=/g,N0=/\?/g,fm=/\+/g,U0=/%5B/g,O0=/%5D/g,hm=/%5E/g,k0=/%60/g,pm=/%7B/g,F0=/%7C/g,mm=/%7D/g,B0=/%20/g;function Vd(n){return encodeURI(""+n).replace(F0,"|").replace(U0,"[").replace(O0,"]")}function H0(n){return Vd(n).replace(pm,"{").replace(mm,"}").replace(hm,"^")}function Ec(n){return Vd(n).replace(fm,"%2B").replace(B0,"+").replace(um,"%23").replace(P0,"%26").replace(k0,"`").replace(pm,"{").replace(mm,"}").replace(hm,"^")}function z0(n){return Ec(n).replace(D0,"%3D")}function V0(n){return Vd(n).replace(um,"%23").replace(N0,"%3F")}function G0(n){return n==null?"":V0(n).replace(I0,"%2F")}function Ca(n){try{return decodeURIComponent(""+n)}catch{}return""+n}function $0(n){const e={};if(n===""||n==="?")return e;const i=(n[0]==="?"?n.slice(1):n).split("&");for(let s=0;s<i.length;++s){const r=i[s].replace(fm," "),o=r.indexOf("="),a=Ca(o<0?r:r.slice(0,o)),l=o<0?null:Ca(r.slice(o+1));if(a in e){let c=e[a];Xn(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function bf(n){let e="";for(let t in n){const i=n[t];if(t=z0(t),i==null){i!==void 0&&(e+=(e.length?"&":"")+t);continue}(Xn(i)?i.map(r=>r&&Ec(r)):[i&&Ec(i)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+t,r!=null&&(e+="="+r))})}return e}function W0(n){const e={};for(const t in n){const i=n[t];i!==void 0&&(e[t]=Xn(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return e}const X0=Symbol(""),yf=Symbol(""),Gd=Symbol(""),gm=Symbol(""),Tc=Symbol("");function Hr(){let n=[];function e(i){return n.push(i),()=>{const s=n.indexOf(i);s>-1&&n.splice(s,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function Vi(n,e,t,i,s){const r=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((o,a)=>{const l=u=>{u===!1?a(_r(4,{from:t,to:e})):u instanceof Error?a(u):_0(u)?a(_r(2,{from:e,to:u})):(r&&i.enterCallbacks[s]===r&&typeof u=="function"&&r.push(u),o())},c=n.call(i&&i.instances[s],e,t,l);let d=Promise.resolve(c);n.length<3&&(d=d.then(l)),d.catch(u=>a(u))})}function vl(n,e,t,i){const s=[];for(const r of n)for(const o in r.components){let a=r.components[o];if(!(e!=="beforeRouteEnter"&&!r.instances[o]))if(j0(a)){const c=(a.__vccOpts||a)[e];c&&s.push(Vi(c,t,i,r,o))}else{let l=a();s.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${r.path}"`));const d=Q_(c)?c.default:c;r.components[o]=d;const f=(d.__vccOpts||d)[e];return f&&Vi(f,t,i,r,o)()}))}}return s}function j0(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function Sf(n){const e=yi(Gd),t=yi(gm),i=an(()=>e.resolve(Fe(n.to))),s=an(()=>{const{matched:l}=i.value,{length:c}=l,d=l[c-1],u=t.matched;if(!d||!u.length)return-1;const f=u.findIndex(gr.bind(null,d));if(f>-1)return f;const p=Mf(l[c-2]);return c>1&&Mf(d)===p&&u[u.length-1].path!==p?u.findIndex(gr.bind(null,l[c-2])):f}),r=an(()=>s.value>-1&&Z0(t.params,i.value.params)),o=an(()=>s.value>-1&&s.value===t.matched.length-1&&om(t.params,i.value.params));function a(l={}){return K0(l)?e[Fe(n.replace)?"replace":"push"](Fe(n.to)).catch(so):Promise.resolve()}return{route:i,href:an(()=>i.value.href),isActive:r,isExactActive:o,navigate:a}}const q0=Ne({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Sf,setup(n,{slots:e}){const t=Ln(Sf(n)),{options:i}=yi(Gd),s=an(()=>({[Ef(n.activeClass,i.linkActiveClass,"router-link-active")]:t.isActive,[Ef(n.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const r=e.default&&e.default(t);return n.custom?r:Bd("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:s.value},r)}}}),Y0=q0;function K0(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function Z0(n,e){for(const t in e){const i=e[t],s=n[t];if(typeof i=="string"){if(i!==s)return!1}else if(!Xn(s)||s.length!==i.length||i.some((r,o)=>r!==s[o]))return!1}return!0}function Mf(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const Ef=(n,e,t)=>n??e??t,J0=Ne({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const i=yi(Tc),s=an(()=>n.route||i.value),r=yi(yf,0),o=an(()=>{let c=Fe(r);const{matched:d}=s.value;let u;for(;(u=d[c])&&!u.components;)c++;return c}),a=an(()=>s.value.matched[o.value]);da(yf,an(()=>o.value+1)),da(X0,a),da(Tc,s);const l=Ct();return cr(()=>[l.value,a.value,n.name],([c,d,u],[f,p,_])=>{d&&(d.instances[u]=c,p&&p!==d&&c&&c===f&&(d.leaveGuards.size||(d.leaveGuards=p.leaveGuards),d.updateGuards.size||(d.updateGuards=p.updateGuards))),c&&d&&(!p||!gr(d,p)||!f)&&(d.enterCallbacks[u]||[]).forEach(v=>v(c))},{flush:"post"}),()=>{const c=s.value,d=n.name,u=a.value,f=u&&u.components[d];if(!f)return Tf(t.default,{Component:f,route:c});const p=u.props[d],_=p?p===!0?c.params:typeof p=="function"?p(c):p:null,g=Bd(f,xt({},_,e,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(u.instances[d]=null)},ref:l}));return Tf(t.default,{Component:g,route:c})||g}}});function Tf(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const Q0=J0;function ev(n){const e=A0(n.routes,n),t=n.parseQuery||$0,i=n.stringifyQuery||bf,s=n.history,r=Hr(),o=Hr(),a=Hr(),l=u1(Ii);let c=Ii;nr&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=gl.bind(null,F=>""+F),u=gl.bind(null,G0),f=gl.bind(null,Ca);function p(F,ue){let ce,me;return lm(F)?(ce=e.getRecordMatcher(F),me=ue):me=F,e.addRoute(me,ce)}function _(F){const ue=e.getRecordMatcher(F);ue&&e.removeRoute(ue)}function v(){return e.getRoutes().map(F=>F.record)}function g(F){return!!e.getRecordMatcher(F)}function m(F,ue){if(ue=xt({},ue||l.value),typeof F=="string"){const E=_l(t,F,ue.path),ie=e.resolve({path:E.path},ue),te=s.createHref(E.fullPath);return xt(E,ie,{params:f(ie.params),hash:Ca(E.hash),redirectedFrom:void 0,href:te})}let ce;if("path"in F)ce=xt({},F,{path:_l(t,F.path,ue.path).path});else{const E=xt({},F.params);for(const ie in E)E[ie]==null&&delete E[ie];ce=xt({},F,{params:u(E)}),ue.params=u(ue.params)}const me=e.resolve(ce,ue),ze=F.hash||"";me.params=d(f(me.params));const C=n0(i,xt({},F,{hash:H0(ze),path:me.path})),D=s.createHref(C);return xt({fullPath:C,hash:ze,query:i===bf?W0(F.query):F.query||{}},me,{redirectedFrom:void 0,href:D})}function x(F){return typeof F=="string"?_l(t,F,l.value.path):xt({},F)}function y(F,ue){if(c!==F)return _r(8,{from:ue,to:F})}function b(F){return I(F)}function L(F){return b(xt(x(F),{replace:!0}))}function P(F){const ue=F.matched[F.matched.length-1];if(ue&&ue.redirect){const{redirect:ce}=ue;let me=typeof ce=="function"?ce(F):ce;return typeof me=="string"&&(me=me.includes("?")||me.includes("#")?me=x(me):{path:me},me.params={}),xt({query:F.query,hash:F.hash,params:"path"in me?{}:F.params},me)}}function I(F,ue){const ce=c=m(F),me=l.value,ze=F.state,C=F.force,D=F.replace===!0,E=P(ce);if(E)return I(xt(x(E),{state:typeof E=="object"?xt({},ze,E.state):ze,force:C,replace:D}),ue||ce);const ie=ce;ie.redirectedFrom=ue;let te;return!C&&i0(i,me,ce)&&(te=_r(16,{to:ie,from:me}),Ie(me,me,!0,!1)),(te?Promise.resolve(te):M(ie,me)).catch(se=>li(se)?li(se,2)?se:Te(se):W(se,ie,me)).then(se=>{if(se){if(li(se,2))return I(xt({replace:D},x(se.to),{state:typeof se.to=="object"?xt({},ze,se.to.state):ze,force:C}),ue||ie)}else se=O(ie,me,!0,D,ze);return R(ie,me,se),se})}function N(F,ue){const ce=y(F,ue);return ce?Promise.reject(ce):Promise.resolve()}function w(F){const ue=de.values().next().value;return ue&&typeof ue.runWithContext=="function"?ue.runWithContext(F):F()}function M(F,ue){let ce;const[me,ze,C]=tv(F,ue);ce=vl(me.reverse(),"beforeRouteLeave",F,ue);for(const E of me)E.leaveGuards.forEach(ie=>{ce.push(Vi(ie,F,ue))});const D=N.bind(null,F,ue);return ce.push(D),we(ce).then(()=>{ce=[];for(const E of r.list())ce.push(Vi(E,F,ue));return ce.push(D),we(ce)}).then(()=>{ce=vl(ze,"beforeRouteUpdate",F,ue);for(const E of ze)E.updateGuards.forEach(ie=>{ce.push(Vi(ie,F,ue))});return ce.push(D),we(ce)}).then(()=>{ce=[];for(const E of C)if(E.beforeEnter)if(Xn(E.beforeEnter))for(const ie of E.beforeEnter)ce.push(Vi(ie,F,ue));else ce.push(Vi(E.beforeEnter,F,ue));return ce.push(D),we(ce)}).then(()=>(F.matched.forEach(E=>E.enterCallbacks={}),ce=vl(C,"beforeRouteEnter",F,ue),ce.push(D),we(ce))).then(()=>{ce=[];for(const E of o.list())ce.push(Vi(E,F,ue));return ce.push(D),we(ce)}).catch(E=>li(E,8)?E:Promise.reject(E))}function R(F,ue,ce){a.list().forEach(me=>w(()=>me(F,ue,ce)))}function O(F,ue,ce,me,ze){const C=y(F,ue);if(C)return C;const D=ue===Ii,E=nr?history.state:{};ce&&(me||D?s.replace(F.fullPath,xt({scroll:D&&E&&E.scroll},ze)):s.push(F.fullPath,ze)),l.value=F,Ie(F,ue,ce,D),Te()}let U;function X(){U||(U=s.listen((F,ue,ce)=>{if(!ye.listening)return;const me=m(F),ze=P(me);if(ze){I(xt(ze,{replace:!0}),me).catch(so);return}c=me;const C=l.value;nr&&u0(ff(C.fullPath,ce.delta),el()),M(me,C).catch(D=>li(D,12)?D:li(D,2)?(I(D.to,me).then(E=>{li(E,20)&&!ce.delta&&ce.type===go.pop&&s.go(-1,!1)}).catch(so),Promise.reject()):(ce.delta&&s.go(-ce.delta,!1),W(D,me,C))).then(D=>{D=D||O(me,C,!1),D&&(ce.delta&&!li(D,8)?s.go(-ce.delta,!1):ce.type===go.pop&&li(D,20)&&s.go(-1,!1)),R(me,C,D)}).catch(so)}))}let ee=Hr(),Y=Hr(),oe;function W(F,ue,ce){Te(F);const me=Y.list();return me.length?me.forEach(ze=>ze(F,ue,ce)):console.error(F),Promise.reject(F)}function be(){return oe&&l.value!==Ii?Promise.resolve():new Promise((F,ue)=>{ee.add([F,ue])})}function Te(F){return oe||(oe=!F,X(),ee.list().forEach(([ue,ce])=>F?ce(F):ue()),ee.reset()),F}function Ie(F,ue,ce,me){const{scrollBehavior:ze}=n;if(!nr||!ze)return Promise.resolve();const C=!ce&&f0(ff(F.fullPath,0))||(me||!ce)&&history.state&&history.state.scroll||null;return Cp().then(()=>ze(F,ue,C)).then(D=>D&&d0(D)).catch(D=>W(D,F,ue))}const He=F=>s.go(F);let at;const de=new Set,ye={currentRoute:l,listening:!0,addRoute:p,removeRoute:_,hasRoute:g,getRoutes:v,resolve:m,options:n,push:b,replace:L,go:He,back:()=>He(-1),forward:()=>He(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:Y.add,isReady:be,install(F){const ue=this;F.component("RouterLink",Y0),F.component("RouterView",Q0),F.config.globalProperties.$router=ue,Object.defineProperty(F.config.globalProperties,"$route",{enumerable:!0,get:()=>Fe(l)}),nr&&!at&&l.value===Ii&&(at=!0,b(s.location).catch(ze=>{}));const ce={};for(const ze in Ii)Object.defineProperty(ce,ze,{get:()=>l.value[ze],enumerable:!0});F.provide(Gd,ue),F.provide(gm,xp(ce)),F.provide(Tc,l);const me=F.unmount;de.add(F),F.unmount=function(){de.delete(F),de.size<1&&(c=Ii,U&&U(),U=null,l.value=Ii,at=!1,oe=!1),me()}}};function we(F){return F.reduce((ue,ce)=>ue.then(()=>w(ce)),Promise.resolve())}return ye}function tv(n,e){const t=[],i=[],s=[],r=Math.max(e.matched.length,n.matched.length);for(let o=0;o<r;o++){const a=e.matched[o];a&&(n.matched.find(c=>gr(c,a))?i.push(a):t.push(a));const l=n.matched[o];l&&(e.matched.find(c=>gr(c,l))||s.push(l))}return[t,i,s]}const z="/front-osvetim/",wn=Ct({}),nv=an(()=>Object.values(wn.value).includes(!0));function $d(n){wn.value[n]!==void 0&&(wn.value[n]=!wn.value[n],document.body.classList[wn.value[n]===!0?"add":"remove"]("is-offcanvas-open"))}function _m(n){if(n&&wn.value[n]!==void 0){wn.value[n]=!1;return}for(const e in wn.value)wn.value[e]=!1;document.body.classList.remove("is-offcanvas-open")}function iv(){const n=new IntersectionObserver((e,t)=>{e.forEach(i=>{i.isIntersecting?i.target.classList.add("is-inview"):i.target.classList.remove("is-inview")})},{root:null,rootMargin:"0px",threshold:.2});document.querySelectorAll("[data-animated-block]").forEach(e=>{n.observe(e)})}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Wd="172",sv=0,wf=1,rv=2,vm=1,xm=2,mi=3,Ti=0,un=1,Jn=2,Yi=0,dr=1,Af=2,Cf=3,Rf=4,ov=5,Es=100,av=101,lv=102,cv=103,dv=104,uv=200,fv=201,hv=202,pv=203,wc=204,Ac=205,mv=206,gv=207,_v=208,vv=209,xv=210,bv=211,yv=212,Sv=213,Mv=214,Cc=0,Rc=1,Lc=2,vr=3,Pc=4,Ic=5,Dc=6,Nc=7,bm=0,Ev=1,Tv=2,Ki=0,wv=1,Av=2,Cv=3,Rv=4,Lv=5,Pv=6,Iv=7,Lf="attached",Dv="detached",ym=300,xr=301,br=302,Uc=303,Oc=304,tl=306,ts=1e3,$i=1001,Ra=1002,ln=1003,Sm=1004,Qr=1005,vn=1006,ha=1007,vi=1008,wi=1009,Mm=1010,Em=1011,_o=1012,Xd=1013,Ds=1014,$n=1015,yo=1016,jd=1017,qd=1018,yr=1020,Tm=35902,wm=1021,Am=1022,An=1023,Cm=1024,Rm=1025,ur=1026,Sr=1027,Yd=1028,Kd=1029,Lm=1030,Zd=1031,Jd=1033,pa=33776,ma=33777,ga=33778,_a=33779,kc=35840,Fc=35841,Bc=35842,Hc=35843,zc=36196,Vc=37492,Gc=37496,$c=37808,Wc=37809,Xc=37810,jc=37811,qc=37812,Yc=37813,Kc=37814,Zc=37815,Jc=37816,Qc=37817,ed=37818,td=37819,nd=37820,id=37821,va=36492,sd=36494,rd=36495,Pm=36283,od=36284,ad=36285,ld=36286,vo=2300,xo=2301,xl=2302,Pf=2400,If=2401,Df=2402,Nv=2500,Uv=0,Im=1,cd=2,Ov=3200,kv=3201,Dm=0,Fv=1,Gi="",It="srgb",Qt="srgb-linear",La="linear",St="srgb",Hs=7680,Nf=519,Bv=512,Hv=513,zv=514,Nm=515,Vv=516,Gv=517,$v=518,Wv=519,dd=35044,Uf="300 es",xi=2e3,Pa=2001;class Pr{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let r=0,o=s.length;r<o;r++)s[r].call(this,e);e.target=null}}}const jt=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Of=1234567;const oo=Math.PI/180,Mr=180/Math.PI;function Wn(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(jt[n&255]+jt[n>>8&255]+jt[n>>16&255]+jt[n>>24&255]+"-"+jt[e&255]+jt[e>>8&255]+"-"+jt[e>>16&15|64]+jt[e>>24&255]+"-"+jt[t&63|128]+jt[t>>8&255]+"-"+jt[t>>16&255]+jt[t>>24&255]+jt[i&255]+jt[i>>8&255]+jt[i>>16&255]+jt[i>>24&255]).toLowerCase()}function st(n,e,t){return Math.max(e,Math.min(t,n))}function Qd(n,e){return(n%e+e)%e}function Xv(n,e,t,i,s){return i+(n-e)*(s-i)/(t-e)}function jv(n,e,t){return n!==e?(t-n)/(e-n):0}function ao(n,e,t){return(1-t)*n+t*e}function qv(n,e,t,i){return ao(n,e,1-Math.exp(-t*i))}function Yv(n,e=1){return e-Math.abs(Qd(n,e*2)-e)}function Kv(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Zv(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Jv(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Qv(n,e){return n+Math.random()*(e-n)}function ex(n){return n*(.5-Math.random())}function tx(n){n!==void 0&&(Of=n);let e=Of+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function nx(n){return n*oo}function ix(n){return n*Mr}function sx(n){return(n&n-1)===0&&n!==0}function rx(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function ox(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function ax(n,e,t,i,s){const r=Math.cos,o=Math.sin,a=r(t/2),l=o(t/2),c=r((e+i)/2),d=o((e+i)/2),u=r((e-i)/2),f=o((e-i)/2),p=r((i-e)/2),_=o((i-e)/2);switch(s){case"XYX":n.set(a*d,l*u,l*f,a*c);break;case"YZY":n.set(l*f,a*d,l*u,a*c);break;case"ZXZ":n.set(l*u,l*f,a*d,a*c);break;case"XZX":n.set(a*d,l*_,l*p,a*c);break;case"YXY":n.set(l*p,a*d,l*_,a*c);break;case"ZYZ":n.set(l*_,l*p,a*d,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Hn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function bt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const lx={DEG2RAD:oo,RAD2DEG:Mr,generateUUID:Wn,clamp:st,euclideanModulo:Qd,mapLinear:Xv,inverseLerp:jv,lerp:ao,damp:qv,pingpong:Yv,smoothstep:Kv,smootherstep:Zv,randInt:Jv,randFloat:Qv,randFloatSpread:ex,seededRandom:tx,degToRad:nx,radToDeg:ix,isPowerOfTwo:sx,ceilPowerOfTwo:rx,floorPowerOfTwo:ox,setQuaternionFromProperEuler:ax,normalize:bt,denormalize:Hn};class lt{constructor(e=0,t=0){lt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6],this.y=s[1]*t+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=st(this.x,e.x,t.x),this.y=st(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=st(this.x,e,t),this.y=st(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(st(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(st(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),s=Math.sin(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*i-o*s+e.x,this.y=r*s+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class tt{constructor(e,t,i,s,r,o,a,l,c){tt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,s,r,o,a,l,c)}set(e,t,i,s,r,o,a,l,c){const d=this.elements;return d[0]=e,d[1]=s,d[2]=a,d[3]=t,d[4]=r,d[5]=l,d[6]=i,d[7]=o,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,r=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],d=i[4],u=i[7],f=i[2],p=i[5],_=i[8],v=s[0],g=s[3],m=s[6],x=s[1],y=s[4],b=s[7],L=s[2],P=s[5],I=s[8];return r[0]=o*v+a*x+l*L,r[3]=o*g+a*y+l*P,r[6]=o*m+a*b+l*I,r[1]=c*v+d*x+u*L,r[4]=c*g+d*y+u*P,r[7]=c*m+d*b+u*I,r[2]=f*v+p*x+_*L,r[5]=f*g+p*y+_*P,r[8]=f*m+p*b+_*I,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8];return t*o*d-t*a*c-i*r*d+i*a*l+s*r*c-s*o*l}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],u=d*o-a*c,f=a*l-d*r,p=c*r-o*l,_=t*u+i*f+s*p;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/_;return e[0]=u*v,e[1]=(s*c-d*i)*v,e[2]=(a*i-s*o)*v,e[3]=f*v,e[4]=(d*t-s*l)*v,e[5]=(s*r-a*t)*v,e[6]=p*v,e[7]=(i*l-c*t)*v,e[8]=(o*t-i*r)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,s,r,o,a){const l=Math.cos(r),c=Math.sin(r);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-s*c,s*l,-s*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(bl.makeScale(e,t)),this}rotate(e){return this.premultiply(bl.makeRotation(-e)),this}translate(e,t){return this.premultiply(bl.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<9;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const bl=new tt;function Um(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function bo(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function cx(){const n=bo("canvas");return n.style.display="block",n}const kf={};function ir(n){n in kf||(kf[n]=!0,console.warn(n))}function dx(n,e,t){return new Promise(function(i,s){function r(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:s();break;case n.TIMEOUT_EXPIRED:setTimeout(r,t);break;default:i()}}setTimeout(r,t)})}function ux(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function fx(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const Ff=new tt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),Bf=new tt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function hx(){const n={enabled:!0,workingColorSpace:Qt,spaces:{},convert:function(s,r,o){return this.enabled===!1||r===o||!r||!o||(this.spaces[r].transfer===St&&(s.r=Si(s.r),s.g=Si(s.g),s.b=Si(s.b)),this.spaces[r].primaries!==this.spaces[o].primaries&&(s.applyMatrix3(this.spaces[r].toXYZ),s.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===St&&(s.r=fr(s.r),s.g=fr(s.g),s.b=fr(s.b))),s},fromWorkingColorSpace:function(s,r){return this.convert(s,this.workingColorSpace,r)},toWorkingColorSpace:function(s,r){return this.convert(s,r,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===Gi?La:this.spaces[s].transfer},getLuminanceCoefficients:function(s,r=this.workingColorSpace){return s.fromArray(this.spaces[r].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,r,o){return s.copy(this.spaces[r].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Qt]:{primaries:e,whitePoint:i,transfer:La,toXYZ:Ff,fromXYZ:Bf,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:It},outputColorSpaceConfig:{drawingBufferColorSpace:It}},[It]:{primaries:e,whitePoint:i,transfer:St,toXYZ:Ff,fromXYZ:Bf,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:It}}}),n}const ot=hx();function Si(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function fr(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let zs;class px{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{zs===void 0&&(zs=bo("canvas")),zs.width=e.width,zs.height=e.height;const i=zs.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=zs}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=bo("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),r=s.data;for(let o=0;o<r.length;o++)r[o]=Si(r[o]/255)*255;return i.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Si(t[i]/255)*255):t[i]=Si(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let mx=0;class Om{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:mx++}),this.uuid=Wn(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let r;if(Array.isArray(s)){r=[];for(let o=0,a=s.length;o<a;o++)s[o].isDataTexture?r.push(yl(s[o].image)):r.push(yl(s[o]))}else r=yl(s);i.url=r}return t||(e.images[this.uuid]=i),i}}function yl(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?px.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let gx=0;class Vt extends Pr{constructor(e=Vt.DEFAULT_IMAGE,t=Vt.DEFAULT_MAPPING,i=$i,s=$i,r=vn,o=vi,a=An,l=wi,c=Vt.DEFAULT_ANISOTROPY,d=Gi){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:gx++}),this.uuid=Wn(),this.name="",this.source=new Om(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=r,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new lt(0,0),this.repeat=new lt(1,1),this.center=new lt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new tt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ym)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ts:e.x=e.x-Math.floor(e.x);break;case $i:e.x=e.x<0?0:1;break;case Ra:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ts:e.y=e.y-Math.floor(e.y);break;case $i:e.y=e.y<0?0:1;break;case Ra:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Vt.DEFAULT_IMAGE=null;Vt.DEFAULT_MAPPING=ym;Vt.DEFAULT_ANISOTROPY=1;class pt{constructor(e=0,t=0,i=0,s=1){pt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,r=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*s+o[12]*r,this.y=o[1]*t+o[5]*i+o[9]*s+o[13]*r,this.z=o[2]*t+o[6]*i+o[10]*s+o[14]*r,this.w=o[3]*t+o[7]*i+o[11]*s+o[15]*r,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,s,r;const l=e.elements,c=l[0],d=l[4],u=l[8],f=l[1],p=l[5],_=l[9],v=l[2],g=l[6],m=l[10];if(Math.abs(d-f)<.01&&Math.abs(u-v)<.01&&Math.abs(_-g)<.01){if(Math.abs(d+f)<.1&&Math.abs(u+v)<.1&&Math.abs(_+g)<.1&&Math.abs(c+p+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const y=(c+1)/2,b=(p+1)/2,L=(m+1)/2,P=(d+f)/4,I=(u+v)/4,N=(_+g)/4;return y>b&&y>L?y<.01?(i=0,s=.707106781,r=.707106781):(i=Math.sqrt(y),s=P/i,r=I/i):b>L?b<.01?(i=.707106781,s=0,r=.707106781):(s=Math.sqrt(b),i=P/s,r=N/s):L<.01?(i=.707106781,s=.707106781,r=0):(r=Math.sqrt(L),i=I/r,s=N/r),this.set(i,s,r,t),this}let x=Math.sqrt((g-_)*(g-_)+(u-v)*(u-v)+(f-d)*(f-d));return Math.abs(x)<.001&&(x=1),this.x=(g-_)/x,this.y=(u-v)/x,this.z=(f-d)/x,this.w=Math.acos((c+p+m-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=st(this.x,e.x,t.x),this.y=st(this.y,e.y,t.y),this.z=st(this.z,e.z,t.z),this.w=st(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=st(this.x,e,t),this.y=st(this.y,e,t),this.z=st(this.z,e,t),this.w=st(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(st(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class _x extends Pr{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new pt(0,0,e,t),this.scissorTest=!1,this.viewport=new pt(0,0,e,t);const s={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:vn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const r=new Vt(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);r.flipY=!1,r.generateMipmaps=i.generateMipmaps,r.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=r.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let s=0,r=this.textures.length;s<r;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,s=e.textures.length;i<s;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0,this.textures[i].renderTarget=this;const t=Object.assign({},e.texture.image);return this.texture.source=new Om(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ns extends _x{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class km extends Vt{constructor(e=null,t=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=ln,this.minFilter=ln,this.wrapR=$i,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class vx extends Vt{constructor(e=null,t=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=ln,this.minFilter=ln,this.wrapR=$i,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ss{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}static slerpFlat(e,t,i,s,r,o,a){let l=i[s+0],c=i[s+1],d=i[s+2],u=i[s+3];const f=r[o+0],p=r[o+1],_=r[o+2],v=r[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=d,e[t+3]=u;return}if(a===1){e[t+0]=f,e[t+1]=p,e[t+2]=_,e[t+3]=v;return}if(u!==v||l!==f||c!==p||d!==_){let g=1-a;const m=l*f+c*p+d*_+u*v,x=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){const L=Math.sqrt(y),P=Math.atan2(L,m*x);g=Math.sin(g*P)/L,a=Math.sin(a*P)/L}const b=a*x;if(l=l*g+f*b,c=c*g+p*b,d=d*g+_*b,u=u*g+v*b,g===1-a){const L=1/Math.sqrt(l*l+c*c+d*d+u*u);l*=L,c*=L,d*=L,u*=L}}e[t]=l,e[t+1]=c,e[t+2]=d,e[t+3]=u}static multiplyQuaternionsFlat(e,t,i,s,r,o){const a=i[s],l=i[s+1],c=i[s+2],d=i[s+3],u=r[o],f=r[o+1],p=r[o+2],_=r[o+3];return e[t]=a*_+d*u+l*p-c*f,e[t+1]=l*_+d*f+c*u-a*p,e[t+2]=c*_+d*p+a*f-l*u,e[t+3]=d*_-a*u-l*f-c*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,s=e._y,r=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),d=a(s/2),u=a(r/2),f=l(i/2),p=l(s/2),_=l(r/2);switch(o){case"XYZ":this._x=f*d*u+c*p*_,this._y=c*p*u-f*d*_,this._z=c*d*_+f*p*u,this._w=c*d*u-f*p*_;break;case"YXZ":this._x=f*d*u+c*p*_,this._y=c*p*u-f*d*_,this._z=c*d*_-f*p*u,this._w=c*d*u+f*p*_;break;case"ZXY":this._x=f*d*u-c*p*_,this._y=c*p*u+f*d*_,this._z=c*d*_+f*p*u,this._w=c*d*u-f*p*_;break;case"ZYX":this._x=f*d*u-c*p*_,this._y=c*p*u+f*d*_,this._z=c*d*_-f*p*u,this._w=c*d*u+f*p*_;break;case"YZX":this._x=f*d*u+c*p*_,this._y=c*p*u+f*d*_,this._z=c*d*_-f*p*u,this._w=c*d*u-f*p*_;break;case"XZY":this._x=f*d*u-c*p*_,this._y=c*p*u-f*d*_,this._z=c*d*_+f*p*u,this._w=c*d*u+f*p*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],s=t[4],r=t[8],o=t[1],a=t[5],l=t[9],c=t[2],d=t[6],u=t[10],f=i+a+u;if(f>0){const p=.5/Math.sqrt(f+1);this._w=.25/p,this._x=(d-l)*p,this._y=(r-c)*p,this._z=(o-s)*p}else if(i>a&&i>u){const p=2*Math.sqrt(1+i-a-u);this._w=(d-l)/p,this._x=.25*p,this._y=(s+o)/p,this._z=(r+c)/p}else if(a>u){const p=2*Math.sqrt(1+a-i-u);this._w=(r-c)/p,this._x=(s+o)/p,this._y=.25*p,this._z=(l+d)/p}else{const p=2*Math.sqrt(1+u-i-a);this._w=(o-s)/p,this._x=(r+c)/p,this._y=(l+d)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(st(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,t/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,s=e._y,r=e._z,o=e._w,a=t._x,l=t._y,c=t._z,d=t._w;return this._x=i*d+o*a+s*c-r*l,this._y=s*d+o*l+r*a-i*c,this._z=r*d+o*c+i*l-s*a,this._w=o*d-i*a-s*l-r*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,s=this._y,r=this._z,o=this._w;let a=o*e._w+i*e._x+s*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=s,this._z=r,this;const l=1-a*a;if(l<=Number.EPSILON){const p=1-t;return this._w=p*o+t*this._w,this._x=p*i+t*this._x,this._y=p*s+t*this._y,this._z=p*r+t*this._z,this.normalize(),this}const c=Math.sqrt(l),d=Math.atan2(c,a),u=Math.sin((1-t)*d)/c,f=Math.sin(t*d)/c;return this._w=o*u+this._w*f,this._x=i*u+this._x*f,this._y=s*u+this._y*f,this._z=r*u+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),r=Math.sqrt(i);return this.set(s*Math.sin(e),s*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class G{constructor(e=0,t=0,i=0){G.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Hf.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Hf.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6]*s,this.y=r[1]*t+r[4]*i+r[7]*s,this.z=r[2]*t+r[5]*i+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,r=e.elements,o=1/(r[3]*t+r[7]*i+r[11]*s+r[15]);return this.x=(r[0]*t+r[4]*i+r[8]*s+r[12])*o,this.y=(r[1]*t+r[5]*i+r[9]*s+r[13])*o,this.z=(r[2]*t+r[6]*i+r[10]*s+r[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,s=this.z,r=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*s-a*i),d=2*(a*t-r*s),u=2*(r*i-o*t);return this.x=t+l*c+o*u-a*d,this.y=i+l*d+a*c-r*u,this.z=s+l*u+r*d-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*s,this.y=r[1]*t+r[5]*i+r[9]*s,this.z=r[2]*t+r[6]*i+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=st(this.x,e.x,t.x),this.y=st(this.y,e.y,t.y),this.z=st(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=st(this.x,e,t),this.y=st(this.y,e,t),this.z=st(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(st(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,s=e.y,r=e.z,o=t.x,a=t.y,l=t.z;return this.x=s*l-r*a,this.y=r*o-i*l,this.z=i*a-s*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Sl.copy(this).projectOnVector(e),this.sub(Sl)}reflect(e){return this.sub(Sl.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(st(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const s=Math.sin(t)*e;return this.x=s*Math.sin(i),this.y=Math.cos(t)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Sl=new G,Hf=new ss;class Ci{constructor(e=new G(1/0,1/0,1/0),t=new G(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Nn.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Nn.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Nn.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const r=i.getAttribute("position");if(t===!0&&r!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=r.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Nn):Nn.fromBufferAttribute(r,o),Nn.applyMatrix4(e.matrixWorld),this.expandByPoint(Nn);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),No.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),No.copy(i.boundingBox)),No.applyMatrix4(e.matrixWorld),this.union(No)}const s=e.children;for(let r=0,o=s.length;r<o;r++)this.expandByObject(s[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Nn),Nn.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(zr),Uo.subVectors(this.max,zr),Vs.subVectors(e.a,zr),Gs.subVectors(e.b,zr),$s.subVectors(e.c,zr),Di.subVectors(Gs,Vs),Ni.subVectors($s,Gs),fs.subVectors(Vs,$s);let t=[0,-Di.z,Di.y,0,-Ni.z,Ni.y,0,-fs.z,fs.y,Di.z,0,-Di.x,Ni.z,0,-Ni.x,fs.z,0,-fs.x,-Di.y,Di.x,0,-Ni.y,Ni.x,0,-fs.y,fs.x,0];return!Ml(t,Vs,Gs,$s,Uo)||(t=[1,0,0,0,1,0,0,0,1],!Ml(t,Vs,Gs,$s,Uo))?!1:(Oo.crossVectors(Di,Ni),t=[Oo.x,Oo.y,Oo.z],Ml(t,Vs,Gs,$s,Uo))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Nn).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Nn).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ci[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ci[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ci[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ci[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ci[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ci[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ci[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ci[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ci),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ci=[new G,new G,new G,new G,new G,new G,new G,new G],Nn=new G,No=new Ci,Vs=new G,Gs=new G,$s=new G,Di=new G,Ni=new G,fs=new G,zr=new G,Uo=new G,Oo=new G,hs=new G;function Ml(n,e,t,i,s){for(let r=0,o=n.length-3;r<=o;r+=3){hs.fromArray(n,r);const a=s.x*Math.abs(hs.x)+s.y*Math.abs(hs.y)+s.z*Math.abs(hs.z),l=e.dot(hs),c=t.dot(hs),d=i.dot(hs);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}const xx=new Ci,Vr=new G,El=new G;class si{constructor(e=new G,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):xx.setFromPoints(e).getCenter(i);let s=0;for(let r=0,o=e.length;r<o;r++)s=Math.max(s,i.distanceToSquared(e[r]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Vr.subVectors(e,this.center);const t=Vr.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),s=(i-this.radius)*.5;this.center.addScaledVector(Vr,s/i),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(El.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Vr.copy(e.center).add(El)),this.expandByPoint(Vr.copy(e.center).sub(El))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const di=new G,Tl=new G,ko=new G,Ui=new G,wl=new G,Fo=new G,Al=new G;class nl{constructor(e=new G,t=new G(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,di)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=di.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(di.copy(this.origin).addScaledVector(this.direction,t),di.distanceToSquared(e))}distanceSqToSegment(e,t,i,s){Tl.copy(e).add(t).multiplyScalar(.5),ko.copy(t).sub(e).normalize(),Ui.copy(this.origin).sub(Tl);const r=e.distanceTo(t)*.5,o=-this.direction.dot(ko),a=Ui.dot(this.direction),l=-Ui.dot(ko),c=Ui.lengthSq(),d=Math.abs(1-o*o);let u,f,p,_;if(d>0)if(u=o*l-a,f=o*a-l,_=r*d,u>=0)if(f>=-_)if(f<=_){const v=1/d;u*=v,f*=v,p=u*(u+o*f+2*a)+f*(o*u+f+2*l)+c}else f=r,u=Math.max(0,-(o*f+a)),p=-u*u+f*(f+2*l)+c;else f=-r,u=Math.max(0,-(o*f+a)),p=-u*u+f*(f+2*l)+c;else f<=-_?(u=Math.max(0,-(-o*r+a)),f=u>0?-r:Math.min(Math.max(-r,-l),r),p=-u*u+f*(f+2*l)+c):f<=_?(u=0,f=Math.min(Math.max(-r,-l),r),p=f*(f+2*l)+c):(u=Math.max(0,-(o*r+a)),f=u>0?r:Math.min(Math.max(-r,-l),r),p=-u*u+f*(f+2*l)+c);else f=o>0?-r:r,u=Math.max(0,-(o*f+a)),p=-u*u+f*(f+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,u),s&&s.copy(Tl).addScaledVector(ko,f),p}intersectSphere(e,t){di.subVectors(e.center,this.origin);const i=di.dot(this.direction),s=di.dot(di)-i*i,r=e.radius*e.radius;if(s>r)return null;const o=Math.sqrt(r-s),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,s,r,o,a,l;const c=1/this.direction.x,d=1/this.direction.y,u=1/this.direction.z,f=this.origin;return c>=0?(i=(e.min.x-f.x)*c,s=(e.max.x-f.x)*c):(i=(e.max.x-f.x)*c,s=(e.min.x-f.x)*c),d>=0?(r=(e.min.y-f.y)*d,o=(e.max.y-f.y)*d):(r=(e.max.y-f.y)*d,o=(e.min.y-f.y)*d),i>o||r>s||((r>i||isNaN(i))&&(i=r),(o<s||isNaN(s))&&(s=o),u>=0?(a=(e.min.z-f.z)*u,l=(e.max.z-f.z)*u):(a=(e.max.z-f.z)*u,l=(e.min.z-f.z)*u),i>l||a>s)||((a>i||i!==i)&&(i=a),(l<s||s!==s)&&(s=l),s<0)?null:this.at(i>=0?i:s,t)}intersectsBox(e){return this.intersectBox(e,di)!==null}intersectTriangle(e,t,i,s,r){wl.subVectors(t,e),Fo.subVectors(i,e),Al.crossVectors(wl,Fo);let o=this.direction.dot(Al),a;if(o>0){if(s)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Ui.subVectors(this.origin,e);const l=a*this.direction.dot(Fo.crossVectors(Ui,Fo));if(l<0)return null;const c=a*this.direction.dot(wl.cross(Ui));if(c<0||l+c>o)return null;const d=-a*Ui.dot(Al);return d<0?null:this.at(d/o,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class nt{constructor(e,t,i,s,r,o,a,l,c,d,u,f,p,_,v,g){nt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,s,r,o,a,l,c,d,u,f,p,_,v,g)}set(e,t,i,s,r,o,a,l,c,d,u,f,p,_,v,g){const m=this.elements;return m[0]=e,m[4]=t,m[8]=i,m[12]=s,m[1]=r,m[5]=o,m[9]=a,m[13]=l,m[2]=c,m[6]=d,m[10]=u,m[14]=f,m[3]=p,m[7]=_,m[11]=v,m[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new nt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,s=1/Ws.setFromMatrixColumn(e,0).length(),r=1/Ws.setFromMatrixColumn(e,1).length(),o=1/Ws.setFromMatrixColumn(e,2).length();return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,s=e.y,r=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(s),c=Math.sin(s),d=Math.cos(r),u=Math.sin(r);if(e.order==="XYZ"){const f=o*d,p=o*u,_=a*d,v=a*u;t[0]=l*d,t[4]=-l*u,t[8]=c,t[1]=p+_*c,t[5]=f-v*c,t[9]=-a*l,t[2]=v-f*c,t[6]=_+p*c,t[10]=o*l}else if(e.order==="YXZ"){const f=l*d,p=l*u,_=c*d,v=c*u;t[0]=f+v*a,t[4]=_*a-p,t[8]=o*c,t[1]=o*u,t[5]=o*d,t[9]=-a,t[2]=p*a-_,t[6]=v+f*a,t[10]=o*l}else if(e.order==="ZXY"){const f=l*d,p=l*u,_=c*d,v=c*u;t[0]=f-v*a,t[4]=-o*u,t[8]=_+p*a,t[1]=p+_*a,t[5]=o*d,t[9]=v-f*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const f=o*d,p=o*u,_=a*d,v=a*u;t[0]=l*d,t[4]=_*c-p,t[8]=f*c+v,t[1]=l*u,t[5]=v*c+f,t[9]=p*c-_,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const f=o*l,p=o*c,_=a*l,v=a*c;t[0]=l*d,t[4]=v-f*u,t[8]=_*u+p,t[1]=u,t[5]=o*d,t[9]=-a*d,t[2]=-c*d,t[6]=p*u+_,t[10]=f-v*u}else if(e.order==="XZY"){const f=o*l,p=o*c,_=a*l,v=a*c;t[0]=l*d,t[4]=-u,t[8]=c*d,t[1]=f*u+v,t[5]=o*d,t[9]=p*u-_,t[2]=_*u-p,t[6]=a*d,t[10]=v*u+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(bx,e,yx)}lookAt(e,t,i){const s=this.elements;return mn.subVectors(e,t),mn.lengthSq()===0&&(mn.z=1),mn.normalize(),Oi.crossVectors(i,mn),Oi.lengthSq()===0&&(Math.abs(i.z)===1?mn.x+=1e-4:mn.z+=1e-4,mn.normalize(),Oi.crossVectors(i,mn)),Oi.normalize(),Bo.crossVectors(mn,Oi),s[0]=Oi.x,s[4]=Bo.x,s[8]=mn.x,s[1]=Oi.y,s[5]=Bo.y,s[9]=mn.y,s[2]=Oi.z,s[6]=Bo.z,s[10]=mn.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,r=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],d=i[1],u=i[5],f=i[9],p=i[13],_=i[2],v=i[6],g=i[10],m=i[14],x=i[3],y=i[7],b=i[11],L=i[15],P=s[0],I=s[4],N=s[8],w=s[12],M=s[1],R=s[5],O=s[9],U=s[13],X=s[2],ee=s[6],Y=s[10],oe=s[14],W=s[3],be=s[7],Te=s[11],Ie=s[15];return r[0]=o*P+a*M+l*X+c*W,r[4]=o*I+a*R+l*ee+c*be,r[8]=o*N+a*O+l*Y+c*Te,r[12]=o*w+a*U+l*oe+c*Ie,r[1]=d*P+u*M+f*X+p*W,r[5]=d*I+u*R+f*ee+p*be,r[9]=d*N+u*O+f*Y+p*Te,r[13]=d*w+u*U+f*oe+p*Ie,r[2]=_*P+v*M+g*X+m*W,r[6]=_*I+v*R+g*ee+m*be,r[10]=_*N+v*O+g*Y+m*Te,r[14]=_*w+v*U+g*oe+m*Ie,r[3]=x*P+y*M+b*X+L*W,r[7]=x*I+y*R+b*ee+L*be,r[11]=x*N+y*O+b*Y+L*Te,r[15]=x*w+y*U+b*oe+L*Ie,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],s=e[8],r=e[12],o=e[1],a=e[5],l=e[9],c=e[13],d=e[2],u=e[6],f=e[10],p=e[14],_=e[3],v=e[7],g=e[11],m=e[15];return _*(+r*l*u-s*c*u-r*a*f+i*c*f+s*a*p-i*l*p)+v*(+t*l*p-t*c*f+r*o*f-s*o*p+s*c*d-r*l*d)+g*(+t*c*u-t*a*p-r*o*u+i*o*p+r*a*d-i*c*d)+m*(-s*a*d-t*l*u+t*a*f+s*o*u-i*o*f+i*l*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],u=e[9],f=e[10],p=e[11],_=e[12],v=e[13],g=e[14],m=e[15],x=u*g*c-v*f*c+v*l*p-a*g*p-u*l*m+a*f*m,y=_*f*c-d*g*c-_*l*p+o*g*p+d*l*m-o*f*m,b=d*v*c-_*u*c+_*a*p-o*v*p-d*a*m+o*u*m,L=_*u*l-d*v*l-_*a*f+o*v*f+d*a*g-o*u*g,P=t*x+i*y+s*b+r*L;if(P===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const I=1/P;return e[0]=x*I,e[1]=(v*f*r-u*g*r-v*s*p+i*g*p+u*s*m-i*f*m)*I,e[2]=(a*g*r-v*l*r+v*s*c-i*g*c-a*s*m+i*l*m)*I,e[3]=(u*l*r-a*f*r-u*s*c+i*f*c+a*s*p-i*l*p)*I,e[4]=y*I,e[5]=(d*g*r-_*f*r+_*s*p-t*g*p-d*s*m+t*f*m)*I,e[6]=(_*l*r-o*g*r-_*s*c+t*g*c+o*s*m-t*l*m)*I,e[7]=(o*f*r-d*l*r+d*s*c-t*f*c-o*s*p+t*l*p)*I,e[8]=b*I,e[9]=(_*u*r-d*v*r-_*i*p+t*v*p+d*i*m-t*u*m)*I,e[10]=(o*v*r-_*a*r+_*i*c-t*v*c-o*i*m+t*a*m)*I,e[11]=(d*a*r-o*u*r-d*i*c+t*u*c+o*i*p-t*a*p)*I,e[12]=L*I,e[13]=(d*v*s-_*u*s+_*i*f-t*v*f-d*i*g+t*u*g)*I,e[14]=(_*a*s-o*v*s-_*i*l+t*v*l+o*i*g-t*a*g)*I,e[15]=(o*u*s-d*a*s+d*i*l-t*u*l-o*i*f+t*a*f)*I,this}scale(e){const t=this.elements,i=e.x,s=e.y,r=e.z;return t[0]*=i,t[4]*=s,t[8]*=r,t[1]*=i,t[5]*=s,t[9]*=r,t[2]*=i,t[6]*=s,t[10]*=r,t[3]*=i,t[7]*=s,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,s))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),s=Math.sin(t),r=1-i,o=e.x,a=e.y,l=e.z,c=r*o,d=r*a;return this.set(c*o+i,c*a-s*l,c*l+s*a,0,c*a+s*l,d*a+i,d*l-s*o,0,c*l-s*a,d*l+s*o,r*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,s,r,o){return this.set(1,i,r,0,e,1,o,0,t,s,1,0,0,0,0,1),this}compose(e,t,i){const s=this.elements,r=t._x,o=t._y,a=t._z,l=t._w,c=r+r,d=o+o,u=a+a,f=r*c,p=r*d,_=r*u,v=o*d,g=o*u,m=a*u,x=l*c,y=l*d,b=l*u,L=i.x,P=i.y,I=i.z;return s[0]=(1-(v+m))*L,s[1]=(p+b)*L,s[2]=(_-y)*L,s[3]=0,s[4]=(p-b)*P,s[5]=(1-(f+m))*P,s[6]=(g+x)*P,s[7]=0,s[8]=(_+y)*I,s[9]=(g-x)*I,s[10]=(1-(f+v))*I,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,i){const s=this.elements;let r=Ws.set(s[0],s[1],s[2]).length();const o=Ws.set(s[4],s[5],s[6]).length(),a=Ws.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],Un.copy(this);const c=1/r,d=1/o,u=1/a;return Un.elements[0]*=c,Un.elements[1]*=c,Un.elements[2]*=c,Un.elements[4]*=d,Un.elements[5]*=d,Un.elements[6]*=d,Un.elements[8]*=u,Un.elements[9]*=u,Un.elements[10]*=u,t.setFromRotationMatrix(Un),i.x=r,i.y=o,i.z=a,this}makePerspective(e,t,i,s,r,o,a=xi){const l=this.elements,c=2*r/(t-e),d=2*r/(i-s),u=(t+e)/(t-e),f=(i+s)/(i-s);let p,_;if(a===xi)p=-(o+r)/(o-r),_=-2*o*r/(o-r);else if(a===Pa)p=-o/(o-r),_=-o*r/(o-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=u,l[12]=0,l[1]=0,l[5]=d,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=_,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,s,r,o,a=xi){const l=this.elements,c=1/(t-e),d=1/(i-s),u=1/(o-r),f=(t+e)*c,p=(i+s)*d;let _,v;if(a===xi)_=(o+r)*u,v=-2*u;else if(a===Pa)_=r*u,v=-1*u;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*d,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=v,l[14]=-_,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<16;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Ws=new G,Un=new nt,bx=new G(0,0,0),yx=new G(1,1,1),Oi=new G,Bo=new G,mn=new G,zf=new nt,Vf=new ss;class ii{constructor(e=0,t=0,i=0,s=ii.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,s=this._order){return this._x=e,this._y=t,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const s=e.elements,r=s[0],o=s[4],a=s[8],l=s[1],c=s[5],d=s[9],u=s[2],f=s[6],p=s[10];switch(t){case"XYZ":this._y=Math.asin(st(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-d,p),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-st(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(st(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-u,p),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,r));break;case"ZYX":this._y=Math.asin(-st(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(l,r)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(st(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,c),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-st(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-d,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return zf.makeRotationFromQuaternion(e),this.setFromRotationMatrix(zf,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Vf.setFromEuler(this),this.setFromQuaternion(Vf,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ii.DEFAULT_ORDER="XYZ";class Fm{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Sx=0;const Gf=new G,Xs=new ss,ui=new nt,Ho=new G,Gr=new G,Mx=new G,Ex=new ss,$f=new G(1,0,0),Wf=new G(0,1,0),Xf=new G(0,0,1),jf={type:"added"},Tx={type:"removed"},js={type:"childadded",child:null},Cl={type:"childremoved",child:null};class At extends Pr{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Sx++}),this.uuid=Wn(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=At.DEFAULT_UP.clone();const e=new G,t=new ii,i=new ss,s=new G(1,1,1);function r(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(r),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new nt},normalMatrix:{value:new tt}}),this.matrix=new nt,this.matrixWorld=new nt,this.matrixAutoUpdate=At.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=At.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Fm,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Xs.setFromAxisAngle(e,t),this.quaternion.multiply(Xs),this}rotateOnWorldAxis(e,t){return Xs.setFromAxisAngle(e,t),this.quaternion.premultiply(Xs),this}rotateX(e){return this.rotateOnAxis($f,e)}rotateY(e){return this.rotateOnAxis(Wf,e)}rotateZ(e){return this.rotateOnAxis(Xf,e)}translateOnAxis(e,t){return Gf.copy(e).applyQuaternion(this.quaternion),this.position.add(Gf.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis($f,e)}translateY(e){return this.translateOnAxis(Wf,e)}translateZ(e){return this.translateOnAxis(Xf,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ui.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Ho.copy(e):Ho.set(e,t,i);const s=this.parent;this.updateWorldMatrix(!0,!1),Gr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ui.lookAt(Gr,Ho,this.up):ui.lookAt(Ho,Gr,this.up),this.quaternion.setFromRotationMatrix(ui),s&&(ui.extractRotation(s.matrixWorld),Xs.setFromRotationMatrix(ui),this.quaternion.premultiply(Xs.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(jf),js.child=e,this.dispatchEvent(js),js.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Tx),Cl.child=e,this.dispatchEvent(Cl),Cl.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),ui.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),ui.multiply(e.parent.matrixWorld)),e.applyMatrix4(ui),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(jf),js.child=e,this.dispatchEvent(js),js.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const s=this.children;for(let r=0,o=s.length;r<o;r++)s[r].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gr,e,Mx),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Gr,Ex,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const s=this.children;for(let r=0,o=s.length;r<o;r++)s[r].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function r(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=r(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,d=l.length;c<d;c++){const u=l[c];r(e.shapes,u)}else r(e.shapes,l)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(r(e.materials,this.material[l]));s.material=a}else s.material=r(e.materials,this.material);if(this.children.length>0){s.children=[];for(let a=0;a<this.children.length;a++)s.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];s.animations.push(r(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),d=o(e.images),u=o(e.shapes),f=o(e.skeletons),p=o(e.animations),_=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),d.length>0&&(i.images=d),u.length>0&&(i.shapes=u),f.length>0&&(i.skeletons=f),p.length>0&&(i.animations=p),_.length>0&&(i.nodes=_)}return i.object=s,i;function o(a){const l=[];for(const c in a){const d=a[c];delete d.metadata,l.push(d)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}At.DEFAULT_UP=new G(0,1,0);At.DEFAULT_MATRIX_AUTO_UPDATE=!0;At.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const On=new G,fi=new G,Rl=new G,hi=new G,qs=new G,Ys=new G,qf=new G,Ll=new G,Pl=new G,Il=new G,Dl=new pt,Nl=new pt,Ul=new pt;class zn{constructor(e=new G,t=new G,i=new G){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,s){s.subVectors(i,t),On.subVectors(e,t),s.cross(On);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(e,t,i,s,r){On.subVectors(s,t),fi.subVectors(i,t),Rl.subVectors(e,t);const o=On.dot(On),a=On.dot(fi),l=On.dot(Rl),c=fi.dot(fi),d=fi.dot(Rl),u=o*c-a*a;if(u===0)return r.set(0,0,0),null;const f=1/u,p=(c*l-a*d)*f,_=(o*d-a*l)*f;return r.set(1-p-_,_,p)}static containsPoint(e,t,i,s){return this.getBarycoord(e,t,i,s,hi)===null?!1:hi.x>=0&&hi.y>=0&&hi.x+hi.y<=1}static getInterpolation(e,t,i,s,r,o,a,l){return this.getBarycoord(e,t,i,s,hi)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(r,hi.x),l.addScaledVector(o,hi.y),l.addScaledVector(a,hi.z),l)}static getInterpolatedAttribute(e,t,i,s,r,o){return Dl.setScalar(0),Nl.setScalar(0),Ul.setScalar(0),Dl.fromBufferAttribute(e,t),Nl.fromBufferAttribute(e,i),Ul.fromBufferAttribute(e,s),o.setScalar(0),o.addScaledVector(Dl,r.x),o.addScaledVector(Nl,r.y),o.addScaledVector(Ul,r.z),o}static isFrontFacing(e,t,i,s){return On.subVectors(i,t),fi.subVectors(e,t),On.cross(fi).dot(s)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,s){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,i,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return On.subVectors(this.c,this.b),fi.subVectors(this.a,this.b),On.cross(fi).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return zn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return zn.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,s,r){return zn.getInterpolation(e,this.a,this.b,this.c,t,i,s,r)}containsPoint(e){return zn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return zn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,s=this.b,r=this.c;let o,a;qs.subVectors(s,i),Ys.subVectors(r,i),Ll.subVectors(e,i);const l=qs.dot(Ll),c=Ys.dot(Ll);if(l<=0&&c<=0)return t.copy(i);Pl.subVectors(e,s);const d=qs.dot(Pl),u=Ys.dot(Pl);if(d>=0&&u<=d)return t.copy(s);const f=l*u-d*c;if(f<=0&&l>=0&&d<=0)return o=l/(l-d),t.copy(i).addScaledVector(qs,o);Il.subVectors(e,r);const p=qs.dot(Il),_=Ys.dot(Il);if(_>=0&&p<=_)return t.copy(r);const v=p*c-l*_;if(v<=0&&c>=0&&_<=0)return a=c/(c-_),t.copy(i).addScaledVector(Ys,a);const g=d*_-p*u;if(g<=0&&u-d>=0&&p-_>=0)return qf.subVectors(r,s),a=(u-d)/(u-d+(p-_)),t.copy(s).addScaledVector(qf,a);const m=1/(g+v+f);return o=v*m,a=f*m,t.copy(i).addScaledVector(qs,o).addScaledVector(Ys,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Bm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ki={h:0,s:0,l:0},zo={h:0,s:0,l:0};function Ol(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Ke{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=It){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ot.toWorkingColorSpace(this,t),this}setRGB(e,t,i,s=ot.workingColorSpace){return this.r=e,this.g=t,this.b=i,ot.toWorkingColorSpace(this,s),this}setHSL(e,t,i,s=ot.workingColorSpace){if(e=Qd(e,1),t=st(t,0,1),i=st(i,0,1),t===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+t):i+t-i*t,o=2*i-r;this.r=Ol(o,r,e+1/3),this.g=Ol(o,r,e),this.b=Ol(o,r,e-1/3)}return ot.toWorkingColorSpace(this,s),this}setStyle(e,t=It){function i(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const o=s[1],a=s[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=s[1],o=r.length;if(o===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=It){const i=Bm[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Si(e.r),this.g=Si(e.g),this.b=Si(e.b),this}copyLinearToSRGB(e){return this.r=fr(e.r),this.g=fr(e.g),this.b=fr(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=It){return ot.fromWorkingColorSpace(qt.copy(this),e),Math.round(st(qt.r*255,0,255))*65536+Math.round(st(qt.g*255,0,255))*256+Math.round(st(qt.b*255,0,255))}getHexString(e=It){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ot.workingColorSpace){ot.fromWorkingColorSpace(qt.copy(this),t);const i=qt.r,s=qt.g,r=qt.b,o=Math.max(i,s,r),a=Math.min(i,s,r);let l,c;const d=(a+o)/2;if(a===o)l=0,c=0;else{const u=o-a;switch(c=d<=.5?u/(o+a):u/(2-o-a),o){case i:l=(s-r)/u+(s<r?6:0);break;case s:l=(r-i)/u+2;break;case r:l=(i-s)/u+4;break}l/=6}return e.h=l,e.s=c,e.l=d,e}getRGB(e,t=ot.workingColorSpace){return ot.fromWorkingColorSpace(qt.copy(this),t),e.r=qt.r,e.g=qt.g,e.b=qt.b,e}getStyle(e=It){ot.fromWorkingColorSpace(qt.copy(this),e);const t=qt.r,i=qt.g,s=qt.b;return e!==It?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(s*255)})`}offsetHSL(e,t,i){return this.getHSL(ki),this.setHSL(ki.h+e,ki.s+t,ki.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(ki),e.getHSL(zo);const i=ao(ki.h,zo.h,t),s=ao(ki.s,zo.s,t),r=ao(ki.l,zo.l,t);return this.setHSL(i,s,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,s=this.b,r=e.elements;return this.r=r[0]*t+r[3]*i+r[6]*s,this.g=r[1]*t+r[4]*i+r[7]*s,this.b=r[2]*t+r[5]*i+r[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const qt=new Ke;Ke.NAMES=Bm;let wx=0;class ti extends Pr{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:wx++}),this.uuid=Wn(),this.name="",this.type="Material",this.blending=dr,this.side=Ti,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=wc,this.blendDst=Ac,this.blendEquation=Es,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ke(0,0,0),this.blendAlpha=0,this.depthFunc=vr,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Nf,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Hs,this.stencilZFail=Hs,this.stencilZPass=Hs,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==dr&&(i.blending=this.blending),this.side!==Ti&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==wc&&(i.blendSrc=this.blendSrc),this.blendDst!==Ac&&(i.blendDst=this.blendDst),this.blendEquation!==Es&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==vr&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Nf&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Hs&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Hs&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Hs&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(r){const o=[];for(const a in r){const l=r[a];delete l.metadata,o.push(l)}return o}if(t){const r=s(e.textures),o=s(e.images);r.length>0&&(i.textures=r),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const s=t.length;i=new Array(s);for(let r=0;r!==s;++r)i[r]=t[r].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class As extends ti{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ii,this.combine=bm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ut=new G,Vo=new lt;class Wt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=dd,this.updateRanges=[],this.gpuType=$n,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let s=0,r=this.itemSize;s<r;s++)this.array[e+s]=t.array[i+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Vo.fromBufferAttribute(this,t),Vo.applyMatrix3(e),this.setXY(t,Vo.x,Vo.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Ut.fromBufferAttribute(this,t),Ut.applyMatrix3(e),this.setXYZ(t,Ut.x,Ut.y,Ut.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Ut.fromBufferAttribute(this,t),Ut.applyMatrix4(e),this.setXYZ(t,Ut.x,Ut.y,Ut.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ut.fromBufferAttribute(this,t),Ut.applyNormalMatrix(e),this.setXYZ(t,Ut.x,Ut.y,Ut.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ut.fromBufferAttribute(this,t),Ut.transformDirection(e),this.setXYZ(t,Ut.x,Ut.y,Ut.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Hn(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=bt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Hn(t,this.array)),t}setX(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Hn(t,this.array)),t}setY(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Hn(t,this.array)),t}setZ(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Hn(t,this.array)),t}setW(e,t){return this.normalized&&(t=bt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),s=bt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,t,i,s,r){return e*=this.itemSize,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),s=bt(s,this.array),r=bt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==dd&&(e.usage=this.usage),e}}class Hm extends Wt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class zm extends Wt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Mi extends Wt{constructor(e,t,i){super(new Float32Array(e),t,i)}}let Ax=0;const En=new nt,kl=new At,Ks=new G,gn=new Ci,$r=new Ci,Ht=new G;class jn extends Pr{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Ax++}),this.uuid=Wn(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Um(e)?zm:Hm)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const r=new tt().getNormalMatrix(e);i.applyNormalMatrix(r),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return En.makeRotationFromQuaternion(e),this.applyMatrix4(En),this}rotateX(e){return En.makeRotationX(e),this.applyMatrix4(En),this}rotateY(e){return En.makeRotationY(e),this.applyMatrix4(En),this}rotateZ(e){return En.makeRotationZ(e),this.applyMatrix4(En),this}translate(e,t,i){return En.makeTranslation(e,t,i),this.applyMatrix4(En),this}scale(e,t,i){return En.makeScale(e,t,i),this.applyMatrix4(En),this}lookAt(e){return kl.lookAt(e),kl.updateMatrix(),this.applyMatrix4(kl.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ks).negate(),this.translate(Ks.x,Ks.y,Ks.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let s=0,r=e.length;s<r;s++){const o=e[s];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Mi(i,3))}else{const i=Math.min(e.length,t.count);for(let s=0;s<i;s++){const r=e[s];t.setXYZ(s,r.x,r.y,r.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ci);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new G(-1/0,-1/0,-1/0),new G(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++){const r=t[i];gn.setFromBufferAttribute(r),this.morphTargetsRelative?(Ht.addVectors(this.boundingBox.min,gn.min),this.boundingBox.expandByPoint(Ht),Ht.addVectors(this.boundingBox.max,gn.max),this.boundingBox.expandByPoint(Ht)):(this.boundingBox.expandByPoint(gn.min),this.boundingBox.expandByPoint(gn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new si);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new G,1/0);return}if(e){const i=this.boundingSphere.center;if(gn.setFromBufferAttribute(e),t)for(let r=0,o=t.length;r<o;r++){const a=t[r];$r.setFromBufferAttribute(a),this.morphTargetsRelative?(Ht.addVectors(gn.min,$r.min),gn.expandByPoint(Ht),Ht.addVectors(gn.max,$r.max),gn.expandByPoint(Ht)):(gn.expandByPoint($r.min),gn.expandByPoint($r.max))}gn.getCenter(i);let s=0;for(let r=0,o=e.count;r<o;r++)Ht.fromBufferAttribute(e,r),s=Math.max(s,i.distanceToSquared(Ht));if(t)for(let r=0,o=t.length;r<o;r++){const a=t[r],l=this.morphTargetsRelative;for(let c=0,d=a.count;c<d;c++)Ht.fromBufferAttribute(a,c),l&&(Ks.fromBufferAttribute(e,c),Ht.add(Ks)),s=Math.max(s,i.distanceToSquared(Ht))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,s=t.normal,r=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Wt(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let N=0;N<i.count;N++)a[N]=new G,l[N]=new G;const c=new G,d=new G,u=new G,f=new lt,p=new lt,_=new lt,v=new G,g=new G;function m(N,w,M){c.fromBufferAttribute(i,N),d.fromBufferAttribute(i,w),u.fromBufferAttribute(i,M),f.fromBufferAttribute(r,N),p.fromBufferAttribute(r,w),_.fromBufferAttribute(r,M),d.sub(c),u.sub(c),p.sub(f),_.sub(f);const R=1/(p.x*_.y-_.x*p.y);isFinite(R)&&(v.copy(d).multiplyScalar(_.y).addScaledVector(u,-p.y).multiplyScalar(R),g.copy(u).multiplyScalar(p.x).addScaledVector(d,-_.x).multiplyScalar(R),a[N].add(v),a[w].add(v),a[M].add(v),l[N].add(g),l[w].add(g),l[M].add(g))}let x=this.groups;x.length===0&&(x=[{start:0,count:e.count}]);for(let N=0,w=x.length;N<w;++N){const M=x[N],R=M.start,O=M.count;for(let U=R,X=R+O;U<X;U+=3)m(e.getX(U+0),e.getX(U+1),e.getX(U+2))}const y=new G,b=new G,L=new G,P=new G;function I(N){L.fromBufferAttribute(s,N),P.copy(L);const w=a[N];y.copy(w),y.sub(L.multiplyScalar(L.dot(w))).normalize(),b.crossVectors(P,w);const R=b.dot(l[N])<0?-1:1;o.setXYZW(N,y.x,y.y,y.z,R)}for(let N=0,w=x.length;N<w;++N){const M=x[N],R=M.start,O=M.count;for(let U=R,X=R+O;U<X;U+=3)I(e.getX(U+0)),I(e.getX(U+1)),I(e.getX(U+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Wt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let f=0,p=i.count;f<p;f++)i.setXYZ(f,0,0,0);const s=new G,r=new G,o=new G,a=new G,l=new G,c=new G,d=new G,u=new G;if(e)for(let f=0,p=e.count;f<p;f+=3){const _=e.getX(f+0),v=e.getX(f+1),g=e.getX(f+2);s.fromBufferAttribute(t,_),r.fromBufferAttribute(t,v),o.fromBufferAttribute(t,g),d.subVectors(o,r),u.subVectors(s,r),d.cross(u),a.fromBufferAttribute(i,_),l.fromBufferAttribute(i,v),c.fromBufferAttribute(i,g),a.add(d),l.add(d),c.add(d),i.setXYZ(_,a.x,a.y,a.z),i.setXYZ(v,l.x,l.y,l.z),i.setXYZ(g,c.x,c.y,c.z)}else for(let f=0,p=t.count;f<p;f+=3)s.fromBufferAttribute(t,f+0),r.fromBufferAttribute(t,f+1),o.fromBufferAttribute(t,f+2),d.subVectors(o,r),u.subVectors(s,r),d.cross(u),i.setXYZ(f+0,d.x,d.y,d.z),i.setXYZ(f+1,d.x,d.y,d.z),i.setXYZ(f+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Ht.fromBufferAttribute(e,t),Ht.normalize(),e.setXYZ(t,Ht.x,Ht.y,Ht.z)}toNonIndexed(){function e(a,l){const c=a.array,d=a.itemSize,u=a.normalized,f=new c.constructor(l.length*d);let p=0,_=0;for(let v=0,g=l.length;v<g;v++){a.isInterleavedBufferAttribute?p=l[v]*a.data.stride+a.offset:p=l[v]*d;for(let m=0;m<d;m++)f[_++]=c[p++]}return new Wt(f,d,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new jn,i=this.index.array,s=this.attributes;for(const a in s){const l=s[a],c=e(l,i);t.setAttribute(a,c)}const r=this.morphAttributes;for(const a in r){const l=[],c=r[a];for(let d=0,u=c.length;d<u;d++){const f=c[d],p=e(f,i);l.push(p)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const s={};let r=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let u=0,f=c.length;u<f;u++){const p=c[u];d.push(p.toJSON(e.data))}d.length>0&&(s[l]=d,r=!0)}r&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const s=e.attributes;for(const c in s){const d=s[c];this.setAttribute(c,d.clone(t))}const r=e.morphAttributes;for(const c in r){const d=[],u=r[c];for(let f=0,p=u.length;f<p;f++)d.push(u[f].clone(t));this.morphAttributes[c]=d}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,d=o.length;c<d;c++){const u=o[c];this.addGroup(u.start,u.count,u.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Yf=new nt,ps=new nl,Go=new si,Kf=new G,$o=new G,Wo=new G,Xo=new G,Fl=new G,jo=new G,Zf=new G,qo=new G;class xn extends At{constructor(e=new jn,t=new As){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}getVertexPosition(e,t){const i=this.geometry,s=i.attributes.position,r=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(s,e);const a=this.morphTargetInfluences;if(r&&a){jo.set(0,0,0);for(let l=0,c=r.length;l<c;l++){const d=a[l],u=r[l];d!==0&&(Fl.fromBufferAttribute(u,e),o?jo.addScaledVector(Fl,d):jo.addScaledVector(Fl.sub(t),d))}t.add(jo)}return t}raycast(e,t){const i=this.geometry,s=this.material,r=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Go.copy(i.boundingSphere),Go.applyMatrix4(r),ps.copy(e.ray).recast(e.near),!(Go.containsPoint(ps.origin)===!1&&(ps.intersectSphere(Go,Kf)===null||ps.origin.distanceToSquared(Kf)>(e.far-e.near)**2))&&(Yf.copy(r).invert(),ps.copy(e.ray).applyMatrix4(Yf),!(i.boundingBox!==null&&ps.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,ps)))}_computeIntersections(e,t,i){let s;const r=this.geometry,o=this.material,a=r.index,l=r.attributes.position,c=r.attributes.uv,d=r.attributes.uv1,u=r.attributes.normal,f=r.groups,p=r.drawRange;if(a!==null)if(Array.isArray(o))for(let _=0,v=f.length;_<v;_++){const g=f[_],m=o[g.materialIndex],x=Math.max(g.start,p.start),y=Math.min(a.count,Math.min(g.start+g.count,p.start+p.count));for(let b=x,L=y;b<L;b+=3){const P=a.getX(b),I=a.getX(b+1),N=a.getX(b+2);s=Yo(this,m,e,i,c,d,u,P,I,N),s&&(s.faceIndex=Math.floor(b/3),s.face.materialIndex=g.materialIndex,t.push(s))}}else{const _=Math.max(0,p.start),v=Math.min(a.count,p.start+p.count);for(let g=_,m=v;g<m;g+=3){const x=a.getX(g),y=a.getX(g+1),b=a.getX(g+2);s=Yo(this,o,e,i,c,d,u,x,y,b),s&&(s.faceIndex=Math.floor(g/3),t.push(s))}}else if(l!==void 0)if(Array.isArray(o))for(let _=0,v=f.length;_<v;_++){const g=f[_],m=o[g.materialIndex],x=Math.max(g.start,p.start),y=Math.min(l.count,Math.min(g.start+g.count,p.start+p.count));for(let b=x,L=y;b<L;b+=3){const P=b,I=b+1,N=b+2;s=Yo(this,m,e,i,c,d,u,P,I,N),s&&(s.faceIndex=Math.floor(b/3),s.face.materialIndex=g.materialIndex,t.push(s))}}else{const _=Math.max(0,p.start),v=Math.min(l.count,p.start+p.count);for(let g=_,m=v;g<m;g+=3){const x=g,y=g+1,b=g+2;s=Yo(this,o,e,i,c,d,u,x,y,b),s&&(s.faceIndex=Math.floor(g/3),t.push(s))}}}}function Cx(n,e,t,i,s,r,o,a){let l;if(e.side===un?l=i.intersectTriangle(o,r,s,!0,a):l=i.intersectTriangle(s,r,o,e.side===Ti,a),l===null)return null;qo.copy(a),qo.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(qo);return c<t.near||c>t.far?null:{distance:c,point:qo.clone(),object:n}}function Yo(n,e,t,i,s,r,o,a,l,c){n.getVertexPosition(a,$o),n.getVertexPosition(l,Wo),n.getVertexPosition(c,Xo);const d=Cx(n,e,t,i,$o,Wo,Xo,Zf);if(d){const u=new G;zn.getBarycoord(Zf,$o,Wo,Xo,u),s&&(d.uv=zn.getInterpolatedAttribute(s,a,l,c,u,new lt)),r&&(d.uv1=zn.getInterpolatedAttribute(r,a,l,c,u,new lt)),o&&(d.normal=zn.getInterpolatedAttribute(o,a,l,c,u,new G),d.normal.dot(i.direction)>0&&d.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new G,materialIndex:0};zn.getNormal($o,Wo,Xo,f.normal),d.face=f,d.barycoord=u}return d}class So extends jn{constructor(e=1,t=1,i=1,s=1,r=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:s,heightSegments:r,depthSegments:o};const a=this;s=Math.floor(s),r=Math.floor(r),o=Math.floor(o);const l=[],c=[],d=[],u=[];let f=0,p=0;_("z","y","x",-1,-1,i,t,e,o,r,0),_("z","y","x",1,-1,i,t,-e,o,r,1),_("x","z","y",1,1,e,i,t,s,o,2),_("x","z","y",1,-1,e,i,-t,s,o,3),_("x","y","z",1,-1,e,t,i,s,r,4),_("x","y","z",-1,-1,e,t,-i,s,r,5),this.setIndex(l),this.setAttribute("position",new Mi(c,3)),this.setAttribute("normal",new Mi(d,3)),this.setAttribute("uv",new Mi(u,2));function _(v,g,m,x,y,b,L,P,I,N,w){const M=b/I,R=L/N,O=b/2,U=L/2,X=P/2,ee=I+1,Y=N+1;let oe=0,W=0;const be=new G;for(let Te=0;Te<Y;Te++){const Ie=Te*R-U;for(let He=0;He<ee;He++){const at=He*M-O;be[v]=at*x,be[g]=Ie*y,be[m]=X,c.push(be.x,be.y,be.z),be[v]=0,be[g]=0,be[m]=P>0?1:-1,d.push(be.x,be.y,be.z),u.push(He/I),u.push(1-Te/N),oe+=1}}for(let Te=0;Te<N;Te++)for(let Ie=0;Ie<I;Ie++){const He=f+Ie+ee*Te,at=f+Ie+ee*(Te+1),de=f+(Ie+1)+ee*(Te+1),ye=f+(Ie+1)+ee*Te;l.push(He,at,ye),l.push(at,de,ye),W+=6}a.addGroup(p,W,w),p+=W,f+=oe}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new So(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Er(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const s=n[t][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=s.clone():Array.isArray(s)?e[t][i]=s.slice():e[t][i]=s}}return e}function rn(n){const e={};for(let t=0;t<n.length;t++){const i=Er(n[t]);for(const s in i)e[s]=i[s]}return e}function Rx(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function Vm(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:ot.workingColorSpace}const Lx={clone:Er,merge:rn};var Px=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Ix=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ns extends ti{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Px,this.fragmentShader=Ix,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Er(e.uniforms),this.uniformsGroups=Rx(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const o=this.uniforms[s].value;o&&o.isTexture?t.uniforms[s]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[s]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[s]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[s]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[s]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[s]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[s]={type:"m4",value:o.toArray()}:t.uniforms[s]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const s in this.extensions)this.extensions[s]===!0&&(i[s]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Gm extends At{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new nt,this.projectionMatrix=new nt,this.projectionMatrixInverse=new nt,this.coordinateSystem=xi}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Fi=new G,Jf=new lt,Qf=new lt;class on extends Gm{constructor(e=50,t=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Mr*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(oo*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Mr*2*Math.atan(Math.tan(oo*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Fi.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Fi.x,Fi.y).multiplyScalar(-e/Fi.z),Fi.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Fi.x,Fi.y).multiplyScalar(-e/Fi.z)}getViewSize(e,t){return this.getViewBounds(e,Jf,Qf),t.subVectors(Qf,Jf)}setViewOffset(e,t,i,s,r,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(oo*.5*this.fov)/this.zoom,i=2*t,s=this.aspect*i,r=-.5*s;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;r+=o.offsetX*s/l,t-=o.offsetY*i/c,s*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+s,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Zs=-90,Js=1;class Dx extends At{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new on(Zs,Js,e,t);s.layers=this.layers,this.add(s);const r=new on(Zs,Js,e,t);r.layers=this.layers,this.add(r);const o=new on(Zs,Js,e,t);o.layers=this.layers,this.add(o);const a=new on(Zs,Js,e,t);a.layers=this.layers,this.add(a);const l=new on(Zs,Js,e,t);l.layers=this.layers,this.add(l);const c=new on(Zs,Js,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,s,r,o,a,l]=t;for(const c of t)this.remove(c);if(e===xi)i.up.set(0,1,0),i.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Pa)i.up.set(0,-1,0),i.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,o,a,l,c,d]=this.children,u=e.getRenderTarget(),f=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),_=e.xr.enabled;e.xr.enabled=!1;const v=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,s),e.render(t,r),e.setRenderTarget(i,1,s),e.render(t,o),e.setRenderTarget(i,2,s),e.render(t,a),e.setRenderTarget(i,3,s),e.render(t,l),e.setRenderTarget(i,4,s),e.render(t,c),i.texture.generateMipmaps=v,e.setRenderTarget(i,5,s),e.render(t,d),e.setRenderTarget(u,f,p),e.xr.enabled=_,i.texture.needsPMREMUpdate=!0}}class eu extends Vt{constructor(e,t,i,s,r,o,a,l,c,d){e=e!==void 0?e:[],t=t!==void 0?t:xr,super(e,t,i,s,r,o,a,l,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Nx extends Ns{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},s=[i,i,i,i,i,i];this.texture=new eu(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:vn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new So(5,5,5),r=new ns({name:"CubemapFromEquirect",uniforms:Er(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:un,blending:Yi});r.uniforms.tEquirect.value=t;const o=new xn(s,r),a=t.minFilter;return t.minFilter===vi&&(t.minFilter=vn),new Dx(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,s){const r=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,s);e.setRenderTarget(r)}}class Ux extends At{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ii,this.environmentIntensity=1,this.environmentRotation=new ii,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Ox{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=dd,this.updateRanges=[],this.version=0,this.uuid=Wn()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let s=0,r=this.stride;s<r;s++)this.array[e+s]=t.array[i+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Wn()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Wn()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const nn=new G;class tu{constructor(e,t,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)nn.fromBufferAttribute(this,t),nn.applyMatrix4(e),this.setXYZ(t,nn.x,nn.y,nn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)nn.fromBufferAttribute(this,t),nn.applyNormalMatrix(e),this.setXYZ(t,nn.x,nn.y,nn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)nn.fromBufferAttribute(this,t),nn.transformDirection(e),this.setXYZ(t,nn.x,nn.y,nn.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Hn(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=bt(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=bt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=bt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=bt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=bt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Hn(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Hn(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Hn(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Hn(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),s=bt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this}setXYZW(e,t,i,s,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=bt(t,this.array),i=bt(i,this.array),s=bt(s,this.array),r=bt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this.data.array[e+3]=r,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return new Wt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new tu(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[s+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const eh=new G,th=new pt,nh=new pt,kx=new G,ih=new nt,Ko=new G,Bl=new si,sh=new nt,Hl=new nl;class Fx extends xn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Lf,this.bindMatrix=new nt,this.bindMatrixInverse=new nt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ci),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Ko),this.boundingBox.expandByPoint(Ko)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new si),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Ko),this.boundingSphere.expandByPoint(Ko)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,s=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Bl.copy(this.boundingSphere),Bl.applyMatrix4(s),e.ray.intersectsSphere(Bl)!==!1&&(sh.copy(s).invert(),Hl.copy(e.ray).applyMatrix4(sh),!(this.boundingBox!==null&&Hl.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Hl)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new pt,t=this.geometry.attributes.skinWeight;for(let i=0,s=t.count;i<s;i++){e.fromBufferAttribute(t,i);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Lf?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Dv?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,s=this.geometry;th.fromBufferAttribute(s.attributes.skinIndex,e),nh.fromBufferAttribute(s.attributes.skinWeight,e),eh.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const o=nh.getComponent(r);if(o!==0){const a=th.getComponent(r);ih.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(kx.copy(eh).applyMatrix4(ih),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class $m extends At{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Wm extends Vt{constructor(e=null,t=1,i=1,s,r,o,a,l,c=ln,d=ln,u,f){super(null,o,a,l,c,d,s,r,u,f),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const rh=new nt,Bx=new nt;class nu{constructor(e=[],t=[]){this.uuid=Wn(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new nt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new nt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let r=0,o=e.length;r<o;r++){const a=e[r]?e[r].matrixWorld:Bx;rh.multiplyMatrices(a,t[r]),rh.toArray(i,r*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new nu(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Wm(t,e,e,An,$n);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,s=e.bones.length;i<s;i++){const r=e.bones[i];let o=t[r];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),o=new $m),this.bones.push(o),this.boneInverses.push(new nt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let s=0,r=t.length;s<r;s++){const o=t[s];e.bones.push(o.uuid);const a=i[s];e.boneInverses.push(a.toArray())}return e}}class ud extends Wt{constructor(e,t,i,s=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Qs=new nt,oh=new nt,Zo=[],ah=new Ci,Hx=new nt,Wr=new xn,Xr=new si;class zx extends xn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new ud(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<i;s++)this.setMatrixAt(s,Hx)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Ci),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Qs),ah.copy(e.boundingBox).applyMatrix4(Qs),this.boundingBox.union(ah)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new si),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Qs),Xr.copy(e.boundingSphere).applyMatrix4(Qs),this.boundingSphere.union(Xr)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,s=this.morphTexture.source.data.data,r=i.length+1,o=e*r+1;for(let a=0;a<i.length;a++)i[a]=s[o+a]}raycast(e,t){const i=this.matrixWorld,s=this.count;if(Wr.geometry=this.geometry,Wr.material=this.material,Wr.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Xr.copy(this.boundingSphere),Xr.applyMatrix4(i),e.ray.intersectsSphere(Xr)!==!1))for(let r=0;r<s;r++){this.getMatrixAt(r,Qs),oh.multiplyMatrices(i,Qs),Wr.matrixWorld=oh,Wr.raycast(e,Zo);for(let o=0,a=Zo.length;o<a;o++){const l=Zo[o];l.instanceId=r,l.object=this,t.push(l)}Zo.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new ud(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,s=i.length+1;this.morphTexture===null&&(this.morphTexture=new Wm(new Float32Array(s*this.count),s,this.count,Yd,$n));const r=this.morphTexture.source.data.data;let o=0;for(let c=0;c<i.length;c++)o+=i[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=s*e;r[l]=a,r.set(i,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}const zl=new G,Vx=new G,Gx=new tt;class xs{constructor(e=new G(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,s){return this.normal.set(e,t,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const s=zl.subVectors(i,t).cross(Vx.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(zl),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/s;return r<0||r>1?null:t.copy(e.start).addScaledVector(i,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Gx.getNormalMatrix(e),s=this.coplanarPoint(zl).applyMatrix4(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ms=new si,Jo=new G;class iu{constructor(e=new xs,t=new xs,i=new xs,s=new xs,r=new xs,o=new xs){this.planes=[e,t,i,s,r,o]}set(e,t,i,s,r,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(s),a[4].copy(r),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=xi){const i=this.planes,s=e.elements,r=s[0],o=s[1],a=s[2],l=s[3],c=s[4],d=s[5],u=s[6],f=s[7],p=s[8],_=s[9],v=s[10],g=s[11],m=s[12],x=s[13],y=s[14],b=s[15];if(i[0].setComponents(l-r,f-c,g-p,b-m).normalize(),i[1].setComponents(l+r,f+c,g+p,b+m).normalize(),i[2].setComponents(l+o,f+d,g+_,b+x).normalize(),i[3].setComponents(l-o,f-d,g-_,b-x).normalize(),i[4].setComponents(l-a,f-u,g-v,b-y).normalize(),t===xi)i[5].setComponents(l+a,f+u,g+v,b+y).normalize();else if(t===Pa)i[5].setComponents(a,u,v,y).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ms.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),ms.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ms)}intersectsSprite(e){return ms.center.set(0,0,0),ms.radius=.7071067811865476,ms.applyMatrix4(e.matrixWorld),this.intersectsSphere(ms)}intersectsSphere(e){const t=this.planes,i=e.center,s=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const s=t[i];if(Jo.x=s.normal.x>0?e.max.x:e.min.x,Jo.y=s.normal.y>0?e.max.y:e.min.y,Jo.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(Jo)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class Xm extends ti{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ke(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Ia=new G,Da=new G,lh=new nt,jr=new nl,Qo=new si,Vl=new G,ch=new G;class su extends At{constructor(e=new jn,t=new Xm){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let s=1,r=t.count;s<r;s++)Ia.fromBufferAttribute(t,s-1),Da.fromBufferAttribute(t,s),i[s]=i[s-1],i[s]+=Ia.distanceTo(Da);e.setAttribute("lineDistance",new Mi(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,r=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Qo.copy(i.boundingSphere),Qo.applyMatrix4(s),Qo.radius+=r,e.ray.intersectsSphere(Qo)===!1)return;lh.copy(s).invert(),jr.copy(e.ray).applyMatrix4(lh);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,d=i.index,f=i.attributes.position;if(d!==null){const p=Math.max(0,o.start),_=Math.min(d.count,o.start+o.count);for(let v=p,g=_-1;v<g;v+=c){const m=d.getX(v),x=d.getX(v+1),y=ea(this,e,jr,l,m,x);y&&t.push(y)}if(this.isLineLoop){const v=d.getX(_-1),g=d.getX(p),m=ea(this,e,jr,l,v,g);m&&t.push(m)}}else{const p=Math.max(0,o.start),_=Math.min(f.count,o.start+o.count);for(let v=p,g=_-1;v<g;v+=c){const m=ea(this,e,jr,l,v,v+1);m&&t.push(m)}if(this.isLineLoop){const v=ea(this,e,jr,l,_-1,p);v&&t.push(v)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}function ea(n,e,t,i,s,r){const o=n.geometry.attributes.position;if(Ia.fromBufferAttribute(o,s),Da.fromBufferAttribute(o,r),t.distanceSqToSegment(Ia,Da,Vl,ch)>i)return;Vl.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(Vl);if(!(l<e.near||l>e.far))return{distance:l,point:ch.clone().applyMatrix4(n.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:n}}const dh=new G,uh=new G;class $x extends su{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let s=0,r=t.count;s<r;s+=2)dh.fromBufferAttribute(t,s),uh.fromBufferAttribute(t,s+1),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+dh.distanceTo(uh);e.setAttribute("lineDistance",new Mi(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Wx extends su{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class jm extends ti{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ke(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const fh=new nt,fd=new nl,ta=new si,na=new G;class Xx extends At{constructor(e=new jn,t=new jm){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,r=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),ta.copy(i.boundingSphere),ta.applyMatrix4(s),ta.radius+=r,e.ray.intersectsSphere(ta)===!1)return;fh.copy(s).invert(),fd.copy(e.ray).applyMatrix4(fh);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,u=i.attributes.position;if(c!==null){const f=Math.max(0,o.start),p=Math.min(c.count,o.start+o.count);for(let _=f,v=p;_<v;_++){const g=c.getX(_);na.fromBufferAttribute(u,g),hh(na,g,l,s,e,t,this)}}else{const f=Math.max(0,o.start),p=Math.min(u.count,o.start+o.count);for(let _=f,v=p;_<v;_++)na.fromBufferAttribute(u,_),hh(na,_,l,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=s.length;r<o;r++){const a=s[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}}function hh(n,e,t,i,s,r,o){const a=fd.distanceSqToPoint(n);if(a<t){const l=new G;fd.closestPointToPoint(n,l),l.applyMatrix4(i);const c=s.ray.origin.distanceTo(l);if(c<s.near||c>s.far)return;r.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class Cs extends At{constructor(){super(),this.isGroup=!0,this.type="Group"}}class qm extends Vt{constructor(e,t,i,s,r,o,a,l,c,d=ur){if(d!==ur&&d!==Sr)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&d===ur&&(i=Ds),i===void 0&&d===Sr&&(i=yr),super(null,s,r,o,a,l,d,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:ln,this.minFilter=l!==void 0?l:ln,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class il extends jn{constructor(e=1,t=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:s};const r=e/2,o=t/2,a=Math.floor(i),l=Math.floor(s),c=a+1,d=l+1,u=e/a,f=t/l,p=[],_=[],v=[],g=[];for(let m=0;m<d;m++){const x=m*f-o;for(let y=0;y<c;y++){const b=y*u-r;_.push(b,-x,0),v.push(0,0,1),g.push(y/a),g.push(1-m/l)}}for(let m=0;m<l;m++)for(let x=0;x<a;x++){const y=x+c*m,b=x+c*(m+1),L=x+1+c*(m+1),P=x+1+c*m;p.push(y,b,P),p.push(b,L,P)}this.setIndex(p),this.setAttribute("position",new Mi(_,3)),this.setAttribute("normal",new Mi(v,3)),this.setAttribute("uv",new Mi(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new il(e.width,e.height,e.widthSegments,e.heightSegments)}}class ru extends ti{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Ke(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Dm,this.normalScale=new lt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ii,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ri extends ru{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new lt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return st(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ke(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ke(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ke(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class jx extends ti{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Ov,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class qx extends ti{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function ia(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function Yx(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Kx(n){function e(s,r){return n[s]-n[r]}const t=n.length,i=new Array(t);for(let s=0;s!==t;++s)i[s]=s;return i.sort(e),i}function ph(n,e,t){const i=n.length,s=new n.constructor(i);for(let r=0,o=0;o!==i;++r){const a=t[r]*e;for(let l=0;l!==e;++l)s[o++]=n[a+l]}return s}function Ym(n,e,t,i){let s=1,r=n[0];for(;r!==void 0&&r[i]===void 0;)r=n[s++];if(r===void 0)return;let o=r[i];if(o!==void 0)if(Array.isArray(o))do o=r[i],o!==void 0&&(e.push(r.time),t.push.apply(t,o)),r=n[s++];while(r!==void 0);else if(o.toArray!==void 0)do o=r[i],o!==void 0&&(e.push(r.time),o.toArray(t,t.length)),r=n[s++];while(r!==void 0);else do o=r[i],o!==void 0&&(e.push(r.time),t.push(o)),r=n[s++];while(r!==void 0)}class Mo{constructor(e,t,i,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,s=t[i],r=t[i-1];n:{e:{let o;t:{i:if(!(e<s)){for(let a=i+2;;){if(s===void 0){if(e<r)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(r=s,s=t[++i],e<s)break e}o=t.length;break t}if(!(e>=r)){const a=t[1];e<a&&(i=2,r=a);for(let l=i-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(s=r,r=t[--i-1],e>=r)break e}o=i,i=0;break t}break n}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(s=t[i],r=t[i-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,r,s)}return this.interpolate_(i,r,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=e*s;for(let o=0;o!==s;++o)t[o]=i[r+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Zx extends Mo{constructor(e,t,i,s){super(e,t,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Pf,endingEnd:Pf}}intervalChanged_(e,t,i){const s=this.parameterPositions;let r=e-2,o=e+1,a=s[r],l=s[o];if(a===void 0)switch(this.getSettings_().endingStart){case If:r=e,a=2*t-i;break;case Df:r=s.length-2,a=t+s[r]-s[r+1];break;default:r=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case If:o=e,l=2*i-t;break;case Df:o=1,l=i+s[1]-s[0];break;default:o=e-1,l=t}const c=(i-t)*.5,d=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=r*d,this._offsetNext=o*d}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=this._offsetPrev,u=this._offsetNext,f=this._weightPrev,p=this._weightNext,_=(i-t)/(s-t),v=_*_,g=v*_,m=-f*g+2*f*v-f*_,x=(1+f)*g+(-1.5-2*f)*v+(-.5+f)*_+1,y=(-1-p)*g+(1.5+p)*v+.5*_,b=p*g-p*v;for(let L=0;L!==a;++L)r[L]=m*o[d+L]+x*o[c+L]+y*o[l+L]+b*o[u+L];return r}}class Jx extends Mo{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=(i-t)/(s-t),u=1-d;for(let f=0;f!==a;++f)r[f]=o[c+f]*u+o[l+f]*d;return r}}class Qx extends Mo{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class oi{constructor(e,t,i,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ia(t,this.TimeBufferType),this.values=ia(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:ia(e.times,Array),values:ia(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(i.interpolation=s)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Qx(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Jx(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Zx(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case vo:t=this.InterpolantFactoryMethodDiscrete;break;case xo:t=this.InterpolantFactoryMethodLinear;break;case xl:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return vo;case this.InterpolantFactoryMethodLinear:return xo;case this.InterpolantFactoryMethodSmooth:return xl}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]*=e}return this}trim(e,t){const i=this.times,s=i.length;let r=0,o=s-1;for(;r!==s&&i[r]<e;)++r;for(;o!==-1&&i[o]>t;)--o;if(++o,r!==0||o!==s){r>=o&&(o=Math.max(o,1),r=o-1);const a=this.getValueSize();this.times=i.slice(r,o),this.values=this.values.slice(r*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,s=this.values,r=i.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==r;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(s!==void 0&&Yx(s))for(let a=0,l=s.length;a!==l;++a){const c=s[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),s=this.getInterpolation()===xl,r=e.length-1;let o=1;for(let a=1;a<r;++a){let l=!1;const c=e[a],d=e[a+1];if(c!==d&&(a!==1||c!==e[0]))if(s)l=!0;else{const u=a*i,f=u-i,p=u+i;for(let _=0;_!==i;++_){const v=t[u+_];if(v!==t[f+_]||v!==t[p+_]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const u=a*i,f=o*i;for(let p=0;p!==i;++p)t[f+p]=t[u+p]}++o}}if(r>0){e[o]=e[r];for(let a=r*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,s=new i(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}oi.prototype.TimeBufferType=Float32Array;oi.prototype.ValueBufferType=Float32Array;oi.prototype.DefaultInterpolation=xo;class Ir extends oi{constructor(e,t,i){super(e,t,i)}}Ir.prototype.ValueTypeName="bool";Ir.prototype.ValueBufferType=Array;Ir.prototype.DefaultInterpolation=vo;Ir.prototype.InterpolantFactoryMethodLinear=void 0;Ir.prototype.InterpolantFactoryMethodSmooth=void 0;class Km extends oi{}Km.prototype.ValueTypeName="color";class Tr extends oi{}Tr.prototype.ValueTypeName="number";class eb extends Mo{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(s-t);let c=e*a;for(let d=c+a;c!==d;c+=4)ss.slerpFlat(r,0,o,c-a,o,c,l);return r}}class wr extends oi{InterpolantFactoryMethodLinear(e){return new eb(this.times,this.values,this.getValueSize(),e)}}wr.prototype.ValueTypeName="quaternion";wr.prototype.InterpolantFactoryMethodSmooth=void 0;class Dr extends oi{constructor(e,t,i){super(e,t,i)}}Dr.prototype.ValueTypeName="string";Dr.prototype.ValueBufferType=Array;Dr.prototype.DefaultInterpolation=vo;Dr.prototype.InterpolantFactoryMethodLinear=void 0;Dr.prototype.InterpolantFactoryMethodSmooth=void 0;class Ar extends oi{}Ar.prototype.ValueTypeName="vector";class tb{constructor(e="",t=-1,i=[],s=Nv){this.name=e,this.tracks=i,this.duration=t,this.blendMode=s,this.uuid=Wn(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,s=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(ib(i[o]).scale(s));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],i=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,o=i.length;r!==o;++r)t.push(oi.toJSON(i[r]));return s}static CreateFromMorphTargetSequence(e,t,i,s){const r=t.length,o=[];for(let a=0;a<r;a++){let l=[],c=[];l.push((a+r-1)%r,a,(a+1)%r),c.push(0,1,0);const d=Kx(l);l=ph(l,1,d),c=ph(c,1,d),!s&&l[0]===0&&(l.push(r),c.push(c[0])),o.push(new Tr(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const s=e;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===t)return i[s];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const s={},r=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],d=c.name.match(r);if(d&&d.length>1){const u=d[1];let f=s[u];f||(s[u]=f=[]),f.push(c)}}const o=[];for(const a in s)o.push(this.CreateFromMorphTargetSequence(a,s[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(u,f,p,_,v){if(p.length!==0){const g=[],m=[];Ym(p,g,m,_),g.length!==0&&v.push(new u(f,g,m))}},s=[],r=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let u=0;u<c.length;u++){const f=c[u].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const p={};let _;for(_=0;_<f.length;_++)if(f[_].morphTargets)for(let v=0;v<f[_].morphTargets.length;v++)p[f[_].morphTargets[v]]=-1;for(const v in p){const g=[],m=[];for(let x=0;x!==f[_].morphTargets.length;++x){const y=f[_];g.push(y.time),m.push(y.morphTarget===v?1:0)}s.push(new Tr(".morphTargetInfluence["+v+"]",g,m))}l=p.length*o}else{const p=".bones["+t[u].name+"]";i(Ar,p+".position",f,"pos",s),i(wr,p+".quaternion",f,"rot",s),i(Ar,p+".scale",f,"scl",s)}}return s.length===0?null:new this(r,l,s,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,s=e.length;i!==s;++i){const r=this.tracks[i];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function nb(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Tr;case"vector":case"vector2":case"vector3":case"vector4":return Ar;case"color":return Km;case"quaternion":return wr;case"bool":case"boolean":return Ir;case"string":return Dr}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function ib(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=nb(n.type);if(n.times===void 0){const t=[],i=[];Ym(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Wi={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class sb{constructor(e,t,i){const s=this;let r=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(d){a++,r===!1&&s.onStart!==void 0&&s.onStart(d,o,a),r=!0},this.itemEnd=function(d){o++,s.onProgress!==void 0&&s.onProgress(d,o,a),o===a&&(r=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(d){s.onError!==void 0&&s.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,u){return c.push(d,u),this},this.removeHandler=function(d){const u=c.indexOf(d);return u!==-1&&c.splice(u,2),this},this.getHandler=function(d){for(let u=0,f=c.length;u<f;u+=2){const p=c[u],_=c[u+1];if(p.global&&(p.lastIndex=0),p.test(d))return _}return null}}}const rb=new sb;class rs{constructor(e){this.manager=e!==void 0?e:rb,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(s,r){i.load(e,s,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}rs.DEFAULT_MATERIAL_NAME="__DEFAULT";const pi={};class ob extends Error{constructor(e,t){super(e),this.response=t}}class Na extends rs{constructor(e){super(e)}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=Wi.get(e);if(r!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(pi[e]!==void 0){pi[e].push({onLoad:t,onProgress:i,onError:s});return}pi[e]=[],pi[e].push({onLoad:t,onProgress:i,onError:s});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const d=pi[e],u=c.body.getReader(),f=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),p=f?parseInt(f):0,_=p!==0;let v=0;const g=new ReadableStream({start(m){x();function x(){u.read().then(({done:y,value:b})=>{if(y)m.close();else{v+=b.byteLength;const L=new ProgressEvent("progress",{lengthComputable:_,loaded:v,total:p});for(let P=0,I=d.length;P<I;P++){const N=d[P];N.onProgress&&N.onProgress(L)}m.enqueue(b),x()}},y=>{m.error(y)})}}});return new Response(g)}else throw new ob(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>new DOMParser().parseFromString(d,a));case"json":return c.json();default:if(a===void 0)return c.text();{const u=/charset="?([^;"\s]*)"?/i.exec(a),f=u&&u[1]?u[1].toLowerCase():void 0,p=new TextDecoder(f);return c.arrayBuffer().then(_=>p.decode(_))}}}).then(c=>{Wi.add(e,c);const d=pi[e];delete pi[e];for(let u=0,f=d.length;u<f;u++){const p=d[u];p.onLoad&&p.onLoad(c)}}).catch(c=>{const d=pi[e];if(d===void 0)throw this.manager.itemError(e),c;delete pi[e];for(let u=0,f=d.length;u<f;u++){const p=d[u];p.onError&&p.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Zm extends rs{constructor(e){super(e)}load(e,t,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=Wi.get(e);if(o!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;const a=bo("img");function l(){d(),Wi.add(e,this),t&&t(this),r.manager.itemEnd(e)}function c(u){d(),s&&s(u),r.manager.itemError(e),r.manager.itemEnd(e)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a}}class ab extends rs{constructor(e){super(e)}load(e,t,i,s){const r=new eu;r.colorSpace=It;const o=new Zm(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(d){r.images[c]=d,a++,a===6&&(r.needsUpdate=!0,t&&t(r))},void 0,s)}for(let c=0;c<e.length;++c)l(c);return r}}class Jm extends rs{constructor(e){super(e)}load(e,t,i,s){const r=new Vt,o=new Zm(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){r.image=a,r.needsUpdate=!0,t!==void 0&&t(r)},i,s),r}}class Eo extends At{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ke(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class lb extends Eo{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(At.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ke(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Gl=new nt,mh=new G,gh=new G;class ou{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new lt(512,512),this.map=null,this.mapPass=null,this.matrix=new nt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new iu,this._frameExtents=new lt(1,1),this._viewportCount=1,this._viewports=[new pt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;mh.setFromMatrixPosition(e.matrixWorld),t.position.copy(mh),gh.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(gh),t.updateMatrixWorld(),Gl.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Gl),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Gl)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class cb extends ou{constructor(){super(new on(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Mr*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;(i!==t.fov||s!==t.aspect||r!==t.far)&&(t.fov=i,t.aspect=s,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class db extends Eo{constructor(e,t,i=0,s=Math.PI/3,r=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(At.DEFAULT_UP),this.updateMatrix(),this.target=new At,this.distance=i,this.angle=s,this.penumbra=r,this.decay=o,this.map=null,this.shadow=new cb}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const _h=new nt,qr=new G,$l=new G;class ub extends ou{constructor(){super(new on(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new lt(4,2),this._viewportCount=6,this._viewports=[new pt(2,1,1,1),new pt(0,1,1,1),new pt(3,1,1,1),new pt(1,1,1,1),new pt(3,0,1,1),new pt(1,0,1,1)],this._cubeDirections=[new G(1,0,0),new G(-1,0,0),new G(0,0,1),new G(0,0,-1),new G(0,1,0),new G(0,-1,0)],this._cubeUps=[new G(0,1,0),new G(0,1,0),new G(0,1,0),new G(0,1,0),new G(0,0,1),new G(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,s=this.matrix,r=e.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),qr.setFromMatrixPosition(e.matrixWorld),i.position.copy(qr),$l.copy(i.position),$l.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt($l),i.updateMatrixWorld(),s.makeTranslation(-qr.x,-qr.y,-qr.z),_h.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_h)}}class fb extends Eo{constructor(e,t,i=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new ub}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class au extends Gm{constructor(e=-1,t=1,i=1,s=-1,r=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=s,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,s,r,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let r=i-e,o=i+e,a=s+t,l=s-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=c*this.view.offsetX,o=r+c*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(r,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class hb extends ou{constructor(){super(new au(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class hd extends Eo{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(At.DEFAULT_UP),this.updateMatrix(),this.target=new At,this.shadow=new hb}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class pb extends Eo{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class lo{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,s=e.length;i<s;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class mb extends rs{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=Wi.get(e);if(o!==void 0){if(r.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),r.manager.itemEnd(e)}).catch(c=>{s&&s(c)});return}return setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(c){return Wi.add(e,c),t&&t(c),r.manager.itemEnd(e),c}).catch(function(c){s&&s(c),Wi.remove(e),r.manager.itemError(e),r.manager.itemEnd(e)});Wi.add(e,l),r.manager.itemStart(e)}}class gb extends on{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}const lu="\\[\\]\\.:\\/",_b=new RegExp("["+lu+"]","g"),cu="[^"+lu+"]",vb="[^"+lu.replace("\\.","")+"]",xb=/((?:WC+[\/:])*)/.source.replace("WC",cu),bb=/(WCOD+)?/.source.replace("WCOD",vb),yb=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",cu),Sb=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",cu),Mb=new RegExp("^"+xb+bb+yb+Sb+"$"),Eb=["material","materials","bones","map"];class Tb{constructor(e,t,i){const s=i||yt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,s=this._bindings[i];s!==void 0&&s.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,r=i.length;s!==r;++s)i[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class yt{constructor(e,t,i){this.path=t,this.parsedPath=i||yt.parseTrackName(t),this.node=yt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new yt.Composite(e,t,i):new yt(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(_b,"")}static parseTrackName(e){const t=Mb.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const r=i.nodeName.substring(s+1);Eb.indexOf(r)!==-1&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=r)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(r){for(let o=0;o<r.length;o++){const a=r[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},s=i(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)e[t++]=i[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,s=t.propertyName;let r=t.propertyIndex;if(e||(e=yt.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===c){c=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[s];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+s+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(r!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[r]!==void 0&&(r=e.morphTargetDictionary[r])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=s;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}yt.Composite=Tb;yt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};yt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};yt.prototype.GetterByBindingType=[yt.prototype._getValue_direct,yt.prototype._getValue_array,yt.prototype._getValue_arrayElement,yt.prototype._getValue_toArray];yt.prototype.SetterByBindingTypeAndVersioning=[[yt.prototype._setValue_direct,yt.prototype._setValue_direct_setNeedsUpdate,yt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[yt.prototype._setValue_array,yt.prototype._setValue_array_setNeedsUpdate,yt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[yt.prototype._setValue_arrayElement,yt.prototype._setValue_arrayElement_setNeedsUpdate,yt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[yt.prototype._setValue_fromArray,yt.prototype._setValue_fromArray_setNeedsUpdate,yt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];function vh(n,e,t,i){const s=wb(i);switch(t){case wm:return n*e;case Cm:return n*e;case Rm:return n*e*2;case Yd:return n*e/s.components*s.byteLength;case Kd:return n*e/s.components*s.byteLength;case Lm:return n*e*2/s.components*s.byteLength;case Zd:return n*e*2/s.components*s.byteLength;case Am:return n*e*3/s.components*s.byteLength;case An:return n*e*4/s.components*s.byteLength;case Jd:return n*e*4/s.components*s.byteLength;case pa:case ma:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case ga:case _a:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Fc:case Hc:return Math.max(n,16)*Math.max(e,8)/4;case kc:case Bc:return Math.max(n,8)*Math.max(e,8)/2;case zc:case Vc:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case Gc:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case $c:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Wc:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case Xc:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case jc:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case qc:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Yc:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case Kc:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case Zc:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case Jc:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case Qc:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case ed:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case td:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case nd:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case id:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case va:case sd:case rd:return Math.ceil(n/4)*Math.ceil(e/4)*16;case Pm:case od:return Math.ceil(n/4)*Math.ceil(e/4)*8;case ad:case ld:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function wb(n){switch(n){case wi:case Mm:return{byteLength:1,components:1};case _o:case Em:case yo:return{byteLength:2,components:1};case jd:case qd:return{byteLength:2,components:4};case Ds:case Xd:case $n:return{byteLength:4,components:1};case Tm:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Wd}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Wd);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function Qm(){let n=null,e=!1,t=null,i=null;function s(r,o){t(r,o),i=n.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(s),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){n=r}}}function Ab(n){const e=new WeakMap;function t(a,l){const c=a.array,d=a.usage,u=c.byteLength,f=n.createBuffer();n.bindBuffer(l,f),n.bufferData(l,c,d),a.onUploadCallback();let p;if(c instanceof Float32Array)p=n.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?p=n.HALF_FLOAT:p=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)p=n.SHORT;else if(c instanceof Uint32Array)p=n.UNSIGNED_INT;else if(c instanceof Int32Array)p=n.INT;else if(c instanceof Int8Array)p=n.BYTE;else if(c instanceof Uint8Array)p=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)p=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:f,type:p,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:u}}function i(a,l,c){const d=l.array,u=l.updateRanges;if(n.bindBuffer(c,a),u.length===0)n.bufferSubData(c,0,d);else{u.sort((p,_)=>p.start-_.start);let f=0;for(let p=1;p<u.length;p++){const _=u[f],v=u[p];v.start<=_.start+_.count+1?_.count=Math.max(_.count,v.start+v.count-_.start):(++f,u[f]=v)}u.length=f+1;for(let p=0,_=u.length;p<_;p++){const v=u[p];n.bufferSubData(c,v.start*d.BYTES_PER_ELEMENT,d,v.start,v.count)}l.clearUpdateRanges()}l.onUploadCallback()}function s(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function r(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const d=e.get(a);(!d||d.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,a,l),c.version=a.version}}return{get:s,remove:r,update:o}}var Cb=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Rb=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Lb=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Pb=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Ib=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Db=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Nb=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Ub=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Ob=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,kb=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Fb=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Bb=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Hb=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,zb=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Vb=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Gb=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,$b=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Wb=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Xb=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,jb=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,qb=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Yb=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Kb=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Zb=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Jb=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Qb=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,ey=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,ty=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,ny=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,iy=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,sy="gl_FragColor = linearToOutputTexel( gl_FragColor );",ry=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,oy=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,ay=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,ly=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,cy=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,dy=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,uy=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fy=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,hy=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,py=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,my=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,gy=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,_y=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,vy=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,xy=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,by=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,yy=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Sy=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,My=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Ey=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Ty=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,wy=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Ay=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Cy=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Ry=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Ly=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Py=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Iy=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Dy=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Ny=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Uy=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Oy=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,ky=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Fy=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,By=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Hy=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,zy=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Vy=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Gy=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,$y=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Wy=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Xy=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,jy=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,qy=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Yy=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Ky=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Zy=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Jy=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Qy=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,e2=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,t2=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,n2=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,i2=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,s2=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,r2=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,o2=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,a2=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,l2=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,c2=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,d2=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,u2=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,f2=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,h2=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,p2=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,m2=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,g2=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,_2=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,v2=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,x2=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,b2=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,y2=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,S2=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,M2=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,E2=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,T2=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,w2=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const A2=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,C2=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,R2=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,L2=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,P2=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,I2=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,D2=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,N2=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,U2=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,O2=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,k2=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,F2=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,B2=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,H2=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,z2=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,V2=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,G2=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$2=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,W2=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,X2=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,j2=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,q2=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Y2=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,K2=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Z2=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,J2=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Q2=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,eS=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tS=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,nS=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,iS=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,sS=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,rS=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,oS=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,it={alphahash_fragment:Cb,alphahash_pars_fragment:Rb,alphamap_fragment:Lb,alphamap_pars_fragment:Pb,alphatest_fragment:Ib,alphatest_pars_fragment:Db,aomap_fragment:Nb,aomap_pars_fragment:Ub,batching_pars_vertex:Ob,batching_vertex:kb,begin_vertex:Fb,beginnormal_vertex:Bb,bsdfs:Hb,iridescence_fragment:zb,bumpmap_pars_fragment:Vb,clipping_planes_fragment:Gb,clipping_planes_pars_fragment:$b,clipping_planes_pars_vertex:Wb,clipping_planes_vertex:Xb,color_fragment:jb,color_pars_fragment:qb,color_pars_vertex:Yb,color_vertex:Kb,common:Zb,cube_uv_reflection_fragment:Jb,defaultnormal_vertex:Qb,displacementmap_pars_vertex:ey,displacementmap_vertex:ty,emissivemap_fragment:ny,emissivemap_pars_fragment:iy,colorspace_fragment:sy,colorspace_pars_fragment:ry,envmap_fragment:oy,envmap_common_pars_fragment:ay,envmap_pars_fragment:ly,envmap_pars_vertex:cy,envmap_physical_pars_fragment:by,envmap_vertex:dy,fog_vertex:uy,fog_pars_vertex:fy,fog_fragment:hy,fog_pars_fragment:py,gradientmap_pars_fragment:my,lightmap_pars_fragment:gy,lights_lambert_fragment:_y,lights_lambert_pars_fragment:vy,lights_pars_begin:xy,lights_toon_fragment:yy,lights_toon_pars_fragment:Sy,lights_phong_fragment:My,lights_phong_pars_fragment:Ey,lights_physical_fragment:Ty,lights_physical_pars_fragment:wy,lights_fragment_begin:Ay,lights_fragment_maps:Cy,lights_fragment_end:Ry,logdepthbuf_fragment:Ly,logdepthbuf_pars_fragment:Py,logdepthbuf_pars_vertex:Iy,logdepthbuf_vertex:Dy,map_fragment:Ny,map_pars_fragment:Uy,map_particle_fragment:Oy,map_particle_pars_fragment:ky,metalnessmap_fragment:Fy,metalnessmap_pars_fragment:By,morphinstance_vertex:Hy,morphcolor_vertex:zy,morphnormal_vertex:Vy,morphtarget_pars_vertex:Gy,morphtarget_vertex:$y,normal_fragment_begin:Wy,normal_fragment_maps:Xy,normal_pars_fragment:jy,normal_pars_vertex:qy,normal_vertex:Yy,normalmap_pars_fragment:Ky,clearcoat_normal_fragment_begin:Zy,clearcoat_normal_fragment_maps:Jy,clearcoat_pars_fragment:Qy,iridescence_pars_fragment:e2,opaque_fragment:t2,packing:n2,premultiplied_alpha_fragment:i2,project_vertex:s2,dithering_fragment:r2,dithering_pars_fragment:o2,roughnessmap_fragment:a2,roughnessmap_pars_fragment:l2,shadowmap_pars_fragment:c2,shadowmap_pars_vertex:d2,shadowmap_vertex:u2,shadowmask_pars_fragment:f2,skinbase_vertex:h2,skinning_pars_vertex:p2,skinning_vertex:m2,skinnormal_vertex:g2,specularmap_fragment:_2,specularmap_pars_fragment:v2,tonemapping_fragment:x2,tonemapping_pars_fragment:b2,transmission_fragment:y2,transmission_pars_fragment:S2,uv_pars_fragment:M2,uv_pars_vertex:E2,uv_vertex:T2,worldpos_vertex:w2,background_vert:A2,background_frag:C2,backgroundCube_vert:R2,backgroundCube_frag:L2,cube_vert:P2,cube_frag:I2,depth_vert:D2,depth_frag:N2,distanceRGBA_vert:U2,distanceRGBA_frag:O2,equirect_vert:k2,equirect_frag:F2,linedashed_vert:B2,linedashed_frag:H2,meshbasic_vert:z2,meshbasic_frag:V2,meshlambert_vert:G2,meshlambert_frag:$2,meshmatcap_vert:W2,meshmatcap_frag:X2,meshnormal_vert:j2,meshnormal_frag:q2,meshphong_vert:Y2,meshphong_frag:K2,meshphysical_vert:Z2,meshphysical_frag:J2,meshtoon_vert:Q2,meshtoon_frag:eS,points_vert:tS,points_frag:nS,shadow_vert:iS,shadow_frag:sS,sprite_vert:rS,sprite_frag:oS},Ae={common:{diffuse:{value:new Ke(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new tt},alphaMap:{value:null},alphaMapTransform:{value:new tt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new tt}},envmap:{envMap:{value:null},envMapRotation:{value:new tt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new tt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new tt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new tt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new tt},normalScale:{value:new lt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new tt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new tt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new tt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new tt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ke(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ke(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new tt},alphaTest:{value:0},uvTransform:{value:new tt}},sprite:{diffuse:{value:new Ke(16777215)},opacity:{value:1},center:{value:new lt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new tt},alphaMap:{value:null},alphaMapTransform:{value:new tt},alphaTest:{value:0}}},Kn={basic:{uniforms:rn([Ae.common,Ae.specularmap,Ae.envmap,Ae.aomap,Ae.lightmap,Ae.fog]),vertexShader:it.meshbasic_vert,fragmentShader:it.meshbasic_frag},lambert:{uniforms:rn([Ae.common,Ae.specularmap,Ae.envmap,Ae.aomap,Ae.lightmap,Ae.emissivemap,Ae.bumpmap,Ae.normalmap,Ae.displacementmap,Ae.fog,Ae.lights,{emissive:{value:new Ke(0)}}]),vertexShader:it.meshlambert_vert,fragmentShader:it.meshlambert_frag},phong:{uniforms:rn([Ae.common,Ae.specularmap,Ae.envmap,Ae.aomap,Ae.lightmap,Ae.emissivemap,Ae.bumpmap,Ae.normalmap,Ae.displacementmap,Ae.fog,Ae.lights,{emissive:{value:new Ke(0)},specular:{value:new Ke(1118481)},shininess:{value:30}}]),vertexShader:it.meshphong_vert,fragmentShader:it.meshphong_frag},standard:{uniforms:rn([Ae.common,Ae.envmap,Ae.aomap,Ae.lightmap,Ae.emissivemap,Ae.bumpmap,Ae.normalmap,Ae.displacementmap,Ae.roughnessmap,Ae.metalnessmap,Ae.fog,Ae.lights,{emissive:{value:new Ke(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:it.meshphysical_vert,fragmentShader:it.meshphysical_frag},toon:{uniforms:rn([Ae.common,Ae.aomap,Ae.lightmap,Ae.emissivemap,Ae.bumpmap,Ae.normalmap,Ae.displacementmap,Ae.gradientmap,Ae.fog,Ae.lights,{emissive:{value:new Ke(0)}}]),vertexShader:it.meshtoon_vert,fragmentShader:it.meshtoon_frag},matcap:{uniforms:rn([Ae.common,Ae.bumpmap,Ae.normalmap,Ae.displacementmap,Ae.fog,{matcap:{value:null}}]),vertexShader:it.meshmatcap_vert,fragmentShader:it.meshmatcap_frag},points:{uniforms:rn([Ae.points,Ae.fog]),vertexShader:it.points_vert,fragmentShader:it.points_frag},dashed:{uniforms:rn([Ae.common,Ae.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:it.linedashed_vert,fragmentShader:it.linedashed_frag},depth:{uniforms:rn([Ae.common,Ae.displacementmap]),vertexShader:it.depth_vert,fragmentShader:it.depth_frag},normal:{uniforms:rn([Ae.common,Ae.bumpmap,Ae.normalmap,Ae.displacementmap,{opacity:{value:1}}]),vertexShader:it.meshnormal_vert,fragmentShader:it.meshnormal_frag},sprite:{uniforms:rn([Ae.sprite,Ae.fog]),vertexShader:it.sprite_vert,fragmentShader:it.sprite_frag},background:{uniforms:{uvTransform:{value:new tt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:it.background_vert,fragmentShader:it.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new tt}},vertexShader:it.backgroundCube_vert,fragmentShader:it.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:it.cube_vert,fragmentShader:it.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:it.equirect_vert,fragmentShader:it.equirect_frag},distanceRGBA:{uniforms:rn([Ae.common,Ae.displacementmap,{referencePosition:{value:new G},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:it.distanceRGBA_vert,fragmentShader:it.distanceRGBA_frag},shadow:{uniforms:rn([Ae.lights,Ae.fog,{color:{value:new Ke(0)},opacity:{value:1}}]),vertexShader:it.shadow_vert,fragmentShader:it.shadow_frag}};Kn.physical={uniforms:rn([Kn.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new tt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new tt},clearcoatNormalScale:{value:new lt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new tt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new tt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new tt},sheen:{value:0},sheenColor:{value:new Ke(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new tt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new tt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new tt},transmissionSamplerSize:{value:new lt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new tt},attenuationDistance:{value:0},attenuationColor:{value:new Ke(0)},specularColor:{value:new Ke(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new tt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new tt},anisotropyVector:{value:new lt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new tt}}]),vertexShader:it.meshphysical_vert,fragmentShader:it.meshphysical_frag};const sa={r:0,b:0,g:0},gs=new ii,aS=new nt;function lS(n,e,t,i,s,r,o){const a=new Ke(0);let l=r===!0?0:1,c,d,u=null,f=0,p=null;function _(y){let b=y.isScene===!0?y.background:null;return b&&b.isTexture&&(b=(y.backgroundBlurriness>0?t:e).get(b)),b}function v(y){let b=!1;const L=_(y);L===null?m(a,l):L&&L.isColor&&(m(L,1),b=!0);const P=n.xr.getEnvironmentBlendMode();P==="additive"?i.buffers.color.setClear(0,0,0,1,o):P==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||b)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function g(y,b){const L=_(b);L&&(L.isCubeTexture||L.mapping===tl)?(d===void 0&&(d=new xn(new So(1,1,1),new ns({name:"BackgroundCubeMaterial",uniforms:Er(Kn.backgroundCube.uniforms),vertexShader:Kn.backgroundCube.vertexShader,fragmentShader:Kn.backgroundCube.fragmentShader,side:un,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(P,I,N){this.matrixWorld.copyPosition(N.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(d)),gs.copy(b.backgroundRotation),gs.x*=-1,gs.y*=-1,gs.z*=-1,L.isCubeTexture&&L.isRenderTargetTexture===!1&&(gs.y*=-1,gs.z*=-1),d.material.uniforms.envMap.value=L,d.material.uniforms.flipEnvMap.value=L.isCubeTexture&&L.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=b.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(aS.makeRotationFromEuler(gs)),d.material.toneMapped=ot.getTransfer(L.colorSpace)!==St,(u!==L||f!==L.version||p!==n.toneMapping)&&(d.material.needsUpdate=!0,u=L,f=L.version,p=n.toneMapping),d.layers.enableAll(),y.unshift(d,d.geometry,d.material,0,0,null)):L&&L.isTexture&&(c===void 0&&(c=new xn(new il(2,2),new ns({name:"BackgroundMaterial",uniforms:Er(Kn.background.uniforms),vertexShader:Kn.background.vertexShader,fragmentShader:Kn.background.fragmentShader,side:Ti,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(c)),c.material.uniforms.t2D.value=L,c.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,c.material.toneMapped=ot.getTransfer(L.colorSpace)!==St,L.matrixAutoUpdate===!0&&L.updateMatrix(),c.material.uniforms.uvTransform.value.copy(L.matrix),(u!==L||f!==L.version||p!==n.toneMapping)&&(c.material.needsUpdate=!0,u=L,f=L.version,p=n.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null))}function m(y,b){y.getRGB(sa,Vm(n)),i.buffers.color.setClear(sa.r,sa.g,sa.b,b,o)}function x(){d!==void 0&&(d.geometry.dispose(),d.material.dispose()),c!==void 0&&(c.geometry.dispose(),c.material.dispose())}return{getClearColor:function(){return a},setClearColor:function(y,b=1){a.set(y),l=b,m(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,m(a,l)},render:v,addToRenderList:g,dispose:x}}function cS(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},s=f(null);let r=s,o=!1;function a(M,R,O,U,X){let ee=!1;const Y=u(U,O,R);r!==Y&&(r=Y,c(r.object)),ee=p(M,U,O,X),ee&&_(M,U,O,X),X!==null&&e.update(X,n.ELEMENT_ARRAY_BUFFER),(ee||o)&&(o=!1,b(M,R,O,U),X!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(X).buffer))}function l(){return n.createVertexArray()}function c(M){return n.bindVertexArray(M)}function d(M){return n.deleteVertexArray(M)}function u(M,R,O){const U=O.wireframe===!0;let X=i[M.id];X===void 0&&(X={},i[M.id]=X);let ee=X[R.id];ee===void 0&&(ee={},X[R.id]=ee);let Y=ee[U];return Y===void 0&&(Y=f(l()),ee[U]=Y),Y}function f(M){const R=[],O=[],U=[];for(let X=0;X<t;X++)R[X]=0,O[X]=0,U[X]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:R,enabledAttributes:O,attributeDivisors:U,object:M,attributes:{},index:null}}function p(M,R,O,U){const X=r.attributes,ee=R.attributes;let Y=0;const oe=O.getAttributes();for(const W in oe)if(oe[W].location>=0){const Te=X[W];let Ie=ee[W];if(Ie===void 0&&(W==="instanceMatrix"&&M.instanceMatrix&&(Ie=M.instanceMatrix),W==="instanceColor"&&M.instanceColor&&(Ie=M.instanceColor)),Te===void 0||Te.attribute!==Ie||Ie&&Te.data!==Ie.data)return!0;Y++}return r.attributesNum!==Y||r.index!==U}function _(M,R,O,U){const X={},ee=R.attributes;let Y=0;const oe=O.getAttributes();for(const W in oe)if(oe[W].location>=0){let Te=ee[W];Te===void 0&&(W==="instanceMatrix"&&M.instanceMatrix&&(Te=M.instanceMatrix),W==="instanceColor"&&M.instanceColor&&(Te=M.instanceColor));const Ie={};Ie.attribute=Te,Te&&Te.data&&(Ie.data=Te.data),X[W]=Ie,Y++}r.attributes=X,r.attributesNum=Y,r.index=U}function v(){const M=r.newAttributes;for(let R=0,O=M.length;R<O;R++)M[R]=0}function g(M){m(M,0)}function m(M,R){const O=r.newAttributes,U=r.enabledAttributes,X=r.attributeDivisors;O[M]=1,U[M]===0&&(n.enableVertexAttribArray(M),U[M]=1),X[M]!==R&&(n.vertexAttribDivisor(M,R),X[M]=R)}function x(){const M=r.newAttributes,R=r.enabledAttributes;for(let O=0,U=R.length;O<U;O++)R[O]!==M[O]&&(n.disableVertexAttribArray(O),R[O]=0)}function y(M,R,O,U,X,ee,Y){Y===!0?n.vertexAttribIPointer(M,R,O,X,ee):n.vertexAttribPointer(M,R,O,U,X,ee)}function b(M,R,O,U){v();const X=U.attributes,ee=O.getAttributes(),Y=R.defaultAttributeValues;for(const oe in ee){const W=ee[oe];if(W.location>=0){let be=X[oe];if(be===void 0&&(oe==="instanceMatrix"&&M.instanceMatrix&&(be=M.instanceMatrix),oe==="instanceColor"&&M.instanceColor&&(be=M.instanceColor)),be!==void 0){const Te=be.normalized,Ie=be.itemSize,He=e.get(be);if(He===void 0)continue;const at=He.buffer,de=He.type,ye=He.bytesPerElement,we=de===n.INT||de===n.UNSIGNED_INT||be.gpuType===Xd;if(be.isInterleavedBufferAttribute){const F=be.data,ue=F.stride,ce=be.offset;if(F.isInstancedInterleavedBuffer){for(let me=0;me<W.locationSize;me++)m(W.location+me,F.meshPerAttribute);M.isInstancedMesh!==!0&&U._maxInstanceCount===void 0&&(U._maxInstanceCount=F.meshPerAttribute*F.count)}else for(let me=0;me<W.locationSize;me++)g(W.location+me);n.bindBuffer(n.ARRAY_BUFFER,at);for(let me=0;me<W.locationSize;me++)y(W.location+me,Ie/W.locationSize,de,Te,ue*ye,(ce+Ie/W.locationSize*me)*ye,we)}else{if(be.isInstancedBufferAttribute){for(let F=0;F<W.locationSize;F++)m(W.location+F,be.meshPerAttribute);M.isInstancedMesh!==!0&&U._maxInstanceCount===void 0&&(U._maxInstanceCount=be.meshPerAttribute*be.count)}else for(let F=0;F<W.locationSize;F++)g(W.location+F);n.bindBuffer(n.ARRAY_BUFFER,at);for(let F=0;F<W.locationSize;F++)y(W.location+F,Ie/W.locationSize,de,Te,Ie*ye,Ie/W.locationSize*F*ye,we)}}else if(Y!==void 0){const Te=Y[oe];if(Te!==void 0)switch(Te.length){case 2:n.vertexAttrib2fv(W.location,Te);break;case 3:n.vertexAttrib3fv(W.location,Te);break;case 4:n.vertexAttrib4fv(W.location,Te);break;default:n.vertexAttrib1fv(W.location,Te)}}}}x()}function L(){N();for(const M in i){const R=i[M];for(const O in R){const U=R[O];for(const X in U)d(U[X].object),delete U[X];delete R[O]}delete i[M]}}function P(M){if(i[M.id]===void 0)return;const R=i[M.id];for(const O in R){const U=R[O];for(const X in U)d(U[X].object),delete U[X];delete R[O]}delete i[M.id]}function I(M){for(const R in i){const O=i[R];if(O[M.id]===void 0)continue;const U=O[M.id];for(const X in U)d(U[X].object),delete U[X];delete O[M.id]}}function N(){w(),o=!0,r!==s&&(r=s,c(r.object))}function w(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:a,reset:N,resetDefaultState:w,dispose:L,releaseStatesOfGeometry:P,releaseStatesOfProgram:I,initAttributes:v,enableAttribute:g,disableUnusedAttributes:x}}function dS(n,e,t){let i;function s(c){i=c}function r(c,d){n.drawArrays(i,c,d),t.update(d,i,1)}function o(c,d,u){u!==0&&(n.drawArraysInstanced(i,c,d,u),t.update(d,i,u))}function a(c,d,u){if(u===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,d,0,u);let p=0;for(let _=0;_<u;_++)p+=d[_];t.update(p,i,1)}function l(c,d,u,f){if(u===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let _=0;_<c.length;_++)o(c[_],d[_],f[_]);else{p.multiDrawArraysInstancedWEBGL(i,c,0,d,0,f,0,u);let _=0;for(let v=0;v<u;v++)_+=d[v]*f[v];t.update(_,i,1)}}this.setMode=s,this.render=r,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function uS(n,e,t,i){let s;function r(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const I=e.get("EXT_texture_filter_anisotropic");s=n.getParameter(I.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function o(I){return!(I!==An&&i.convert(I)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(I){const N=I===yo&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(I!==wi&&i.convert(I)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&I!==$n&&!N)}function l(I){if(I==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";I="mediump"}return I==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const d=l(c);d!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",d,"instead."),c=d);const u=t.logarithmicDepthBuffer===!0,f=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),p=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),_=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_TEXTURE_SIZE),g=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),m=n.getParameter(n.MAX_VERTEX_ATTRIBS),x=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),y=n.getParameter(n.MAX_VARYING_VECTORS),b=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),L=_>0,P=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:u,reverseDepthBuffer:f,maxTextures:p,maxVertexTextures:_,maxTextureSize:v,maxCubemapSize:g,maxAttributes:m,maxVertexUniforms:x,maxVaryings:y,maxFragmentUniforms:b,vertexTextures:L,maxSamples:P}}function fS(n){const e=this;let t=null,i=0,s=!1,r=!1;const o=new xs,a=new tt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,f){const p=u.length!==0||f||i!==0||s;return s=f,i=u.length,p},this.beginShadows=function(){r=!0,d(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(u,f){t=d(u,f,0)},this.setState=function(u,f,p){const _=u.clippingPlanes,v=u.clipIntersection,g=u.clipShadows,m=n.get(u);if(!s||_===null||_.length===0||r&&!g)r?d(null):c();else{const x=r?0:i,y=x*4;let b=m.clippingState||null;l.value=b,b=d(_,f,y,p);for(let L=0;L!==y;++L)b[L]=t[L];m.clippingState=b,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=x}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function d(u,f,p,_){const v=u!==null?u.length:0;let g=null;if(v!==0){if(g=l.value,_!==!0||g===null){const m=p+v*4,x=f.matrixWorldInverse;a.getNormalMatrix(x),(g===null||g.length<m)&&(g=new Float32Array(m));for(let y=0,b=p;y!==v;++y,b+=4)o.copy(u[y]).applyMatrix4(x,a),o.normal.toArray(g,b),g[b+3]=o.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,g}}function hS(n){let e=new WeakMap;function t(o,a){return a===Uc?o.mapping=xr:a===Oc&&(o.mapping=br),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===Uc||a===Oc)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new Nx(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",s),t(c.texture,o.mapping)}else return null}}return o}function s(o){const a=o.target;a.removeEventListener("dispose",s);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function r(){e=new WeakMap}return{get:i,dispose:r}}const sr=4,xh=[.125,.215,.35,.446,.526,.582],Ts=20,Wl=new au,bh=new Ke;let Xl=null,jl=0,ql=0,Yl=!1;const bs=(1+Math.sqrt(5))/2,er=1/bs,yh=[new G(-bs,er,0),new G(bs,er,0),new G(-er,0,bs),new G(er,0,bs),new G(0,bs,-er),new G(0,bs,er),new G(-1,1,-1),new G(1,1,-1),new G(-1,1,1),new G(1,1,1)];class Sh{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,s=100){Xl=this._renderer.getRenderTarget(),jl=this._renderer.getActiveCubeFace(),ql=this._renderer.getActiveMipmapLevel(),Yl=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,i,s,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Th(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Eh(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Xl,jl,ql),this._renderer.xr.enabled=Yl,e.scissorTest=!1,ra(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===xr||e.mapping===br?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Xl=this._renderer.getRenderTarget(),jl=this._renderer.getActiveCubeFace(),ql=this._renderer.getActiveMipmapLevel(),Yl=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:vn,minFilter:vn,generateMipmaps:!1,type:yo,format:An,colorSpace:Qt,depthBuffer:!1},s=Mh(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Mh(e,t,i);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=pS(r)),this._blurMaterial=mS(r,e,t)}return s}_compileMaterial(e){const t=new xn(this._lodPlanes[0],e);this._renderer.compile(t,Wl)}_sceneToCubeUV(e,t,i,s){const a=new on(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,u=d.autoClear,f=d.toneMapping;d.getClearColor(bh),d.toneMapping=Ki,d.autoClear=!1;const p=new As({name:"PMREM.Background",side:un,depthWrite:!1,depthTest:!1}),_=new xn(new So,p);let v=!1;const g=e.background;g?g.isColor&&(p.color.copy(g),e.background=null,v=!0):(p.color.copy(bh),v=!0);for(let m=0;m<6;m++){const x=m%3;x===0?(a.up.set(0,l[m],0),a.lookAt(c[m],0,0)):x===1?(a.up.set(0,0,l[m]),a.lookAt(0,c[m],0)):(a.up.set(0,l[m],0),a.lookAt(0,0,c[m]));const y=this._cubeSize;ra(s,x*y,m>2?y:0,y,y),d.setRenderTarget(s),v&&d.render(_,a),d.render(e,a)}_.geometry.dispose(),_.material.dispose(),d.toneMapping=f,d.autoClear=u,e.background=g}_textureToCubeUV(e,t){const i=this._renderer,s=e.mapping===xr||e.mapping===br;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=Th()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Eh());const r=s?this._cubemapMaterial:this._equirectMaterial,o=new xn(this._lodPlanes[0],r),a=r.uniforms;a.envMap.value=e;const l=this._cubeSize;ra(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,Wl)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const s=this._lodPlanes.length;for(let r=1;r<s;r++){const o=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=yh[(s-r-1)%yh.length];this._blur(e,r-1,r,o,a)}t.autoClear=i}_blur(e,t,i,s,r){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,s,"latitudinal",r),this._halfBlur(o,e,i,i,s,"longitudinal",r)}_halfBlur(e,t,i,s,r,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,u=new xn(this._lodPlanes[s],c),f=c.uniforms,p=this._sizeLods[i]-1,_=isFinite(r)?Math.PI/(2*p):2*Math.PI/(2*Ts-1),v=r/_,g=isFinite(r)?1+Math.floor(d*v):Ts;g>Ts&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${Ts}`);const m=[];let x=0;for(let I=0;I<Ts;++I){const N=I/v,w=Math.exp(-N*N/2);m.push(w),I===0?x+=w:I<g&&(x+=2*w)}for(let I=0;I<m.length;I++)m[I]=m[I]/x;f.envMap.value=e.texture,f.samples.value=g,f.weights.value=m,f.latitudinal.value=o==="latitudinal",a&&(f.poleAxis.value=a);const{_lodMax:y}=this;f.dTheta.value=_,f.mipInt.value=y-i;const b=this._sizeLods[s],L=3*b*(s>y-sr?s-y+sr:0),P=4*(this._cubeSize-b);ra(t,L,P,3*b,2*b),l.setRenderTarget(t),l.render(u,Wl)}}function pS(n){const e=[],t=[],i=[];let s=n;const r=n-sr+1+xh.length;for(let o=0;o<r;o++){const a=Math.pow(2,s);t.push(a);let l=1/a;o>n-sr?l=xh[o-n+sr-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),d=-c,u=1+c,f=[d,d,u,d,u,u,d,d,u,u,d,u],p=6,_=6,v=3,g=2,m=1,x=new Float32Array(v*_*p),y=new Float32Array(g*_*p),b=new Float32Array(m*_*p);for(let P=0;P<p;P++){const I=P%3*2/3-1,N=P>2?0:-1,w=[I,N,0,I+2/3,N,0,I+2/3,N+1,0,I,N,0,I+2/3,N+1,0,I,N+1,0];x.set(w,v*_*P),y.set(f,g*_*P);const M=[P,P,P,P,P,P];b.set(M,m*_*P)}const L=new jn;L.setAttribute("position",new Wt(x,v)),L.setAttribute("uv",new Wt(y,g)),L.setAttribute("faceIndex",new Wt(b,m)),e.push(L),s>sr&&s--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function Mh(n,e,t){const i=new Ns(n,e,t);return i.texture.mapping=tl,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function ra(n,e,t,i,s){n.viewport.set(e,t,i,s),n.scissor.set(e,t,i,s)}function mS(n,e,t){const i=new Float32Array(Ts),s=new G(0,1,0);return new ns({name:"SphericalGaussianBlur",defines:{n:Ts,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:du(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Yi,depthTest:!1,depthWrite:!1})}function Eh(){return new ns({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:du(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Yi,depthTest:!1,depthWrite:!1})}function Th(){return new ns({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:du(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Yi,depthTest:!1,depthWrite:!1})}function du(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function gS(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===Uc||l===Oc,d=l===xr||l===br;if(c||d){let u=e.get(a);const f=u!==void 0?u.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==f)return t===null&&(t=new Sh(n)),u=c?t.fromEquirectangular(a,u):t.fromCubemap(a,u),u.texture.pmremVersion=a.pmremVersion,e.set(a,u),u.texture;if(u!==void 0)return u.texture;{const p=a.image;return c&&p&&p.height>0||d&&p&&s(p)?(t===null&&(t=new Sh(n)),u=c?t.fromEquirectangular(a):t.fromCubemap(a),u.texture.pmremVersion=a.pmremVersion,e.set(a,u),a.addEventListener("dispose",r),u.texture):null}}}return a}function s(a){let l=0;const c=6;for(let d=0;d<c;d++)a[d]!==void 0&&l++;return l===c}function r(a){const l=a.target;l.removeEventListener("dispose",r);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function _S(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let s;switch(i){case"WEBGL_depth_texture":s=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=n.getExtension(i)}return e[i]=s,s}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const s=t(i);return s===null&&ir("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function vS(n,e,t,i){const s={},r=new WeakMap;function o(u){const f=u.target;f.index!==null&&e.remove(f.index);for(const _ in f.attributes)e.remove(f.attributes[_]);f.removeEventListener("dispose",o),delete s[f.id];const p=r.get(f);p&&(e.remove(p),r.delete(f)),i.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function a(u,f){return s[f.id]===!0||(f.addEventListener("dispose",o),s[f.id]=!0,t.memory.geometries++),f}function l(u){const f=u.attributes;for(const p in f)e.update(f[p],n.ARRAY_BUFFER)}function c(u){const f=[],p=u.index,_=u.attributes.position;let v=0;if(p!==null){const x=p.array;v=p.version;for(let y=0,b=x.length;y<b;y+=3){const L=x[y+0],P=x[y+1],I=x[y+2];f.push(L,P,P,I,I,L)}}else if(_!==void 0){const x=_.array;v=_.version;for(let y=0,b=x.length/3-1;y<b;y+=3){const L=y+0,P=y+1,I=y+2;f.push(L,P,P,I,I,L)}}else return;const g=new(Um(f)?zm:Hm)(f,1);g.version=v;const m=r.get(u);m&&e.remove(m),r.set(u,g)}function d(u){const f=r.get(u);if(f){const p=u.index;p!==null&&f.version<p.version&&c(u)}else c(u);return r.get(u)}return{get:a,update:l,getWireframeAttribute:d}}function xS(n,e,t){let i;function s(f){i=f}let r,o;function a(f){r=f.type,o=f.bytesPerElement}function l(f,p){n.drawElements(i,p,r,f*o),t.update(p,i,1)}function c(f,p,_){_!==0&&(n.drawElementsInstanced(i,p,r,f*o,_),t.update(p,i,_))}function d(f,p,_){if(_===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,p,0,r,f,0,_);let g=0;for(let m=0;m<_;m++)g+=p[m];t.update(g,i,1)}function u(f,p,_,v){if(_===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let m=0;m<f.length;m++)c(f[m]/o,p[m],v[m]);else{g.multiDrawElementsInstancedWEBGL(i,p,0,r,f,0,v,0,_);let m=0;for(let x=0;x<_;x++)m+=p[x]*v[x];t.update(m,i,1)}}this.setMode=s,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=d,this.renderMultiDrawInstances=u}function bS(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(r,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(r/3);break;case n.LINES:t.lines+=a*(r/2);break;case n.LINE_STRIP:t.lines+=a*(r-1);break;case n.LINE_LOOP:t.lines+=a*r;break;case n.POINTS:t.points+=a*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:i}}function yS(n,e,t){const i=new WeakMap,s=new pt;function r(o,a,l){const c=o.morphTargetInfluences,d=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,u=d!==void 0?d.length:0;let f=i.get(a);if(f===void 0||f.count!==u){let M=function(){N.dispose(),i.delete(a),a.removeEventListener("dispose",M)};var p=M;f!==void 0&&f.texture.dispose();const _=a.morphAttributes.position!==void 0,v=a.morphAttributes.normal!==void 0,g=a.morphAttributes.color!==void 0,m=a.morphAttributes.position||[],x=a.morphAttributes.normal||[],y=a.morphAttributes.color||[];let b=0;_===!0&&(b=1),v===!0&&(b=2),g===!0&&(b=3);let L=a.attributes.position.count*b,P=1;L>e.maxTextureSize&&(P=Math.ceil(L/e.maxTextureSize),L=e.maxTextureSize);const I=new Float32Array(L*P*4*u),N=new km(I,L,P,u);N.type=$n,N.needsUpdate=!0;const w=b*4;for(let R=0;R<u;R++){const O=m[R],U=x[R],X=y[R],ee=L*P*4*R;for(let Y=0;Y<O.count;Y++){const oe=Y*w;_===!0&&(s.fromBufferAttribute(O,Y),I[ee+oe+0]=s.x,I[ee+oe+1]=s.y,I[ee+oe+2]=s.z,I[ee+oe+3]=0),v===!0&&(s.fromBufferAttribute(U,Y),I[ee+oe+4]=s.x,I[ee+oe+5]=s.y,I[ee+oe+6]=s.z,I[ee+oe+7]=0),g===!0&&(s.fromBufferAttribute(X,Y),I[ee+oe+8]=s.x,I[ee+oe+9]=s.y,I[ee+oe+10]=s.z,I[ee+oe+11]=X.itemSize===4?s.w:1)}}f={count:u,texture:N,size:new lt(L,P)},i.set(a,f),a.addEventListener("dispose",M)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let _=0;for(let g=0;g<c.length;g++)_+=c[g];const v=a.morphTargetsRelative?1:1-_;l.getUniforms().setValue(n,"morphTargetBaseInfluence",v),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",f.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",f.size)}return{update:r}}function SS(n,e,t,i){let s=new WeakMap;function r(l){const c=i.render.frame,d=l.geometry,u=e.get(l,d);if(s.get(u)!==c&&(e.update(u),s.set(u,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),s.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),s.set(l,c))),l.isSkinnedMesh){const f=l.skeleton;s.get(f)!==c&&(f.update(),s.set(f,c))}return u}function o(){s=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:r,dispose:o}}const eg=new Vt,wh=new qm(1,1),tg=new km,ng=new vx,ig=new eu,Ah=[],Ch=[],Rh=new Float32Array(16),Lh=new Float32Array(9),Ph=new Float32Array(4);function Nr(n,e,t){const i=n[0];if(i<=0||i>0)return n;const s=e*t;let r=Ah[s];if(r===void 0&&(r=new Float32Array(s),Ah[s]=r),e!==0){i.toArray(r,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(r,a)}return r}function Ft(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Bt(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function sl(n,e){let t=Ch[e];t===void 0&&(t=new Int32Array(e),Ch[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function MS(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function ES(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ft(t,e))return;n.uniform2fv(this.addr,e),Bt(t,e)}}function TS(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ft(t,e))return;n.uniform3fv(this.addr,e),Bt(t,e)}}function wS(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ft(t,e))return;n.uniform4fv(this.addr,e),Bt(t,e)}}function AS(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ft(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Bt(t,e)}else{if(Ft(t,i))return;Ph.set(i),n.uniformMatrix2fv(this.addr,!1,Ph),Bt(t,i)}}function CS(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ft(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Bt(t,e)}else{if(Ft(t,i))return;Lh.set(i),n.uniformMatrix3fv(this.addr,!1,Lh),Bt(t,i)}}function RS(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ft(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Bt(t,e)}else{if(Ft(t,i))return;Rh.set(i),n.uniformMatrix4fv(this.addr,!1,Rh),Bt(t,i)}}function LS(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function PS(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ft(t,e))return;n.uniform2iv(this.addr,e),Bt(t,e)}}function IS(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ft(t,e))return;n.uniform3iv(this.addr,e),Bt(t,e)}}function DS(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ft(t,e))return;n.uniform4iv(this.addr,e),Bt(t,e)}}function NS(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function US(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ft(t,e))return;n.uniform2uiv(this.addr,e),Bt(t,e)}}function OS(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ft(t,e))return;n.uniform3uiv(this.addr,e),Bt(t,e)}}function kS(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ft(t,e))return;n.uniform4uiv(this.addr,e),Bt(t,e)}}function FS(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s);let r;this.type===n.SAMPLER_2D_SHADOW?(wh.compareFunction=Nm,r=wh):r=eg,t.setTexture2D(e||r,s)}function BS(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture3D(e||ng,s)}function HS(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTextureCube(e||ig,s)}function zS(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture2DArray(e||tg,s)}function VS(n){switch(n){case 5126:return MS;case 35664:return ES;case 35665:return TS;case 35666:return wS;case 35674:return AS;case 35675:return CS;case 35676:return RS;case 5124:case 35670:return LS;case 35667:case 35671:return PS;case 35668:case 35672:return IS;case 35669:case 35673:return DS;case 5125:return NS;case 36294:return US;case 36295:return OS;case 36296:return kS;case 35678:case 36198:case 36298:case 36306:case 35682:return FS;case 35679:case 36299:case 36307:return BS;case 35680:case 36300:case 36308:case 36293:return HS;case 36289:case 36303:case 36311:case 36292:return zS}}function GS(n,e){n.uniform1fv(this.addr,e)}function $S(n,e){const t=Nr(e,this.size,2);n.uniform2fv(this.addr,t)}function WS(n,e){const t=Nr(e,this.size,3);n.uniform3fv(this.addr,t)}function XS(n,e){const t=Nr(e,this.size,4);n.uniform4fv(this.addr,t)}function jS(n,e){const t=Nr(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function qS(n,e){const t=Nr(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function YS(n,e){const t=Nr(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function KS(n,e){n.uniform1iv(this.addr,e)}function ZS(n,e){n.uniform2iv(this.addr,e)}function JS(n,e){n.uniform3iv(this.addr,e)}function QS(n,e){n.uniform4iv(this.addr,e)}function eM(n,e){n.uniform1uiv(this.addr,e)}function tM(n,e){n.uniform2uiv(this.addr,e)}function nM(n,e){n.uniform3uiv(this.addr,e)}function iM(n,e){n.uniform4uiv(this.addr,e)}function sM(n,e,t){const i=this.cache,s=e.length,r=sl(t,s);Ft(i,r)||(n.uniform1iv(this.addr,r),Bt(i,r));for(let o=0;o!==s;++o)t.setTexture2D(e[o]||eg,r[o])}function rM(n,e,t){const i=this.cache,s=e.length,r=sl(t,s);Ft(i,r)||(n.uniform1iv(this.addr,r),Bt(i,r));for(let o=0;o!==s;++o)t.setTexture3D(e[o]||ng,r[o])}function oM(n,e,t){const i=this.cache,s=e.length,r=sl(t,s);Ft(i,r)||(n.uniform1iv(this.addr,r),Bt(i,r));for(let o=0;o!==s;++o)t.setTextureCube(e[o]||ig,r[o])}function aM(n,e,t){const i=this.cache,s=e.length,r=sl(t,s);Ft(i,r)||(n.uniform1iv(this.addr,r),Bt(i,r));for(let o=0;o!==s;++o)t.setTexture2DArray(e[o]||tg,r[o])}function lM(n){switch(n){case 5126:return GS;case 35664:return $S;case 35665:return WS;case 35666:return XS;case 35674:return jS;case 35675:return qS;case 35676:return YS;case 5124:case 35670:return KS;case 35667:case 35671:return ZS;case 35668:case 35672:return JS;case 35669:case 35673:return QS;case 5125:return eM;case 36294:return tM;case 36295:return nM;case 36296:return iM;case 35678:case 36198:case 36298:case 36306:case 35682:return sM;case 35679:case 36299:case 36307:return rM;case 35680:case 36300:case 36308:case 36293:return oM;case 36289:case 36303:case 36311:case 36292:return aM}}class cM{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=VS(t.type)}}class dM{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=lM(t.type)}}class uM{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const s=this.seq;for(let r=0,o=s.length;r!==o;++r){const a=s[r];a.setValue(e,t[a.id],i)}}}const Kl=/(\w+)(\])?(\[|\.)?/g;function Ih(n,e){n.seq.push(e),n.map[e.id]=e}function fM(n,e,t){const i=n.name,s=i.length;for(Kl.lastIndex=0;;){const r=Kl.exec(i),o=Kl.lastIndex;let a=r[1];const l=r[2]==="]",c=r[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===s){Ih(t,c===void 0?new cM(a,n,e):new dM(a,n,e));break}else{let u=t.map[a];u===void 0&&(u=new uM(a),Ih(t,u)),t=u}}}class xa{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){const r=e.getActiveUniform(t,s),o=e.getUniformLocation(t,r.name);fM(r,o,this)}}setValue(e,t,i,s){const r=this.map[t];r!==void 0&&r.setValue(e,i,s)}setOptional(e,t,i){const s=t[i];s!==void 0&&this.setValue(e,i,s)}static upload(e,t,i,s){for(let r=0,o=t.length;r!==o;++r){const a=t[r],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,s)}}static seqWithValue(e,t){const i=[];for(let s=0,r=e.length;s!==r;++s){const o=e[s];o.id in t&&i.push(o)}return i}}function Dh(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const hM=37297;let pM=0;function mM(n,e){const t=n.split(`
`),i=[],s=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let o=s;o<r;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}const Nh=new tt;function gM(n){ot._getMatrix(Nh,ot.workingColorSpace,n);const e=`mat3( ${Nh.elements.map(t=>t.toFixed(4))} )`;switch(ot.getTransfer(n)){case La:return[e,"LinearTransferOETF"];case St:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function Uh(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),s=n.getShaderInfoLog(e).trim();if(i&&s==="")return"";const r=/ERROR: 0:(\d+)/.exec(s);if(r){const o=parseInt(r[1]);return t.toUpperCase()+`

`+s+`

`+mM(n.getShaderSource(e),o)}else return s}function _M(n,e){const t=gM(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function vM(n,e){let t;switch(e){case wv:t="Linear";break;case Av:t="Reinhard";break;case Cv:t="Cineon";break;case Rv:t="ACESFilmic";break;case Pv:t="AgX";break;case Iv:t="Neutral";break;case Lv:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const oa=new G;function xM(){ot.getLuminanceCoefficients(oa);const n=oa.x.toFixed(4),e=oa.y.toFixed(4),t=oa.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function bM(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(eo).join(`
`)}function yM(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function SM(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){const r=n.getActiveAttrib(e,s),o=r.name;let a=1;r.type===n.FLOAT_MAT2&&(a=2),r.type===n.FLOAT_MAT3&&(a=3),r.type===n.FLOAT_MAT4&&(a=4),t[o]={type:r.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function eo(n){return n!==""}function Oh(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function kh(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const MM=/^[ \t]*#include +<([\w\d./]+)>/gm;function pd(n){return n.replace(MM,TM)}const EM=new Map;function TM(n,e){let t=it[e];if(t===void 0){const i=EM.get(e);if(i!==void 0)t=it[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return pd(t)}const wM=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Fh(n){return n.replace(wM,AM)}function AM(n,e,t,i){let s="";for(let r=parseInt(e);r<parseInt(t);r++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function Bh(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function CM(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===vm?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===xm?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===mi&&(e="SHADOWMAP_TYPE_VSM"),e}function RM(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case xr:case br:e="ENVMAP_TYPE_CUBE";break;case tl:e="ENVMAP_TYPE_CUBE_UV";break}return e}function LM(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case br:e="ENVMAP_MODE_REFRACTION";break}return e}function PM(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case bm:e="ENVMAP_BLENDING_MULTIPLY";break;case Ev:e="ENVMAP_BLENDING_MIX";break;case Tv:e="ENVMAP_BLENDING_ADD";break}return e}function IM(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function DM(n,e,t,i){const s=n.getContext(),r=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=CM(t),c=RM(t),d=LM(t),u=PM(t),f=IM(t),p=bM(t),_=yM(r),v=s.createProgram();let g,m,x=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(eo).join(`
`),g.length>0&&(g+=`
`),m=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_].filter(eo).join(`
`),m.length>0&&(m+=`
`)):(g=[Bh(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(eo).join(`
`),m=[Bh(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",t.envMap?"#define "+u:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ki?"#define TONE_MAPPING":"",t.toneMapping!==Ki?it.tonemapping_pars_fragment:"",t.toneMapping!==Ki?vM("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",it.colorspace_pars_fragment,_M("linearToOutputTexel",t.outputColorSpace),xM(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(eo).join(`
`)),o=pd(o),o=Oh(o,t),o=kh(o,t),a=pd(a),a=Oh(a,t),a=kh(a,t),o=Fh(o),a=Fh(a),t.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,g=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,m=["#define varying in",t.glslVersion===Uf?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Uf?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);const y=x+g+o,b=x+m+a,L=Dh(s,s.VERTEX_SHADER,y),P=Dh(s,s.FRAGMENT_SHADER,b);s.attachShader(v,L),s.attachShader(v,P),t.index0AttributeName!==void 0?s.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(v,0,"position"),s.linkProgram(v);function I(R){if(n.debug.checkShaderErrors){const O=s.getProgramInfoLog(v).trim(),U=s.getShaderInfoLog(L).trim(),X=s.getShaderInfoLog(P).trim();let ee=!0,Y=!0;if(s.getProgramParameter(v,s.LINK_STATUS)===!1)if(ee=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(s,v,L,P);else{const oe=Uh(s,L,"vertex"),W=Uh(s,P,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(v,s.VALIDATE_STATUS)+`

Material Name: `+R.name+`
Material Type: `+R.type+`

Program Info Log: `+O+`
`+oe+`
`+W)}else O!==""?console.warn("THREE.WebGLProgram: Program Info Log:",O):(U===""||X==="")&&(Y=!1);Y&&(R.diagnostics={runnable:ee,programLog:O,vertexShader:{log:U,prefix:g},fragmentShader:{log:X,prefix:m}})}s.deleteShader(L),s.deleteShader(P),N=new xa(s,v),w=SM(s,v)}let N;this.getUniforms=function(){return N===void 0&&I(this),N};let w;this.getAttributes=function(){return w===void 0&&I(this),w};let M=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return M===!1&&(M=s.getProgramParameter(v,hM)),M},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(v),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=pM++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=L,this.fragmentShader=P,this}let NM=0;class UM{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,s=this._getShaderStage(t),r=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(s)===!1&&(o.add(s),s.usedTimes++),o.has(r)===!1&&(o.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new OM(e),t.set(e,i)),i}}class OM{constructor(e){this.id=NM++,this.code=e,this.usedTimes=0}}function kM(n,e,t,i,s,r,o){const a=new Fm,l=new UM,c=new Set,d=[],u=s.logarithmicDepthBuffer,f=s.vertexTextures;let p=s.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(w){return c.add(w),w===0?"uv":`uv${w}`}function g(w,M,R,O,U){const X=O.fog,ee=U.geometry,Y=w.isMeshStandardMaterial?O.environment:null,oe=(w.isMeshStandardMaterial?t:e).get(w.envMap||Y),W=oe&&oe.mapping===tl?oe.image.height:null,be=_[w.type];w.precision!==null&&(p=s.getMaxPrecision(w.precision),p!==w.precision&&console.warn("THREE.WebGLProgram.getParameters:",w.precision,"not supported, using",p,"instead."));const Te=ee.morphAttributes.position||ee.morphAttributes.normal||ee.morphAttributes.color,Ie=Te!==void 0?Te.length:0;let He=0;ee.morphAttributes.position!==void 0&&(He=1),ee.morphAttributes.normal!==void 0&&(He=2),ee.morphAttributes.color!==void 0&&(He=3);let at,de,ye,we;if(be){const vt=Kn[be];at=vt.vertexShader,de=vt.fragmentShader}else at=w.vertexShader,de=w.fragmentShader,l.update(w),ye=l.getVertexShaderID(w),we=l.getFragmentShaderID(w);const F=n.getRenderTarget(),ue=n.state.buffers.depth.getReversed(),ce=U.isInstancedMesh===!0,me=U.isBatchedMesh===!0,ze=!!w.map,C=!!w.matcap,D=!!oe,E=!!w.aoMap,ie=!!w.lightMap,te=!!w.bumpMap,se=!!w.normalMap,le=!!w.displacementMap,fe=!!w.emissiveMap,re=!!w.metalnessMap,T=!!w.roughnessMap,S=w.anisotropy>0,k=w.clearcoat>0,$=w.dispersion>0,Z=w.iridescence>0,q=w.sheen>0,Se=w.transmission>0,pe=S&&!!w.anisotropyMap,xe=k&&!!w.clearcoatMap,je=k&&!!w.clearcoatNormalMap,ge=k&&!!w.clearcoatRoughnessMap,De=Z&&!!w.iridescenceMap,Be=Z&&!!w.iridescenceThicknessMap,We=q&&!!w.sheenColorMap,Ee=q&&!!w.sheenRoughnessMap,qe=!!w.specularMap,Je=!!w.specularColorMap,Mt=!!w.specularIntensityMap,B=Se&&!!w.transmissionMap,Ce=Se&&!!w.thicknessMap,ae=!!w.gradientMap,he=!!w.alphaMap,Pe=w.alphaTest>0,Le=!!w.alphaHash,et=!!w.extensions;let Lt=Ki;w.toneMapped&&(F===null||F.isXRRenderTarget===!0)&&(Lt=n.toneMapping);const Xt={shaderID:be,shaderType:w.type,shaderName:w.name,vertexShader:at,fragmentShader:de,defines:w.defines,customVertexShaderID:ye,customFragmentShaderID:we,isRawShaderMaterial:w.isRawShaderMaterial===!0,glslVersion:w.glslVersion,precision:p,batching:me,batchingColor:me&&U._colorsTexture!==null,instancing:ce,instancingColor:ce&&U.instanceColor!==null,instancingMorph:ce&&U.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:F===null?n.outputColorSpace:F.isXRRenderTarget===!0?F.texture.colorSpace:Qt,alphaToCoverage:!!w.alphaToCoverage,map:ze,matcap:C,envMap:D,envMapMode:D&&oe.mapping,envMapCubeUVHeight:W,aoMap:E,lightMap:ie,bumpMap:te,normalMap:se,displacementMap:f&&le,emissiveMap:fe,normalMapObjectSpace:se&&w.normalMapType===Fv,normalMapTangentSpace:se&&w.normalMapType===Dm,metalnessMap:re,roughnessMap:T,anisotropy:S,anisotropyMap:pe,clearcoat:k,clearcoatMap:xe,clearcoatNormalMap:je,clearcoatRoughnessMap:ge,dispersion:$,iridescence:Z,iridescenceMap:De,iridescenceThicknessMap:Be,sheen:q,sheenColorMap:We,sheenRoughnessMap:Ee,specularMap:qe,specularColorMap:Je,specularIntensityMap:Mt,transmission:Se,transmissionMap:B,thicknessMap:Ce,gradientMap:ae,opaque:w.transparent===!1&&w.blending===dr&&w.alphaToCoverage===!1,alphaMap:he,alphaTest:Pe,alphaHash:Le,combine:w.combine,mapUv:ze&&v(w.map.channel),aoMapUv:E&&v(w.aoMap.channel),lightMapUv:ie&&v(w.lightMap.channel),bumpMapUv:te&&v(w.bumpMap.channel),normalMapUv:se&&v(w.normalMap.channel),displacementMapUv:le&&v(w.displacementMap.channel),emissiveMapUv:fe&&v(w.emissiveMap.channel),metalnessMapUv:re&&v(w.metalnessMap.channel),roughnessMapUv:T&&v(w.roughnessMap.channel),anisotropyMapUv:pe&&v(w.anisotropyMap.channel),clearcoatMapUv:xe&&v(w.clearcoatMap.channel),clearcoatNormalMapUv:je&&v(w.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ge&&v(w.clearcoatRoughnessMap.channel),iridescenceMapUv:De&&v(w.iridescenceMap.channel),iridescenceThicknessMapUv:Be&&v(w.iridescenceThicknessMap.channel),sheenColorMapUv:We&&v(w.sheenColorMap.channel),sheenRoughnessMapUv:Ee&&v(w.sheenRoughnessMap.channel),specularMapUv:qe&&v(w.specularMap.channel),specularColorMapUv:Je&&v(w.specularColorMap.channel),specularIntensityMapUv:Mt&&v(w.specularIntensityMap.channel),transmissionMapUv:B&&v(w.transmissionMap.channel),thicknessMapUv:Ce&&v(w.thicknessMap.channel),alphaMapUv:he&&v(w.alphaMap.channel),vertexTangents:!!ee.attributes.tangent&&(se||S),vertexColors:w.vertexColors,vertexAlphas:w.vertexColors===!0&&!!ee.attributes.color&&ee.attributes.color.itemSize===4,pointsUvs:U.isPoints===!0&&!!ee.attributes.uv&&(ze||he),fog:!!X,useFog:w.fog===!0,fogExp2:!!X&&X.isFogExp2,flatShading:w.flatShading===!0,sizeAttenuation:w.sizeAttenuation===!0,logarithmicDepthBuffer:u,reverseDepthBuffer:ue,skinning:U.isSkinnedMesh===!0,morphTargets:ee.morphAttributes.position!==void 0,morphNormals:ee.morphAttributes.normal!==void 0,morphColors:ee.morphAttributes.color!==void 0,morphTargetsCount:Ie,morphTextureStride:He,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numLightProbes:M.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:w.dithering,shadowMapEnabled:n.shadowMap.enabled&&R.length>0,shadowMapType:n.shadowMap.type,toneMapping:Lt,decodeVideoTexture:ze&&w.map.isVideoTexture===!0&&ot.getTransfer(w.map.colorSpace)===St,decodeVideoTextureEmissive:fe&&w.emissiveMap.isVideoTexture===!0&&ot.getTransfer(w.emissiveMap.colorSpace)===St,premultipliedAlpha:w.premultipliedAlpha,doubleSided:w.side===Jn,flipSided:w.side===un,useDepthPacking:w.depthPacking>=0,depthPacking:w.depthPacking||0,index0AttributeName:w.index0AttributeName,extensionClipCullDistance:et&&w.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(et&&w.extensions.multiDraw===!0||me)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:w.customProgramCacheKey()};return Xt.vertexUv1s=c.has(1),Xt.vertexUv2s=c.has(2),Xt.vertexUv3s=c.has(3),c.clear(),Xt}function m(w){const M=[];if(w.shaderID?M.push(w.shaderID):(M.push(w.customVertexShaderID),M.push(w.customFragmentShaderID)),w.defines!==void 0)for(const R in w.defines)M.push(R),M.push(w.defines[R]);return w.isRawShaderMaterial===!1&&(x(M,w),y(M,w),M.push(n.outputColorSpace)),M.push(w.customProgramCacheKey),M.join()}function x(w,M){w.push(M.precision),w.push(M.outputColorSpace),w.push(M.envMapMode),w.push(M.envMapCubeUVHeight),w.push(M.mapUv),w.push(M.alphaMapUv),w.push(M.lightMapUv),w.push(M.aoMapUv),w.push(M.bumpMapUv),w.push(M.normalMapUv),w.push(M.displacementMapUv),w.push(M.emissiveMapUv),w.push(M.metalnessMapUv),w.push(M.roughnessMapUv),w.push(M.anisotropyMapUv),w.push(M.clearcoatMapUv),w.push(M.clearcoatNormalMapUv),w.push(M.clearcoatRoughnessMapUv),w.push(M.iridescenceMapUv),w.push(M.iridescenceThicknessMapUv),w.push(M.sheenColorMapUv),w.push(M.sheenRoughnessMapUv),w.push(M.specularMapUv),w.push(M.specularColorMapUv),w.push(M.specularIntensityMapUv),w.push(M.transmissionMapUv),w.push(M.thicknessMapUv),w.push(M.combine),w.push(M.fogExp2),w.push(M.sizeAttenuation),w.push(M.morphTargetsCount),w.push(M.morphAttributeCount),w.push(M.numDirLights),w.push(M.numPointLights),w.push(M.numSpotLights),w.push(M.numSpotLightMaps),w.push(M.numHemiLights),w.push(M.numRectAreaLights),w.push(M.numDirLightShadows),w.push(M.numPointLightShadows),w.push(M.numSpotLightShadows),w.push(M.numSpotLightShadowsWithMaps),w.push(M.numLightProbes),w.push(M.shadowMapType),w.push(M.toneMapping),w.push(M.numClippingPlanes),w.push(M.numClipIntersection),w.push(M.depthPacking)}function y(w,M){a.disableAll(),M.supportsVertexTextures&&a.enable(0),M.instancing&&a.enable(1),M.instancingColor&&a.enable(2),M.instancingMorph&&a.enable(3),M.matcap&&a.enable(4),M.envMap&&a.enable(5),M.normalMapObjectSpace&&a.enable(6),M.normalMapTangentSpace&&a.enable(7),M.clearcoat&&a.enable(8),M.iridescence&&a.enable(9),M.alphaTest&&a.enable(10),M.vertexColors&&a.enable(11),M.vertexAlphas&&a.enable(12),M.vertexUv1s&&a.enable(13),M.vertexUv2s&&a.enable(14),M.vertexUv3s&&a.enable(15),M.vertexTangents&&a.enable(16),M.anisotropy&&a.enable(17),M.alphaHash&&a.enable(18),M.batching&&a.enable(19),M.dispersion&&a.enable(20),M.batchingColor&&a.enable(21),w.push(a.mask),a.disableAll(),M.fog&&a.enable(0),M.useFog&&a.enable(1),M.flatShading&&a.enable(2),M.logarithmicDepthBuffer&&a.enable(3),M.reverseDepthBuffer&&a.enable(4),M.skinning&&a.enable(5),M.morphTargets&&a.enable(6),M.morphNormals&&a.enable(7),M.morphColors&&a.enable(8),M.premultipliedAlpha&&a.enable(9),M.shadowMapEnabled&&a.enable(10),M.doubleSided&&a.enable(11),M.flipSided&&a.enable(12),M.useDepthPacking&&a.enable(13),M.dithering&&a.enable(14),M.transmission&&a.enable(15),M.sheen&&a.enable(16),M.opaque&&a.enable(17),M.pointsUvs&&a.enable(18),M.decodeVideoTexture&&a.enable(19),M.decodeVideoTextureEmissive&&a.enable(20),M.alphaToCoverage&&a.enable(21),w.push(a.mask)}function b(w){const M=_[w.type];let R;if(M){const O=Kn[M];R=Lx.clone(O.uniforms)}else R=w.uniforms;return R}function L(w,M){let R;for(let O=0,U=d.length;O<U;O++){const X=d[O];if(X.cacheKey===M){R=X,++R.usedTimes;break}}return R===void 0&&(R=new DM(n,M,w,r),d.push(R)),R}function P(w){if(--w.usedTimes===0){const M=d.indexOf(w);d[M]=d[d.length-1],d.pop(),w.destroy()}}function I(w){l.remove(w)}function N(){l.dispose()}return{getParameters:g,getProgramCacheKey:m,getUniforms:b,acquireProgram:L,releaseProgram:P,releaseShaderCache:I,programs:d,dispose:N}}function FM(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function i(o){n.delete(o)}function s(o,a,l){n.get(o)[a]=l}function r(){n=new WeakMap}return{has:e,get:t,remove:i,update:s,dispose:r}}function BM(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Hh(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function zh(){const n=[];let e=0;const t=[],i=[],s=[];function r(){e=0,t.length=0,i.length=0,s.length=0}function o(u,f,p,_,v,g){let m=n[e];return m===void 0?(m={id:u.id,object:u,geometry:f,material:p,groupOrder:_,renderOrder:u.renderOrder,z:v,group:g},n[e]=m):(m.id=u.id,m.object=u,m.geometry=f,m.material=p,m.groupOrder=_,m.renderOrder=u.renderOrder,m.z=v,m.group=g),e++,m}function a(u,f,p,_,v,g){const m=o(u,f,p,_,v,g);p.transmission>0?i.push(m):p.transparent===!0?s.push(m):t.push(m)}function l(u,f,p,_,v,g){const m=o(u,f,p,_,v,g);p.transmission>0?i.unshift(m):p.transparent===!0?s.unshift(m):t.unshift(m)}function c(u,f){t.length>1&&t.sort(u||BM),i.length>1&&i.sort(f||Hh),s.length>1&&s.sort(f||Hh)}function d(){for(let u=e,f=n.length;u<f;u++){const p=n[u];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:t,transmissive:i,transparent:s,init:r,push:a,unshift:l,finish:d,sort:c}}function HM(){let n=new WeakMap;function e(i,s){const r=n.get(i);let o;return r===void 0?(o=new zh,n.set(i,[o])):s>=r.length?(o=new zh,r.push(o)):o=r[s],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function zM(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new G,color:new Ke};break;case"SpotLight":t={position:new G,direction:new G,color:new Ke,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new G,color:new Ke,distance:0,decay:0};break;case"HemisphereLight":t={direction:new G,skyColor:new Ke,groundColor:new Ke};break;case"RectAreaLight":t={color:new Ke,position:new G,halfWidth:new G,halfHeight:new G};break}return n[e.id]=t,t}}}function VM(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let GM=0;function $M(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function WM(n){const e=new zM,t=VM(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new G);const s=new G,r=new nt,o=new nt;function a(c){let d=0,u=0,f=0;for(let w=0;w<9;w++)i.probe[w].set(0,0,0);let p=0,_=0,v=0,g=0,m=0,x=0,y=0,b=0,L=0,P=0,I=0;c.sort($M);for(let w=0,M=c.length;w<M;w++){const R=c[w],O=R.color,U=R.intensity,X=R.distance,ee=R.shadow&&R.shadow.map?R.shadow.map.texture:null;if(R.isAmbientLight)d+=O.r*U,u+=O.g*U,f+=O.b*U;else if(R.isLightProbe){for(let Y=0;Y<9;Y++)i.probe[Y].addScaledVector(R.sh.coefficients[Y],U);I++}else if(R.isDirectionalLight){const Y=e.get(R);if(Y.color.copy(R.color).multiplyScalar(R.intensity),R.castShadow){const oe=R.shadow,W=t.get(R);W.shadowIntensity=oe.intensity,W.shadowBias=oe.bias,W.shadowNormalBias=oe.normalBias,W.shadowRadius=oe.radius,W.shadowMapSize=oe.mapSize,i.directionalShadow[p]=W,i.directionalShadowMap[p]=ee,i.directionalShadowMatrix[p]=R.shadow.matrix,x++}i.directional[p]=Y,p++}else if(R.isSpotLight){const Y=e.get(R);Y.position.setFromMatrixPosition(R.matrixWorld),Y.color.copy(O).multiplyScalar(U),Y.distance=X,Y.coneCos=Math.cos(R.angle),Y.penumbraCos=Math.cos(R.angle*(1-R.penumbra)),Y.decay=R.decay,i.spot[v]=Y;const oe=R.shadow;if(R.map&&(i.spotLightMap[L]=R.map,L++,oe.updateMatrices(R),R.castShadow&&P++),i.spotLightMatrix[v]=oe.matrix,R.castShadow){const W=t.get(R);W.shadowIntensity=oe.intensity,W.shadowBias=oe.bias,W.shadowNormalBias=oe.normalBias,W.shadowRadius=oe.radius,W.shadowMapSize=oe.mapSize,i.spotShadow[v]=W,i.spotShadowMap[v]=ee,b++}v++}else if(R.isRectAreaLight){const Y=e.get(R);Y.color.copy(O).multiplyScalar(U),Y.halfWidth.set(R.width*.5,0,0),Y.halfHeight.set(0,R.height*.5,0),i.rectArea[g]=Y,g++}else if(R.isPointLight){const Y=e.get(R);if(Y.color.copy(R.color).multiplyScalar(R.intensity),Y.distance=R.distance,Y.decay=R.decay,R.castShadow){const oe=R.shadow,W=t.get(R);W.shadowIntensity=oe.intensity,W.shadowBias=oe.bias,W.shadowNormalBias=oe.normalBias,W.shadowRadius=oe.radius,W.shadowMapSize=oe.mapSize,W.shadowCameraNear=oe.camera.near,W.shadowCameraFar=oe.camera.far,i.pointShadow[_]=W,i.pointShadowMap[_]=ee,i.pointShadowMatrix[_]=R.shadow.matrix,y++}i.point[_]=Y,_++}else if(R.isHemisphereLight){const Y=e.get(R);Y.skyColor.copy(R.color).multiplyScalar(U),Y.groundColor.copy(R.groundColor).multiplyScalar(U),i.hemi[m]=Y,m++}}g>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ae.LTC_FLOAT_1,i.rectAreaLTC2=Ae.LTC_FLOAT_2):(i.rectAreaLTC1=Ae.LTC_HALF_1,i.rectAreaLTC2=Ae.LTC_HALF_2)),i.ambient[0]=d,i.ambient[1]=u,i.ambient[2]=f;const N=i.hash;(N.directionalLength!==p||N.pointLength!==_||N.spotLength!==v||N.rectAreaLength!==g||N.hemiLength!==m||N.numDirectionalShadows!==x||N.numPointShadows!==y||N.numSpotShadows!==b||N.numSpotMaps!==L||N.numLightProbes!==I)&&(i.directional.length=p,i.spot.length=v,i.rectArea.length=g,i.point.length=_,i.hemi.length=m,i.directionalShadow.length=x,i.directionalShadowMap.length=x,i.pointShadow.length=y,i.pointShadowMap.length=y,i.spotShadow.length=b,i.spotShadowMap.length=b,i.directionalShadowMatrix.length=x,i.pointShadowMatrix.length=y,i.spotLightMatrix.length=b+L-P,i.spotLightMap.length=L,i.numSpotLightShadowsWithMaps=P,i.numLightProbes=I,N.directionalLength=p,N.pointLength=_,N.spotLength=v,N.rectAreaLength=g,N.hemiLength=m,N.numDirectionalShadows=x,N.numPointShadows=y,N.numSpotShadows=b,N.numSpotMaps=L,N.numLightProbes=I,i.version=GM++)}function l(c,d){let u=0,f=0,p=0,_=0,v=0;const g=d.matrixWorldInverse;for(let m=0,x=c.length;m<x;m++){const y=c[m];if(y.isDirectionalLight){const b=i.directional[u];b.direction.setFromMatrixPosition(y.matrixWorld),s.setFromMatrixPosition(y.target.matrixWorld),b.direction.sub(s),b.direction.transformDirection(g),u++}else if(y.isSpotLight){const b=i.spot[p];b.position.setFromMatrixPosition(y.matrixWorld),b.position.applyMatrix4(g),b.direction.setFromMatrixPosition(y.matrixWorld),s.setFromMatrixPosition(y.target.matrixWorld),b.direction.sub(s),b.direction.transformDirection(g),p++}else if(y.isRectAreaLight){const b=i.rectArea[_];b.position.setFromMatrixPosition(y.matrixWorld),b.position.applyMatrix4(g),o.identity(),r.copy(y.matrixWorld),r.premultiply(g),o.extractRotation(r),b.halfWidth.set(y.width*.5,0,0),b.halfHeight.set(0,y.height*.5,0),b.halfWidth.applyMatrix4(o),b.halfHeight.applyMatrix4(o),_++}else if(y.isPointLight){const b=i.point[f];b.position.setFromMatrixPosition(y.matrixWorld),b.position.applyMatrix4(g),f++}else if(y.isHemisphereLight){const b=i.hemi[v];b.direction.setFromMatrixPosition(y.matrixWorld),b.direction.transformDirection(g),v++}}}return{setup:a,setupView:l,state:i}}function Vh(n){const e=new WM(n),t=[],i=[];function s(d){c.camera=d,t.length=0,i.length=0}function r(d){t.push(d)}function o(d){i.push(d)}function a(){e.setup(t)}function l(d){e.setupView(t,d)}const c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:c,setupLights:a,setupLightsView:l,pushLight:r,pushShadow:o}}function XM(n){let e=new WeakMap;function t(s,r=0){const o=e.get(s);let a;return o===void 0?(a=new Vh(n),e.set(s,[a])):r>=o.length?(a=new Vh(n),o.push(a)):a=o[r],a}function i(){e=new WeakMap}return{get:t,dispose:i}}const jM=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,qM=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function YM(n,e,t){let i=new iu;const s=new lt,r=new lt,o=new pt,a=new jx({depthPacking:kv}),l=new qx,c={},d=t.maxTextureSize,u={[Ti]:un,[un]:Ti,[Jn]:Jn},f=new ns({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new lt},radius:{value:4}},vertexShader:jM,fragmentShader:qM}),p=f.clone();p.defines.HORIZONTAL_PASS=1;const _=new jn;_.setAttribute("position",new Wt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new xn(_,f),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=vm;let m=this.type;this.render=function(P,I,N){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||P.length===0)return;const w=n.getRenderTarget(),M=n.getActiveCubeFace(),R=n.getActiveMipmapLevel(),O=n.state;O.setBlending(Yi),O.buffers.color.setClear(1,1,1,1),O.buffers.depth.setTest(!0),O.setScissorTest(!1);const U=m!==mi&&this.type===mi,X=m===mi&&this.type!==mi;for(let ee=0,Y=P.length;ee<Y;ee++){const oe=P[ee],W=oe.shadow;if(W===void 0){console.warn("THREE.WebGLShadowMap:",oe,"has no shadow.");continue}if(W.autoUpdate===!1&&W.needsUpdate===!1)continue;s.copy(W.mapSize);const be=W.getFrameExtents();if(s.multiply(be),r.copy(W.mapSize),(s.x>d||s.y>d)&&(s.x>d&&(r.x=Math.floor(d/be.x),s.x=r.x*be.x,W.mapSize.x=r.x),s.y>d&&(r.y=Math.floor(d/be.y),s.y=r.y*be.y,W.mapSize.y=r.y)),W.map===null||U===!0||X===!0){const Ie=this.type!==mi?{minFilter:ln,magFilter:ln}:{};W.map!==null&&W.map.dispose(),W.map=new Ns(s.x,s.y,Ie),W.map.texture.name=oe.name+".shadowMap",W.camera.updateProjectionMatrix()}n.setRenderTarget(W.map),n.clear();const Te=W.getViewportCount();for(let Ie=0;Ie<Te;Ie++){const He=W.getViewport(Ie);o.set(r.x*He.x,r.y*He.y,r.x*He.z,r.y*He.w),O.viewport(o),W.updateMatrices(oe,Ie),i=W.getFrustum(),b(I,N,W.camera,oe,this.type)}W.isPointLightShadow!==!0&&this.type===mi&&x(W,N),W.needsUpdate=!1}m=this.type,g.needsUpdate=!1,n.setRenderTarget(w,M,R)};function x(P,I){const N=e.update(v);f.defines.VSM_SAMPLES!==P.blurSamples&&(f.defines.VSM_SAMPLES=P.blurSamples,p.defines.VSM_SAMPLES=P.blurSamples,f.needsUpdate=!0,p.needsUpdate=!0),P.mapPass===null&&(P.mapPass=new Ns(s.x,s.y)),f.uniforms.shadow_pass.value=P.map.texture,f.uniforms.resolution.value=P.mapSize,f.uniforms.radius.value=P.radius,n.setRenderTarget(P.mapPass),n.clear(),n.renderBufferDirect(I,null,N,f,v,null),p.uniforms.shadow_pass.value=P.mapPass.texture,p.uniforms.resolution.value=P.mapSize,p.uniforms.radius.value=P.radius,n.setRenderTarget(P.map),n.clear(),n.renderBufferDirect(I,null,N,p,v,null)}function y(P,I,N,w){let M=null;const R=N.isPointLight===!0?P.customDistanceMaterial:P.customDepthMaterial;if(R!==void 0)M=R;else if(M=N.isPointLight===!0?l:a,n.localClippingEnabled&&I.clipShadows===!0&&Array.isArray(I.clippingPlanes)&&I.clippingPlanes.length!==0||I.displacementMap&&I.displacementScale!==0||I.alphaMap&&I.alphaTest>0||I.map&&I.alphaTest>0){const O=M.uuid,U=I.uuid;let X=c[O];X===void 0&&(X={},c[O]=X);let ee=X[U];ee===void 0&&(ee=M.clone(),X[U]=ee,I.addEventListener("dispose",L)),M=ee}if(M.visible=I.visible,M.wireframe=I.wireframe,w===mi?M.side=I.shadowSide!==null?I.shadowSide:I.side:M.side=I.shadowSide!==null?I.shadowSide:u[I.side],M.alphaMap=I.alphaMap,M.alphaTest=I.alphaTest,M.map=I.map,M.clipShadows=I.clipShadows,M.clippingPlanes=I.clippingPlanes,M.clipIntersection=I.clipIntersection,M.displacementMap=I.displacementMap,M.displacementScale=I.displacementScale,M.displacementBias=I.displacementBias,M.wireframeLinewidth=I.wireframeLinewidth,M.linewidth=I.linewidth,N.isPointLight===!0&&M.isMeshDistanceMaterial===!0){const O=n.properties.get(M);O.light=N}return M}function b(P,I,N,w,M){if(P.visible===!1)return;if(P.layers.test(I.layers)&&(P.isMesh||P.isLine||P.isPoints)&&(P.castShadow||P.receiveShadow&&M===mi)&&(!P.frustumCulled||i.intersectsObject(P))){P.modelViewMatrix.multiplyMatrices(N.matrixWorldInverse,P.matrixWorld);const U=e.update(P),X=P.material;if(Array.isArray(X)){const ee=U.groups;for(let Y=0,oe=ee.length;Y<oe;Y++){const W=ee[Y],be=X[W.materialIndex];if(be&&be.visible){const Te=y(P,be,w,M);P.onBeforeShadow(n,P,I,N,U,Te,W),n.renderBufferDirect(N,null,U,Te,P,W),P.onAfterShadow(n,P,I,N,U,Te,W)}}}else if(X.visible){const ee=y(P,X,w,M);P.onBeforeShadow(n,P,I,N,U,ee,null),n.renderBufferDirect(N,null,U,ee,P,null),P.onAfterShadow(n,P,I,N,U,ee,null)}}const O=P.children;for(let U=0,X=O.length;U<X;U++)b(O[U],I,N,w,M)}function L(P){P.target.removeEventListener("dispose",L);for(const N in c){const w=c[N],M=P.target.uuid;M in w&&(w[M].dispose(),delete w[M])}}}const KM={[Cc]:Rc,[Lc]:Dc,[Pc]:Nc,[vr]:Ic,[Rc]:Cc,[Dc]:Lc,[Nc]:Pc,[Ic]:vr};function ZM(n,e){function t(){let B=!1;const Ce=new pt;let ae=null;const he=new pt(0,0,0,0);return{setMask:function(Pe){ae!==Pe&&!B&&(n.colorMask(Pe,Pe,Pe,Pe),ae=Pe)},setLocked:function(Pe){B=Pe},setClear:function(Pe,Le,et,Lt,Xt){Xt===!0&&(Pe*=Lt,Le*=Lt,et*=Lt),Ce.set(Pe,Le,et,Lt),he.equals(Ce)===!1&&(n.clearColor(Pe,Le,et,Lt),he.copy(Ce))},reset:function(){B=!1,ae=null,he.set(-1,0,0,0)}}}function i(){let B=!1,Ce=!1,ae=null,he=null,Pe=null;return{setReversed:function(Le){if(Ce!==Le){const et=e.get("EXT_clip_control");Ce?et.clipControlEXT(et.LOWER_LEFT_EXT,et.ZERO_TO_ONE_EXT):et.clipControlEXT(et.LOWER_LEFT_EXT,et.NEGATIVE_ONE_TO_ONE_EXT);const Lt=Pe;Pe=null,this.setClear(Lt)}Ce=Le},getReversed:function(){return Ce},setTest:function(Le){Le?F(n.DEPTH_TEST):ue(n.DEPTH_TEST)},setMask:function(Le){ae!==Le&&!B&&(n.depthMask(Le),ae=Le)},setFunc:function(Le){if(Ce&&(Le=KM[Le]),he!==Le){switch(Le){case Cc:n.depthFunc(n.NEVER);break;case Rc:n.depthFunc(n.ALWAYS);break;case Lc:n.depthFunc(n.LESS);break;case vr:n.depthFunc(n.LEQUAL);break;case Pc:n.depthFunc(n.EQUAL);break;case Ic:n.depthFunc(n.GEQUAL);break;case Dc:n.depthFunc(n.GREATER);break;case Nc:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}he=Le}},setLocked:function(Le){B=Le},setClear:function(Le){Pe!==Le&&(Ce&&(Le=1-Le),n.clearDepth(Le),Pe=Le)},reset:function(){B=!1,ae=null,he=null,Pe=null,Ce=!1}}}function s(){let B=!1,Ce=null,ae=null,he=null,Pe=null,Le=null,et=null,Lt=null,Xt=null;return{setTest:function(vt){B||(vt?F(n.STENCIL_TEST):ue(n.STENCIL_TEST))},setMask:function(vt){Ce!==vt&&!B&&(n.stencilMask(vt),Ce=vt)},setFunc:function(vt,In,ai){(ae!==vt||he!==In||Pe!==ai)&&(n.stencilFunc(vt,In,ai),ae=vt,he=In,Pe=ai)},setOp:function(vt,In,ai){(Le!==vt||et!==In||Lt!==ai)&&(n.stencilOp(vt,In,ai),Le=vt,et=In,Lt=ai)},setLocked:function(vt){B=vt},setClear:function(vt){Xt!==vt&&(n.clearStencil(vt),Xt=vt)},reset:function(){B=!1,Ce=null,ae=null,he=null,Pe=null,Le=null,et=null,Lt=null,Xt=null}}}const r=new t,o=new i,a=new s,l=new WeakMap,c=new WeakMap;let d={},u={},f=new WeakMap,p=[],_=null,v=!1,g=null,m=null,x=null,y=null,b=null,L=null,P=null,I=new Ke(0,0,0),N=0,w=!1,M=null,R=null,O=null,U=null,X=null;const ee=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Y=!1,oe=0;const W=n.getParameter(n.VERSION);W.indexOf("WebGL")!==-1?(oe=parseFloat(/^WebGL (\d)/.exec(W)[1]),Y=oe>=1):W.indexOf("OpenGL ES")!==-1&&(oe=parseFloat(/^OpenGL ES (\d)/.exec(W)[1]),Y=oe>=2);let be=null,Te={};const Ie=n.getParameter(n.SCISSOR_BOX),He=n.getParameter(n.VIEWPORT),at=new pt().fromArray(Ie),de=new pt().fromArray(He);function ye(B,Ce,ae,he){const Pe=new Uint8Array(4),Le=n.createTexture();n.bindTexture(B,Le),n.texParameteri(B,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(B,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let et=0;et<ae;et++)B===n.TEXTURE_3D||B===n.TEXTURE_2D_ARRAY?n.texImage3D(Ce,0,n.RGBA,1,1,he,0,n.RGBA,n.UNSIGNED_BYTE,Pe):n.texImage2D(Ce+et,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Pe);return Le}const we={};we[n.TEXTURE_2D]=ye(n.TEXTURE_2D,n.TEXTURE_2D,1),we[n.TEXTURE_CUBE_MAP]=ye(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),we[n.TEXTURE_2D_ARRAY]=ye(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),we[n.TEXTURE_3D]=ye(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),o.setClear(1),a.setClear(0),F(n.DEPTH_TEST),o.setFunc(vr),te(!1),se(wf),F(n.CULL_FACE),E(Yi);function F(B){d[B]!==!0&&(n.enable(B),d[B]=!0)}function ue(B){d[B]!==!1&&(n.disable(B),d[B]=!1)}function ce(B,Ce){return u[B]!==Ce?(n.bindFramebuffer(B,Ce),u[B]=Ce,B===n.DRAW_FRAMEBUFFER&&(u[n.FRAMEBUFFER]=Ce),B===n.FRAMEBUFFER&&(u[n.DRAW_FRAMEBUFFER]=Ce),!0):!1}function me(B,Ce){let ae=p,he=!1;if(B){ae=f.get(Ce),ae===void 0&&(ae=[],f.set(Ce,ae));const Pe=B.textures;if(ae.length!==Pe.length||ae[0]!==n.COLOR_ATTACHMENT0){for(let Le=0,et=Pe.length;Le<et;Le++)ae[Le]=n.COLOR_ATTACHMENT0+Le;ae.length=Pe.length,he=!0}}else ae[0]!==n.BACK&&(ae[0]=n.BACK,he=!0);he&&n.drawBuffers(ae)}function ze(B){return _!==B?(n.useProgram(B),_=B,!0):!1}const C={[Es]:n.FUNC_ADD,[av]:n.FUNC_SUBTRACT,[lv]:n.FUNC_REVERSE_SUBTRACT};C[cv]=n.MIN,C[dv]=n.MAX;const D={[uv]:n.ZERO,[fv]:n.ONE,[hv]:n.SRC_COLOR,[wc]:n.SRC_ALPHA,[xv]:n.SRC_ALPHA_SATURATE,[_v]:n.DST_COLOR,[mv]:n.DST_ALPHA,[pv]:n.ONE_MINUS_SRC_COLOR,[Ac]:n.ONE_MINUS_SRC_ALPHA,[vv]:n.ONE_MINUS_DST_COLOR,[gv]:n.ONE_MINUS_DST_ALPHA,[bv]:n.CONSTANT_COLOR,[yv]:n.ONE_MINUS_CONSTANT_COLOR,[Sv]:n.CONSTANT_ALPHA,[Mv]:n.ONE_MINUS_CONSTANT_ALPHA};function E(B,Ce,ae,he,Pe,Le,et,Lt,Xt,vt){if(B===Yi){v===!0&&(ue(n.BLEND),v=!1);return}if(v===!1&&(F(n.BLEND),v=!0),B!==ov){if(B!==g||vt!==w){if((m!==Es||b!==Es)&&(n.blendEquation(n.FUNC_ADD),m=Es,b=Es),vt)switch(B){case dr:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Af:n.blendFunc(n.ONE,n.ONE);break;case Cf:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Rf:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",B);break}else switch(B){case dr:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Af:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case Cf:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Rf:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",B);break}x=null,y=null,L=null,P=null,I.set(0,0,0),N=0,g=B,w=vt}return}Pe=Pe||Ce,Le=Le||ae,et=et||he,(Ce!==m||Pe!==b)&&(n.blendEquationSeparate(C[Ce],C[Pe]),m=Ce,b=Pe),(ae!==x||he!==y||Le!==L||et!==P)&&(n.blendFuncSeparate(D[ae],D[he],D[Le],D[et]),x=ae,y=he,L=Le,P=et),(Lt.equals(I)===!1||Xt!==N)&&(n.blendColor(Lt.r,Lt.g,Lt.b,Xt),I.copy(Lt),N=Xt),g=B,w=!1}function ie(B,Ce){B.side===Jn?ue(n.CULL_FACE):F(n.CULL_FACE);let ae=B.side===un;Ce&&(ae=!ae),te(ae),B.blending===dr&&B.transparent===!1?E(Yi):E(B.blending,B.blendEquation,B.blendSrc,B.blendDst,B.blendEquationAlpha,B.blendSrcAlpha,B.blendDstAlpha,B.blendColor,B.blendAlpha,B.premultipliedAlpha),o.setFunc(B.depthFunc),o.setTest(B.depthTest),o.setMask(B.depthWrite),r.setMask(B.colorWrite);const he=B.stencilWrite;a.setTest(he),he&&(a.setMask(B.stencilWriteMask),a.setFunc(B.stencilFunc,B.stencilRef,B.stencilFuncMask),a.setOp(B.stencilFail,B.stencilZFail,B.stencilZPass)),fe(B.polygonOffset,B.polygonOffsetFactor,B.polygonOffsetUnits),B.alphaToCoverage===!0?F(n.SAMPLE_ALPHA_TO_COVERAGE):ue(n.SAMPLE_ALPHA_TO_COVERAGE)}function te(B){M!==B&&(B?n.frontFace(n.CW):n.frontFace(n.CCW),M=B)}function se(B){B!==sv?(F(n.CULL_FACE),B!==R&&(B===wf?n.cullFace(n.BACK):B===rv?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ue(n.CULL_FACE),R=B}function le(B){B!==O&&(Y&&n.lineWidth(B),O=B)}function fe(B,Ce,ae){B?(F(n.POLYGON_OFFSET_FILL),(U!==Ce||X!==ae)&&(n.polygonOffset(Ce,ae),U=Ce,X=ae)):ue(n.POLYGON_OFFSET_FILL)}function re(B){B?F(n.SCISSOR_TEST):ue(n.SCISSOR_TEST)}function T(B){B===void 0&&(B=n.TEXTURE0+ee-1),be!==B&&(n.activeTexture(B),be=B)}function S(B,Ce,ae){ae===void 0&&(be===null?ae=n.TEXTURE0+ee-1:ae=be);let he=Te[ae];he===void 0&&(he={type:void 0,texture:void 0},Te[ae]=he),(he.type!==B||he.texture!==Ce)&&(be!==ae&&(n.activeTexture(ae),be=ae),n.bindTexture(B,Ce||we[B]),he.type=B,he.texture=Ce)}function k(){const B=Te[be];B!==void 0&&B.type!==void 0&&(n.bindTexture(B.type,null),B.type=void 0,B.texture=void 0)}function $(){try{n.compressedTexImage2D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function Z(){try{n.compressedTexImage3D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function q(){try{n.texSubImage2D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function Se(){try{n.texSubImage3D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function pe(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function xe(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function je(){try{n.texStorage2D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function ge(){try{n.texStorage3D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function De(){try{n.texImage2D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function Be(){try{n.texImage3D.apply(n,arguments)}catch(B){console.error("THREE.WebGLState:",B)}}function We(B){at.equals(B)===!1&&(n.scissor(B.x,B.y,B.z,B.w),at.copy(B))}function Ee(B){de.equals(B)===!1&&(n.viewport(B.x,B.y,B.z,B.w),de.copy(B))}function qe(B,Ce){let ae=c.get(Ce);ae===void 0&&(ae=new WeakMap,c.set(Ce,ae));let he=ae.get(B);he===void 0&&(he=n.getUniformBlockIndex(Ce,B.name),ae.set(B,he))}function Je(B,Ce){const he=c.get(Ce).get(B);l.get(Ce)!==he&&(n.uniformBlockBinding(Ce,he,B.__bindingPointIndex),l.set(Ce,he))}function Mt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},be=null,Te={},u={},f=new WeakMap,p=[],_=null,v=!1,g=null,m=null,x=null,y=null,b=null,L=null,P=null,I=new Ke(0,0,0),N=0,w=!1,M=null,R=null,O=null,U=null,X=null,at.set(0,0,n.canvas.width,n.canvas.height),de.set(0,0,n.canvas.width,n.canvas.height),r.reset(),o.reset(),a.reset()}return{buffers:{color:r,depth:o,stencil:a},enable:F,disable:ue,bindFramebuffer:ce,drawBuffers:me,useProgram:ze,setBlending:E,setMaterial:ie,setFlipSided:te,setCullFace:se,setLineWidth:le,setPolygonOffset:fe,setScissorTest:re,activeTexture:T,bindTexture:S,unbindTexture:k,compressedTexImage2D:$,compressedTexImage3D:Z,texImage2D:De,texImage3D:Be,updateUBOMapping:qe,uniformBlockBinding:Je,texStorage2D:je,texStorage3D:ge,texSubImage2D:q,texSubImage3D:Se,compressedTexSubImage2D:pe,compressedTexSubImage3D:xe,scissor:We,viewport:Ee,reset:Mt}}function JM(n,e,t,i,s,r,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new lt,d=new WeakMap;let u;const f=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(T,S){return p?new OffscreenCanvas(T,S):bo("canvas")}function v(T,S,k){let $=1;const Z=re(T);if((Z.width>k||Z.height>k)&&($=k/Math.max(Z.width,Z.height)),$<1)if(typeof HTMLImageElement<"u"&&T instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&T instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&T instanceof ImageBitmap||typeof VideoFrame<"u"&&T instanceof VideoFrame){const q=Math.floor($*Z.width),Se=Math.floor($*Z.height);u===void 0&&(u=_(q,Se));const pe=S?_(q,Se):u;return pe.width=q,pe.height=Se,pe.getContext("2d").drawImage(T,0,0,q,Se),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Z.width+"x"+Z.height+") to ("+q+"x"+Se+")."),pe}else return"data"in T&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Z.width+"x"+Z.height+")."),T;return T}function g(T){return T.generateMipmaps}function m(T){n.generateMipmap(T)}function x(T){return T.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:T.isWebGL3DRenderTarget?n.TEXTURE_3D:T.isWebGLArrayRenderTarget||T.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function y(T,S,k,$,Z=!1){if(T!==null){if(n[T]!==void 0)return n[T];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+T+"'")}let q=S;if(S===n.RED&&(k===n.FLOAT&&(q=n.R32F),k===n.HALF_FLOAT&&(q=n.R16F),k===n.UNSIGNED_BYTE&&(q=n.R8)),S===n.RED_INTEGER&&(k===n.UNSIGNED_BYTE&&(q=n.R8UI),k===n.UNSIGNED_SHORT&&(q=n.R16UI),k===n.UNSIGNED_INT&&(q=n.R32UI),k===n.BYTE&&(q=n.R8I),k===n.SHORT&&(q=n.R16I),k===n.INT&&(q=n.R32I)),S===n.RG&&(k===n.FLOAT&&(q=n.RG32F),k===n.HALF_FLOAT&&(q=n.RG16F),k===n.UNSIGNED_BYTE&&(q=n.RG8)),S===n.RG_INTEGER&&(k===n.UNSIGNED_BYTE&&(q=n.RG8UI),k===n.UNSIGNED_SHORT&&(q=n.RG16UI),k===n.UNSIGNED_INT&&(q=n.RG32UI),k===n.BYTE&&(q=n.RG8I),k===n.SHORT&&(q=n.RG16I),k===n.INT&&(q=n.RG32I)),S===n.RGB_INTEGER&&(k===n.UNSIGNED_BYTE&&(q=n.RGB8UI),k===n.UNSIGNED_SHORT&&(q=n.RGB16UI),k===n.UNSIGNED_INT&&(q=n.RGB32UI),k===n.BYTE&&(q=n.RGB8I),k===n.SHORT&&(q=n.RGB16I),k===n.INT&&(q=n.RGB32I)),S===n.RGBA_INTEGER&&(k===n.UNSIGNED_BYTE&&(q=n.RGBA8UI),k===n.UNSIGNED_SHORT&&(q=n.RGBA16UI),k===n.UNSIGNED_INT&&(q=n.RGBA32UI),k===n.BYTE&&(q=n.RGBA8I),k===n.SHORT&&(q=n.RGBA16I),k===n.INT&&(q=n.RGBA32I)),S===n.RGB&&k===n.UNSIGNED_INT_5_9_9_9_REV&&(q=n.RGB9_E5),S===n.RGBA){const Se=Z?La:ot.getTransfer($);k===n.FLOAT&&(q=n.RGBA32F),k===n.HALF_FLOAT&&(q=n.RGBA16F),k===n.UNSIGNED_BYTE&&(q=Se===St?n.SRGB8_ALPHA8:n.RGBA8),k===n.UNSIGNED_SHORT_4_4_4_4&&(q=n.RGBA4),k===n.UNSIGNED_SHORT_5_5_5_1&&(q=n.RGB5_A1)}return(q===n.R16F||q===n.R32F||q===n.RG16F||q===n.RG32F||q===n.RGBA16F||q===n.RGBA32F)&&e.get("EXT_color_buffer_float"),q}function b(T,S){let k;return T?S===null||S===Ds||S===yr?k=n.DEPTH24_STENCIL8:S===$n?k=n.DEPTH32F_STENCIL8:S===_o&&(k=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):S===null||S===Ds||S===yr?k=n.DEPTH_COMPONENT24:S===$n?k=n.DEPTH_COMPONENT32F:S===_o&&(k=n.DEPTH_COMPONENT16),k}function L(T,S){return g(T)===!0||T.isFramebufferTexture&&T.minFilter!==ln&&T.minFilter!==vn?Math.log2(Math.max(S.width,S.height))+1:T.mipmaps!==void 0&&T.mipmaps.length>0?T.mipmaps.length:T.isCompressedTexture&&Array.isArray(T.image)?S.mipmaps.length:1}function P(T){const S=T.target;S.removeEventListener("dispose",P),N(S),S.isVideoTexture&&d.delete(S)}function I(T){const S=T.target;S.removeEventListener("dispose",I),M(S)}function N(T){const S=i.get(T);if(S.__webglInit===void 0)return;const k=T.source,$=f.get(k);if($){const Z=$[S.__cacheKey];Z.usedTimes--,Z.usedTimes===0&&w(T),Object.keys($).length===0&&f.delete(k)}i.remove(T)}function w(T){const S=i.get(T);n.deleteTexture(S.__webglTexture);const k=T.source,$=f.get(k);delete $[S.__cacheKey],o.memory.textures--}function M(T){const S=i.get(T);if(T.depthTexture&&(T.depthTexture.dispose(),i.remove(T.depthTexture)),T.isWebGLCubeRenderTarget)for(let $=0;$<6;$++){if(Array.isArray(S.__webglFramebuffer[$]))for(let Z=0;Z<S.__webglFramebuffer[$].length;Z++)n.deleteFramebuffer(S.__webglFramebuffer[$][Z]);else n.deleteFramebuffer(S.__webglFramebuffer[$]);S.__webglDepthbuffer&&n.deleteRenderbuffer(S.__webglDepthbuffer[$])}else{if(Array.isArray(S.__webglFramebuffer))for(let $=0;$<S.__webglFramebuffer.length;$++)n.deleteFramebuffer(S.__webglFramebuffer[$]);else n.deleteFramebuffer(S.__webglFramebuffer);if(S.__webglDepthbuffer&&n.deleteRenderbuffer(S.__webglDepthbuffer),S.__webglMultisampledFramebuffer&&n.deleteFramebuffer(S.__webglMultisampledFramebuffer),S.__webglColorRenderbuffer)for(let $=0;$<S.__webglColorRenderbuffer.length;$++)S.__webglColorRenderbuffer[$]&&n.deleteRenderbuffer(S.__webglColorRenderbuffer[$]);S.__webglDepthRenderbuffer&&n.deleteRenderbuffer(S.__webglDepthRenderbuffer)}const k=T.textures;for(let $=0,Z=k.length;$<Z;$++){const q=i.get(k[$]);q.__webglTexture&&(n.deleteTexture(q.__webglTexture),o.memory.textures--),i.remove(k[$])}i.remove(T)}let R=0;function O(){R=0}function U(){const T=R;return T>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+T+" texture units while this GPU supports only "+s.maxTextures),R+=1,T}function X(T){const S=[];return S.push(T.wrapS),S.push(T.wrapT),S.push(T.wrapR||0),S.push(T.magFilter),S.push(T.minFilter),S.push(T.anisotropy),S.push(T.internalFormat),S.push(T.format),S.push(T.type),S.push(T.generateMipmaps),S.push(T.premultiplyAlpha),S.push(T.flipY),S.push(T.unpackAlignment),S.push(T.colorSpace),S.join()}function ee(T,S){const k=i.get(T);if(T.isVideoTexture&&le(T),T.isRenderTargetTexture===!1&&T.version>0&&k.__version!==T.version){const $=T.image;if($===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if($.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{de(k,T,S);return}}t.bindTexture(n.TEXTURE_2D,k.__webglTexture,n.TEXTURE0+S)}function Y(T,S){const k=i.get(T);if(T.version>0&&k.__version!==T.version){de(k,T,S);return}t.bindTexture(n.TEXTURE_2D_ARRAY,k.__webglTexture,n.TEXTURE0+S)}function oe(T,S){const k=i.get(T);if(T.version>0&&k.__version!==T.version){de(k,T,S);return}t.bindTexture(n.TEXTURE_3D,k.__webglTexture,n.TEXTURE0+S)}function W(T,S){const k=i.get(T);if(T.version>0&&k.__version!==T.version){ye(k,T,S);return}t.bindTexture(n.TEXTURE_CUBE_MAP,k.__webglTexture,n.TEXTURE0+S)}const be={[ts]:n.REPEAT,[$i]:n.CLAMP_TO_EDGE,[Ra]:n.MIRRORED_REPEAT},Te={[ln]:n.NEAREST,[Sm]:n.NEAREST_MIPMAP_NEAREST,[Qr]:n.NEAREST_MIPMAP_LINEAR,[vn]:n.LINEAR,[ha]:n.LINEAR_MIPMAP_NEAREST,[vi]:n.LINEAR_MIPMAP_LINEAR},Ie={[Bv]:n.NEVER,[Wv]:n.ALWAYS,[Hv]:n.LESS,[Nm]:n.LEQUAL,[zv]:n.EQUAL,[$v]:n.GEQUAL,[Vv]:n.GREATER,[Gv]:n.NOTEQUAL};function He(T,S){if(S.type===$n&&e.has("OES_texture_float_linear")===!1&&(S.magFilter===vn||S.magFilter===ha||S.magFilter===Qr||S.magFilter===vi||S.minFilter===vn||S.minFilter===ha||S.minFilter===Qr||S.minFilter===vi)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(T,n.TEXTURE_WRAP_S,be[S.wrapS]),n.texParameteri(T,n.TEXTURE_WRAP_T,be[S.wrapT]),(T===n.TEXTURE_3D||T===n.TEXTURE_2D_ARRAY)&&n.texParameteri(T,n.TEXTURE_WRAP_R,be[S.wrapR]),n.texParameteri(T,n.TEXTURE_MAG_FILTER,Te[S.magFilter]),n.texParameteri(T,n.TEXTURE_MIN_FILTER,Te[S.minFilter]),S.compareFunction&&(n.texParameteri(T,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(T,n.TEXTURE_COMPARE_FUNC,Ie[S.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(S.magFilter===ln||S.minFilter!==Qr&&S.minFilter!==vi||S.type===$n&&e.has("OES_texture_float_linear")===!1)return;if(S.anisotropy>1||i.get(S).__currentAnisotropy){const k=e.get("EXT_texture_filter_anisotropic");n.texParameterf(T,k.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(S.anisotropy,s.getMaxAnisotropy())),i.get(S).__currentAnisotropy=S.anisotropy}}}function at(T,S){let k=!1;T.__webglInit===void 0&&(T.__webglInit=!0,S.addEventListener("dispose",P));const $=S.source;let Z=f.get($);Z===void 0&&(Z={},f.set($,Z));const q=X(S);if(q!==T.__cacheKey){Z[q]===void 0&&(Z[q]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,k=!0),Z[q].usedTimes++;const Se=Z[T.__cacheKey];Se!==void 0&&(Z[T.__cacheKey].usedTimes--,Se.usedTimes===0&&w(S)),T.__cacheKey=q,T.__webglTexture=Z[q].texture}return k}function de(T,S,k){let $=n.TEXTURE_2D;(S.isDataArrayTexture||S.isCompressedArrayTexture)&&($=n.TEXTURE_2D_ARRAY),S.isData3DTexture&&($=n.TEXTURE_3D);const Z=at(T,S),q=S.source;t.bindTexture($,T.__webglTexture,n.TEXTURE0+k);const Se=i.get(q);if(q.version!==Se.__version||Z===!0){t.activeTexture(n.TEXTURE0+k);const pe=ot.getPrimaries(ot.workingColorSpace),xe=S.colorSpace===Gi?null:ot.getPrimaries(S.colorSpace),je=S.colorSpace===Gi||pe===xe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,S.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,S.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,S.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,je);let ge=v(S.image,!1,s.maxTextureSize);ge=fe(S,ge);const De=r.convert(S.format,S.colorSpace),Be=r.convert(S.type);let We=y(S.internalFormat,De,Be,S.colorSpace,S.isVideoTexture);He($,S);let Ee;const qe=S.mipmaps,Je=S.isVideoTexture!==!0,Mt=Se.__version===void 0||Z===!0,B=q.dataReady,Ce=L(S,ge);if(S.isDepthTexture)We=b(S.format===Sr,S.type),Mt&&(Je?t.texStorage2D(n.TEXTURE_2D,1,We,ge.width,ge.height):t.texImage2D(n.TEXTURE_2D,0,We,ge.width,ge.height,0,De,Be,null));else if(S.isDataTexture)if(qe.length>0){Je&&Mt&&t.texStorage2D(n.TEXTURE_2D,Ce,We,qe[0].width,qe[0].height);for(let ae=0,he=qe.length;ae<he;ae++)Ee=qe[ae],Je?B&&t.texSubImage2D(n.TEXTURE_2D,ae,0,0,Ee.width,Ee.height,De,Be,Ee.data):t.texImage2D(n.TEXTURE_2D,ae,We,Ee.width,Ee.height,0,De,Be,Ee.data);S.generateMipmaps=!1}else Je?(Mt&&t.texStorage2D(n.TEXTURE_2D,Ce,We,ge.width,ge.height),B&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ge.width,ge.height,De,Be,ge.data)):t.texImage2D(n.TEXTURE_2D,0,We,ge.width,ge.height,0,De,Be,ge.data);else if(S.isCompressedTexture)if(S.isCompressedArrayTexture){Je&&Mt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ce,We,qe[0].width,qe[0].height,ge.depth);for(let ae=0,he=qe.length;ae<he;ae++)if(Ee=qe[ae],S.format!==An)if(De!==null)if(Je){if(B)if(S.layerUpdates.size>0){const Pe=vh(Ee.width,Ee.height,S.format,S.type);for(const Le of S.layerUpdates){const et=Ee.data.subarray(Le*Pe/Ee.data.BYTES_PER_ELEMENT,(Le+1)*Pe/Ee.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ae,0,0,Le,Ee.width,Ee.height,1,De,et)}S.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ae,0,0,0,Ee.width,Ee.height,ge.depth,De,Ee.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,ae,We,Ee.width,Ee.height,ge.depth,0,Ee.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Je?B&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,ae,0,0,0,Ee.width,Ee.height,ge.depth,De,Be,Ee.data):t.texImage3D(n.TEXTURE_2D_ARRAY,ae,We,Ee.width,Ee.height,ge.depth,0,De,Be,Ee.data)}else{Je&&Mt&&t.texStorage2D(n.TEXTURE_2D,Ce,We,qe[0].width,qe[0].height);for(let ae=0,he=qe.length;ae<he;ae++)Ee=qe[ae],S.format!==An?De!==null?Je?B&&t.compressedTexSubImage2D(n.TEXTURE_2D,ae,0,0,Ee.width,Ee.height,De,Ee.data):t.compressedTexImage2D(n.TEXTURE_2D,ae,We,Ee.width,Ee.height,0,Ee.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Je?B&&t.texSubImage2D(n.TEXTURE_2D,ae,0,0,Ee.width,Ee.height,De,Be,Ee.data):t.texImage2D(n.TEXTURE_2D,ae,We,Ee.width,Ee.height,0,De,Be,Ee.data)}else if(S.isDataArrayTexture)if(Je){if(Mt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ce,We,ge.width,ge.height,ge.depth),B)if(S.layerUpdates.size>0){const ae=vh(ge.width,ge.height,S.format,S.type);for(const he of S.layerUpdates){const Pe=ge.data.subarray(he*ae/ge.data.BYTES_PER_ELEMENT,(he+1)*ae/ge.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,he,ge.width,ge.height,1,De,Be,Pe)}S.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,ge.width,ge.height,ge.depth,De,Be,ge.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,We,ge.width,ge.height,ge.depth,0,De,Be,ge.data);else if(S.isData3DTexture)Je?(Mt&&t.texStorage3D(n.TEXTURE_3D,Ce,We,ge.width,ge.height,ge.depth),B&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,ge.width,ge.height,ge.depth,De,Be,ge.data)):t.texImage3D(n.TEXTURE_3D,0,We,ge.width,ge.height,ge.depth,0,De,Be,ge.data);else if(S.isFramebufferTexture){if(Mt)if(Je)t.texStorage2D(n.TEXTURE_2D,Ce,We,ge.width,ge.height);else{let ae=ge.width,he=ge.height;for(let Pe=0;Pe<Ce;Pe++)t.texImage2D(n.TEXTURE_2D,Pe,We,ae,he,0,De,Be,null),ae>>=1,he>>=1}}else if(qe.length>0){if(Je&&Mt){const ae=re(qe[0]);t.texStorage2D(n.TEXTURE_2D,Ce,We,ae.width,ae.height)}for(let ae=0,he=qe.length;ae<he;ae++)Ee=qe[ae],Je?B&&t.texSubImage2D(n.TEXTURE_2D,ae,0,0,De,Be,Ee):t.texImage2D(n.TEXTURE_2D,ae,We,De,Be,Ee);S.generateMipmaps=!1}else if(Je){if(Mt){const ae=re(ge);t.texStorage2D(n.TEXTURE_2D,Ce,We,ae.width,ae.height)}B&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,De,Be,ge)}else t.texImage2D(n.TEXTURE_2D,0,We,De,Be,ge);g(S)&&m($),Se.__version=q.version,S.onUpdate&&S.onUpdate(S)}T.__version=S.version}function ye(T,S,k){if(S.image.length!==6)return;const $=at(T,S),Z=S.source;t.bindTexture(n.TEXTURE_CUBE_MAP,T.__webglTexture,n.TEXTURE0+k);const q=i.get(Z);if(Z.version!==q.__version||$===!0){t.activeTexture(n.TEXTURE0+k);const Se=ot.getPrimaries(ot.workingColorSpace),pe=S.colorSpace===Gi?null:ot.getPrimaries(S.colorSpace),xe=S.colorSpace===Gi||Se===pe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,S.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,S.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,S.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,xe);const je=S.isCompressedTexture||S.image[0].isCompressedTexture,ge=S.image[0]&&S.image[0].isDataTexture,De=[];for(let he=0;he<6;he++)!je&&!ge?De[he]=v(S.image[he],!0,s.maxCubemapSize):De[he]=ge?S.image[he].image:S.image[he],De[he]=fe(S,De[he]);const Be=De[0],We=r.convert(S.format,S.colorSpace),Ee=r.convert(S.type),qe=y(S.internalFormat,We,Ee,S.colorSpace),Je=S.isVideoTexture!==!0,Mt=q.__version===void 0||$===!0,B=Z.dataReady;let Ce=L(S,Be);He(n.TEXTURE_CUBE_MAP,S);let ae;if(je){Je&&Mt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ce,qe,Be.width,Be.height);for(let he=0;he<6;he++){ae=De[he].mipmaps;for(let Pe=0;Pe<ae.length;Pe++){const Le=ae[Pe];S.format!==An?We!==null?Je?B&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Pe,0,0,Le.width,Le.height,We,Le.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Pe,qe,Le.width,Le.height,0,Le.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Je?B&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Pe,0,0,Le.width,Le.height,We,Ee,Le.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Pe,qe,Le.width,Le.height,0,We,Ee,Le.data)}}}else{if(ae=S.mipmaps,Je&&Mt){ae.length>0&&Ce++;const he=re(De[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Ce,qe,he.width,he.height)}for(let he=0;he<6;he++)if(ge){Je?B&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,0,0,De[he].width,De[he].height,We,Ee,De[he].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,qe,De[he].width,De[he].height,0,We,Ee,De[he].data);for(let Pe=0;Pe<ae.length;Pe++){const et=ae[Pe].image[he].image;Je?B&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Pe+1,0,0,et.width,et.height,We,Ee,et.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Pe+1,qe,et.width,et.height,0,We,Ee,et.data)}}else{Je?B&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,0,0,We,Ee,De[he]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,0,qe,We,Ee,De[he]);for(let Pe=0;Pe<ae.length;Pe++){const Le=ae[Pe];Je?B&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Pe+1,0,0,We,Ee,Le.image[he]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+he,Pe+1,qe,We,Ee,Le.image[he])}}}g(S)&&m(n.TEXTURE_CUBE_MAP),q.__version=Z.version,S.onUpdate&&S.onUpdate(S)}T.__version=S.version}function we(T,S,k,$,Z,q){const Se=r.convert(k.format,k.colorSpace),pe=r.convert(k.type),xe=y(k.internalFormat,Se,pe,k.colorSpace),je=i.get(S),ge=i.get(k);if(ge.__renderTarget=S,!je.__hasExternalTextures){const De=Math.max(1,S.width>>q),Be=Math.max(1,S.height>>q);Z===n.TEXTURE_3D||Z===n.TEXTURE_2D_ARRAY?t.texImage3D(Z,q,xe,De,Be,S.depth,0,Se,pe,null):t.texImage2D(Z,q,xe,De,Be,0,Se,pe,null)}t.bindFramebuffer(n.FRAMEBUFFER,T),se(S)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,$,Z,ge.__webglTexture,0,te(S)):(Z===n.TEXTURE_2D||Z>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Z<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,$,Z,ge.__webglTexture,q),t.bindFramebuffer(n.FRAMEBUFFER,null)}function F(T,S,k){if(n.bindRenderbuffer(n.RENDERBUFFER,T),S.depthBuffer){const $=S.depthTexture,Z=$&&$.isDepthTexture?$.type:null,q=b(S.stencilBuffer,Z),Se=S.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,pe=te(S);se(S)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,pe,q,S.width,S.height):k?n.renderbufferStorageMultisample(n.RENDERBUFFER,pe,q,S.width,S.height):n.renderbufferStorage(n.RENDERBUFFER,q,S.width,S.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Se,n.RENDERBUFFER,T)}else{const $=S.textures;for(let Z=0;Z<$.length;Z++){const q=$[Z],Se=r.convert(q.format,q.colorSpace),pe=r.convert(q.type),xe=y(q.internalFormat,Se,pe,q.colorSpace),je=te(S);k&&se(S)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,je,xe,S.width,S.height):se(S)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,je,xe,S.width,S.height):n.renderbufferStorage(n.RENDERBUFFER,xe,S.width,S.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ue(T,S){if(S&&S.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,T),!(S.depthTexture&&S.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const $=i.get(S.depthTexture);$.__renderTarget=S,(!$.__webglTexture||S.depthTexture.image.width!==S.width||S.depthTexture.image.height!==S.height)&&(S.depthTexture.image.width=S.width,S.depthTexture.image.height=S.height,S.depthTexture.needsUpdate=!0),ee(S.depthTexture,0);const Z=$.__webglTexture,q=te(S);if(S.depthTexture.format===ur)se(S)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Z,0,q):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Z,0);else if(S.depthTexture.format===Sr)se(S)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Z,0,q):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Z,0);else throw new Error("Unknown depthTexture format")}function ce(T){const S=i.get(T),k=T.isWebGLCubeRenderTarget===!0;if(S.__boundDepthTexture!==T.depthTexture){const $=T.depthTexture;if(S.__depthDisposeCallback&&S.__depthDisposeCallback(),$){const Z=()=>{delete S.__boundDepthTexture,delete S.__depthDisposeCallback,$.removeEventListener("dispose",Z)};$.addEventListener("dispose",Z),S.__depthDisposeCallback=Z}S.__boundDepthTexture=$}if(T.depthTexture&&!S.__autoAllocateDepthBuffer){if(k)throw new Error("target.depthTexture not supported in Cube render targets");ue(S.__webglFramebuffer,T)}else if(k){S.__webglDepthbuffer=[];for(let $=0;$<6;$++)if(t.bindFramebuffer(n.FRAMEBUFFER,S.__webglFramebuffer[$]),S.__webglDepthbuffer[$]===void 0)S.__webglDepthbuffer[$]=n.createRenderbuffer(),F(S.__webglDepthbuffer[$],T,!1);else{const Z=T.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,q=S.__webglDepthbuffer[$];n.bindRenderbuffer(n.RENDERBUFFER,q),n.framebufferRenderbuffer(n.FRAMEBUFFER,Z,n.RENDERBUFFER,q)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,S.__webglFramebuffer),S.__webglDepthbuffer===void 0)S.__webglDepthbuffer=n.createRenderbuffer(),F(S.__webglDepthbuffer,T,!1);else{const $=T.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Z=S.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Z),n.framebufferRenderbuffer(n.FRAMEBUFFER,$,n.RENDERBUFFER,Z)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function me(T,S,k){const $=i.get(T);S!==void 0&&we($.__webglFramebuffer,T,T.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),k!==void 0&&ce(T)}function ze(T){const S=T.texture,k=i.get(T),$=i.get(S);T.addEventListener("dispose",I);const Z=T.textures,q=T.isWebGLCubeRenderTarget===!0,Se=Z.length>1;if(Se||($.__webglTexture===void 0&&($.__webglTexture=n.createTexture()),$.__version=S.version,o.memory.textures++),q){k.__webglFramebuffer=[];for(let pe=0;pe<6;pe++)if(S.mipmaps&&S.mipmaps.length>0){k.__webglFramebuffer[pe]=[];for(let xe=0;xe<S.mipmaps.length;xe++)k.__webglFramebuffer[pe][xe]=n.createFramebuffer()}else k.__webglFramebuffer[pe]=n.createFramebuffer()}else{if(S.mipmaps&&S.mipmaps.length>0){k.__webglFramebuffer=[];for(let pe=0;pe<S.mipmaps.length;pe++)k.__webglFramebuffer[pe]=n.createFramebuffer()}else k.__webglFramebuffer=n.createFramebuffer();if(Se)for(let pe=0,xe=Z.length;pe<xe;pe++){const je=i.get(Z[pe]);je.__webglTexture===void 0&&(je.__webglTexture=n.createTexture(),o.memory.textures++)}if(T.samples>0&&se(T)===!1){k.__webglMultisampledFramebuffer=n.createFramebuffer(),k.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,k.__webglMultisampledFramebuffer);for(let pe=0;pe<Z.length;pe++){const xe=Z[pe];k.__webglColorRenderbuffer[pe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,k.__webglColorRenderbuffer[pe]);const je=r.convert(xe.format,xe.colorSpace),ge=r.convert(xe.type),De=y(xe.internalFormat,je,ge,xe.colorSpace,T.isXRRenderTarget===!0),Be=te(T);n.renderbufferStorageMultisample(n.RENDERBUFFER,Be,De,T.width,T.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+pe,n.RENDERBUFFER,k.__webglColorRenderbuffer[pe])}n.bindRenderbuffer(n.RENDERBUFFER,null),T.depthBuffer&&(k.__webglDepthRenderbuffer=n.createRenderbuffer(),F(k.__webglDepthRenderbuffer,T,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(q){t.bindTexture(n.TEXTURE_CUBE_MAP,$.__webglTexture),He(n.TEXTURE_CUBE_MAP,S);for(let pe=0;pe<6;pe++)if(S.mipmaps&&S.mipmaps.length>0)for(let xe=0;xe<S.mipmaps.length;xe++)we(k.__webglFramebuffer[pe][xe],T,S,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,xe);else we(k.__webglFramebuffer[pe],T,S,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0);g(S)&&m(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Se){for(let pe=0,xe=Z.length;pe<xe;pe++){const je=Z[pe],ge=i.get(je);t.bindTexture(n.TEXTURE_2D,ge.__webglTexture),He(n.TEXTURE_2D,je),we(k.__webglFramebuffer,T,je,n.COLOR_ATTACHMENT0+pe,n.TEXTURE_2D,0),g(je)&&m(n.TEXTURE_2D)}t.unbindTexture()}else{let pe=n.TEXTURE_2D;if((T.isWebGL3DRenderTarget||T.isWebGLArrayRenderTarget)&&(pe=T.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(pe,$.__webglTexture),He(pe,S),S.mipmaps&&S.mipmaps.length>0)for(let xe=0;xe<S.mipmaps.length;xe++)we(k.__webglFramebuffer[xe],T,S,n.COLOR_ATTACHMENT0,pe,xe);else we(k.__webglFramebuffer,T,S,n.COLOR_ATTACHMENT0,pe,0);g(S)&&m(pe),t.unbindTexture()}T.depthBuffer&&ce(T)}function C(T){const S=T.textures;for(let k=0,$=S.length;k<$;k++){const Z=S[k];if(g(Z)){const q=x(T),Se=i.get(Z).__webglTexture;t.bindTexture(q,Se),m(q),t.unbindTexture()}}}const D=[],E=[];function ie(T){if(T.samples>0){if(se(T)===!1){const S=T.textures,k=T.width,$=T.height;let Z=n.COLOR_BUFFER_BIT;const q=T.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Se=i.get(T),pe=S.length>1;if(pe)for(let xe=0;xe<S.length;xe++)t.bindFramebuffer(n.FRAMEBUFFER,Se.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+xe,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Se.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+xe,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Se.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Se.__webglFramebuffer);for(let xe=0;xe<S.length;xe++){if(T.resolveDepthBuffer&&(T.depthBuffer&&(Z|=n.DEPTH_BUFFER_BIT),T.stencilBuffer&&T.resolveStencilBuffer&&(Z|=n.STENCIL_BUFFER_BIT)),pe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Se.__webglColorRenderbuffer[xe]);const je=i.get(S[xe]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,je,0)}n.blitFramebuffer(0,0,k,$,0,0,k,$,Z,n.NEAREST),l===!0&&(D.length=0,E.length=0,D.push(n.COLOR_ATTACHMENT0+xe),T.depthBuffer&&T.resolveDepthBuffer===!1&&(D.push(q),E.push(q),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,E)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,D))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),pe)for(let xe=0;xe<S.length;xe++){t.bindFramebuffer(n.FRAMEBUFFER,Se.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+xe,n.RENDERBUFFER,Se.__webglColorRenderbuffer[xe]);const je=i.get(S[xe]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Se.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+xe,n.TEXTURE_2D,je,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Se.__webglMultisampledFramebuffer)}else if(T.depthBuffer&&T.resolveDepthBuffer===!1&&l){const S=T.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[S])}}}function te(T){return Math.min(s.maxSamples,T.samples)}function se(T){const S=i.get(T);return T.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&S.__useRenderToTexture!==!1}function le(T){const S=o.render.frame;d.get(T)!==S&&(d.set(T,S),T.update())}function fe(T,S){const k=T.colorSpace,$=T.format,Z=T.type;return T.isCompressedTexture===!0||T.isVideoTexture===!0||k!==Qt&&k!==Gi&&(ot.getTransfer(k)===St?($!==An||Z!==wi)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",k)),S}function re(T){return typeof HTMLImageElement<"u"&&T instanceof HTMLImageElement?(c.width=T.naturalWidth||T.width,c.height=T.naturalHeight||T.height):typeof VideoFrame<"u"&&T instanceof VideoFrame?(c.width=T.displayWidth,c.height=T.displayHeight):(c.width=T.width,c.height=T.height),c}this.allocateTextureUnit=U,this.resetTextureUnits=O,this.setTexture2D=ee,this.setTexture2DArray=Y,this.setTexture3D=oe,this.setTextureCube=W,this.rebindTextures=me,this.setupRenderTarget=ze,this.updateRenderTargetMipmap=C,this.updateMultisampleRenderTarget=ie,this.setupDepthRenderbuffer=ce,this.setupFrameBufferTexture=we,this.useMultisampledRTT=se}function QM(n,e){function t(i,s=Gi){let r;const o=ot.getTransfer(s);if(i===wi)return n.UNSIGNED_BYTE;if(i===jd)return n.UNSIGNED_SHORT_4_4_4_4;if(i===qd)return n.UNSIGNED_SHORT_5_5_5_1;if(i===Tm)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===Mm)return n.BYTE;if(i===Em)return n.SHORT;if(i===_o)return n.UNSIGNED_SHORT;if(i===Xd)return n.INT;if(i===Ds)return n.UNSIGNED_INT;if(i===$n)return n.FLOAT;if(i===yo)return n.HALF_FLOAT;if(i===wm)return n.ALPHA;if(i===Am)return n.RGB;if(i===An)return n.RGBA;if(i===Cm)return n.LUMINANCE;if(i===Rm)return n.LUMINANCE_ALPHA;if(i===ur)return n.DEPTH_COMPONENT;if(i===Sr)return n.DEPTH_STENCIL;if(i===Yd)return n.RED;if(i===Kd)return n.RED_INTEGER;if(i===Lm)return n.RG;if(i===Zd)return n.RG_INTEGER;if(i===Jd)return n.RGBA_INTEGER;if(i===pa||i===ma||i===ga||i===_a)if(o===St)if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(i===pa)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===ma)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===ga)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===_a)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=e.get("WEBGL_compressed_texture_s3tc"),r!==null){if(i===pa)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===ma)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===ga)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===_a)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===kc||i===Fc||i===Bc||i===Hc)if(r=e.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(i===kc)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Fc)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Bc)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Hc)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===zc||i===Vc||i===Gc)if(r=e.get("WEBGL_compressed_texture_etc"),r!==null){if(i===zc||i===Vc)return o===St?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(i===Gc)return o===St?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===$c||i===Wc||i===Xc||i===jc||i===qc||i===Yc||i===Kc||i===Zc||i===Jc||i===Qc||i===ed||i===td||i===nd||i===id)if(r=e.get("WEBGL_compressed_texture_astc"),r!==null){if(i===$c)return o===St?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Wc)return o===St?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Xc)return o===St?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===jc)return o===St?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===qc)return o===St?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Yc)return o===St?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Kc)return o===St?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Zc)return o===St?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Jc)return o===St?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Qc)return o===St?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===ed)return o===St?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===td)return o===St?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===nd)return o===St?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===id)return o===St?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===va||i===sd||i===rd)if(r=e.get("EXT_texture_compression_bptc"),r!==null){if(i===va)return o===St?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===sd)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===rd)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===Pm||i===od||i===ad||i===ld)if(r=e.get("EXT_texture_compression_rgtc"),r!==null){if(i===va)return r.COMPRESSED_RED_RGTC1_EXT;if(i===od)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===ad)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===ld)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===yr?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const eE={type:"move"};class Zl{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Cs,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Cs,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new G,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new G),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Cs,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new G,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new G),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let s=null,r=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const v of e.hand.values()){const g=t.getJointPose(v,i),m=this._getHandJoint(c,v);g!==null&&(m.matrix.fromArray(g.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=g.radius),m.visible=g!==null}const d=c.joints["index-finger-tip"],u=c.joints["thumb-tip"],f=d.position.distanceTo(u.position),p=.02,_=.005;c.inputState.pinching&&f>p+_?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=p-_&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,i),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(s=t.getPose(e.targetRaySpace,i),s===null&&r!==null&&(s=r),s!==null&&(a.matrix.fromArray(s.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,s.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(s.linearVelocity)):a.hasLinearVelocity=!1,s.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(s.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(eE)))}return a!==null&&(a.visible=s!==null),l!==null&&(l.visible=r!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Cs;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const tE=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,nE=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class iE{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const s=new Vt,r=e.properties.get(s);r.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=s}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new ns({vertexShader:tE,fragmentShader:nE,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new xn(new il(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class sE extends Pr{constructor(e,t){super();const i=this;let s=null,r=1,o=null,a="local-floor",l=1,c=null,d=null,u=null,f=null,p=null,_=null;const v=new iE,g=t.getContextAttributes();let m=null,x=null;const y=[],b=[],L=new lt;let P=null;const I=new on;I.viewport=new pt;const N=new on;N.viewport=new pt;const w=[I,N],M=new gb;let R=null,O=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(de){let ye=y[de];return ye===void 0&&(ye=new Zl,y[de]=ye),ye.getTargetRaySpace()},this.getControllerGrip=function(de){let ye=y[de];return ye===void 0&&(ye=new Zl,y[de]=ye),ye.getGripSpace()},this.getHand=function(de){let ye=y[de];return ye===void 0&&(ye=new Zl,y[de]=ye),ye.getHandSpace()};function U(de){const ye=b.indexOf(de.inputSource);if(ye===-1)return;const we=y[ye];we!==void 0&&(we.update(de.inputSource,de.frame,c||o),we.dispatchEvent({type:de.type,data:de.inputSource}))}function X(){s.removeEventListener("select",U),s.removeEventListener("selectstart",U),s.removeEventListener("selectend",U),s.removeEventListener("squeeze",U),s.removeEventListener("squeezestart",U),s.removeEventListener("squeezeend",U),s.removeEventListener("end",X),s.removeEventListener("inputsourceschange",ee);for(let de=0;de<y.length;de++){const ye=b[de];ye!==null&&(b[de]=null,y[de].disconnect(ye))}R=null,O=null,v.reset(),e.setRenderTarget(m),p=null,f=null,u=null,s=null,x=null,at.stop(),i.isPresenting=!1,e.setPixelRatio(P),e.setSize(L.width,L.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(de){r=de,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(de){a=de,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(de){c=de},this.getBaseLayer=function(){return f!==null?f:p},this.getBinding=function(){return u},this.getFrame=function(){return _},this.getSession=function(){return s},this.setSession=async function(de){if(s=de,s!==null){if(m=e.getRenderTarget(),s.addEventListener("select",U),s.addEventListener("selectstart",U),s.addEventListener("selectend",U),s.addEventListener("squeeze",U),s.addEventListener("squeezestart",U),s.addEventListener("squeezeend",U),s.addEventListener("end",X),s.addEventListener("inputsourceschange",ee),g.xrCompatible!==!0&&await t.makeXRCompatible(),P=e.getPixelRatio(),e.getSize(L),s.enabledFeatures!==void 0&&s.enabledFeatures.includes("layers")){let we=null,F=null,ue=null;g.depth&&(ue=g.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,we=g.stencil?Sr:ur,F=g.stencil?yr:Ds);const ce={colorFormat:t.RGBA8,depthFormat:ue,scaleFactor:r};u=new XRWebGLBinding(s,t),f=u.createProjectionLayer(ce),s.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),x=new Ns(f.textureWidth,f.textureHeight,{format:An,type:wi,depthTexture:new qm(f.textureWidth,f.textureHeight,F,void 0,void 0,void 0,void 0,void 0,void 0,we),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1})}else{const we={antialias:g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:r};p=new XRWebGLLayer(s,t,we),s.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),x=new Ns(p.framebufferWidth,p.framebufferHeight,{format:An,type:wi,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil})}x.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await s.requestReferenceSpace(a),at.setContext(s),at.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return v.getDepthTexture()};function ee(de){for(let ye=0;ye<de.removed.length;ye++){const we=de.removed[ye],F=b.indexOf(we);F>=0&&(b[F]=null,y[F].disconnect(we))}for(let ye=0;ye<de.added.length;ye++){const we=de.added[ye];let F=b.indexOf(we);if(F===-1){for(let ce=0;ce<y.length;ce++)if(ce>=b.length){b.push(we),F=ce;break}else if(b[ce]===null){b[ce]=we,F=ce;break}if(F===-1)break}const ue=y[F];ue&&ue.connect(we)}}const Y=new G,oe=new G;function W(de,ye,we){Y.setFromMatrixPosition(ye.matrixWorld),oe.setFromMatrixPosition(we.matrixWorld);const F=Y.distanceTo(oe),ue=ye.projectionMatrix.elements,ce=we.projectionMatrix.elements,me=ue[14]/(ue[10]-1),ze=ue[14]/(ue[10]+1),C=(ue[9]+1)/ue[5],D=(ue[9]-1)/ue[5],E=(ue[8]-1)/ue[0],ie=(ce[8]+1)/ce[0],te=me*E,se=me*ie,le=F/(-E+ie),fe=le*-E;if(ye.matrixWorld.decompose(de.position,de.quaternion,de.scale),de.translateX(fe),de.translateZ(le),de.matrixWorld.compose(de.position,de.quaternion,de.scale),de.matrixWorldInverse.copy(de.matrixWorld).invert(),ue[10]===-1)de.projectionMatrix.copy(ye.projectionMatrix),de.projectionMatrixInverse.copy(ye.projectionMatrixInverse);else{const re=me+le,T=ze+le,S=te-fe,k=se+(F-fe),$=C*ze/T*re,Z=D*ze/T*re;de.projectionMatrix.makePerspective(S,k,$,Z,re,T),de.projectionMatrixInverse.copy(de.projectionMatrix).invert()}}function be(de,ye){ye===null?de.matrixWorld.copy(de.matrix):de.matrixWorld.multiplyMatrices(ye.matrixWorld,de.matrix),de.matrixWorldInverse.copy(de.matrixWorld).invert()}this.updateCamera=function(de){if(s===null)return;let ye=de.near,we=de.far;v.texture!==null&&(v.depthNear>0&&(ye=v.depthNear),v.depthFar>0&&(we=v.depthFar)),M.near=N.near=I.near=ye,M.far=N.far=I.far=we,(R!==M.near||O!==M.far)&&(s.updateRenderState({depthNear:M.near,depthFar:M.far}),R=M.near,O=M.far),I.layers.mask=de.layers.mask|2,N.layers.mask=de.layers.mask|4,M.layers.mask=I.layers.mask|N.layers.mask;const F=de.parent,ue=M.cameras;be(M,F);for(let ce=0;ce<ue.length;ce++)be(ue[ce],F);ue.length===2?W(M,I,N):M.projectionMatrix.copy(I.projectionMatrix),Te(de,M,F)};function Te(de,ye,we){we===null?de.matrix.copy(ye.matrixWorld):(de.matrix.copy(we.matrixWorld),de.matrix.invert(),de.matrix.multiply(ye.matrixWorld)),de.matrix.decompose(de.position,de.quaternion,de.scale),de.updateMatrixWorld(!0),de.projectionMatrix.copy(ye.projectionMatrix),de.projectionMatrixInverse.copy(ye.projectionMatrixInverse),de.isPerspectiveCamera&&(de.fov=Mr*2*Math.atan(1/de.projectionMatrix.elements[5]),de.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(f===null&&p===null))return l},this.setFoveation=function(de){l=de,f!==null&&(f.fixedFoveation=de),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=de)},this.hasDepthSensing=function(){return v.texture!==null},this.getDepthSensingMesh=function(){return v.getMesh(M)};let Ie=null;function He(de,ye){if(d=ye.getViewerPose(c||o),_=ye,d!==null){const we=d.views;p!==null&&(e.setRenderTargetFramebuffer(x,p.framebuffer),e.setRenderTarget(x));let F=!1;we.length!==M.cameras.length&&(M.cameras.length=0,F=!0);for(let ce=0;ce<we.length;ce++){const me=we[ce];let ze=null;if(p!==null)ze=p.getViewport(me);else{const D=u.getViewSubImage(f,me);ze=D.viewport,ce===0&&(e.setRenderTargetTextures(x,D.colorTexture,f.ignoreDepthValues?void 0:D.depthStencilTexture),e.setRenderTarget(x))}let C=w[ce];C===void 0&&(C=new on,C.layers.enable(ce),C.viewport=new pt,w[ce]=C),C.matrix.fromArray(me.transform.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale),C.projectionMatrix.fromArray(me.projectionMatrix),C.projectionMatrixInverse.copy(C.projectionMatrix).invert(),C.viewport.set(ze.x,ze.y,ze.width,ze.height),ce===0&&(M.matrix.copy(C.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),F===!0&&M.cameras.push(C)}const ue=s.enabledFeatures;if(ue&&ue.includes("depth-sensing")){const ce=u.getDepthInformation(we[0]);ce&&ce.isValid&&ce.texture&&v.init(e,ce,s.renderState)}}for(let we=0;we<y.length;we++){const F=b[we],ue=y[we];F!==null&&ue!==void 0&&ue.update(F,ye,c||o)}Ie&&Ie(de,ye),ye.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ye}),_=null}const at=new Qm;at.setAnimationLoop(He),this.setAnimationLoop=function(de){Ie=de},this.dispose=function(){}}}const _s=new ii,rE=new nt;function oE(n,e){function t(g,m){g.matrixAutoUpdate===!0&&g.updateMatrix(),m.value.copy(g.matrix)}function i(g,m){m.color.getRGB(g.fogColor.value,Vm(n)),m.isFog?(g.fogNear.value=m.near,g.fogFar.value=m.far):m.isFogExp2&&(g.fogDensity.value=m.density)}function s(g,m,x,y,b){m.isMeshBasicMaterial||m.isMeshLambertMaterial?r(g,m):m.isMeshToonMaterial?(r(g,m),u(g,m)):m.isMeshPhongMaterial?(r(g,m),d(g,m)):m.isMeshStandardMaterial?(r(g,m),f(g,m),m.isMeshPhysicalMaterial&&p(g,m,b)):m.isMeshMatcapMaterial?(r(g,m),_(g,m)):m.isMeshDepthMaterial?r(g,m):m.isMeshDistanceMaterial?(r(g,m),v(g,m)):m.isMeshNormalMaterial?r(g,m):m.isLineBasicMaterial?(o(g,m),m.isLineDashedMaterial&&a(g,m)):m.isPointsMaterial?l(g,m,x,y):m.isSpriteMaterial?c(g,m):m.isShadowMaterial?(g.color.value.copy(m.color),g.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function r(g,m){g.opacity.value=m.opacity,m.color&&g.diffuse.value.copy(m.color),m.emissive&&g.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(g.map.value=m.map,t(m.map,g.mapTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,t(m.alphaMap,g.alphaMapTransform)),m.bumpMap&&(g.bumpMap.value=m.bumpMap,t(m.bumpMap,g.bumpMapTransform),g.bumpScale.value=m.bumpScale,m.side===un&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,t(m.normalMap,g.normalMapTransform),g.normalScale.value.copy(m.normalScale),m.side===un&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,t(m.displacementMap,g.displacementMapTransform),g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias),m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap,t(m.emissiveMap,g.emissiveMapTransform)),m.specularMap&&(g.specularMap.value=m.specularMap,t(m.specularMap,g.specularMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest);const x=e.get(m),y=x.envMap,b=x.envMapRotation;y&&(g.envMap.value=y,_s.copy(b),_s.x*=-1,_s.y*=-1,_s.z*=-1,y.isCubeTexture&&y.isRenderTargetTexture===!1&&(_s.y*=-1,_s.z*=-1),g.envMapRotation.value.setFromMatrix4(rE.makeRotationFromEuler(_s)),g.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=m.reflectivity,g.ior.value=m.ior,g.refractionRatio.value=m.refractionRatio),m.lightMap&&(g.lightMap.value=m.lightMap,g.lightMapIntensity.value=m.lightMapIntensity,t(m.lightMap,g.lightMapTransform)),m.aoMap&&(g.aoMap.value=m.aoMap,g.aoMapIntensity.value=m.aoMapIntensity,t(m.aoMap,g.aoMapTransform))}function o(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,m.map&&(g.map.value=m.map,t(m.map,g.mapTransform))}function a(g,m){g.dashSize.value=m.dashSize,g.totalSize.value=m.dashSize+m.gapSize,g.scale.value=m.scale}function l(g,m,x,y){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.size.value=m.size*x,g.scale.value=y*.5,m.map&&(g.map.value=m.map,t(m.map,g.uvTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,t(m.alphaMap,g.alphaMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest)}function c(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.rotation.value=m.rotation,m.map&&(g.map.value=m.map,t(m.map,g.mapTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,t(m.alphaMap,g.alphaMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest)}function d(g,m){g.specular.value.copy(m.specular),g.shininess.value=Math.max(m.shininess,1e-4)}function u(g,m){m.gradientMap&&(g.gradientMap.value=m.gradientMap)}function f(g,m){g.metalness.value=m.metalness,m.metalnessMap&&(g.metalnessMap.value=m.metalnessMap,t(m.metalnessMap,g.metalnessMapTransform)),g.roughness.value=m.roughness,m.roughnessMap&&(g.roughnessMap.value=m.roughnessMap,t(m.roughnessMap,g.roughnessMapTransform)),m.envMap&&(g.envMapIntensity.value=m.envMapIntensity)}function p(g,m,x){g.ior.value=m.ior,m.sheen>0&&(g.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),g.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(g.sheenColorMap.value=m.sheenColorMap,t(m.sheenColorMap,g.sheenColorMapTransform)),m.sheenRoughnessMap&&(g.sheenRoughnessMap.value=m.sheenRoughnessMap,t(m.sheenRoughnessMap,g.sheenRoughnessMapTransform))),m.clearcoat>0&&(g.clearcoat.value=m.clearcoat,g.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(g.clearcoatMap.value=m.clearcoatMap,t(m.clearcoatMap,g.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,t(m.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(g.clearcoatNormalMap.value=m.clearcoatNormalMap,t(m.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===un&&g.clearcoatNormalScale.value.negate())),m.dispersion>0&&(g.dispersion.value=m.dispersion),m.iridescence>0&&(g.iridescence.value=m.iridescence,g.iridescenceIOR.value=m.iridescenceIOR,g.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(g.iridescenceMap.value=m.iridescenceMap,t(m.iridescenceMap,g.iridescenceMapTransform)),m.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=m.iridescenceThicknessMap,t(m.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),m.transmission>0&&(g.transmission.value=m.transmission,g.transmissionSamplerMap.value=x.texture,g.transmissionSamplerSize.value.set(x.width,x.height),m.transmissionMap&&(g.transmissionMap.value=m.transmissionMap,t(m.transmissionMap,g.transmissionMapTransform)),g.thickness.value=m.thickness,m.thicknessMap&&(g.thicknessMap.value=m.thicknessMap,t(m.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=m.attenuationDistance,g.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(g.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(g.anisotropyMap.value=m.anisotropyMap,t(m.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=m.specularIntensity,g.specularColor.value.copy(m.specularColor),m.specularColorMap&&(g.specularColorMap.value=m.specularColorMap,t(m.specularColorMap,g.specularColorMapTransform)),m.specularIntensityMap&&(g.specularIntensityMap.value=m.specularIntensityMap,t(m.specularIntensityMap,g.specularIntensityMapTransform))}function _(g,m){m.matcap&&(g.matcap.value=m.matcap)}function v(g,m){const x=e.get(m).light;g.referencePosition.value.setFromMatrixPosition(x.matrixWorld),g.nearDistance.value=x.shadow.camera.near,g.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:s}}function aE(n,e,t,i){let s={},r={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(x,y){const b=y.program;i.uniformBlockBinding(x,b)}function c(x,y){let b=s[x.id];b===void 0&&(_(x),b=d(x),s[x.id]=b,x.addEventListener("dispose",g));const L=y.program;i.updateUBOMapping(x,L);const P=e.render.frame;r[x.id]!==P&&(f(x),r[x.id]=P)}function d(x){const y=u();x.__bindingPointIndex=y;const b=n.createBuffer(),L=x.__size,P=x.usage;return n.bindBuffer(n.UNIFORM_BUFFER,b),n.bufferData(n.UNIFORM_BUFFER,L,P),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,y,b),b}function u(){for(let x=0;x<a;x++)if(o.indexOf(x)===-1)return o.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(x){const y=s[x.id],b=x.uniforms,L=x.__cache;n.bindBuffer(n.UNIFORM_BUFFER,y);for(let P=0,I=b.length;P<I;P++){const N=Array.isArray(b[P])?b[P]:[b[P]];for(let w=0,M=N.length;w<M;w++){const R=N[w];if(p(R,P,w,L)===!0){const O=R.__offset,U=Array.isArray(R.value)?R.value:[R.value];let X=0;for(let ee=0;ee<U.length;ee++){const Y=U[ee],oe=v(Y);typeof Y=="number"||typeof Y=="boolean"?(R.__data[0]=Y,n.bufferSubData(n.UNIFORM_BUFFER,O+X,R.__data)):Y.isMatrix3?(R.__data[0]=Y.elements[0],R.__data[1]=Y.elements[1],R.__data[2]=Y.elements[2],R.__data[3]=0,R.__data[4]=Y.elements[3],R.__data[5]=Y.elements[4],R.__data[6]=Y.elements[5],R.__data[7]=0,R.__data[8]=Y.elements[6],R.__data[9]=Y.elements[7],R.__data[10]=Y.elements[8],R.__data[11]=0):(Y.toArray(R.__data,X),X+=oe.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,O,R.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function p(x,y,b,L){const P=x.value,I=y+"_"+b;if(L[I]===void 0)return typeof P=="number"||typeof P=="boolean"?L[I]=P:L[I]=P.clone(),!0;{const N=L[I];if(typeof P=="number"||typeof P=="boolean"){if(N!==P)return L[I]=P,!0}else if(N.equals(P)===!1)return N.copy(P),!0}return!1}function _(x){const y=x.uniforms;let b=0;const L=16;for(let I=0,N=y.length;I<N;I++){const w=Array.isArray(y[I])?y[I]:[y[I]];for(let M=0,R=w.length;M<R;M++){const O=w[M],U=Array.isArray(O.value)?O.value:[O.value];for(let X=0,ee=U.length;X<ee;X++){const Y=U[X],oe=v(Y),W=b%L,be=W%oe.boundary,Te=W+be;b+=be,Te!==0&&L-Te<oe.storage&&(b+=L-Te),O.__data=new Float32Array(oe.storage/Float32Array.BYTES_PER_ELEMENT),O.__offset=b,b+=oe.storage}}}const P=b%L;return P>0&&(b+=L-P),x.__size=b,x.__cache={},this}function v(x){const y={boundary:0,storage:0};return typeof x=="number"||typeof x=="boolean"?(y.boundary=4,y.storage=4):x.isVector2?(y.boundary=8,y.storage=8):x.isVector3||x.isColor?(y.boundary=16,y.storage=12):x.isVector4?(y.boundary=16,y.storage=16):x.isMatrix3?(y.boundary=48,y.storage=48):x.isMatrix4?(y.boundary=64,y.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),y}function g(x){const y=x.target;y.removeEventListener("dispose",g);const b=o.indexOf(y.__bindingPointIndex);o.splice(b,1),n.deleteBuffer(s[y.id]),delete s[y.id],delete r[y.id]}function m(){for(const x in s)n.deleteBuffer(s[x]);o=[],s={},r={}}return{bind:l,update:c,dispose:m}}class lE{constructor(e={}){const{canvas:t=cx(),context:i=null,depth:s=!0,stencil:r=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:u=!1,reverseDepthBuffer:f=!1}=e;this.isWebGLRenderer=!0;let p;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=i.getContextAttributes().alpha}else p=o;const _=new Uint32Array(4),v=new Int32Array(4);let g=null,m=null;const x=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=It,this.toneMapping=Ki,this.toneMappingExposure=1;const b=this;let L=!1,P=0,I=0,N=null,w=-1,M=null;const R=new pt,O=new pt;let U=null;const X=new Ke(0);let ee=0,Y=t.width,oe=t.height,W=1,be=null,Te=null;const Ie=new pt(0,0,Y,oe),He=new pt(0,0,Y,oe);let at=!1;const de=new iu;let ye=!1,we=!1;this.transmissionResolutionScale=1;const F=new nt,ue=new nt,ce=new G,me=new pt,ze={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let C=!1;function D(){return N===null?W:1}let E=i;function ie(A,H){return t.getContext(A,H)}try{const A={alpha:!0,depth:s,stencil:r,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Wd}`),t.addEventListener("webglcontextlost",he,!1),t.addEventListener("webglcontextrestored",Pe,!1),t.addEventListener("webglcontextcreationerror",Le,!1),E===null){const H="webgl2";if(E=ie(H,A),E===null)throw ie(H)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(A){throw console.error("THREE.WebGLRenderer: "+A.message),A}let te,se,le,fe,re,T,S,k,$,Z,q,Se,pe,xe,je,ge,De,Be,We,Ee,qe,Je,Mt,B;function Ce(){te=new _S(E),te.init(),Je=new QM(E,te),se=new uS(E,te,e,Je),le=new ZM(E,te),se.reverseDepthBuffer&&f&&le.buffers.depth.setReversed(!0),fe=new bS(E),re=new FM,T=new JM(E,te,le,re,se,Je,fe),S=new hS(b),k=new gS(b),$=new Ab(E),Mt=new cS(E,$),Z=new vS(E,$,fe,Mt),q=new SS(E,Z,$,fe),We=new yS(E,se,T),ge=new fS(re),Se=new kM(b,S,k,te,se,Mt,ge),pe=new oE(b,re),xe=new HM,je=new XM(te),Be=new lS(b,S,k,le,q,p,l),De=new YM(b,q,se),B=new aE(E,fe,se,le),Ee=new dS(E,te,fe),qe=new xS(E,te,fe),fe.programs=Se.programs,b.capabilities=se,b.extensions=te,b.properties=re,b.renderLists=xe,b.shadowMap=De,b.state=le,b.info=fe}Ce();const ae=new sE(b,E);this.xr=ae,this.getContext=function(){return E},this.getContextAttributes=function(){return E.getContextAttributes()},this.forceContextLoss=function(){const A=te.get("WEBGL_lose_context");A&&A.loseContext()},this.forceContextRestore=function(){const A=te.get("WEBGL_lose_context");A&&A.restoreContext()},this.getPixelRatio=function(){return W},this.setPixelRatio=function(A){A!==void 0&&(W=A,this.setSize(Y,oe,!1))},this.getSize=function(A){return A.set(Y,oe)},this.setSize=function(A,H,K=!0){if(ae.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Y=A,oe=H,t.width=Math.floor(A*W),t.height=Math.floor(H*W),K===!0&&(t.style.width=A+"px",t.style.height=H+"px"),this.setViewport(0,0,A,H)},this.getDrawingBufferSize=function(A){return A.set(Y*W,oe*W).floor()},this.setDrawingBufferSize=function(A,H,K){Y=A,oe=H,W=K,t.width=Math.floor(A*K),t.height=Math.floor(H*K),this.setViewport(0,0,A,H)},this.getCurrentViewport=function(A){return A.copy(R)},this.getViewport=function(A){return A.copy(Ie)},this.setViewport=function(A,H,K,Q){A.isVector4?Ie.set(A.x,A.y,A.z,A.w):Ie.set(A,H,K,Q),le.viewport(R.copy(Ie).multiplyScalar(W).round())},this.getScissor=function(A){return A.copy(He)},this.setScissor=function(A,H,K,Q){A.isVector4?He.set(A.x,A.y,A.z,A.w):He.set(A,H,K,Q),le.scissor(O.copy(He).multiplyScalar(W).round())},this.getScissorTest=function(){return at},this.setScissorTest=function(A){le.setScissorTest(at=A)},this.setOpaqueSort=function(A){be=A},this.setTransparentSort=function(A){Te=A},this.getClearColor=function(A){return A.copy(Be.getClearColor())},this.setClearColor=function(){Be.setClearColor.apply(Be,arguments)},this.getClearAlpha=function(){return Be.getClearAlpha()},this.setClearAlpha=function(){Be.setClearAlpha.apply(Be,arguments)},this.clear=function(A=!0,H=!0,K=!0){let Q=0;if(A){let V=!1;if(N!==null){const ve=N.texture.format;V=ve===Jd||ve===Zd||ve===Kd}if(V){const ve=N.texture.type,Re=ve===wi||ve===Ds||ve===_o||ve===yr||ve===jd||ve===qd,Ue=Be.getClearColor(),Oe=Be.getClearAlpha(),Ye=Ue.r,Ze=Ue.g,Ve=Ue.b;Re?(_[0]=Ye,_[1]=Ze,_[2]=Ve,_[3]=Oe,E.clearBufferuiv(E.COLOR,0,_)):(v[0]=Ye,v[1]=Ze,v[2]=Ve,v[3]=Oe,E.clearBufferiv(E.COLOR,0,v))}else Q|=E.COLOR_BUFFER_BIT}H&&(Q|=E.DEPTH_BUFFER_BIT),K&&(Q|=E.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),E.clear(Q)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",he,!1),t.removeEventListener("webglcontextrestored",Pe,!1),t.removeEventListener("webglcontextcreationerror",Le,!1),Be.dispose(),xe.dispose(),je.dispose(),re.dispose(),S.dispose(),k.dispose(),q.dispose(),Mt.dispose(),B.dispose(),Se.dispose(),ae.dispose(),ae.removeEventListener("sessionstart",xu),ae.removeEventListener("sessionend",bu),os.stop()};function he(A){A.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),L=!0}function Pe(){console.log("THREE.WebGLRenderer: Context Restored."),L=!1;const A=fe.autoReset,H=De.enabled,K=De.autoUpdate,Q=De.needsUpdate,V=De.type;Ce(),fe.autoReset=A,De.enabled=H,De.autoUpdate=K,De.needsUpdate=Q,De.type=V}function Le(A){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",A.statusMessage)}function et(A){const H=A.target;H.removeEventListener("dispose",et),Lt(H)}function Lt(A){Xt(A),re.remove(A)}function Xt(A){const H=re.get(A).programs;H!==void 0&&(H.forEach(function(K){Se.releaseProgram(K)}),A.isShaderMaterial&&Se.releaseShaderCache(A))}this.renderBufferDirect=function(A,H,K,Q,V,ve){H===null&&(H=ze);const Re=V.isMesh&&V.matrixWorld.determinant()<0,Ue=bg(A,H,K,Q,V);le.setMaterial(Q,Re);let Oe=K.index,Ye=1;if(Q.wireframe===!0){if(Oe=Z.getWireframeAttribute(K),Oe===void 0)return;Ye=2}const Ze=K.drawRange,Ve=K.attributes.position;let dt=Ze.start*Ye,mt=(Ze.start+Ze.count)*Ye;ve!==null&&(dt=Math.max(dt,ve.start*Ye),mt=Math.min(mt,(ve.start+ve.count)*Ye)),Oe!==null?(dt=Math.max(dt,0),mt=Math.min(mt,Oe.count)):Ve!=null&&(dt=Math.max(dt,0),mt=Math.min(mt,Ve.count));const Nt=mt-dt;if(Nt<0||Nt===1/0)return;Mt.setup(V,Q,Ue,K,Oe);let Pt,ft=Ee;if(Oe!==null&&(Pt=$.get(Oe),ft=qe,ft.setIndex(Pt)),V.isMesh)Q.wireframe===!0?(le.setLineWidth(Q.wireframeLinewidth*D()),ft.setMode(E.LINES)):ft.setMode(E.TRIANGLES);else if(V.isLine){let Ge=Q.linewidth;Ge===void 0&&(Ge=1),le.setLineWidth(Ge*D()),V.isLineSegments?ft.setMode(E.LINES):V.isLineLoop?ft.setMode(E.LINE_LOOP):ft.setMode(E.LINE_STRIP)}else V.isPoints?ft.setMode(E.POINTS):V.isSprite&&ft.setMode(E.TRIANGLES);if(V.isBatchedMesh)if(V._multiDrawInstances!==null)ft.renderMultiDrawInstances(V._multiDrawStarts,V._multiDrawCounts,V._multiDrawCount,V._multiDrawInstances);else if(te.get("WEBGL_multi_draw"))ft.renderMultiDraw(V._multiDrawStarts,V._multiDrawCounts,V._multiDrawCount);else{const Ge=V._multiDrawStarts,Gt=V._multiDrawCounts,gt=V._multiDrawCount,Dn=Oe?$.get(Oe).bytesPerElement:1,Fs=re.get(Q).currentProgram.getUniforms();for(let pn=0;pn<gt;pn++)Fs.setValue(E,"_gl_DrawID",pn),ft.render(Ge[pn]/Dn,Gt[pn])}else if(V.isInstancedMesh)ft.renderInstances(dt,Nt,V.count);else if(K.isInstancedBufferGeometry){const Ge=K._maxInstanceCount!==void 0?K._maxInstanceCount:1/0,Gt=Math.min(K.instanceCount,Ge);ft.renderInstances(dt,Nt,Gt)}else ft.render(dt,Nt)};function vt(A,H,K){A.transparent===!0&&A.side===Jn&&A.forceSinglePass===!1?(A.side=un,A.needsUpdate=!0,wo(A,H,K),A.side=Ti,A.needsUpdate=!0,wo(A,H,K),A.side=Jn):wo(A,H,K)}this.compile=function(A,H,K=null){K===null&&(K=A),m=je.get(K),m.init(H),y.push(m),K.traverseVisible(function(V){V.isLight&&V.layers.test(H.layers)&&(m.pushLight(V),V.castShadow&&m.pushShadow(V))}),A!==K&&A.traverseVisible(function(V){V.isLight&&V.layers.test(H.layers)&&(m.pushLight(V),V.castShadow&&m.pushShadow(V))}),m.setupLights();const Q=new Set;return A.traverse(function(V){if(!(V.isMesh||V.isPoints||V.isLine||V.isSprite))return;const ve=V.material;if(ve)if(Array.isArray(ve))for(let Re=0;Re<ve.length;Re++){const Ue=ve[Re];vt(Ue,K,V),Q.add(Ue)}else vt(ve,K,V),Q.add(ve)}),y.pop(),m=null,Q},this.compileAsync=function(A,H,K=null){const Q=this.compile(A,H,K);return new Promise(V=>{function ve(){if(Q.forEach(function(Re){re.get(Re).currentProgram.isReady()&&Q.delete(Re)}),Q.size===0){V(A);return}setTimeout(ve,10)}te.get("KHR_parallel_shader_compile")!==null?ve():setTimeout(ve,10)})};let In=null;function ai(A){In&&In(A)}function xu(){os.stop()}function bu(){os.start()}const os=new Qm;os.setAnimationLoop(ai),typeof self<"u"&&os.setContext(self),this.setAnimationLoop=function(A){In=A,ae.setAnimationLoop(A),A===null?os.stop():os.start()},ae.addEventListener("sessionstart",xu),ae.addEventListener("sessionend",bu),this.render=function(A,H){if(H!==void 0&&H.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(L===!0)return;if(A.matrixWorldAutoUpdate===!0&&A.updateMatrixWorld(),H.parent===null&&H.matrixWorldAutoUpdate===!0&&H.updateMatrixWorld(),ae.enabled===!0&&ae.isPresenting===!0&&(ae.cameraAutoUpdate===!0&&ae.updateCamera(H),H=ae.getCamera()),A.isScene===!0&&A.onBeforeRender(b,A,H,N),m=je.get(A,y.length),m.init(H),y.push(m),ue.multiplyMatrices(H.projectionMatrix,H.matrixWorldInverse),de.setFromProjectionMatrix(ue),we=this.localClippingEnabled,ye=ge.init(this.clippingPlanes,we),g=xe.get(A,x.length),g.init(),x.push(g),ae.enabled===!0&&ae.isPresenting===!0){const ve=b.xr.getDepthSensingMesh();ve!==null&&ol(ve,H,-1/0,b.sortObjects)}ol(A,H,0,b.sortObjects),g.finish(),b.sortObjects===!0&&g.sort(be,Te),C=ae.enabled===!1||ae.isPresenting===!1||ae.hasDepthSensing()===!1,C&&Be.addToRenderList(g,A),this.info.render.frame++,ye===!0&&ge.beginShadows();const K=m.state.shadowsArray;De.render(K,A,H),ye===!0&&ge.endShadows(),this.info.autoReset===!0&&this.info.reset();const Q=g.opaque,V=g.transmissive;if(m.setupLights(),H.isArrayCamera){const ve=H.cameras;if(V.length>0)for(let Re=0,Ue=ve.length;Re<Ue;Re++){const Oe=ve[Re];Su(Q,V,A,Oe)}C&&Be.render(A);for(let Re=0,Ue=ve.length;Re<Ue;Re++){const Oe=ve[Re];yu(g,A,Oe,Oe.viewport)}}else V.length>0&&Su(Q,V,A,H),C&&Be.render(A),yu(g,A,H);N!==null&&I===0&&(T.updateMultisampleRenderTarget(N),T.updateRenderTargetMipmap(N)),A.isScene===!0&&A.onAfterRender(b,A,H),Mt.resetDefaultState(),w=-1,M=null,y.pop(),y.length>0?(m=y[y.length-1],ye===!0&&ge.setGlobalState(b.clippingPlanes,m.state.camera)):m=null,x.pop(),x.length>0?g=x[x.length-1]:g=null};function ol(A,H,K,Q){if(A.visible===!1)return;if(A.layers.test(H.layers)){if(A.isGroup)K=A.renderOrder;else if(A.isLOD)A.autoUpdate===!0&&A.update(H);else if(A.isLight)m.pushLight(A),A.castShadow&&m.pushShadow(A);else if(A.isSprite){if(!A.frustumCulled||de.intersectsSprite(A)){Q&&me.setFromMatrixPosition(A.matrixWorld).applyMatrix4(ue);const Re=q.update(A),Ue=A.material;Ue.visible&&g.push(A,Re,Ue,K,me.z,null)}}else if((A.isMesh||A.isLine||A.isPoints)&&(!A.frustumCulled||de.intersectsObject(A))){const Re=q.update(A),Ue=A.material;if(Q&&(A.boundingSphere!==void 0?(A.boundingSphere===null&&A.computeBoundingSphere(),me.copy(A.boundingSphere.center)):(Re.boundingSphere===null&&Re.computeBoundingSphere(),me.copy(Re.boundingSphere.center)),me.applyMatrix4(A.matrixWorld).applyMatrix4(ue)),Array.isArray(Ue)){const Oe=Re.groups;for(let Ye=0,Ze=Oe.length;Ye<Ze;Ye++){const Ve=Oe[Ye],dt=Ue[Ve.materialIndex];dt&&dt.visible&&g.push(A,Re,dt,K,me.z,Ve)}}else Ue.visible&&g.push(A,Re,Ue,K,me.z,null)}}const ve=A.children;for(let Re=0,Ue=ve.length;Re<Ue;Re++)ol(ve[Re],H,K,Q)}function yu(A,H,K,Q){const V=A.opaque,ve=A.transmissive,Re=A.transparent;m.setupLightsView(K),ye===!0&&ge.setGlobalState(b.clippingPlanes,K),Q&&le.viewport(R.copy(Q)),V.length>0&&To(V,H,K),ve.length>0&&To(ve,H,K),Re.length>0&&To(Re,H,K),le.buffers.depth.setTest(!0),le.buffers.depth.setMask(!0),le.buffers.color.setMask(!0),le.setPolygonOffset(!1)}function Su(A,H,K,Q){if((K.isScene===!0?K.overrideMaterial:null)!==null)return;m.state.transmissionRenderTarget[Q.id]===void 0&&(m.state.transmissionRenderTarget[Q.id]=new Ns(1,1,{generateMipmaps:!0,type:te.has("EXT_color_buffer_half_float")||te.has("EXT_color_buffer_float")?yo:wi,minFilter:vi,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ot.workingColorSpace}));const ve=m.state.transmissionRenderTarget[Q.id],Re=Q.viewport||R;ve.setSize(Re.z*b.transmissionResolutionScale,Re.w*b.transmissionResolutionScale);const Ue=b.getRenderTarget();b.setRenderTarget(ve),b.getClearColor(X),ee=b.getClearAlpha(),ee<1&&b.setClearColor(16777215,.5),b.clear(),C&&Be.render(K);const Oe=b.toneMapping;b.toneMapping=Ki;const Ye=Q.viewport;if(Q.viewport!==void 0&&(Q.viewport=void 0),m.setupLightsView(Q),ye===!0&&ge.setGlobalState(b.clippingPlanes,Q),To(A,K,Q),T.updateMultisampleRenderTarget(ve),T.updateRenderTargetMipmap(ve),te.has("WEBGL_multisampled_render_to_texture")===!1){let Ze=!1;for(let Ve=0,dt=H.length;Ve<dt;Ve++){const mt=H[Ve],Nt=mt.object,Pt=mt.geometry,ft=mt.material,Ge=mt.group;if(ft.side===Jn&&Nt.layers.test(Q.layers)){const Gt=ft.side;ft.side=un,ft.needsUpdate=!0,Mu(Nt,K,Q,Pt,ft,Ge),ft.side=Gt,ft.needsUpdate=!0,Ze=!0}}Ze===!0&&(T.updateMultisampleRenderTarget(ve),T.updateRenderTargetMipmap(ve))}b.setRenderTarget(Ue),b.setClearColor(X,ee),Ye!==void 0&&(Q.viewport=Ye),b.toneMapping=Oe}function To(A,H,K){const Q=H.isScene===!0?H.overrideMaterial:null;for(let V=0,ve=A.length;V<ve;V++){const Re=A[V],Ue=Re.object,Oe=Re.geometry,Ye=Q===null?Re.material:Q,Ze=Re.group;Ue.layers.test(K.layers)&&Mu(Ue,H,K,Oe,Ye,Ze)}}function Mu(A,H,K,Q,V,ve){A.onBeforeRender(b,H,K,Q,V,ve),A.modelViewMatrix.multiplyMatrices(K.matrixWorldInverse,A.matrixWorld),A.normalMatrix.getNormalMatrix(A.modelViewMatrix),V.onBeforeRender(b,H,K,Q,A,ve),V.transparent===!0&&V.side===Jn&&V.forceSinglePass===!1?(V.side=un,V.needsUpdate=!0,b.renderBufferDirect(K,H,Q,V,A,ve),V.side=Ti,V.needsUpdate=!0,b.renderBufferDirect(K,H,Q,V,A,ve),V.side=Jn):b.renderBufferDirect(K,H,Q,V,A,ve),A.onAfterRender(b,H,K,Q,V,ve)}function wo(A,H,K){H.isScene!==!0&&(H=ze);const Q=re.get(A),V=m.state.lights,ve=m.state.shadowsArray,Re=V.state.version,Ue=Se.getParameters(A,V.state,ve,H,K),Oe=Se.getProgramCacheKey(Ue);let Ye=Q.programs;Q.environment=A.isMeshStandardMaterial?H.environment:null,Q.fog=H.fog,Q.envMap=(A.isMeshStandardMaterial?k:S).get(A.envMap||Q.environment),Q.envMapRotation=Q.environment!==null&&A.envMap===null?H.environmentRotation:A.envMapRotation,Ye===void 0&&(A.addEventListener("dispose",et),Ye=new Map,Q.programs=Ye);let Ze=Ye.get(Oe);if(Ze!==void 0){if(Q.currentProgram===Ze&&Q.lightsStateVersion===Re)return Tu(A,Ue),Ze}else Ue.uniforms=Se.getUniforms(A),A.onBeforeCompile(Ue,b),Ze=Se.acquireProgram(Ue,Oe),Ye.set(Oe,Ze),Q.uniforms=Ue.uniforms;const Ve=Q.uniforms;return(!A.isShaderMaterial&&!A.isRawShaderMaterial||A.clipping===!0)&&(Ve.clippingPlanes=ge.uniform),Tu(A,Ue),Q.needsLights=Sg(A),Q.lightsStateVersion=Re,Q.needsLights&&(Ve.ambientLightColor.value=V.state.ambient,Ve.lightProbe.value=V.state.probe,Ve.directionalLights.value=V.state.directional,Ve.directionalLightShadows.value=V.state.directionalShadow,Ve.spotLights.value=V.state.spot,Ve.spotLightShadows.value=V.state.spotShadow,Ve.rectAreaLights.value=V.state.rectArea,Ve.ltc_1.value=V.state.rectAreaLTC1,Ve.ltc_2.value=V.state.rectAreaLTC2,Ve.pointLights.value=V.state.point,Ve.pointLightShadows.value=V.state.pointShadow,Ve.hemisphereLights.value=V.state.hemi,Ve.directionalShadowMap.value=V.state.directionalShadowMap,Ve.directionalShadowMatrix.value=V.state.directionalShadowMatrix,Ve.spotShadowMap.value=V.state.spotShadowMap,Ve.spotLightMatrix.value=V.state.spotLightMatrix,Ve.spotLightMap.value=V.state.spotLightMap,Ve.pointShadowMap.value=V.state.pointShadowMap,Ve.pointShadowMatrix.value=V.state.pointShadowMatrix),Q.currentProgram=Ze,Q.uniformsList=null,Ze}function Eu(A){if(A.uniformsList===null){const H=A.currentProgram.getUniforms();A.uniformsList=xa.seqWithValue(H.seq,A.uniforms)}return A.uniformsList}function Tu(A,H){const K=re.get(A);K.outputColorSpace=H.outputColorSpace,K.batching=H.batching,K.batchingColor=H.batchingColor,K.instancing=H.instancing,K.instancingColor=H.instancingColor,K.instancingMorph=H.instancingMorph,K.skinning=H.skinning,K.morphTargets=H.morphTargets,K.morphNormals=H.morphNormals,K.morphColors=H.morphColors,K.morphTargetsCount=H.morphTargetsCount,K.numClippingPlanes=H.numClippingPlanes,K.numIntersection=H.numClipIntersection,K.vertexAlphas=H.vertexAlphas,K.vertexTangents=H.vertexTangents,K.toneMapping=H.toneMapping}function bg(A,H,K,Q,V){H.isScene!==!0&&(H=ze),T.resetTextureUnits();const ve=H.fog,Re=Q.isMeshStandardMaterial?H.environment:null,Ue=N===null?b.outputColorSpace:N.isXRRenderTarget===!0?N.texture.colorSpace:Qt,Oe=(Q.isMeshStandardMaterial?k:S).get(Q.envMap||Re),Ye=Q.vertexColors===!0&&!!K.attributes.color&&K.attributes.color.itemSize===4,Ze=!!K.attributes.tangent&&(!!Q.normalMap||Q.anisotropy>0),Ve=!!K.morphAttributes.position,dt=!!K.morphAttributes.normal,mt=!!K.morphAttributes.color;let Nt=Ki;Q.toneMapped&&(N===null||N.isXRRenderTarget===!0)&&(Nt=b.toneMapping);const Pt=K.morphAttributes.position||K.morphAttributes.normal||K.morphAttributes.color,ft=Pt!==void 0?Pt.length:0,Ge=re.get(Q),Gt=m.state.lights;if(ye===!0&&(we===!0||A!==M)){const en=A===M&&Q.id===w;ge.setState(Q,A,en)}let gt=!1;Q.version===Ge.__version?(Ge.needsLights&&Ge.lightsStateVersion!==Gt.state.version||Ge.outputColorSpace!==Ue||V.isBatchedMesh&&Ge.batching===!1||!V.isBatchedMesh&&Ge.batching===!0||V.isBatchedMesh&&Ge.batchingColor===!0&&V.colorTexture===null||V.isBatchedMesh&&Ge.batchingColor===!1&&V.colorTexture!==null||V.isInstancedMesh&&Ge.instancing===!1||!V.isInstancedMesh&&Ge.instancing===!0||V.isSkinnedMesh&&Ge.skinning===!1||!V.isSkinnedMesh&&Ge.skinning===!0||V.isInstancedMesh&&Ge.instancingColor===!0&&V.instanceColor===null||V.isInstancedMesh&&Ge.instancingColor===!1&&V.instanceColor!==null||V.isInstancedMesh&&Ge.instancingMorph===!0&&V.morphTexture===null||V.isInstancedMesh&&Ge.instancingMorph===!1&&V.morphTexture!==null||Ge.envMap!==Oe||Q.fog===!0&&Ge.fog!==ve||Ge.numClippingPlanes!==void 0&&(Ge.numClippingPlanes!==ge.numPlanes||Ge.numIntersection!==ge.numIntersection)||Ge.vertexAlphas!==Ye||Ge.vertexTangents!==Ze||Ge.morphTargets!==Ve||Ge.morphNormals!==dt||Ge.morphColors!==mt||Ge.toneMapping!==Nt||Ge.morphTargetsCount!==ft)&&(gt=!0):(gt=!0,Ge.__version=Q.version);let Dn=Ge.currentProgram;gt===!0&&(Dn=wo(Q,H,V));let Fs=!1,pn=!1,kr=!1;const wt=Dn.getUniforms(),yn=Ge.uniforms;if(le.useProgram(Dn.program)&&(Fs=!0,pn=!0,kr=!0),Q.id!==w&&(w=Q.id,pn=!0),Fs||M!==A){le.buffers.depth.getReversed()?(F.copy(A.projectionMatrix),ux(F),fx(F),wt.setValue(E,"projectionMatrix",F)):wt.setValue(E,"projectionMatrix",A.projectionMatrix),wt.setValue(E,"viewMatrix",A.matrixWorldInverse);const cn=wt.map.cameraPosition;cn!==void 0&&cn.setValue(E,ce.setFromMatrixPosition(A.matrixWorld)),se.logarithmicDepthBuffer&&wt.setValue(E,"logDepthBufFC",2/(Math.log(A.far+1)/Math.LN2)),(Q.isMeshPhongMaterial||Q.isMeshToonMaterial||Q.isMeshLambertMaterial||Q.isMeshBasicMaterial||Q.isMeshStandardMaterial||Q.isShaderMaterial)&&wt.setValue(E,"isOrthographic",A.isOrthographicCamera===!0),M!==A&&(M=A,pn=!0,kr=!0)}if(V.isSkinnedMesh){wt.setOptional(E,V,"bindMatrix"),wt.setOptional(E,V,"bindMatrixInverse");const en=V.skeleton;en&&(en.boneTexture===null&&en.computeBoneTexture(),wt.setValue(E,"boneTexture",en.boneTexture,T))}V.isBatchedMesh&&(wt.setOptional(E,V,"batchingTexture"),wt.setValue(E,"batchingTexture",V._matricesTexture,T),wt.setOptional(E,V,"batchingIdTexture"),wt.setValue(E,"batchingIdTexture",V._indirectTexture,T),wt.setOptional(E,V,"batchingColorTexture"),V._colorsTexture!==null&&wt.setValue(E,"batchingColorTexture",V._colorsTexture,T));const Sn=K.morphAttributes;if((Sn.position!==void 0||Sn.normal!==void 0||Sn.color!==void 0)&&We.update(V,K,Dn),(pn||Ge.receiveShadow!==V.receiveShadow)&&(Ge.receiveShadow=V.receiveShadow,wt.setValue(E,"receiveShadow",V.receiveShadow)),Q.isMeshGouraudMaterial&&Q.envMap!==null&&(yn.envMap.value=Oe,yn.flipEnvMap.value=Oe.isCubeTexture&&Oe.isRenderTargetTexture===!1?-1:1),Q.isMeshStandardMaterial&&Q.envMap===null&&H.environment!==null&&(yn.envMapIntensity.value=H.environmentIntensity),pn&&(wt.setValue(E,"toneMappingExposure",b.toneMappingExposure),Ge.needsLights&&yg(yn,kr),ve&&Q.fog===!0&&pe.refreshFogUniforms(yn,ve),pe.refreshMaterialUniforms(yn,Q,W,oe,m.state.transmissionRenderTarget[A.id]),xa.upload(E,Eu(Ge),yn,T)),Q.isShaderMaterial&&Q.uniformsNeedUpdate===!0&&(xa.upload(E,Eu(Ge),yn,T),Q.uniformsNeedUpdate=!1),Q.isSpriteMaterial&&wt.setValue(E,"center",V.center),wt.setValue(E,"modelViewMatrix",V.modelViewMatrix),wt.setValue(E,"normalMatrix",V.normalMatrix),wt.setValue(E,"modelMatrix",V.matrixWorld),Q.isShaderMaterial||Q.isRawShaderMaterial){const en=Q.uniformsGroups;for(let cn=0,al=en.length;cn<al;cn++){const as=en[cn];B.update(as,Dn),B.bind(as,Dn)}}return Dn}function yg(A,H){A.ambientLightColor.needsUpdate=H,A.lightProbe.needsUpdate=H,A.directionalLights.needsUpdate=H,A.directionalLightShadows.needsUpdate=H,A.pointLights.needsUpdate=H,A.pointLightShadows.needsUpdate=H,A.spotLights.needsUpdate=H,A.spotLightShadows.needsUpdate=H,A.rectAreaLights.needsUpdate=H,A.hemisphereLights.needsUpdate=H}function Sg(A){return A.isMeshLambertMaterial||A.isMeshToonMaterial||A.isMeshPhongMaterial||A.isMeshStandardMaterial||A.isShadowMaterial||A.isShaderMaterial&&A.lights===!0}this.getActiveCubeFace=function(){return P},this.getActiveMipmapLevel=function(){return I},this.getRenderTarget=function(){return N},this.setRenderTargetTextures=function(A,H,K){re.get(A.texture).__webglTexture=H,re.get(A.depthTexture).__webglTexture=K;const Q=re.get(A);Q.__hasExternalTextures=!0,Q.__autoAllocateDepthBuffer=K===void 0,Q.__autoAllocateDepthBuffer||te.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Q.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(A,H){const K=re.get(A);K.__webglFramebuffer=H,K.__useDefaultFramebuffer=H===void 0};const Mg=E.createFramebuffer();this.setRenderTarget=function(A,H=0,K=0){N=A,P=H,I=K;let Q=!0,V=null,ve=!1,Re=!1;if(A){const Oe=re.get(A);if(Oe.__useDefaultFramebuffer!==void 0)le.bindFramebuffer(E.FRAMEBUFFER,null),Q=!1;else if(Oe.__webglFramebuffer===void 0)T.setupRenderTarget(A);else if(Oe.__hasExternalTextures)T.rebindTextures(A,re.get(A.texture).__webglTexture,re.get(A.depthTexture).__webglTexture);else if(A.depthBuffer){const Ve=A.depthTexture;if(Oe.__boundDepthTexture!==Ve){if(Ve!==null&&re.has(Ve)&&(A.width!==Ve.image.width||A.height!==Ve.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");T.setupDepthRenderbuffer(A)}}const Ye=A.texture;(Ye.isData3DTexture||Ye.isDataArrayTexture||Ye.isCompressedArrayTexture)&&(Re=!0);const Ze=re.get(A).__webglFramebuffer;A.isWebGLCubeRenderTarget?(Array.isArray(Ze[H])?V=Ze[H][K]:V=Ze[H],ve=!0):A.samples>0&&T.useMultisampledRTT(A)===!1?V=re.get(A).__webglMultisampledFramebuffer:Array.isArray(Ze)?V=Ze[K]:V=Ze,R.copy(A.viewport),O.copy(A.scissor),U=A.scissorTest}else R.copy(Ie).multiplyScalar(W).floor(),O.copy(He).multiplyScalar(W).floor(),U=at;if(K!==0&&(V=Mg),le.bindFramebuffer(E.FRAMEBUFFER,V)&&Q&&le.drawBuffers(A,V),le.viewport(R),le.scissor(O),le.setScissorTest(U),ve){const Oe=re.get(A.texture);E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_CUBE_MAP_POSITIVE_X+H,Oe.__webglTexture,K)}else if(Re){const Oe=re.get(A.texture),Ye=H;E.framebufferTextureLayer(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,Oe.__webglTexture,K,Ye)}else if(A!==null&&K!==0){const Oe=re.get(A.texture);E.framebufferTexture2D(E.FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,Oe.__webglTexture,K)}w=-1},this.readRenderTargetPixels=function(A,H,K,Q,V,ve,Re){if(!(A&&A.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ue=re.get(A).__webglFramebuffer;if(A.isWebGLCubeRenderTarget&&Re!==void 0&&(Ue=Ue[Re]),Ue){le.bindFramebuffer(E.FRAMEBUFFER,Ue);try{const Oe=A.texture,Ye=Oe.format,Ze=Oe.type;if(!se.textureFormatReadable(Ye)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!se.textureTypeReadable(Ze)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}H>=0&&H<=A.width-Q&&K>=0&&K<=A.height-V&&E.readPixels(H,K,Q,V,Je.convert(Ye),Je.convert(Ze),ve)}finally{const Oe=N!==null?re.get(N).__webglFramebuffer:null;le.bindFramebuffer(E.FRAMEBUFFER,Oe)}}},this.readRenderTargetPixelsAsync=async function(A,H,K,Q,V,ve,Re){if(!(A&&A.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ue=re.get(A).__webglFramebuffer;if(A.isWebGLCubeRenderTarget&&Re!==void 0&&(Ue=Ue[Re]),Ue){const Oe=A.texture,Ye=Oe.format,Ze=Oe.type;if(!se.textureFormatReadable(Ye))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!se.textureTypeReadable(Ze))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(H>=0&&H<=A.width-Q&&K>=0&&K<=A.height-V){le.bindFramebuffer(E.FRAMEBUFFER,Ue);const Ve=E.createBuffer();E.bindBuffer(E.PIXEL_PACK_BUFFER,Ve),E.bufferData(E.PIXEL_PACK_BUFFER,ve.byteLength,E.STREAM_READ),E.readPixels(H,K,Q,V,Je.convert(Ye),Je.convert(Ze),0);const dt=N!==null?re.get(N).__webglFramebuffer:null;le.bindFramebuffer(E.FRAMEBUFFER,dt);const mt=E.fenceSync(E.SYNC_GPU_COMMANDS_COMPLETE,0);return E.flush(),await dx(E,mt,4),E.bindBuffer(E.PIXEL_PACK_BUFFER,Ve),E.getBufferSubData(E.PIXEL_PACK_BUFFER,0,ve),E.deleteBuffer(Ve),E.deleteSync(mt),ve}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(A,H=null,K=0){A.isTexture!==!0&&(ir("WebGLRenderer: copyFramebufferToTexture function signature has changed."),H=arguments[0]||null,A=arguments[1]);const Q=Math.pow(2,-K),V=Math.floor(A.image.width*Q),ve=Math.floor(A.image.height*Q),Re=H!==null?H.x:0,Ue=H!==null?H.y:0;T.setTexture2D(A,0),E.copyTexSubImage2D(E.TEXTURE_2D,K,0,0,Re,Ue,V,ve),le.unbindTexture()};const Eg=E.createFramebuffer(),Tg=E.createFramebuffer();this.copyTextureToTexture=function(A,H,K=null,Q=null,V=0,ve=null){A.isTexture!==!0&&(ir("WebGLRenderer: copyTextureToTexture function signature has changed."),Q=arguments[0]||null,A=arguments[1],H=arguments[2],ve=arguments[3]||0,K=null),ve===null&&(V!==0?(ir("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),ve=V,V=0):ve=0);let Re,Ue,Oe,Ye,Ze,Ve,dt,mt,Nt;const Pt=A.isCompressedTexture?A.mipmaps[ve]:A.image;if(K!==null)Re=K.max.x-K.min.x,Ue=K.max.y-K.min.y,Oe=K.isBox3?K.max.z-K.min.z:1,Ye=K.min.x,Ze=K.min.y,Ve=K.isBox3?K.min.z:0;else{const Sn=Math.pow(2,-V);Re=Math.floor(Pt.width*Sn),Ue=Math.floor(Pt.height*Sn),A.isDataArrayTexture?Oe=Pt.depth:A.isData3DTexture?Oe=Math.floor(Pt.depth*Sn):Oe=1,Ye=0,Ze=0,Ve=0}Q!==null?(dt=Q.x,mt=Q.y,Nt=Q.z):(dt=0,mt=0,Nt=0);const ft=Je.convert(H.format),Ge=Je.convert(H.type);let Gt;H.isData3DTexture?(T.setTexture3D(H,0),Gt=E.TEXTURE_3D):H.isDataArrayTexture||H.isCompressedArrayTexture?(T.setTexture2DArray(H,0),Gt=E.TEXTURE_2D_ARRAY):(T.setTexture2D(H,0),Gt=E.TEXTURE_2D),E.pixelStorei(E.UNPACK_FLIP_Y_WEBGL,H.flipY),E.pixelStorei(E.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),E.pixelStorei(E.UNPACK_ALIGNMENT,H.unpackAlignment);const gt=E.getParameter(E.UNPACK_ROW_LENGTH),Dn=E.getParameter(E.UNPACK_IMAGE_HEIGHT),Fs=E.getParameter(E.UNPACK_SKIP_PIXELS),pn=E.getParameter(E.UNPACK_SKIP_ROWS),kr=E.getParameter(E.UNPACK_SKIP_IMAGES);E.pixelStorei(E.UNPACK_ROW_LENGTH,Pt.width),E.pixelStorei(E.UNPACK_IMAGE_HEIGHT,Pt.height),E.pixelStorei(E.UNPACK_SKIP_PIXELS,Ye),E.pixelStorei(E.UNPACK_SKIP_ROWS,Ze),E.pixelStorei(E.UNPACK_SKIP_IMAGES,Ve);const wt=A.isDataArrayTexture||A.isData3DTexture,yn=H.isDataArrayTexture||H.isData3DTexture;if(A.isDepthTexture){const Sn=re.get(A),en=re.get(H),cn=re.get(Sn.__renderTarget),al=re.get(en.__renderTarget);le.bindFramebuffer(E.READ_FRAMEBUFFER,cn.__webglFramebuffer),le.bindFramebuffer(E.DRAW_FRAMEBUFFER,al.__webglFramebuffer);for(let as=0;as<Oe;as++)wt&&(E.framebufferTextureLayer(E.READ_FRAMEBUFFER,E.COLOR_ATTACHMENT0,re.get(A).__webglTexture,V,Ve+as),E.framebufferTextureLayer(E.DRAW_FRAMEBUFFER,E.COLOR_ATTACHMENT0,re.get(H).__webglTexture,ve,Nt+as)),E.blitFramebuffer(Ye,Ze,Re,Ue,dt,mt,Re,Ue,E.DEPTH_BUFFER_BIT,E.NEAREST);le.bindFramebuffer(E.READ_FRAMEBUFFER,null),le.bindFramebuffer(E.DRAW_FRAMEBUFFER,null)}else if(V!==0||A.isRenderTargetTexture||re.has(A)){const Sn=re.get(A),en=re.get(H);le.bindFramebuffer(E.READ_FRAMEBUFFER,Eg),le.bindFramebuffer(E.DRAW_FRAMEBUFFER,Tg);for(let cn=0;cn<Oe;cn++)wt?E.framebufferTextureLayer(E.READ_FRAMEBUFFER,E.COLOR_ATTACHMENT0,Sn.__webglTexture,V,Ve+cn):E.framebufferTexture2D(E.READ_FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,Sn.__webglTexture,V),yn?E.framebufferTextureLayer(E.DRAW_FRAMEBUFFER,E.COLOR_ATTACHMENT0,en.__webglTexture,ve,Nt+cn):E.framebufferTexture2D(E.DRAW_FRAMEBUFFER,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,en.__webglTexture,ve),V!==0?E.blitFramebuffer(Ye,Ze,Re,Ue,dt,mt,Re,Ue,E.COLOR_BUFFER_BIT,E.NEAREST):yn?E.copyTexSubImage3D(Gt,ve,dt,mt,Nt+cn,Ye,Ze,Re,Ue):E.copyTexSubImage2D(Gt,ve,dt,mt,Ye,Ze,Re,Ue);le.bindFramebuffer(E.READ_FRAMEBUFFER,null),le.bindFramebuffer(E.DRAW_FRAMEBUFFER,null)}else yn?A.isDataTexture||A.isData3DTexture?E.texSubImage3D(Gt,ve,dt,mt,Nt,Re,Ue,Oe,ft,Ge,Pt.data):H.isCompressedArrayTexture?E.compressedTexSubImage3D(Gt,ve,dt,mt,Nt,Re,Ue,Oe,ft,Pt.data):E.texSubImage3D(Gt,ve,dt,mt,Nt,Re,Ue,Oe,ft,Ge,Pt):A.isDataTexture?E.texSubImage2D(E.TEXTURE_2D,ve,dt,mt,Re,Ue,ft,Ge,Pt.data):A.isCompressedTexture?E.compressedTexSubImage2D(E.TEXTURE_2D,ve,dt,mt,Pt.width,Pt.height,ft,Pt.data):E.texSubImage2D(E.TEXTURE_2D,ve,dt,mt,Re,Ue,ft,Ge,Pt);E.pixelStorei(E.UNPACK_ROW_LENGTH,gt),E.pixelStorei(E.UNPACK_IMAGE_HEIGHT,Dn),E.pixelStorei(E.UNPACK_SKIP_PIXELS,Fs),E.pixelStorei(E.UNPACK_SKIP_ROWS,pn),E.pixelStorei(E.UNPACK_SKIP_IMAGES,kr),ve===0&&H.generateMipmaps&&E.generateMipmap(Gt),le.unbindTexture()},this.copyTextureToTexture3D=function(A,H,K=null,Q=null,V=0){return A.isTexture!==!0&&(ir("WebGLRenderer: copyTextureToTexture3D function signature has changed."),K=arguments[0]||null,Q=arguments[1]||null,A=arguments[2],H=arguments[3],V=arguments[4]||0),ir('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(A,H,K,Q,V)},this.initRenderTarget=function(A){re.get(A).__webglFramebuffer===void 0&&T.setupRenderTarget(A)},this.initTexture=function(A){A.isCubeTexture?T.setTextureCube(A,0):A.isData3DTexture?T.setTexture3D(A,0):A.isDataArrayTexture||A.isCompressedArrayTexture?T.setTexture2DArray(A,0):T.setTexture2D(A,0),le.unbindTexture()},this.resetState=function(){P=0,I=0,N=null,le.reset(),Mt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return xi}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=ot._getDrawingBufferColorSpace(e),t.unpackColorSpace=ot._getUnpackColorSpace()}}function Gh(n,e){if(e===Uv)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===cd||e===Im){let t=n.getIndex();if(t===null){const o=[],a=n.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,s=[];if(e===cd)for(let o=1;o<=i;o++)s.push(t.getX(0)),s.push(t.getX(o)),s.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(s.push(t.getX(o)),s.push(t.getX(o+1)),s.push(t.getX(o+2))):(s.push(t.getX(o+2)),s.push(t.getX(o+1)),s.push(t.getX(o)));s.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=n.clone();return r.setIndex(s),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}class cE extends rs{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new pE(t)}),this.register(function(t){return new mE(t)}),this.register(function(t){return new EE(t)}),this.register(function(t){return new TE(t)}),this.register(function(t){return new wE(t)}),this.register(function(t){return new _E(t)}),this.register(function(t){return new vE(t)}),this.register(function(t){return new xE(t)}),this.register(function(t){return new bE(t)}),this.register(function(t){return new hE(t)}),this.register(function(t){return new yE(t)}),this.register(function(t){return new gE(t)}),this.register(function(t){return new ME(t)}),this.register(function(t){return new SE(t)}),this.register(function(t){return new uE(t)}),this.register(function(t){return new AE(t)}),this.register(function(t){return new CE(t)})}load(e,t,i,s){const r=this;let o;if(this.resourcePath!=="")o=this.resourcePath;else if(this.path!==""){const c=lo.extractUrlBase(e);o=lo.resolveURL(c,this.path)}else o=lo.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){s?s(c):console.error(c),r.manager.itemError(e),r.manager.itemEnd(e)},l=new Na(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{r.parse(c,o,function(d){t(d),r.manager.itemEnd(e)},a)}catch(d){a(d)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,s){let r;const o={},a={},l=new TextDecoder;if(typeof e=="string")r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===sg){try{o[rt.KHR_BINARY_GLTF]=new RE(e)}catch(u){s&&s(u);return}r=JSON.parse(o[rt.KHR_BINARY_GLTF].content)}else r=JSON.parse(l.decode(e));else r=e;if(r.asset===void 0||r.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new VE(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){const u=this.pluginCallbacks[d](c);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[u.name]=u,o[u.name]=!0}if(r.extensionsUsed)for(let d=0;d<r.extensionsUsed.length;++d){const u=r.extensionsUsed[d],f=r.extensionsRequired||[];switch(u){case rt.KHR_MATERIALS_UNLIT:o[u]=new fE;break;case rt.KHR_DRACO_MESH_COMPRESSION:o[u]=new LE(r,this.dracoLoader);break;case rt.KHR_TEXTURE_TRANSFORM:o[u]=new PE;break;case rt.KHR_MESH_QUANTIZATION:o[u]=new IE;break;default:f.indexOf(u)>=0&&a[u]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(i,s)}parseAsync(e,t){const i=this;return new Promise(function(s,r){i.parse(e,t,s,r)})}}function dE(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const rt={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class uE{constructor(e){this.parser=e,this.name=rt.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,s=t.length;i<s;i++){const r=t[i];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let s=t.cache.get(i);if(s)return s;const r=t.json,l=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let c;const d=new Ke(16777215);l.color!==void 0&&d.setRGB(l.color[0],l.color[1],l.color[2],Qt);const u=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new hd(d),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new fb(d),c.distance=u;break;case"spot":c=new db(d),c.distance=u,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,_i(c,l),l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),s=Promise.resolve(c),t.cache.add(i,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,r=i.json.nodes[e],a=(r.extensions&&r.extensions[this.name]||{}).light;return a===void 0?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class fE{constructor(){this.name=rt.KHR_MATERIALS_UNLIT}getMaterialType(){return As}extendParams(e,t,i){const s=[];e.color=new Ke(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const o=r.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Qt),e.opacity=o[3]}r.baseColorTexture!==void 0&&s.push(i.assignTexture(e,"map",r.baseColorTexture,It))}return Promise.all(s)}}class hE{constructor(e){this.parser=e,this.name=rt.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name].emissiveStrength;return r!==void 0&&(t.emissiveIntensity=r),Promise.resolve()}}class pE{constructor(e){this.parser=e,this.name=rt.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ri}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(r.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new lt(a,a)}return Promise.all(r)}}class mE{constructor(e){this.parser=e,this.name=rt.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ri}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class gE{constructor(e){this.parser=e,this.name=rt.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ri}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&r.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&r.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(r)}}class _E{constructor(e){this.parser=e,this.name=rt.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ri}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new Ke(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=s.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Qt)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&r.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,It)),o.sheenRoughnessTexture!==void 0&&r.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class vE{constructor(e){this.parser=e,this.name=rt.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ri}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&r.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class xE{constructor(e){this.parser=e,this.name=rt.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ri}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&r.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new Ke().setRGB(a[0],a[1],a[2],Qt),Promise.all(r)}}class bE{constructor(e){this.parser=e,this.name=rt.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ri}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=s.extensions[this.name];return t.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class yE{constructor(e){this.parser=e,this.name=rt.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ri}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&r.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new Ke().setRGB(a[0],a[1],a[2],Qt),o.specularColorTexture!==void 0&&r.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,It)),Promise.all(r)}}class SE{constructor(e){this.parser=e,this.name=rt.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ri}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return t.bumpScale=o.bumpFactor!==void 0?o.bumpFactor:1,o.bumpTexture!==void 0&&r.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(r)}}class ME{constructor(e){this.parser=e,this.name=rt.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:ri}extendMaterialParams(e,t){const i=this.parser,s=i.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const r=[],o=s.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&r.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(r)}}class EE{constructor(e){this.parser=e,this.name=rt.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,s=i.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const r=s.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,o)}}class TE{constructor(e){this.parser=e,this.name=rt.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=s.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class wE{constructor(e){this.parser=e,this.name=rt.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,s=i.json,r=s.textures[e];if(!r.extensions||!r.extensions[t])return null;const o=r.extensions[t],a=s.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class AE{constructor(e){this.name=rt.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const s=i.extensions[this.name],r=this.parser.getDependency("buffer",s.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(a){const l=s.byteOffset||0,c=s.byteLength||0,d=s.count,u=s.byteStride,f=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(d,u,f,s.mode,s.filter).then(function(p){return p.buffer}):o.ready.then(function(){const p=new ArrayBuffer(d*u);return o.decodeGltfBuffer(new Uint8Array(p),d,u,f,s.mode,s.filter),p})})}else return null}}class CE{constructor(e){this.name=rt.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const s=t.meshes[i.mesh];for(const c of s.primitives)if(c.mode!==Tn.TRIANGLES&&c.mode!==Tn.TRIANGLE_STRIP&&c.mode!==Tn.TRIANGLE_FAN&&c.mode!==void 0)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(d=>(l[c]=d,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const d=c.pop(),u=d.isGroup?d.children:[d],f=c[0].count,p=[];for(const _ of u){const v=new nt,g=new G,m=new ss,x=new G(1,1,1),y=new zx(_.geometry,_.material,f);for(let b=0;b<f;b++)l.TRANSLATION&&g.fromBufferAttribute(l.TRANSLATION,b),l.ROTATION&&m.fromBufferAttribute(l.ROTATION,b),l.SCALE&&x.fromBufferAttribute(l.SCALE,b),y.setMatrixAt(b,v.compose(g,m,x));for(const b in l)if(b==="_COLOR_0"){const L=l[b];y.instanceColor=new ud(L.array,L.itemSize,L.normalized)}else b!=="TRANSLATION"&&b!=="ROTATION"&&b!=="SCALE"&&_.geometry.setAttribute(b,l[b]);At.prototype.copy.call(y,_),this.parser.assignFinalMaterial(y),p.push(y)}return d.isGroup?(d.clear(),d.add(...p),d):p[0]}))}}const sg="glTF",Yr=12,$h={JSON:1313821514,BIN:5130562};class RE{constructor(e){this.name=rt.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Yr),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==sg)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const s=this.header.length-Yr,r=new DataView(e,Yr);let o=0;for(;o<s;){const a=r.getUint32(o,!0);o+=4;const l=r.getUint32(o,!0);if(o+=4,l===$h.JSON){const c=new Uint8Array(e,Yr+o,a);this.content=i.decode(c)}else if(l===$h.BIN){const c=Yr+o;this.body=e.slice(c,c+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class LE{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=rt.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,s=this.dracoLoader,r=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const d in o){const u=md[d]||d.toLowerCase();a[u]=o[d]}for(const d in e.attributes){const u=md[d]||d.toLowerCase();if(o[d]!==void 0){const f=i.accessors[e.attributes[d]],p=hr[f.componentType];c[u]=p.name,l[u]=f.normalized===!0}}return t.getDependency("bufferView",r).then(function(d){return new Promise(function(u,f){s.decodeDracoFile(d,function(p){for(const _ in p.attributes){const v=p.attributes[_],g=l[_];g!==void 0&&(v.normalized=g)}u(p)},a,c,Qt,f)})})}}class PE{constructor(){this.name=rt.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class IE{constructor(){this.name=rt.KHR_MESH_QUANTIZATION}}class rg extends Mo{constructor(e,t,i,s){super(e,t,i,s)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,r=e*s*3+s;for(let o=0;o!==s;o++)t[o]=i[r+o];return t}interpolate_(e,t,i,s){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,d=s-t,u=(i-t)/d,f=u*u,p=f*u,_=e*c,v=_-c,g=-2*p+3*f,m=p-f,x=1-g,y=m-f+u;for(let b=0;b!==a;b++){const L=o[v+b+a],P=o[v+b+l]*d,I=o[_+b+a],N=o[_+b]*d;r[b]=x*L+y*P+g*I+m*N}return r}}const DE=new ss;class NE extends rg{interpolate_(e,t,i,s){const r=super.interpolate_(e,t,i,s);return DE.fromArray(r).normalize().toArray(r),r}}const Tn={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},hr={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Wh={9728:ln,9729:vn,9984:Sm,9985:ha,9986:Qr,9987:vi},Xh={33071:$i,33648:Ra,10497:ts},Jl={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},md={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Bi={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},UE={CUBICSPLINE:void 0,LINEAR:xo,STEP:vo},Ql={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function OE(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new ru({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ti})),n.DefaultMaterial}function vs(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function _i(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function kE(n,e,t){let i=!1,s=!1,r=!1;for(let c=0,d=e.length;c<d;c++){const u=e[c];if(u.POSITION!==void 0&&(i=!0),u.NORMAL!==void 0&&(s=!0),u.COLOR_0!==void 0&&(r=!0),i&&s&&r)break}if(!i&&!s&&!r)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,d=e.length;c<d;c++){const u=e[c];if(i){const f=u.POSITION!==void 0?t.getDependency("accessor",u.POSITION):n.attributes.position;o.push(f)}if(s){const f=u.NORMAL!==void 0?t.getDependency("accessor",u.NORMAL):n.attributes.normal;a.push(f)}if(r){const f=u.COLOR_0!==void 0?t.getDependency("accessor",u.COLOR_0):n.attributes.color;l.push(f)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const d=c[0],u=c[1],f=c[2];return i&&(n.morphAttributes.position=d),s&&(n.morphAttributes.normal=u),r&&(n.morphAttributes.color=f),n.morphTargetsRelative=!0,n})}function FE(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,s=t.length;i<s;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function BE(n){let e;const t=n.extensions&&n.extensions[rt.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+ec(t.attributes):e=n.indices+":"+ec(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,s=n.targets.length;i<s;i++)e+=":"+ec(n.targets[i]);return e}function ec(n){let e="";const t=Object.keys(n).sort();for(let i=0,s=t.length;i<s;i++)e+=t[i]+":"+n[t[i]]+";";return e}function gd(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function HE(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":n.search(/\.ktx2($|\?)/i)>0||n.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const zE=new nt;class VE{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new dE,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,s=-1,r=!1,o=-1;if(typeof navigator<"u"){const a=navigator.userAgent;i=/^((?!chrome|android).)*safari/i.test(a)===!0;const l=a.match(/Version\/(\d+)/);s=i&&l?parseInt(l[1],10):-1,r=a.indexOf("Firefox")>-1,o=r?a.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||i&&s<17||r&&o<98?this.textureLoader=new Jm(this.options.manager):this.textureLoader=new mb(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Na(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,s=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][s.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:s.asset,parser:i,userData:{}};return vs(r,a,s),_i(a,s),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let s=0,r=t.length;s<r;s++){const o=t[s].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let s=0,r=e.length;s<r;s++){const o=e[s];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const s=i.clone(),r=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,d]of o.children.entries())r(d,a.children[c])};return r(i,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const s=e(t[i]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let s=0;s<t.length;s++){const r=e(t[s]);r&&i.push(r)}return i}getDependency(e,t){const i=e+":"+t;let s=this.cache.get(i);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(r){return r.loadNode&&r.loadNode(t)});break;case"mesh":s=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(i,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(r,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[rt.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(r,o){i.load(lo.resolveURL(t.uri,s.path),r,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteLength||0,r=t.byteOffset||0;return i.slice(r,r+s)})}loadAccessor(e){const t=this,i=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const o=Jl[s.type],a=hr[s.componentType],l=s.normalized===!0,c=new a(s.count*o);return Promise.resolve(new Wt(c,o,l))}const r=[];return s.bufferView!==void 0?r.push(this.getDependency("bufferView",s.bufferView)):r.push(null),s.sparse!==void 0&&(r.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(r).then(function(o){const a=o[0],l=Jl[s.type],c=hr[s.componentType],d=c.BYTES_PER_ELEMENT,u=d*l,f=s.byteOffset||0,p=s.bufferView!==void 0?i.bufferViews[s.bufferView].byteStride:void 0,_=s.normalized===!0;let v,g;if(p&&p!==u){const m=Math.floor(f/p),x="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+m+":"+s.count;let y=t.cache.get(x);y||(v=new c(a,m*p,s.count*p/d),y=new Ox(v,p/d),t.cache.add(x,y)),g=new tu(y,l,f%p/d,_)}else a===null?v=new c(s.count*l):v=new c(a,f,s.count*l),g=new Wt(v,l,_);if(s.sparse!==void 0){const m=Jl.SCALAR,x=hr[s.sparse.indices.componentType],y=s.sparse.indices.byteOffset||0,b=s.sparse.values.byteOffset||0,L=new x(o[1],y,s.sparse.count*m),P=new c(o[2],b,s.sparse.count*l);a!==null&&(g=new Wt(g.array.slice(),g.itemSize,g.normalized)),g.normalized=!1;for(let I=0,N=L.length;I<N;I++){const w=L[I];if(g.setX(w,P[I*l]),l>=2&&g.setY(w,P[I*l+1]),l>=3&&g.setZ(w,P[I*l+2]),l>=4&&g.setW(w,P[I*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}g.normalized=_}return g})}loadTexture(e){const t=this.json,i=this.options,r=t.textures[e].source,o=t.images[r];let a=this.textureLoader;if(o.uri){const l=i.manager.getHandler(o.uri);l!==null&&(a=l)}return this.loadTextureImage(e,r,a)}loadTextureImage(e,t,i){const s=this,r=this.json,o=r.textures[e],a=r.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(d){d.flipY=!1,d.name=o.name||a.name||"",d.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(d.name=a.uri);const f=(r.samplers||{})[o.sampler]||{};return d.magFilter=Wh[f.magFilter]||vn,d.minFilter=Wh[f.minFilter]||vi,d.wrapS=Xh[f.wrapS]||ts,d.wrapT=Xh[f.wrapT]||ts,d.generateMipmaps=!d.isCompressedTexture&&d.minFilter!==ln&&d.minFilter!==vn,s.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const i=this,s=this.json,r=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(u=>u.clone());const o=s.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(u){c=!0;const f=new Blob([u],{type:o.mimeType});return l=a.createObjectURL(f),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(l).then(function(u){return new Promise(function(f,p){let _=f;t.isImageBitmapLoader===!0&&(_=function(v){const g=new Vt(v);g.needsUpdate=!0,f(g)}),t.load(lo.resolveURL(u,r.path),_,void 0,p)})}).then(function(u){return c===!0&&a.revokeObjectURL(l),_i(u,o),u.userData.mimeType=o.mimeType||HE(o.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),u});return this.sourceCache[e]=d,d}assignTexture(e,t,i,s){const r=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),r.extensions[rt.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[rt.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=r.associations.get(o);o=r.extensions[rt.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),r.associations.set(o,l)}}return s!==void 0&&(o.colorSpace=s),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const s=t.attributes.tangent===void 0,r=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new jm,ti.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Xm,ti.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(s||r||o){let a="ClonedMaterial:"+i.uuid+":";s&&(a+="derivative-tangents:"),r&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),r&&(l.vertexColors=!0),o&&(l.flatShading=!0),s&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return ru}loadMaterial(e){const t=this,i=this.json,s=this.extensions,r=i.materials[e];let o;const a={},l=r.extensions||{},c=[];if(l[rt.KHR_MATERIALS_UNLIT]){const u=s[rt.KHR_MATERIALS_UNLIT];o=u.getMaterialType(),c.push(u.extendParams(a,r,t))}else{const u=r.pbrMetallicRoughness||{};if(a.color=new Ke(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){const f=u.baseColorFactor;a.color.setRGB(f[0],f[1],f[2],Qt),a.opacity=f[3]}u.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",u.baseColorTexture,It)),a.metalness=u.metallicFactor!==void 0?u.metallicFactor:1,a.roughness=u.roughnessFactor!==void 0?u.roughnessFactor:1,u.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",u.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",u.metallicRoughnessTexture))),o=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(e,a)})))}r.doubleSided===!0&&(a.side=Jn);const d=r.alphaMode||Ql.OPAQUE;if(d===Ql.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,d===Ql.MASK&&(a.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&o!==As&&(c.push(t.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new lt(1,1),r.normalTexture.scale!==void 0)){const u=r.normalTexture.scale;a.normalScale.set(u,u)}if(r.occlusionTexture!==void 0&&o!==As&&(c.push(t.assignTexture(a,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&o!==As){const u=r.emissiveFactor;a.emissive=new Ke().setRGB(u[0],u[1],u[2],Qt)}return r.emissiveTexture!==void 0&&o!==As&&c.push(t.assignTexture(a,"emissiveMap",r.emissiveTexture,It)),Promise.all(c).then(function(){const u=new o(a);return r.name&&(u.name=r.name),_i(u,r),t.associations.set(u,{materials:e}),r.extensions&&vs(s,u,r),u})}createUniqueName(e){const t=yt.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,s=this.primitiveCache;function r(a){return i[rt.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return jh(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],d=BE(c),u=s[d];if(u)o.push(u.promise);else{let f;c.extensions&&c.extensions[rt.KHR_DRACO_MESH_COMPRESSION]?f=r(c):f=jh(new jn,c,t),s[d]={primitive:c,promise:f},o.push(f)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,s=this.extensions,r=i.meshes[e],o=r.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const d=o[l].material===void 0?OE(this.cache):this.getDependency("material",o[l].material);a.push(d)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),d=l[l.length-1],u=[];for(let p=0,_=d.length;p<_;p++){const v=d[p],g=o[p];let m;const x=c[p];if(g.mode===Tn.TRIANGLES||g.mode===Tn.TRIANGLE_STRIP||g.mode===Tn.TRIANGLE_FAN||g.mode===void 0)m=r.isSkinnedMesh===!0?new Fx(v,x):new xn(v,x),m.isSkinnedMesh===!0&&m.normalizeSkinWeights(),g.mode===Tn.TRIANGLE_STRIP?m.geometry=Gh(m.geometry,Im):g.mode===Tn.TRIANGLE_FAN&&(m.geometry=Gh(m.geometry,cd));else if(g.mode===Tn.LINES)m=new $x(v,x);else if(g.mode===Tn.LINE_STRIP)m=new su(v,x);else if(g.mode===Tn.LINE_LOOP)m=new Wx(v,x);else if(g.mode===Tn.POINTS)m=new Xx(v,x);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(m.geometry.morphAttributes).length>0&&FE(m,r),m.name=t.createUniqueName(r.name||"mesh_"+e),_i(m,r),g.extensions&&vs(s,m,g),t.assignFinalMaterial(m),u.push(m)}for(let p=0,_=u.length;p<_;p++)t.associations.set(u[p],{meshes:e,primitives:p});if(u.length===1)return r.extensions&&vs(s,u[0],r),u[0];const f=new Cs;r.extensions&&vs(s,f,r),t.associations.set(f,{meshes:e});for(let p=0,_=u.length;p<_;p++)f.add(u[p]);return f})}loadCamera(e){let t;const i=this.json.cameras[e],s=i[i.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new on(lx.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):i.type==="orthographic"&&(t=new au(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),_i(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let s=0,r=t.joints.length;s<r;s++)i.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(s){const r=s.pop(),o=s,a=[],l=[];for(let c=0,d=o.length;c<d;c++){const u=o[c];if(u){a.push(u);const f=new nt;r!==null&&f.fromArray(r.array,c*16),l.push(f)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new nu(a,l)})}loadAnimation(e){const t=this.json,i=this,s=t.animations[e],r=s.name?s.name:"animation_"+e,o=[],a=[],l=[],c=[],d=[];for(let u=0,f=s.channels.length;u<f;u++){const p=s.channels[u],_=s.samplers[p.sampler],v=p.target,g=v.node,m=s.parameters!==void 0?s.parameters[_.input]:_.input,x=s.parameters!==void 0?s.parameters[_.output]:_.output;v.node!==void 0&&(o.push(this.getDependency("node",g)),a.push(this.getDependency("accessor",m)),l.push(this.getDependency("accessor",x)),c.push(_),d.push(v))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(d)]).then(function(u){const f=u[0],p=u[1],_=u[2],v=u[3],g=u[4],m=[];for(let x=0,y=f.length;x<y;x++){const b=f[x],L=p[x],P=_[x],I=v[x],N=g[x];if(b===void 0)continue;b.updateMatrix&&b.updateMatrix();const w=i._createAnimationTracks(b,L,P,I,N);if(w)for(let M=0;M<w.length;M++)m.push(w[M])}return new tb(r,void 0,m)})}createNodeMesh(e){const t=this.json,i=this,s=t.nodes[e];return s.mesh===void 0?null:i.getDependency("mesh",s.mesh).then(function(r){const o=i._getNodeRef(i.meshCache,s.mesh,r);return s.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=s.weights.length;l<c;l++)a.morphTargetInfluences[l]=s.weights[l]}),o})}loadNode(e){const t=this.json,i=this,s=t.nodes[e],r=i._loadNodeShallow(e),o=[],a=s.children||[];for(let c=0,d=a.length;c<d;c++)o.push(i.getDependency("node",a[c]));const l=s.skin===void 0?Promise.resolve(null):i.getDependency("skin",s.skin);return Promise.all([r,Promise.all(o),l]).then(function(c){const d=c[0],u=c[1],f=c[2];f!==null&&d.traverse(function(p){p.isSkinnedMesh&&p.bind(f,zE)});for(let p=0,_=u.length;p<_;p++)d.add(u[p]);return d})}_loadNodeShallow(e){const t=this.json,i=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const r=t.nodes[e],o=r.name?s.createUniqueName(r.name):"",a=[],l=s._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),r.camera!==void 0&&a.push(s.getDependency("camera",r.camera).then(function(c){return s._getNodeRef(s.cameraCache,r.camera,c)})),s._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let d;if(r.isBone===!0?d=new $m:c.length>1?d=new Cs:c.length===1?d=c[0]:d=new At,d!==c[0])for(let u=0,f=c.length;u<f;u++)d.add(c[u]);if(r.name&&(d.userData.name=r.name,d.name=o),_i(d,r),r.extensions&&vs(i,d,r),r.matrix!==void 0){const u=new nt;u.fromArray(r.matrix),d.applyMatrix4(u)}else r.translation!==void 0&&d.position.fromArray(r.translation),r.rotation!==void 0&&d.quaternion.fromArray(r.rotation),r.scale!==void 0&&d.scale.fromArray(r.scale);return s.associations.has(d)||s.associations.set(d,{}),s.associations.get(d).nodes=e,d}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],s=this,r=new Cs;i.name&&(r.name=s.createUniqueName(i.name)),_i(r,i),i.extensions&&vs(t,r,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(s.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let d=0,u=l.length;d<u;d++)r.add(l[d]);const c=d=>{const u=new Map;for(const[f,p]of s.associations)(f instanceof ti||f instanceof Vt)&&u.set(f,p);return d.traverse(f=>{const p=s.associations.get(f);p!=null&&u.set(f,p)}),u};return s.associations=c(r),r})}_createAnimationTracks(e,t,i,s,r){const o=[],a=e.name?e.name:e.uuid,l=[];Bi[r.path]===Bi.weights?e.traverse(function(f){f.morphTargetInfluences&&l.push(f.name?f.name:f.uuid)}):l.push(a);let c;switch(Bi[r.path]){case Bi.weights:c=Tr;break;case Bi.rotation:c=wr;break;case Bi.position:case Bi.scale:c=Ar;break;default:switch(i.itemSize){case 1:c=Tr;break;case 2:case 3:default:c=Ar;break}break}const d=s.interpolation!==void 0?UE[s.interpolation]:xo,u=this._getArrayFromAccessor(i);for(let f=0,p=l.length;f<p;f++){const _=new c(l[f]+"."+Bi[r.path],t.array,u,d);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(_),o.push(_)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=gd(t.constructor),s=new Float32Array(t.length);for(let r=0,o=t.length;r<o;r++)s[r]=t[r]*i;t=s}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const s=this instanceof wr?NE:rg;return new s(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function GE(n,e,t){const i=e.attributes,s=new Ci;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(s.set(new G(l[0],l[1],l[2]),new G(c[0],c[1],c[2])),a.normalized){const d=gd(hr[a.componentType]);s.min.multiplyScalar(d),s.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=e.targets;if(r!==void 0){const a=new G,l=new G;for(let c=0,d=r.length;c<d;c++){const u=r[c];if(u.POSITION!==void 0){const f=t.json.accessors[u.POSITION],p=f.min,_=f.max;if(p!==void 0&&_!==void 0){if(l.setX(Math.max(Math.abs(p[0]),Math.abs(_[0]))),l.setY(Math.max(Math.abs(p[1]),Math.abs(_[1]))),l.setZ(Math.max(Math.abs(p[2]),Math.abs(_[2]))),f.normalized){const v=gd(hr[f.componentType]);l.multiplyScalar(v)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(a)}n.boundingBox=s;const o=new si;s.getCenter(o.center),o.radius=s.min.distanceTo(s.max)/2,n.boundingSphere=o}function jh(n,e,t){const i=e.attributes,s=[];function r(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=md[o]||o.toLowerCase();a in n.attributes||s.push(r(i[o],a))}if(e.indices!==void 0&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});s.push(o)}return ot.workingColorSpace!==Qt&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${ot.workingColorSpace}" not supported.`),_i(n,e),GE(n,e,t),Promise.all(s).then(function(){return e.targets!==void 0?kE(n,e.targets,t):n})}const tc=new WeakMap;class $E extends rs{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,s){const r=new Na(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,o=>{this.parse(o,t,s)},i,s)}parse(e,t,i=()=>{}){this.decodeDracoFile(e,t,null,null,It,i).catch(i)}decodeDracoFile(e,t,i,s,r=Qt,o=()=>{}){const a={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!i,vertexColorSpace:r};return this.decodeGeometry(e,a).then(t).catch(o)}decodeGeometry(e,t){const i=JSON.stringify(t);if(tc.has(e)){const l=tc.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const r=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(r,o).then(l=>(s=l,new Promise((c,d)=>{s._callbacks[r]={resolve:c,reject:d},s.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{s&&r&&this._releaseTask(s,r)}),tc.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new jn;e.index&&t.setIndex(new Wt(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const s=e.attributes[i],r=s.name,o=s.array,a=s.itemSize,l=new Wt(o,a);r==="color"&&(this._assignVertexColorSpace(l,s.vertexColorSpace),l.normalized=!(o instanceof Float32Array)),t.setAttribute(r,l)}return t}_assignVertexColorSpace(e,t){if(t!==It)return;const i=new Ke;for(let s=0,r=e.count;s<r;s++)i.fromBufferAttribute(e,s),ot.toWorkingColorSpace(i,It),e.setXYZ(s,i.r,i.g,i.b)}_loadLibrary(e,t){const i=new Na(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((s,r)=>{i.load(e,s,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const s=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const r=WE.toString(),o=["/* draco decoder */",s,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(r){const o=r.data;switch(o.type){case"decode":s._callbacks[o.id].resolve(o);break;case"error":s._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,r){return s._taskLoad>r._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function WE(){let n,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":n=a.decoderConfig,e=new Promise(function(d){n.onModuleLoaded=function(u){d({draco:u})},DracoDecoderModule(n)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(d=>{const u=d.draco,f=new u.Decoder;try{const p=t(u,f,new Int8Array(l),c),_=p.attributes.map(v=>v.array.buffer);p.index&&_.push(p.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:p},_)}catch(p){console.error(p),self.postMessage({type:"error",id:a.id,error:p.message})}finally{u.destroy(f)}});break}};function t(o,a,l,c){const d=c.attributeIDs,u=c.attributeTypes;let f,p;const _=a.GetEncodedGeometryType(l);if(_===o.TRIANGULAR_MESH)f=new o.Mesh,p=a.DecodeArrayToMesh(l,l.byteLength,f);else if(_===o.POINT_CLOUD)f=new o.PointCloud,p=a.DecodeArrayToPointCloud(l,l.byteLength,f);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!p.ok()||f.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+p.error_msg());const v={index:null,attributes:[]};for(const g in d){const m=self[u[g]];let x,y;if(c.useUniqueIDs)y=d[g],x=a.GetAttributeByUniqueId(f,y);else{if(y=a.GetAttributeId(f,o[d[g]]),y===-1)continue;x=a.GetAttribute(f,y)}const b=s(o,a,f,g,m,x);g==="color"&&(b.vertexColorSpace=c.vertexColorSpace),v.attributes.push(b)}return _===o.TRIANGULAR_MESH&&(v.index=i(o,a,f)),o.destroy(f),v}function i(o,a,l){const d=l.num_faces()*3,u=d*4,f=o._malloc(u);a.GetTrianglesUInt32Array(l,u,f);const p=new Uint32Array(o.HEAPF32.buffer,f,d).slice();return o._free(f),{array:p,itemSize:1}}function s(o,a,l,c,d,u){const f=u.num_components(),_=l.num_points()*f,v=_*d.BYTES_PER_ELEMENT,g=r(o,d),m=o._malloc(v);a.GetAttributeDataArrayForAllPoints(l,u,g,v,m);const x=new d(o.HEAPF32.buffer,m,_).slice();return o._free(m),{name:c,array:x,itemSize:f}}function r(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}const XE=new Jm,jE=new ab,og=new cE,uu=new $E;uu.setDecoderPath(`${z}models/lamp/draco/`);og.setDRACOLoader(uu);uu.preload();class tr{constructor({texturePath:e,envImagePaths:t,filePath:i,renderElem:s,orbitControlEnabled:r,modelInitialRotation:o,modelMoveAnimationSettings:a}){tn(this,"scene",null);tn(this,"camera",null);tn(this,"renderer",null);tn(this,"model",null);tn(this,"renderElem",null);tn(this,"texturePath",null);tn(this,"envImagePaths",null);tn(this,"filePath",null);tn(this,"controls",null);tn(this,"orbitControlEnabled",!1);tn(this,"modelInitialRotation",{y:0,x:0,z:0});tn(this,"modelMoveAnimationSettings",{direction:"left",axis:"y",value:3e-4,moreValue:[.5,-.5]});s&&(r&&(this.orbitControlEnabled=r),o&&(this.modelInitialRotation=o),a&&(this.modelMoveAnimationSettings=a),this.envImagePaths=t,this.texturePath=e,this.filePath=i,this.renderElem=s,this.init())}animateModelMove(){this.modelMoveAnimationSettings.direction==="right"&&(this.model.rotation.y+=this.modelMoveAnimationSettings.value,this.model.rotation.y>this.modelMoveAnimationSettings.moreValue[0]&&(this.modelMoveAnimationSettings.direction="left")),this.modelMoveAnimationSettings.direction==="left"&&(this.model.rotation.y-=this.modelMoveAnimationSettings.value,this.model.rotation.y<this.modelMoveAnimationSettings.moreValue[1]&&(this.modelMoveAnimationSettings.direction="right"))}animateScene(){this.renderer.render(this.scene,this.camera),this.animateModelMove(),requestAnimationFrame(this.animateScene.bind(this))}setLights(){let e="#ffffff",t="#ffffff",i=["#ffffff","#ffffff"],s=new pb(t,.2),r=new lb(i[0],i[1],.2),o=new hd(e,.5),a=new hd(e,.5);s.position.set(0,1,0),r.position.set(0,1,0),o.position.set(0,1,0),a.position.set(0,-4,0),this.scene.add(s),this.scene.add(r),this.scene.add(o),this.scene.add(a)}setModelTexture(){const e=XE.load(this.texturePath);e.wrapS=ts,e.wrapT=ts,e.repeat.set(4,1),this.model.traverse(t=>{t.isMesh&&(t.material.map=e,t.material.needsUpdate=!0)})}setCubeTextureEnv(e){let t=jE.load(e);this.scene.environment=t}setRendered(){this.renderer=new lE({antialias:!0,alpha:!0}),this.renderer.setSize(this.renderElem.offsetWidth,this.renderElem.offsetHeight),this.renderElem.appendChild(this.renderer.domElement),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=xm}setCamera(){this.camera=new on(40,this.renderElem.offsetWidth/this.renderElem.offsetHeight,1,1e3),this.camera.position.z=10}setScene(){this.scene=new Ux}loadModel(){og.load(this.filePath,e=>{this.model=e.scene,this.model.rotation.x+=this.modelInitialRotation.x,this.model.rotation.y+=this.modelInitialRotation.y,this.model.rotation.z+=this.modelInitialRotation.z,this.setModelTexture(),this.scene.add(this.model),this.animateScene(),this.renderElem.classList.add("is-loaded")})}init(){this.renderElem.innerHTML="",this.setScene(),this.setCamera(),this.setRendered(),this.setCubeTextureEnv(this.envImagePaths),this.setLights(),this.loadModel()}}async function qE(){function n(p){let _=0,v=document.querySelector(p);return v&&(_=v.getBoundingClientRect().top+window.scrollY-v.getBoundingClientRect().height),_}const e=new tr({filePath:`${z}models/lamp/lamp-draco.glb`,texturePath:`${z}models/lamp/lamp-texture.jpg`,envImagePaths:[`${z}models/lamp/env-1.jpg`,`${z}models/lamp/env-6.jpg`,`${z}models/lamp/env-6.jpg`,`${z}models/lamp/env-10.jpg`,`${z}models/lamp/env-8.jpg`,`${z}models/lamp/env-6.jpg`],renderElem:document.querySelector(".three-lamp--main-right"),modelInitialRotation:{x:2.6,y:0,z:.6}}),t=new tr({filePath:`${z}models/lamp/lamp-draco.glb`,texturePath:`${z}models/lamp/lamp-texture.jpg`,envImagePaths:[`${z}models/lamp/env-1.jpg`,`${z}models/lamp/env-6.jpg`,`${z}models/lamp/env-6.jpg`,`${z}models/lamp/env-10.jpg`,`${z}models/lamp/env-8.jpg`,`${z}models/lamp/env-6.jpg`],renderElem:document.querySelector(".three-lamp--main-left"),modelInitialRotation:{x:-.4,z:1.2,y:1.2},modelMoveAnimationSettings:{direction:"right",axis:"y",value:.001,moreValue:[1,-1]}}),i=new tr({filePath:`${z}models/lamp/lamp-draco.glb`,texturePath:`${z}models/lamp/lamp-texture.jpg`,envImagePaths:[`${z}models/lamp/env-1.jpg`,`${z}models/lamp/env-6.jpg`,`${z}models/lamp/env-6.jpg`,`${z}models/lamp/env-10.jpg`,`${z}models/lamp/env-8.jpg`,`${z}models/lamp/env-6.jpg`],renderElem:document.querySelector(".three-lamp--main-banner"),modelInitialRotation:{x:3.5,y:0,z:-.6},modelMoveAnimationSettings:{direction:"right",axis:"y",value:54e-5,moreValue:[.7,-.6]}}),s=new tr({filePath:`${z}models/lamp/lamp-draco.glb`,texturePath:`${z}models/lamp/lamp-texture.jpg`,envImagePaths:[`${z}models/lamp/env-1.jpg`,`${z}models/lamp/env-6.jpg`,`${z}models/lamp/env-6.jpg`,`${z}models/lamp/env-10.jpg`,`${z}models/lamp/env-8.jpg`,`${z}models/lamp/env-6.jpg`],renderElem:document.querySelector(".three-lamp--subscribe-left"),modelInitialRotation:{x:-.4,z:1.2,y:1.2},modelMoveAnimationSettings:{direction:"left",axis:"y",value:54e-5,moreValue:[1,-1]}}),r=new tr({filePath:`${z}models/lamp/lamp-draco.glb`,texturePath:`${z}models/lamp/lamp-texture.jpg`,envImagePaths:[`${z}models/lamp/env-1.jpg`,`${z}models/lamp/env-6.jpg`,`${z}models/lamp/env-6.jpg`,`${z}models/lamp/env-10.jpg`,`${z}models/lamp/env-8.jpg`,`${z}models/lamp/env-6.jpg`],renderElem:document.querySelector(".three-lamp--subscribe-right"),modelInitialRotation:{x:-2.8,y:0,z:.6}}),o=new tr({filePath:`${z}models/lamp/lamp-draco.glb`,texturePath:`${z}models/lamp/lamp-texture.jpg`,envImagePaths:[`${z}models/lamp/env-1.jpg`,`${z}models/lamp/env-6.jpg`,`${z}models/lamp/env-6.jpg`,`${z}models/lamp/env-10.jpg`,`${z}models/lamp/env-8.jpg`,`${z}models/lamp/env-6.jpg`],renderElem:document.querySelector(".three-lamp--footer"),modelInitialRotation:{x:1.75,y:0,z:-.6},modelMoveAnimationSettings:{direction:"right",axis:"y",value:54e-5,moreValue:[.7,-.6]}});let a=0,l=0,c=n(".js-app-footer"),d=n(".js-subscribe-block");function u(p){let _=!1;_||(window.requestAnimationFrame(()=>{l=window.scrollY-a,a=window.scrollY,window.scrollY>0&&(t.model&&(t.model.rotation.x+=l*.0016,t.model.rotation.z-=l*.0018),e.model&&(e.model.rotation.x-=l*.0013),i.model&&(i.model.rotation.x-=l*.0013),s.model&&(s.model.rotation.x-=l*.0013),r.model&&window.scrollY>d&&(r.model.rotation.x-=l*.002),o.model&&window.scrollY>c&&(o.model.rotation.x+=l*.0013)),_=!1}),_=!0)}document.removeEventListener("scroll",u),document.addEventListener("scroll",u);function f(p,_=4e3){const v=(m,x)=>Math.floor(Math.random()*(x-m+1)+m);let g=[`${z}models/lamp/env-1.jpg`,`${z}models/lamp/env-2.jpg`,`${z}models/lamp/env-3.jpg`,`${z}models/lamp/env-4.jpg`,`${z}models/lamp/env-5.jpg`,`${z}models/lamp/env-6.jpg`,`${z}models/lamp/env-7.jpg`,`${z}models/lamp/env-8.jpg`,`${z}models/lamp/env-9.jpg`,`${z}models/lamp/env-10.jpg`];setInterval(()=>{let m=[g[v(0,9)],g[v(0,9)],g[v(0,9)],g[v(0,9)],g[v(0,9)],g[v(0,9)]];p.forEach(x=>{x.renderElem&&x.setCubeTextureEnv(m)}),console.log("CUBE TEXTURE IMAGES:",m)},_)}new URLSearchParams(document.location.search).has("randomLampTexture")&&f([e,t,i,s,r,o],5e3)}const YE={class:"app-header sticky top-0 z-[100] flex-none"},KE={class:"app-header__top py-4 border-b border-neutral bg-white"},ZE={class:"centered flex items-center"},JE={class:"app-logo app-logo--header"},QE=["src"],eT={class:"ml-auto flex items-center gap-4 pl-4 lg:gap-8"},tT=ct('<div class="text-center pt-2 hidden md:block lg:pt-4"><a class="text-[14px] font-semibold leading-[1.1] tracking-[-0.8px] lg:text-[20px]" href="tel:88126678226"> 8 (812) 667-82-26 </a><div class="flex items-center justify-center leading-[1.4] text-[10px] text-accent lg:text-[12px]"><div class="svg-icon flex-none mr-1 w-[6px] h-[6px]"><svg><use xlink:href="#dot"></use></svg></div><div class="font-medium tracking-[0.24px]">10.00-20.00</div></div></div>',1),nT={class:"flex-none flex items-center gap-1"},iT=h("div",{class:"svg-icon"},[h("svg",null,[h("use",{"xlink:href":"#user"})])],-1),sT=h("div",{class:"svg-icon"},[h("svg",null,[h("use",{"xlink:href":"#heart"})])],-1),rT=h("div",{class:"svg-icon"},[h("svg",null,[h("use",{"xlink:href":"#cart"})])],-1),oT=h("div",{class:"badge"},"4",-1),aT={class:"app-header__menu bg-white"},lT={class:"centered"},cT={class:"relative flex items-center justify-between py-2.5 min-h-[44px]"},dT={class:"text-[14px] leading-[1.3] font-medium hidden md:block lg:text-base"},uT={class:"select-none flex items-center justify-center gap-5 lg:gap-8"},fT=Ne({__name:"AppHeader",setup(n){return(e,t)=>{const i=ke("router-link"),s=ke("GeoLocation"),r=ke("MobileMenuBurger"),o=ke("OffcanvasClose"),a=ke("AppSearch");return J(),ne("header",YE,[h("div",KE,[h("div",ZE,[h("div",JE,[j(i,{to:{name:"main"}},{default:Me(()=>[h("img",{src:`${Fe(z)}img/logo-dark.svg`,alt:""},null,8,QE)]),_:1})]),h("div",eT,[j(s,{class:"text-[12px] font-medium hidden md:flex lg:text-[16px]"}),tT,h("div",nT,[j(i,{to:{name:"orders-history"},class:"rounded-icon"},{default:Me(()=>[iT]),_:1}),j(i,{to:{name:"favorites"},class:"rounded-icon hidden md:flex"},{default:Me(()=>[sT]),_:1}),j(i,{to:{name:"cart"},class:"rounded-icon"},{default:Me(()=>[rT,oT]),_:1}),j(r,{class:"md:hidden"})])])])]),h("div",aT,[h("div",lT,[h("div",cT,[j(o),h("nav",dT,[h("ul",uT,[h("li",null,[j(i,{to:{name:"catalog"},class:"decor-link [&.is-active-link]:text-brand"},{default:Me(()=>[_e("Каталог")]),_:1})]),h("li",null,[j(i,{to:{name:"about"},class:"decor-link [&.is-active-link]:text-brand"},{default:Me(()=>[_e("О нас")]),_:1})]),h("li",null,[j(i,{to:{name:"articles"},class:"decor-link [&.is-active-link]:text-brand"},{default:Me(()=>[_e("Новости")]),_:1})]),h("li",null,[j(i,{to:{name:"delivery-and-payment"},class:"decor-link [&.is-active-link]:text-brand"},{default:Me(()=>[_e("Доставка и оплата")]),_:1})]),h("li",null,[j(i,{to:{name:"contacts"},class:"decor-link [&.is-active-link]:text-brand"},{default:Me(()=>[_e("Контакты")]),_:1})]),h("li",null,[j(i,{to:{name:"styles"},class:"decor-link [&.is-active-link]:text-brand"},{default:Me(()=>[_e("Стили")]),_:1})])])]),j(a)])])])])}}}),hT={class:"app-footer bg-dark pt-5 py-3 text-white flex-none relative z-[10] js-app-footer"},pT=h("div",{class:"three-lamp three-lamp--footer"},null,-1),mT={class:"centered"},gT={class:"app-logo app-logo--footer select-none"},_T=["src"],vT={class:"text-center mt-4 select-none"},xT=["src"],bT=ct('<div class="flex items-start justify-center gap-2 mt-8 text-[14px] leading-[1.4] tracking-[-0.28px] md:justify-between md:mt-[100px]"><div class="opacity-40 hidden md:block md:w-1/3">Навигация:</div><nav class="md:w-1/3"><ul class="text-center"><li><a href="#" class="decor-link">Люстры</a></li><li><a href="#" class="decor-link">Светильники</a></li><li><a href="#" class="decor-link">Настенные светильники</a></li><li><a href="#" class="decor-link">Торшеры</a></li><li><a href="#" class="decor-link">Уличный свет</a></li><li><a href="#" class="decor-link">Настольные лампы</a></li><li><a href="#" class="decor-link">Трековое освещение</a></li><li><a href="#" class="decor-link">Встраиваемые светильники</a></li></ul></nav><div class="opacity-40 hidden md:block md:w-1/3 md:text-right">Контакты:</div></div>',1),yT={class:"flex flex-col items-center gap-2 mt-8 pt-8 border-t border-neutral border-opacity-40 md:flex-row md:mt-20 md:justify-between md:border-none md:pt-0"},ST={class:"hidden md:block md:w-1/3"},MT={class:"text-[14px] leading-[1.4] tracking-[-0.28px]"},ET={class:"flex flex-col items-center md:w-1/3"},TT={class:"app-button app-button--light"},wT=ct('<div class="flex justify-center items-center flex-wrap mt-4 gap-1"><a href="#" class="rounded-icon rounded-icon--light"><div class="svg-icon"><svg><use xlink:href="#vk"></use></svg></div></a><a href="#" class="rounded-icon rounded-icon--light"><div class="svg-icon"><svg><use xlink:href="#inst"></use></svg></div></a><a href="#" class="rounded-icon rounded-icon--light"><div class="svg-icon"><svg><use xlink:href="#tg"></use></svg></div></a></div>',1),AT={class:"flex flex-col items-center gap-1 mb-6 -order-1 md:w-1/3 md:items-end md:text-right md:order-none md:mb-0"},CT=h("a",{class:"text-[20px] font-semibold leading-[1.1] tracking-[-0.8px]",href:"tel:88126678226"}," 8 (812) 667-82-26 ",-1),RT=h("div",{class:"opacity-60 text-[10px]"},[h("div",null,"пн-пт: 09.00-21.00"),h("div",null,"сб-вс: 10.00-19.00")],-1),LT={class:"text-[10px] leading-[1.4] opacity-80 pt-3 mt-5 border-t border-white border-opacity-40 flex flex-col items-center gap-2 md:flex-row"},PT={class:"md:w-1/3"},IT=h("div",{class:"md:w-1/3 md:text-center"},"© SDL SvetMarket 2023",-1),DT={class:"md:w-1/3 md:text-right"},NT=Ne({__name:"AppFooter",setup(n){return(e,t)=>{const i=ke("router-link"),s=ke("GeoLocation"),r=Os("modal-call");return J(),ne("footer",hT,[pT,h("div",mT,[h("div",gT,[j(i,{to:{name:"main"}},{default:Me(()=>[h("img",{src:`${Fe(z)}img/logo-light.svg`,alt:""},null,8,_T)]),_:1})]),h("div",vT,[h("img",{class:"max-w-[230px] lg:max-w-full inline-block",src:`${Fe(z)}img/slogan-light.svg`,alt:""},null,8,xT)]),bT,h("div",yT,[h("nav",ST,[h("ul",MT,[h("li",null,[j(i,{to:{name:"catalog"},class:"decor-link"},{default:Me(()=>[_e("Каталог")]),_:1})]),h("li",null,[j(i,{to:{name:"about"},class:"decor-link"},{default:Me(()=>[_e("О нас")]),_:1})]),h("li",null,[j(i,{to:{name:"articles"},class:"decor-link"},{default:Me(()=>[_e("Новости")]),_:1})]),h("li",null,[j(i,{to:{name:"delivery-and-payment"},class:"decor-link"},{default:Me(()=>[_e("Доставка и оплата")]),_:1})]),h("li",null,[j(i,{to:{name:"contacts"},class:"decor-link"},{default:Me(()=>[_e("Контакты")]),_:1})]),h("li",null,[j(i,{to:{name:"login"},class:"decor-link"},{default:Me(()=>[_e("Вход")]),_:1})]),h("li",null,[j(i,{to:{name:"registration"},class:"decor-link"},{default:Me(()=>[_e("Регистрация")]),_:1})])])]),h("div",ET,[is((J(),ne("button",TT,[_e("Написать нам")])),[[r,{name:"callbackModal"}]]),wT]),h("div",AT,[CT,RT,j(s,{class:"font-medium","icon-class":"text-white"})])]),h("div",LT,[h("div",PT,[j(i,{to:{name:"public-offer"},class:"hover:underline"},{default:Me(()=>[_e("Публичная оферта")]),_:1})]),IT,h("div",DT,[j(i,{to:{name:"privacy-policy"},class:"hover:underline"},{default:Me(()=>[_e("Политика конфиденциальности")]),_:1})])])])])}}}),Pn=(n,e)=>{const t=n.__vccOpts||n;for(const[i,s]of e)t[i]=s;return t},UT={},OT={class:"py-12 md:py-16 bg-white relative z-[20] js-subscribe-block"},kT=ct('<div class="absolute -top-[100px] -bottom-[300px] left-0 right-0 z-[10] pointer-events-none overflow-hidden hidden lg:block"><div class="three-lamp three-lamp--subscribe-left"></div><div class="three-lamp three-lamp--subscribe-right"></div></div><div class="centered"><div class="md:max-w-[430px]"><h2 class="h1">Будьте в курсе наших новостей!</h2><div class="text-style-base mb-5"> Подпишитесь на нашу рассылку и экономьте - узнавайте первым информацию о скидках и акциях! </div><button type="button" class="app-button app-button--secondary py-4 w-full sm:w-auto">подписаться</button></div></div>',2),FT=[kT];function BT(n,e){return J(),ne("section",OT,FT)}const HT=Pn(UT,[["render",BT]]),zT={class:"app-banner group overflow-hidden relative z-[5] min-h-[720px] py-5 bg-dark"},VT=h("div",{class:"absolute -z-[1] left-5 right-5 top-5 h-[1px] bg-white bg-opacity-30 pointer-events-none transition-all duration-[0.4s] group-hover:bg-opacity-100 md:right-16 md:left-16"},null,-1),ag=Ne({__name:"Banner",props:{img:{default:""}},setup(n){return(e,t)=>(J(),ne("div",zT,[h("div",{class:"absolute left-0 right-0 top-0 bottom-0 -z-[2] bg-cover bg-no-repeat bg-center transition-all duration-[0.4s] group-hover:scale-[1.05]",style:fn(e.img?`background-image: url(${e.img})`:{})},null,4),VT,Ji(e.$slots,"default")]))}}),GT=h("div",{class:"m-auto text-center w-[460px] max-w-full px-5"},[h("div",{class:"text-[14px] text-white mb-1 uppercase"},"Новинка 2024"),h("div",{class:"h1 text-white mb-5"},"Коллекция «Название»"),h("div",null,[h("a",{href:"#",class:"app-button app-button--light"},"Смотреть")])],-1),qh=Ne({__name:"Default",setup(n){const e=["/login","/registration","/password-recovery","/order-success","/front-osvetim/login","/front-osvetim/registration","/front-osvetim/password-recovery","/front-osvetim/order-success"];return(t,i)=>{const s=ke("router-view");return J(),ne($e,null,[j(fT),j(s),e.includes(t.$route.path)?Ei("",!0):(J(),ne($e,{key:0},[j(ag,{img:`${Fe(z)}banners/banner-footer.png`,class:"flex"},{default:Me(()=>[GT]),_:1},8,["img"]),j(HT),j(NT)],64))],64)}}}),$T=Ct([{id:1,img:`${z}img/product-pic-1.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽",addClass:"lg:col-span-2"},{id:2,img:`${z}img/product-pic-2.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:3,img:`${z}img/product-pic-3.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:4,img:`${z}img/product-pic-2.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:5,img:`${z}img/product-pic-3.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:6,img:`${z}img/product-pic-4.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:7,img:`${z}img/product-pic-2.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:8,img:`${z}img/product-pic-3.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:9,img:`${z}img/product-pic-4.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽",addClass:"lg:col-span-2"},{id:10,img:`${z}img/product-pic-1.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"}]),WT=Ct([{id:1,img:`${z}img/product-pic-2.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:2,img:`${z}img/product-pic-3.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽",addClass:"lg:col-span-2"},{id:3,img:`${z}img/product-pic-4.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"}]),XT=Ct([{id:1,img:`${z}img/product-pic-4.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:2,img:`${z}img/product-pic-1.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:3,img:`${z}img/product-pic-2.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:3,img:`${z}img/product-pic-3.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"}]),jT=Ct([{id:1,img:`${z}img/product-pic-1.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽",addClass:"md:col-span-2"},{id:2,img:`${z}img/product-pic-2.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:3,img:`${z}img/product-pic-3.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:4,img:`${z}img/product-pic-4.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:5,img:`${z}img/product-pic-1.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:6,img:`${z}img/product-pic-2.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:7,img:`${z}img/product-pic-3.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"}]),qT=Ct([{id:1,img:`${z}img/product-pic-1.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:2,img:`${z}img/product-pic-2.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽",addClass:"md:col-span-2 md:row-start-1 lg:row-auto"},{id:3,img:`${z}img/product-pic-3.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:4,img:`${z}img/product-pic-4.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:5,img:`${z}img/product-pic-1.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:6,img:`${z}img/product-pic-2.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:7,img:`${z}img/product-pic-3.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"}]),YT=Ct([{id:1,img:`${z}img/product-pic-1.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽",addClass:"md:col-span-2"},{id:2,img:`${z}img/product-pic-2.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:3,img:`${z}img/product-pic-3.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:4,img:`${z}img/product-pic-4.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:5,img:`${z}img/product-pic-1.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:6,img:`${z}img/product-pic-2.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:7,img:`${z}img/product-pic-3.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:8,img:`${z}img/product-pic-4.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:9,img:`${z}img/product-pic-1.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:10,img:`${z}img/product-pic-2.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽",addClass:"md:col-span-2"},{id:11,img:`${z}img/product-pic-3.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:12,img:`${z}img/product-pic-4.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:13,img:`${z}img/product-pic-1.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:14,img:`${z}img/product-pic-2.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:15,img:`${z}img/product-pic-3.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:16,img:`${z}img/product-pic-4.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"},{id:17,img:`${z}img/product-pic-1.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽",addClass:"md:col-span-2"},{id:18,img:`${z}img/product-pic-2.png`,article:"Divinare",name:"Встраиваемый светильник Giorgetta 1769",price:"990 ₽",priceOld:"1990 ₽"}]),KT={class:"main-present-block overflow-hidden relative z-[1]"},ZT=h("div",{class:"three-lamp three-lamp--main-right"},null,-1),JT=h("div",{class:"three-lamp three-lamp--main-left"},null,-1),QT={class:"relative centered text-center flex flex-col items-center py-20 md:py-24 lg:py-32"},ew=h("div",{class:"text-left text-[14px] tracking-[-0.28px] absolute left-16 top-16 hidden xl:block","data-animated-block":"fadeInRight"},[_e(" Интернет-магазин"),h("br"),_e(" осветительных приборов ")],-1),tw={class:"mb-5","data-animated-block":"turnIn"},nw=["src"],iw=h("div",{class:"mb-2.5 text-[48px] tracking-[-0.96px] font-semibold leading-[1.0] lg:text-[96px]","data-animated-block":"zoomIn"},[_e(" Светлые"),h("br"),_e(" решения"),h("br"),_e(" для жизни ")],-1),sw=h("div",{class:"text-[14px] tracking-[-0.28px] xl:hidden","data-animated-block":"fadeInUp"},[_e(" Интернет-магазин"),h("br"),_e(" осветительных приборов ")],-1),rw={class:"floating-block text-left min-w-[270px] absolute right-16 bottom-16 hidden xl:block"},ow=h("div",{class:"floating-block__label"},"Divinare",-1),aw=h("div",{class:"floating-block__title"},[_e("Встраиваемый"),h("br"),_e(" светильник Giorgetta"),h("br"),_e(" 1769/03 PL-1")],-1),lw=h("div",{class:"floating-block__price text-right"},"990 ₽",-1),cw={class:"mt-5","data-animated-block":"fadeInUp"},dw=Ne({__name:"PresentBlock",setup(n){return(e,t)=>{const i=ke("router-link");return J(),ne("section",KT,[ZT,JT,h("div",QT,[ew,h("div",tw,[h("img",{class:"w-[100px]",src:`${Fe(z)}img/logo-black.svg`,alt:""},null,8,nw)]),iw,sw,h("div",rw,[j(i,{to:{name:"product-item",params:{id:1}}}),ow,aw,lw]),h("div",cw,[j(i,{to:{name:"catalog"},class:"app-button app-button--secondary"},{default:Me(()=>[_e("в каталог")]),_:1})])])])}}}),uw={class:"values-block"},fw={class:"centered"},hw={class:"grid grid-cols-2 gap-y-5 py-5 border-t border-neutral border-opacity-40 lg:grid-cols-4"},pw=h("span",{class:"h-[1px] bg-neutral bg-opacity-40 col-span-2 row-start-2 lg:hidden"},null,-1),mw={class:"rounded-icon pointer-events-none"},gw={class:"svg-icon"},_w=["xlink:href"],vw=["innerHTML"],xw=Ne({__name:"ValuesBlock",setup(n){const e=Ct([{icon:"light",label:"помощь в подборе<br> освещения"},{icon:"delivery",label:"бесплатная<br> доставка"},{icon:"pay",label:"оплата при<br> получении"},{icon:"geo",label:"пункты выдачи по<br> всей России"}]);return(t,i)=>(J(),ne("section",uw,[h("div",fw,[h("div",hw,[pw,(J(!0),ne($e,null,Rt(e.value,(s,r)=>(J(),ne("div",{key:r,class:"border-r border-neutral border-opacity-40 pr-4 odd:pl-4 lg:pl-4 lg:first-of-type:pl-0 lg:last:border-opacity-0"},[h("div",mw,[h("div",gw,[(J(),ne("svg",null,[h("use",{"xlink:href":`#${s.icon}`},null,8,_w)]))])]),h("div",{class:"mt-7 text-[14px] font-semibold leading-[1.1] tracking-[-0.28px] md:text-[20px]",innerHTML:s.label},null,8,vw)]))),128))])])]))}}),bw={class:"main-categories relative overflow-hidden lg:static"},yw={class:"centered pt-5 pb-[120px] lg:relative"},Sw={class:"hidden w-[156px] absolute -z-[1] -right-5 top-0 md:block lg:w-[260px] xl:right-32"},Mw=["src"],Ew=ct('<div class="text-center text-base leading-[1.3] tracking-[-0.32px] pt-5 border-t border-neutral border-opacity-50 mb-[100px]">Разделы каталога:</div><nav class="flex flex-col items-center"><ul class="text-center space-y-1 mb-8 text-[20px] leading-[1.0] font-semibold md:text-[36px] xl:text-[48px]"><li><a href="#" class="decor-link text-stone hover:text-dark"><span>Люстры</span><span class="mt-1 ml-2 text-[14px] font-light text-dark lg:text-[16px]">(237)</span></a></li><li><a href="#" class="decor-link text-stone hover:text-dark"><span>Светильники</span><span class="mt-1 ml-2 text-[14px] font-light text-dark lg:text-[16px]">(229)</span></a></li><li><a href="#" class="decor-link text-stone hover:text-dark"><span>Настенные светильники</span><span class="mt-1 ml-2 text-[14px] font-light text-dark lg:text-[16px]">(36)</span></a></li><li><a href="#" class="decor-link text-stone hover:text-dark"><span>Торшеры</span><span class="mt-1 ml-2 text-[14px] font-light text-dark lg:text-[16px]">(57)</span></a></li><li><a href="#" class="decor-link text-stone hover:text-dark"><span>Уличный свет</span><span class="mt-1 ml-2 text-[14px] font-light text-dark lg:text-[16px]">(8)</span></a></li><li><a href="#" class="decor-link text-stone hover:text-dark"><span>Настольные лампы</span><span class="mt-1 ml-2 text-[14px] font-light text-dark lg:text-[16px]">(543)</span></a></li><li><a href="#" class="decor-link text-stone hover:text-dark"><span>Трековое освещение</span><span class="mt-1 ml-2 text-[14px] font-light text-dark lg:text-[16px]">(18)</span></a></li><li><a href="#" class="decor-link text-stone hover:text-dark"><span>Встраиваемые светильники</span><span class="mt-1 ml-2 text-[14px] font-light text-dark lg:text-[16px]">(199)</span></a></li></ul><a href="#" class="app-button app-button--secondary">Смотреть все</a></nav>',2),Tw=Ne({__name:"MainCategories",setup(n){return(e,t)=>(J(),ne("section",bw,[h("div",yw,[h("div",Sw,[h("img",{src:`${Fe(z)}img/lamp.png`,alt:""},null,8,Mw)]),Ew])]))}}),ww={class:"relative mb-2.5 min-h-[156px] bg-neutral-100 flex items-center justify-center transition-all duration-300 lg:min-h-[310px] hover:shadow-lg"},Aw=ct('<div class="pointer-events-none absolute z-[10] top-2 right-2 flex items-center gap-2 md:top-4 md:right-4"><div class="rounded-icon w-8 h-8 md:w-11 md:h-11"><div class="svg-icon svg-icon--nostyle"><svg><use xlink:href="#percent"></use></svg></div></div><div class="rounded-icon w-8 h-8 md:w-11 md:h-11"><div class="svg-icon"><svg><use xlink:href="#spot"></use></svg></div></div></div>',1),Cw=["src"],Rw={class:"text-[12px] leading-[1.4] uppercase text-dark text-opacity-50 mb-4"},Lw={class:"text-[14px] text-dark font-semibold leading-[1.1] md:text-[20px]"},Pw=h("div",{class:"flex flex-wrap justify-end gap-2.5 mt-1.5 text-[14px] font-semibold leading-[1.1] tracking-[-0.28px] md:text-[20px]"},[h("div",{class:"opacity-40 line-through"},"1990 ₽"),h("div",null,"990 ₽")],-1),Iw=Ne({__name:"ProductItem",props:{product:{}},setup(n){return(e,t)=>{const i=ke("router-link");return J(),ne("div",{class:Dt(["product-item relative",e.product.addClass])},[h("div",ww,[Aw,j(i,{to:{name:"product-item",params:{id:e.product.id}},class:"absolute left-0 right-0 top-0 bottom-0 z-[5]"},null,8,["to"]),h("img",{class:"w-full",src:e.product.img,alt:""},null,8,Cw)]),h("div",Rw,_t(e.product.article),1),h("div",Lw,_t(e.product.name),1),Pw],2)}}}),Cr=Ne({__name:"ProductList",props:{columns:{default:3},list:{default:()=>[]}},setup(n){const e=n;return(t,i)=>(J(),ne("div",{class:Dt(["grid gap-x-4 gap-y-6 lg:gap-x-6 lg:gap-y-12",[e.columns===3?"grid-cols-2 lg:grid-cols-3":"",e.columns===4?"grid-cols-2 lg:grid-cols-4":""]])},[(J(!0),ne($e,null,Rt(t.list,(s,r)=>(J(),Qi(Iw,{key:r,product:s},null,8,["product"]))),128))],2))}});function Ur(n,e=0){let t=null;ks(()=>{setTimeout(()=>{t=n()},e)}),Dd(()=>{Array.isArray(t)?t.forEach(i=>i.destroy()):t==null||t.destroy()})}function lg(n,e){return Math.floor(Math.random()*(e-n)+n)}function Yh(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function fu(n,e){n===void 0&&(n={}),e===void 0&&(e={}),Object.keys(e).forEach(t=>{typeof n[t]>"u"?n[t]=e[t]:Yh(e[t])&&Yh(n[t])&&Object.keys(e[t]).length>0&&fu(n[t],e[t])})}const cg={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Or(){const n=typeof document<"u"?document:{};return fu(n,cg),n}const Dw={document:cg,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function bn(){const n=typeof window<"u"?window:{};return fu(n,Dw),n}function Nw(n){return n===void 0&&(n=""),n.trim().split(" ").filter(e=>!!e.trim())}function Uw(n){const e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function _d(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function Ua(){return Date.now()}function Ow(n){const e=bn();let t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function kw(n,e){e===void 0&&(e="x");const t=bn();let i,s,r;const o=Ow(n);return t.WebKitCSSMatrix?(s=o.transform||o.webkitTransform,s.split(",").length>6&&(s=s.split(", ").map(a=>a.replace(",",".")).join(", ")),r=new t.WebKitCSSMatrix(s==="none"?"":s)):(r=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=r.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?s=r.m41:i.length===16?s=parseFloat(i[12]):s=parseFloat(i[4])),e==="y"&&(t.WebKitCSSMatrix?s=r.m42:i.length===16?s=parseFloat(i[13]):s=parseFloat(i[5])),s||0}function aa(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function Fw(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function _n(){const n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const i=t<0||arguments.length<=t?void 0:arguments[t];if(i!=null&&!Fw(i)){const s=Object.keys(Object(i)).filter(r=>e.indexOf(r)<0);for(let r=0,o=s.length;r<o;r+=1){const a=s[r],l=Object.getOwnPropertyDescriptor(i,a);l!==void 0&&l.enumerable&&(aa(n[a])&&aa(i[a])?i[a].__swiper__?n[a]=i[a]:_n(n[a],i[a]):!aa(n[a])&&aa(i[a])?(n[a]={},i[a].__swiper__?n[a]=i[a]:_n(n[a],i[a])):n[a]=i[a])}}}return n}function la(n,e,t){n.style.setProperty(e,t)}function dg(n){let{swiper:e,targetPosition:t,side:i}=n;const s=bn(),r=-e.translate;let o=null,a;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",s.cancelAnimationFrame(e.cssModeFrameID);const c=t>r?"next":"prev",d=(f,p)=>c==="next"&&f>=p||c==="prev"&&f<=p,u=()=>{a=new Date().getTime(),o===null&&(o=a);const f=Math.max(Math.min((a-o)/l,1),0),p=.5-Math.cos(f*Math.PI)/2;let _=r+p*(t-r);if(d(_,t)&&(_=t),e.wrapperEl.scrollTo({[i]:_}),d(_,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:_})}),s.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=s.requestAnimationFrame(u)};u()}function Qn(n,e){return e===void 0&&(e=""),[...n.children].filter(t=>t.matches(e))}function Oa(n){try{console.warn(n);return}catch{}}function ka(n,e){e===void 0&&(e=[]);const t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:Nw(e)),t}function Bw(n,e){const t=[];for(;n.previousElementSibling;){const i=n.previousElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function Hw(n,e){const t=[];for(;n.nextElementSibling;){const i=n.nextElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function Xi(n,e){return bn().getComputedStyle(n,null).getPropertyValue(e)}function Fa(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function ug(n,e){const t=[];let i=n.parentElement;for(;i;)e?i.matches(e)&&t.push(i):t.push(i),i=i.parentElement;return t}function vd(n,e,t){const i=bn();return t?n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom")):n.offsetWidth}let nc;function zw(){const n=bn(),e=Or();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function fg(){return nc||(nc=zw()),nc}let ic;function Vw(n){let{userAgent:e}=n===void 0?{}:n;const t=fg(),i=bn(),s=i.navigator.platform,r=e||i.navigator.userAgent,o={ios:!1,android:!1},a=i.screen.width,l=i.screen.height,c=r.match(/(Android);?[\s\/]+([\d.]+)?/);let d=r.match(/(iPad).*OS\s([\d_]+)/);const u=r.match(/(iPod)(.*OS\s([\d_]+))?/),f=!d&&r.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p=s==="Win32";let _=s==="MacIntel";const v=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!d&&_&&t.touch&&v.indexOf(`${a}x${l}`)>=0&&(d=r.match(/(Version)\/([\d.]+)/),d||(d=[0,1,"13_0_0"]),_=!1),c&&!p&&(o.os="android",o.android=!0),(d||f||u)&&(o.os="ios",o.ios=!0),o}function Gw(n){return n===void 0&&(n={}),ic||(ic=Vw(n)),ic}let sc;function $w(){const n=bn();let e=!1;function t(){const i=n.navigator.userAgent.toLowerCase();return i.indexOf("safari")>=0&&i.indexOf("chrome")<0&&i.indexOf("android")<0}if(t()){const i=String(n.navigator.userAgent);if(i.includes("Version/")){const[s,r]=i.split("Version/")[1].split(" ")[0].split(".").map(o=>Number(o));e=s<16||s===16&&r<2}}return{isSafari:e||t(),needPerspectiveFix:e,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent)}}function Ww(){return sc||(sc=$w()),sc}function Xw(n){let{swiper:e,on:t,emit:i}=n;const s=bn();let r=null,o=null;const a=()=>{!e||e.destroyed||!e.initialized||(i("beforeResize"),i("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(r=new ResizeObserver(u=>{o=s.requestAnimationFrame(()=>{const{width:f,height:p}=e;let _=f,v=p;u.forEach(g=>{let{contentBoxSize:m,contentRect:x,target:y}=g;y&&y!==e.el||(_=x?x.width:(m[0]||m).inlineSize,v=x?x.height:(m[0]||m).blockSize)}),(_!==f||v!==p)&&a()})}),r.observe(e.el))},c=()=>{o&&s.cancelAnimationFrame(o),r&&r.unobserve&&e.el&&(r.unobserve(e.el),r=null)},d=()=>{!e||e.destroyed||!e.initialized||i("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof s.ResizeObserver<"u"){l();return}s.addEventListener("resize",a),s.addEventListener("orientationchange",d)}),t("destroy",()=>{c(),s.removeEventListener("resize",a),s.removeEventListener("orientationchange",d)})}function jw(n){let{swiper:e,extendParams:t,on:i,emit:s}=n;const r=[],o=bn(),a=function(d,u){u===void 0&&(u={});const f=o.MutationObserver||o.WebkitMutationObserver,p=new f(_=>{if(e.__preventObserver__)return;if(_.length===1){s("observerUpdate",_[0]);return}const v=function(){s("observerUpdate",_[0])};o.requestAnimationFrame?o.requestAnimationFrame(v):o.setTimeout(v,0)});p.observe(d,{attributes:typeof u.attributes>"u"?!0:u.attributes,childList:typeof u.childList>"u"?!0:u.childList,characterData:typeof u.characterData>"u"?!0:u.characterData}),r.push(p)},l=()=>{if(e.params.observer){if(e.params.observeParents){const d=ug(e.hostEl);for(let u=0;u<d.length;u+=1)a(d[u])}a(e.hostEl,{childList:e.params.observeSlideChildren}),a(e.wrapperEl,{attributes:!1})}},c=()=>{r.forEach(d=>{d.disconnect()}),r.splice(0,r.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",l),i("destroy",c)}var qw={on(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const s=t?"unshift":"push";return n.split(" ").forEach(r=>{i.eventsListeners[r]||(i.eventsListeners[r]=[]),i.eventsListeners[r][s](e)}),i},once(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;function s(){i.off(n,s),s.__emitterProxy&&delete s.__emitterProxy;for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];e.apply(i,o)}return s.__emitterProxy=e,i.on(n,s,t)},onAny(n,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;const i=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[i](n),t},offAny(n){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(i=>{typeof e>"u"?t.eventsListeners[i]=[]:t.eventsListeners[i]&&t.eventsListeners[i].forEach((s,r)=>{(s===e||s.__emitterProxy&&s.__emitterProxy===e)&&t.eventsListeners[i].splice(r,1)})}),t},emit(){const n=this;if(!n.eventsListeners||n.destroyed||!n.eventsListeners)return n;let e,t,i;for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return typeof r[0]=="string"||Array.isArray(r[0])?(e=r[0],t=r.slice(1,r.length),i=n):(e=r[0].events,t=r[0].data,i=r[0].context||n),t.unshift(i),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach(c=>{c.apply(i,[l,...t])}),n.eventsListeners&&n.eventsListeners[l]&&n.eventsListeners[l].forEach(c=>{c.apply(i,t)})}),n}};function Yw(){const n=this;let e,t;const i=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=i.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=i.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(Xi(i,"padding-left")||0,10)-parseInt(Xi(i,"padding-right")||0,10),t=t-parseInt(Xi(i,"padding-top")||0,10)-parseInt(Xi(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function Kw(){const n=this;function e(M,R){return parseFloat(M.getPropertyValue(n.getDirectionLabel(R))||0)}const t=n.params,{wrapperEl:i,slidesEl:s,size:r,rtlTranslate:o,wrongRTL:a}=n,l=n.virtual&&t.virtual.enabled,c=l?n.virtual.slides.length:n.slides.length,d=Qn(s,`.${n.params.slideClass}, swiper-slide`),u=l?n.virtual.slides.length:d.length;let f=[];const p=[],_=[];let v=t.slidesOffsetBefore;typeof v=="function"&&(v=t.slidesOffsetBefore.call(n));let g=t.slidesOffsetAfter;typeof g=="function"&&(g=t.slidesOffsetAfter.call(n));const m=n.snapGrid.length,x=n.slidesGrid.length;let y=t.spaceBetween,b=-v,L=0,P=0;if(typeof r>"u")return;typeof y=="string"&&y.indexOf("%")>=0?y=parseFloat(y.replace("%",""))/100*r:typeof y=="string"&&(y=parseFloat(y)),n.virtualSize=-y,d.forEach(M=>{o?M.style.marginLeft="":M.style.marginRight="",M.style.marginBottom="",M.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(la(i,"--swiper-centered-offset-before",""),la(i,"--swiper-centered-offset-after",""));const I=t.grid&&t.grid.rows>1&&n.grid;I?n.grid.initSlides(d):n.grid&&n.grid.unsetSlides();let N;const w=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(M=>typeof t.breakpoints[M].slidesPerView<"u").length>0;for(let M=0;M<u;M+=1){N=0;let R;if(d[M]&&(R=d[M]),I&&n.grid.updateSlide(M,R,d),!(d[M]&&Xi(R,"display")==="none")){if(t.slidesPerView==="auto"){w&&(d[M].style[n.getDirectionLabel("width")]="");const O=getComputedStyle(R),U=R.style.transform,X=R.style.webkitTransform;if(U&&(R.style.transform="none"),X&&(R.style.webkitTransform="none"),t.roundLengths)N=n.isHorizontal()?vd(R,"width",!0):vd(R,"height",!0);else{const ee=e(O,"width"),Y=e(O,"padding-left"),oe=e(O,"padding-right"),W=e(O,"margin-left"),be=e(O,"margin-right"),Te=O.getPropertyValue("box-sizing");if(Te&&Te==="border-box")N=ee+W+be;else{const{clientWidth:Ie,offsetWidth:He}=R;N=ee+Y+oe+W+be+(He-Ie)}}U&&(R.style.transform=U),X&&(R.style.webkitTransform=X),t.roundLengths&&(N=Math.floor(N))}else N=(r-(t.slidesPerView-1)*y)/t.slidesPerView,t.roundLengths&&(N=Math.floor(N)),d[M]&&(d[M].style[n.getDirectionLabel("width")]=`${N}px`);d[M]&&(d[M].swiperSlideSize=N),_.push(N),t.centeredSlides?(b=b+N/2+L/2+y,L===0&&M!==0&&(b=b-r/2-y),M===0&&(b=b-r/2-y),Math.abs(b)<1/1e3&&(b=0),t.roundLengths&&(b=Math.floor(b)),P%t.slidesPerGroup===0&&f.push(b),p.push(b)):(t.roundLengths&&(b=Math.floor(b)),(P-Math.min(n.params.slidesPerGroupSkip,P))%n.params.slidesPerGroup===0&&f.push(b),p.push(b),b=b+N+y),n.virtualSize+=N+y,L=N,P+=1}}if(n.virtualSize=Math.max(n.virtualSize,r)+g,o&&a&&(t.effect==="slide"||t.effect==="coverflow")&&(i.style.width=`${n.virtualSize+y}px`),t.setWrapperSize&&(i.style[n.getDirectionLabel("width")]=`${n.virtualSize+y}px`),I&&n.grid.updateWrapperSize(N,f),!t.centeredSlides){const M=[];for(let R=0;R<f.length;R+=1){let O=f[R];t.roundLengths&&(O=Math.floor(O)),f[R]<=n.virtualSize-r&&M.push(O)}f=M,Math.floor(n.virtualSize-r)-Math.floor(f[f.length-1])>1&&f.push(n.virtualSize-r)}if(l&&t.loop){const M=_[0]+y;if(t.slidesPerGroup>1){const R=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/t.slidesPerGroup),O=M*t.slidesPerGroup;for(let U=0;U<R;U+=1)f.push(f[f.length-1]+O)}for(let R=0;R<n.virtual.slidesBefore+n.virtual.slidesAfter;R+=1)t.slidesPerGroup===1&&f.push(f[f.length-1]+M),p.push(p[p.length-1]+M),n.virtualSize+=M}if(f.length===0&&(f=[0]),y!==0){const M=n.isHorizontal()&&o?"marginLeft":n.getDirectionLabel("marginRight");d.filter((R,O)=>!t.cssMode||t.loop?!0:O!==d.length-1).forEach(R=>{R.style[M]=`${y}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let M=0;_.forEach(O=>{M+=O+(y||0)}),M-=y;const R=M-r;f=f.map(O=>O<=0?-v:O>R?R+g:O)}if(t.centerInsufficientSlides){let M=0;if(_.forEach(R=>{M+=R+(y||0)}),M-=y,M<r){const R=(r-M)/2;f.forEach((O,U)=>{f[U]=O-R}),p.forEach((O,U)=>{p[U]=O+R})}}if(Object.assign(n,{slides:d,snapGrid:f,slidesGrid:p,slidesSizesGrid:_}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){la(i,"--swiper-centered-offset-before",`${-f[0]}px`),la(i,"--swiper-centered-offset-after",`${n.size/2-_[_.length-1]/2}px`);const M=-n.snapGrid[0],R=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(O=>O+M),n.slidesGrid=n.slidesGrid.map(O=>O+R)}if(u!==c&&n.emit("slidesLengthChange"),f.length!==m&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),p.length!==x&&n.emit("slidesGridLengthChange"),t.watchSlidesProgress&&n.updateSlidesOffset(),!l&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const M=`${t.containerModifierClass}backface-hidden`,R=n.el.classList.contains(M);u<=t.maxBackfaceHiddenSlides?R||n.el.classList.add(M):R&&n.el.classList.remove(M)}}function Zw(n){const e=this,t=[],i=e.virtual&&e.params.virtual.enabled;let s=0,r;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);const o=a=>i?e.slides[e.getSlideIndexByData(a)]:e.slides[a];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(a=>{t.push(a)});else for(r=0;r<Math.ceil(e.params.slidesPerView);r+=1){const a=e.activeIndex+r;if(a>e.slides.length&&!i)break;t.push(o(a))}else t.push(o(e.activeIndex));for(r=0;r<t.length;r+=1)if(typeof t[r]<"u"){const a=t[r].offsetHeight;s=a>s?a:s}(s||s===0)&&(e.wrapperEl.style.height=`${s}px`)}function Jw(){const n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let i=0;i<e.length;i+=1)e[i].swiperSlideOffset=(n.isHorizontal()?e[i].offsetLeft:e[i].offsetTop)-t-n.cssOverflowAdjustment()}function Qw(n){n===void 0&&(n=this&&this.translate||0);const e=this,t=e.params,{slides:i,rtlTranslate:s,snapGrid:r}=e;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-n;s&&(o=n),i.forEach(l=>{l.classList.remove(t.slideVisibleClass,t.slideFullyVisibleClass)}),e.visibleSlidesIndexes=[],e.visibleSlides=[];let a=t.spaceBetween;typeof a=="string"&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*e.size:typeof a=="string"&&(a=parseFloat(a));for(let l=0;l<i.length;l+=1){const c=i[l];let d=c.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(d-=i[0].swiperSlideOffset);const u=(o+(t.centeredSlides?e.minTranslate():0)-d)/(c.swiperSlideSize+a),f=(o-r[0]+(t.centeredSlides?e.minTranslate():0)-d)/(c.swiperSlideSize+a),p=-(o-d),_=p+e.slidesSizesGrid[l],v=p>=0&&p<=e.size-e.slidesSizesGrid[l];(p>=0&&p<e.size-1||_>1&&_<=e.size||p<=0&&_>=e.size)&&(e.visibleSlides.push(c),e.visibleSlidesIndexes.push(l),i[l].classList.add(t.slideVisibleClass)),v&&i[l].classList.add(t.slideFullyVisibleClass),c.progress=s?-u:u,c.originalProgress=s?-f:f}}function eA(n){const e=this;if(typeof n>"u"){const d=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*d||0}const t=e.params,i=e.maxTranslate()-e.minTranslate();let{progress:s,isBeginning:r,isEnd:o,progressLoop:a}=e;const l=r,c=o;if(i===0)s=0,r=!0,o=!0;else{s=(n-e.minTranslate())/i;const d=Math.abs(n-e.minTranslate())<1,u=Math.abs(n-e.maxTranslate())<1;r=d||s<=0,o=u||s>=1,d&&(s=0),u&&(s=1)}if(t.loop){const d=e.getSlideIndexByData(0),u=e.getSlideIndexByData(e.slides.length-1),f=e.slidesGrid[d],p=e.slidesGrid[u],_=e.slidesGrid[e.slidesGrid.length-1],v=Math.abs(n);v>=f?a=(v-f)/_:a=(v+_-p)/_,a>1&&(a-=1)}Object.assign(e,{progress:s,progressLoop:a,isBeginning:r,isEnd:o}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),r&&!l&&e.emit("reachBeginning toEdge"),o&&!c&&e.emit("reachEnd toEdge"),(l&&!r||c&&!o)&&e.emit("fromEdge"),e.emit("progress",s)}function tA(){const n=this,{slides:e,params:t,slidesEl:i,activeIndex:s}=n,r=n.virtual&&t.virtual.enabled,o=n.grid&&t.grid&&t.grid.rows>1,a=u=>Qn(i,`.${t.slideClass}${u}, swiper-slide${u}`)[0];e.forEach(u=>{u.classList.remove(t.slideActiveClass,t.slideNextClass,t.slidePrevClass)});let l,c,d;if(r)if(t.loop){let u=s-n.virtual.slidesBefore;u<0&&(u=n.virtual.slides.length+u),u>=n.virtual.slides.length&&(u-=n.virtual.slides.length),l=a(`[data-swiper-slide-index="${u}"]`)}else l=a(`[data-swiper-slide-index="${s}"]`);else o?(l=e.filter(u=>u.column===s)[0],d=e.filter(u=>u.column===s+1)[0],c=e.filter(u=>u.column===s-1)[0]):l=e[s];l&&(l.classList.add(t.slideActiveClass),o?(d&&d.classList.add(t.slideNextClass),c&&c.classList.add(t.slidePrevClass)):(d=Hw(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!d&&(d=e[0]),d&&d.classList.add(t.slideNextClass),c=Bw(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!c===0&&(c=e[e.length-1]),c&&c.classList.add(t.slidePrevClass))),n.emitSlidesClasses()}const ba=(n,e)=>{if(!n||n.destroyed||!n.params)return;const t=()=>n.isElement?"swiper-slide":`.${n.params.slideClass}`,i=e.closest(t());if(i){let s=i.querySelector(`.${n.params.lazyPreloaderClass}`);!s&&n.isElement&&(i.shadowRoot?s=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{i.shadowRoot&&(s=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`),s&&s.remove())})),s&&s.remove()}},rc=(n,e)=>{if(!n.slides[e])return;const t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},xd=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext;const t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const i=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),s=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){const o=s,a=[o-e];a.push(...Array.from({length:e}).map((l,c)=>o+i+c)),n.slides.forEach((l,c)=>{a.includes(l.column)&&rc(n,c)});return}const r=s+i-1;if(n.params.rewind||n.params.loop)for(let o=s-e;o<=r+e;o+=1){const a=(o%t+t)%t;(a<s||a>r)&&rc(n,a)}else for(let o=Math.max(s-e,0);o<=Math.min(r+e,t-1);o+=1)o!==s&&(o>r||o<s)&&rc(n,o)};function nA(n){const{slidesGrid:e,params:t}=n,i=n.rtlTranslate?n.translate:-n.translate;let s;for(let r=0;r<e.length;r+=1)typeof e[r+1]<"u"?i>=e[r]&&i<e[r+1]-(e[r+1]-e[r])/2?s=r:i>=e[r]&&i<e[r+1]&&(s=r+1):i>=e[r]&&(s=r);return t.normalizeSlideIndex&&(s<0||typeof s>"u")&&(s=0),s}function iA(n){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:i,params:s,activeIndex:r,realIndex:o,snapIndex:a}=e;let l=n,c;const d=p=>{let _=p-e.virtual.slidesBefore;return _<0&&(_=e.virtual.slides.length+_),_>=e.virtual.slides.length&&(_-=e.virtual.slides.length),_};if(typeof l>"u"&&(l=nA(e)),i.indexOf(t)>=0)c=i.indexOf(t);else{const p=Math.min(s.slidesPerGroupSkip,l);c=p+Math.floor((l-p)/s.slidesPerGroup)}if(c>=i.length&&(c=i.length-1),l===r&&!e.params.loop){c!==a&&(e.snapIndex=c,e.emit("snapIndexChange"));return}if(l===r&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=d(l);return}const u=e.grid&&s.grid&&s.grid.rows>1;let f;if(e.virtual&&s.virtual.enabled&&s.loop)f=d(l);else if(u){const p=e.slides.filter(v=>v.column===l)[0];let _=parseInt(p.getAttribute("data-swiper-slide-index"),10);Number.isNaN(_)&&(_=Math.max(e.slides.indexOf(p),0)),f=Math.floor(_/s.grid.rows)}else if(e.slides[l]){const p=e.slides[l].getAttribute("data-swiper-slide-index");p?f=parseInt(p,10):f=l}else f=l;Object.assign(e,{previousSnapIndex:a,snapIndex:c,previousRealIndex:o,realIndex:f,previousIndex:r,activeIndex:l}),e.initialized&&xd(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(o!==f&&e.emit("realIndexChange"),e.emit("slideChange"))}function sA(n,e){const t=this,i=t.params;let s=n.closest(`.${i.slideClass}, swiper-slide`);!s&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(a=>{!s&&a.matches&&a.matches(`.${i.slideClass}, swiper-slide`)&&(s=a)});let r=!1,o;if(s){for(let a=0;a<t.slides.length;a+=1)if(t.slides[a]===s){r=!0,o=a;break}}if(s&&r)t.clickedSlide=s,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(s.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=o;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}i.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var rA={updateSize:Yw,updateSlides:Kw,updateAutoHeight:Zw,updateSlidesOffset:Jw,updateSlidesProgress:Qw,updateProgress:eA,updateSlidesClasses:tA,updateActiveIndex:iA,updateClickedSlide:sA};function oA(n){n===void 0&&(n=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:i,translate:s,wrapperEl:r}=e;if(t.virtualTranslate)return i?-s:s;if(t.cssMode)return s;let o=kw(r,n);return o+=e.cssOverflowAdjustment(),i&&(o=-o),o||0}function aA(n,e){const t=this,{rtlTranslate:i,params:s,wrapperEl:r,progress:o}=t;let a=0,l=0;const c=0;t.isHorizontal()?a=i?-n:n:l=n,s.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?a:l,s.cssMode?r[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-a:-l:s.virtualTranslate||(t.isHorizontal()?a-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),r.style.transform=`translate3d(${a}px, ${l}px, ${c}px)`);let d;const u=t.maxTranslate()-t.minTranslate();u===0?d=0:d=(n-t.minTranslate())/u,d!==o&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function lA(){return-this.snapGrid[0]}function cA(){return-this.snapGrid[this.snapGrid.length-1]}function dA(n,e,t,i,s){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),i===void 0&&(i=!0);const r=this,{params:o,wrapperEl:a}=r;if(r.animating&&o.preventInteractionOnTransition)return!1;const l=r.minTranslate(),c=r.maxTranslate();let d;if(i&&n>l?d=l:i&&n<c?d=c:d=n,r.updateProgress(d),o.cssMode){const u=r.isHorizontal();if(e===0)a[u?"scrollLeft":"scrollTop"]=-d;else{if(!r.support.smoothScroll)return dg({swiper:r,targetPosition:-d,side:u?"left":"top"}),!0;a.scrollTo({[u?"left":"top"]:-d,behavior:"smooth"})}return!0}return e===0?(r.setTransition(0),r.setTranslate(d),t&&(r.emit("beforeTransitionStart",e,s),r.emit("transitionEnd"))):(r.setTransition(e),r.setTranslate(d),t&&(r.emit("beforeTransitionStart",e,s),r.emit("transitionStart")),r.animating||(r.animating=!0,r.onTranslateToWrapperTransitionEnd||(r.onTranslateToWrapperTransitionEnd=function(f){!r||r.destroyed||f.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onTranslateToWrapperTransitionEnd),r.onTranslateToWrapperTransitionEnd=null,delete r.onTranslateToWrapperTransitionEnd,t&&r.emit("transitionEnd"))}),r.wrapperEl.addEventListener("transitionend",r.onTranslateToWrapperTransitionEnd))),!0}var uA={getTranslate:oA,setTranslate:aA,minTranslate:lA,maxTranslate:cA,translateTo:dA};function fA(n,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${n}ms`,t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function hg(n){let{swiper:e,runCallbacks:t,direction:i,step:s}=n;const{activeIndex:r,previousIndex:o}=e;let a=i;if(a||(r>o?a="next":r<o?a="prev":a="reset"),e.emit(`transition${s}`),t&&r!==o){if(a==="reset"){e.emit(`slideResetTransition${s}`);return}e.emit(`slideChangeTransition${s}`),a==="next"?e.emit(`slideNextTransition${s}`):e.emit(`slidePrevTransition${s}`)}}function hA(n,e){n===void 0&&(n=!0);const t=this,{params:i}=t;i.cssMode||(i.autoHeight&&t.updateAutoHeight(),hg({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function pA(n,e){n===void 0&&(n=!0);const t=this,{params:i}=t;t.animating=!1,!i.cssMode&&(t.setTransition(0),hg({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var mA={setTransition:fA,transitionStart:hA,transitionEnd:pA};function gA(n,e,t,i,s){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const r=this;let o=n;o<0&&(o=0);const{params:a,snapGrid:l,slidesGrid:c,previousIndex:d,activeIndex:u,rtlTranslate:f,wrapperEl:p,enabled:_}=r;if(r.animating&&a.preventInteractionOnTransition||!_&&!i&&!s)return!1;const v=Math.min(r.params.slidesPerGroupSkip,o);let g=v+Math.floor((o-v)/r.params.slidesPerGroup);g>=l.length&&(g=l.length-1);const m=-l[g];if(a.normalizeSlideIndex)for(let y=0;y<c.length;y+=1){const b=-Math.floor(m*100),L=Math.floor(c[y]*100),P=Math.floor(c[y+1]*100);typeof c[y+1]<"u"?b>=L&&b<P-(P-L)/2?o=y:b>=L&&b<P&&(o=y+1):b>=L&&(o=y)}if(r.initialized&&o!==u&&(!r.allowSlideNext&&(f?m>r.translate&&m>r.minTranslate():m<r.translate&&m<r.minTranslate())||!r.allowSlidePrev&&m>r.translate&&m>r.maxTranslate()&&(u||0)!==o))return!1;o!==(d||0)&&t&&r.emit("beforeSlideChangeStart"),r.updateProgress(m);let x;if(o>u?x="next":o<u?x="prev":x="reset",f&&-m===r.translate||!f&&m===r.translate)return r.updateActiveIndex(o),a.autoHeight&&r.updateAutoHeight(),r.updateSlidesClasses(),a.effect!=="slide"&&r.setTranslate(m),x!=="reset"&&(r.transitionStart(t,x),r.transitionEnd(t,x)),!1;if(a.cssMode){const y=r.isHorizontal(),b=f?m:-m;if(e===0){const L=r.virtual&&r.params.virtual.enabled;L&&(r.wrapperEl.style.scrollSnapType="none",r._immediateVirtual=!0),L&&!r._cssModeVirtualInitialSet&&r.params.initialSlide>0?(r._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{p[y?"scrollLeft":"scrollTop"]=b})):p[y?"scrollLeft":"scrollTop"]=b,L&&requestAnimationFrame(()=>{r.wrapperEl.style.scrollSnapType="",r._immediateVirtual=!1})}else{if(!r.support.smoothScroll)return dg({swiper:r,targetPosition:b,side:y?"left":"top"}),!0;p.scrollTo({[y?"left":"top"]:b,behavior:"smooth"})}return!0}return r.setTransition(e),r.setTranslate(m),r.updateActiveIndex(o),r.updateSlidesClasses(),r.emit("beforeTransitionStart",e,i),r.transitionStart(t,x),e===0?r.transitionEnd(t,x):r.animating||(r.animating=!0,r.onSlideToWrapperTransitionEnd||(r.onSlideToWrapperTransitionEnd=function(b){!r||r.destroyed||b.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.onSlideToWrapperTransitionEnd=null,delete r.onSlideToWrapperTransitionEnd,r.transitionEnd(t,x))}),r.wrapperEl.addEventListener("transitionend",r.onSlideToWrapperTransitionEnd)),!0}function _A(n,e,t,i){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const s=this,r=s.grid&&s.params.grid&&s.params.grid.rows>1;let o=n;if(s.params.loop)if(s.virtual&&s.params.virtual.enabled)o=o+s.virtual.slidesBefore;else{let a;if(r){const f=o*s.params.grid.rows;a=s.slides.filter(p=>p.getAttribute("data-swiper-slide-index")*1===f)[0].column}else a=s.getSlideIndexByData(o);const l=r?Math.ceil(s.slides.length/s.params.grid.rows):s.slides.length,{centeredSlides:c}=s.params;let d=s.params.slidesPerView;d==="auto"?d=s.slidesPerViewDynamic():(d=Math.ceil(parseFloat(s.params.slidesPerView,10)),c&&d%2===0&&(d=d+1));let u=l-a<d;if(c&&(u=u||a<Math.ceil(d/2)),u){const f=c?a<s.activeIndex?"prev":"next":a-s.activeIndex-1<s.params.slidesPerView?"next":"prev";s.loopFix({direction:f,slideTo:!0,activeSlideIndex:f==="next"?a+1:a-l+1,slideRealIndex:f==="next"?s.realIndex:void 0})}if(r){const f=o*s.params.grid.rows;o=s.slides.filter(p=>p.getAttribute("data-swiper-slide-index")*1===f)[0].column}else o=s.getSlideIndexByData(o)}return requestAnimationFrame(()=>{s.slideTo(o,e,t,i)}),s}function vA(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const i=this,{enabled:s,params:r,animating:o}=i;if(!s)return i;let a=r.slidesPerGroup;r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(a=Math.max(i.slidesPerViewDynamic("current",!0),1));const l=i.activeIndex<r.slidesPerGroupSkip?1:a,c=i.virtual&&r.virtual.enabled;if(r.loop){if(o&&!c&&r.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&r.cssMode)return requestAnimationFrame(()=>{i.slideTo(i.activeIndex+l,n,e,t)}),!0}return r.rewind&&i.isEnd?i.slideTo(0,n,e,t):i.slideTo(i.activeIndex+l,n,e,t)}function xA(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const i=this,{params:s,snapGrid:r,slidesGrid:o,rtlTranslate:a,enabled:l,animating:c}=i;if(!l)return i;const d=i.virtual&&s.virtual.enabled;if(s.loop){if(c&&!d&&s.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}const u=a?i.translate:-i.translate;function f(m){return m<0?-Math.floor(Math.abs(m)):Math.floor(m)}const p=f(u),_=r.map(m=>f(m));let v=r[_.indexOf(p)-1];if(typeof v>"u"&&s.cssMode){let m;r.forEach((x,y)=>{p>=x&&(m=y)}),typeof m<"u"&&(v=r[m>0?m-1:m])}let g=0;if(typeof v<"u"&&(g=o.indexOf(v),g<0&&(g=i.activeIndex-1),s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(g=g-i.slidesPerViewDynamic("previous",!0)+1,g=Math.max(g,0))),s.rewind&&i.isBeginning){const m=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(m,n,e,t)}else if(s.loop&&i.activeIndex===0&&s.cssMode)return requestAnimationFrame(()=>{i.slideTo(g,n,e,t)}),!0;return i.slideTo(g,n,e,t)}function bA(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const i=this;return i.slideTo(i.activeIndex,n,e,t)}function yA(n,e,t,i){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0),i===void 0&&(i=.5);const s=this;let r=s.activeIndex;const o=Math.min(s.params.slidesPerGroupSkip,r),a=o+Math.floor((r-o)/s.params.slidesPerGroup),l=s.rtlTranslate?s.translate:-s.translate;if(l>=s.snapGrid[a]){const c=s.snapGrid[a],d=s.snapGrid[a+1];l-c>(d-c)*i&&(r+=s.params.slidesPerGroup)}else{const c=s.snapGrid[a-1],d=s.snapGrid[a];l-c<=(d-c)*i&&(r-=s.params.slidesPerGroup)}return r=Math.max(r,0),r=Math.min(r,s.slidesGrid.length-1),s.slideTo(r,n,e,t)}function SA(){const n=this,{params:e,slidesEl:t}=n,i=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView;let s=n.clickedIndex,r;const o=n.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(n.animating)return;r=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?s<n.loopedSlides-i/2||s>n.slides.length-n.loopedSlides+i/2?(n.loopFix(),s=n.getSlideIndex(Qn(t,`${o}[data-swiper-slide-index="${r}"]`)[0]),_d(()=>{n.slideTo(s)})):n.slideTo(s):s>n.slides.length-i?(n.loopFix(),s=n.getSlideIndex(Qn(t,`${o}[data-swiper-slide-index="${r}"]`)[0]),_d(()=>{n.slideTo(s)})):n.slideTo(s)}else n.slideTo(s)}var MA={slideTo:gA,slideToLoop:_A,slideNext:vA,slidePrev:xA,slideReset:bA,slideToClosest:yA,slideToClickedSlide:SA};function EA(n){const e=this,{params:t,slidesEl:i}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;const s=()=>{Qn(i,`.${t.slideClass}, swiper-slide`).forEach((u,f)=>{u.setAttribute("data-swiper-slide-index",f)})},r=e.grid&&t.grid&&t.grid.rows>1,o=t.slidesPerGroup*(r?t.grid.rows:1),a=e.slides.length%o!==0,l=r&&e.slides.length%t.grid.rows!==0,c=d=>{for(let u=0;u<d;u+=1){const f=e.isElement?ka("swiper-slide",[t.slideBlankClass]):ka("div",[t.slideClass,t.slideBlankClass]);e.slidesEl.append(f)}};if(a){if(t.loopAddBlankSlides){const d=o-e.slides.length%o;c(d),e.recalcSlides(),e.updateSlides()}else Oa("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else if(l){if(t.loopAddBlankSlides){const d=t.grid.rows-e.slides.length%t.grid.rows;c(d),e.recalcSlides(),e.updateSlides()}else Oa("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");s()}else s();e.loopFix({slideRealIndex:n,direction:t.centeredSlides?void 0:"next"})}function TA(n){let{slideRealIndex:e,slideTo:t=!0,direction:i,setTranslate:s,activeSlideIndex:r,byController:o,byMousewheel:a}=n===void 0?{}:n;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:c,allowSlidePrev:d,allowSlideNext:u,slidesEl:f,params:p}=l,{centeredSlides:_}=p;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&p.virtual.enabled){t&&(!p.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):p.centeredSlides&&l.snapIndex<p.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=d,l.allowSlideNext=u,l.emit("loopFix");return}let v=p.slidesPerView;v==="auto"?v=l.slidesPerViewDynamic():(v=Math.ceil(parseFloat(p.slidesPerView,10)),_&&v%2===0&&(v=v+1));const g=p.slidesPerGroupAuto?v:p.slidesPerGroup;let m=g;m%g!==0&&(m+=g-m%g),m+=p.loopAdditionalSlides,l.loopedSlides=m;const x=l.grid&&p.grid&&p.grid.rows>1;c.length<v+m?Oa("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):x&&p.grid.fill==="row"&&Oa("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const y=[],b=[];let L=l.activeIndex;typeof r>"u"?r=l.getSlideIndex(c.filter(U=>U.classList.contains(p.slideActiveClass))[0]):L=r;const P=i==="next"||!i,I=i==="prev"||!i;let N=0,w=0;const M=x?Math.ceil(c.length/p.grid.rows):c.length,O=(x?c[r].column:r)+(_&&typeof s>"u"?-v/2+.5:0);if(O<m){N=Math.max(m-O,g);for(let U=0;U<m-O;U+=1){const X=U-Math.floor(U/M)*M;if(x){const ee=M-X-1;for(let Y=c.length-1;Y>=0;Y-=1)c[Y].column===ee&&y.push(Y)}else y.push(M-X-1)}}else if(O+v>M-m){w=Math.max(O-(M-m*2),g);for(let U=0;U<w;U+=1){const X=U-Math.floor(U/M)*M;x?c.forEach((ee,Y)=>{ee.column===X&&b.push(Y)}):b.push(X)}}if(l.__preventObserver__=!0,requestAnimationFrame(()=>{l.__preventObserver__=!1}),I&&y.forEach(U=>{c[U].swiperLoopMoveDOM=!0,f.prepend(c[U]),c[U].swiperLoopMoveDOM=!1}),P&&b.forEach(U=>{c[U].swiperLoopMoveDOM=!0,f.append(c[U]),c[U].swiperLoopMoveDOM=!1}),l.recalcSlides(),p.slidesPerView==="auto"?l.updateSlides():x&&(y.length>0&&I||b.length>0&&P)&&l.slides.forEach((U,X)=>{l.grid.updateSlide(X,U,l.slides)}),p.watchSlidesProgress&&l.updateSlidesOffset(),t){if(y.length>0&&I){if(typeof e>"u"){const U=l.slidesGrid[L],ee=l.slidesGrid[L+N]-U;a?l.setTranslate(l.translate-ee):(l.slideTo(L+N,0,!1,!0),s&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-ee,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-ee))}else if(s){const U=x?y.length/p.grid.rows:y.length;l.slideTo(l.activeIndex+U,0,!1,!0),l.touchEventsData.currentTranslate=l.translate}}else if(b.length>0&&P)if(typeof e>"u"){const U=l.slidesGrid[L],ee=l.slidesGrid[L-w]-U;a?l.setTranslate(l.translate-ee):(l.slideTo(L-w,0,!1,!0),s&&(l.touchEventsData.startTranslate=l.touchEventsData.startTranslate-ee,l.touchEventsData.currentTranslate=l.touchEventsData.currentTranslate-ee))}else{const U=x?b.length/p.grid.rows:b.length;l.slideTo(l.activeIndex-U,0,!1,!0)}}if(l.allowSlidePrev=d,l.allowSlideNext=u,l.controller&&l.controller.control&&!o){const U={slideRealIndex:e,direction:i,setTranslate:s,activeSlideIndex:r,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(X=>{!X.destroyed&&X.params.loop&&X.loopFix({...U,slideTo:X.params.slidesPerView===p.slidesPerView?t:!1})}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...U,slideTo:l.controller.control.params.slidesPerView===p.slidesPerView?t:!1})}l.emit("loopFix")}function wA(){const n=this,{params:e,slidesEl:t}=n;if(!e.loop||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();const i=[];n.slides.forEach(s=>{const r=typeof s.swiperSlideIndex>"u"?s.getAttribute("data-swiper-slide-index")*1:s.swiperSlideIndex;i[r]=s}),n.slides.forEach(s=>{s.removeAttribute("data-swiper-slide-index")}),i.forEach(s=>{t.append(s)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var AA={loopCreate:EA,loopFix:TA,loopDestroy:wA};function CA(n){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function RA(){const n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var LA={setGrabCursor:CA,unsetGrabCursor:RA};function PA(n,e){e===void 0&&(e=this);function t(i){if(!i||i===Or()||i===bn())return null;i.assignedSlot&&(i=i.assignedSlot);const s=i.closest(n);return!s&&!i.getRootNode?null:s||t(i.getRootNode().host)}return t(e)}function Kh(n,e,t){const i=bn(),{params:s}=n,r=s.edgeSwipeDetection,o=s.edgeSwipeThreshold;return r&&(t<=o||t>=i.innerWidth-o)?r==="prevent"?(e.preventDefault(),!0):!1:!0}function IA(n){const e=this,t=Or();let i=n;i.originalEvent&&(i=i.originalEvent);const s=e.touchEventsData;if(i.type==="pointerdown"){if(s.pointerId!==null&&s.pointerId!==i.pointerId)return;s.pointerId=i.pointerId}else i.type==="touchstart"&&i.targetTouches.length===1&&(s.touchId=i.targetTouches[0].identifier);if(i.type==="touchstart"){Kh(e,i,i.targetTouches[0].pageX);return}const{params:r,touches:o,enabled:a}=e;if(!a||!r.simulateTouch&&i.pointerType==="mouse"||e.animating&&r.preventInteractionOnTransition)return;!e.animating&&r.cssMode&&r.loop&&e.loopFix();let l=i.target;if(r.touchEventsTarget==="wrapper"&&!e.wrapperEl.contains(l)||"which"in i&&i.which===3||"button"in i&&i.button>0||s.isTouched&&s.isMoved)return;const c=!!r.noSwipingClass&&r.noSwipingClass!=="",d=i.composedPath?i.composedPath():i.path;c&&i.target&&i.target.shadowRoot&&d&&(l=d[0]);const u=r.noSwipingSelector?r.noSwipingSelector:`.${r.noSwipingClass}`,f=!!(i.target&&i.target.shadowRoot);if(r.noSwiping&&(f?PA(u,l):l.closest(u))){e.allowClick=!0;return}if(r.swipeHandler&&!l.closest(r.swipeHandler))return;o.currentX=i.pageX,o.currentY=i.pageY;const p=o.currentX,_=o.currentY;if(!Kh(e,i,p))return;Object.assign(s,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=p,o.startY=_,s.touchStartTime=Ua(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,r.threshold>0&&(s.allowThresholdMove=!1);let v=!0;l.matches(s.focusableElements)&&(v=!1,l.nodeName==="SELECT"&&(s.isTouched=!1)),t.activeElement&&t.activeElement.matches(s.focusableElements)&&t.activeElement!==l&&t.activeElement.blur();const g=v&&e.allowTouchMove&&r.touchStartPreventDefault;(r.touchStartForcePreventDefault||g)&&!l.isContentEditable&&i.preventDefault(),r.freeMode&&r.freeMode.enabled&&e.freeMode&&e.animating&&!r.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",i)}function DA(n){const e=Or(),t=this,i=t.touchEventsData,{params:s,touches:r,rtlTranslate:o,enabled:a}=t;if(!a||!s.simulateTouch&&n.pointerType==="mouse")return;let l=n;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(i.touchId!==null||l.pointerId!==i.pointerId))return;let c;if(l.type==="touchmove"){if(c=[...l.changedTouches].filter(P=>P.identifier===i.touchId)[0],!c||c.identifier!==i.touchId)return}else c=l;if(!i.isTouched){i.startMoving&&i.isScrolling&&t.emit("touchMoveOpposite",l);return}const d=c.pageX,u=c.pageY;if(l.preventedByNestedSwiper){r.startX=d,r.startY=u;return}if(!t.allowTouchMove){l.target.matches(i.focusableElements)||(t.allowClick=!1),i.isTouched&&(Object.assign(r,{startX:d,startY:u,currentX:d,currentY:u}),i.touchStartTime=Ua());return}if(s.touchReleaseOnEdges&&!s.loop){if(t.isVertical()){if(u<r.startY&&t.translate<=t.maxTranslate()||u>r.startY&&t.translate>=t.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else if(d<r.startX&&t.translate<=t.maxTranslate()||d>r.startX&&t.translate>=t.minTranslate())return}if(e.activeElement&&l.target===e.activeElement&&l.target.matches(i.focusableElements)){i.isMoved=!0,t.allowClick=!1;return}i.allowTouchCallbacks&&t.emit("touchMove",l),r.previousX=r.currentX,r.previousY=r.currentY,r.currentX=d,r.currentY=u;const f=r.currentX-r.startX,p=r.currentY-r.startY;if(t.params.threshold&&Math.sqrt(f**2+p**2)<t.params.threshold)return;if(typeof i.isScrolling>"u"){let P;t.isHorizontal()&&r.currentY===r.startY||t.isVertical()&&r.currentX===r.startX?i.isScrolling=!1:f*f+p*p>=25&&(P=Math.atan2(Math.abs(p),Math.abs(f))*180/Math.PI,i.isScrolling=t.isHorizontal()?P>s.touchAngle:90-P>s.touchAngle)}if(i.isScrolling&&t.emit("touchMoveOpposite",l),typeof i.startMoving>"u"&&(r.currentX!==r.startX||r.currentY!==r.startY)&&(i.startMoving=!0),i.isScrolling){i.isTouched=!1;return}if(!i.startMoving)return;t.allowClick=!1,!s.cssMode&&l.cancelable&&l.preventDefault(),s.touchMoveStopPropagation&&!s.nested&&l.stopPropagation();let _=t.isHorizontal()?f:p,v=t.isHorizontal()?r.currentX-r.previousX:r.currentY-r.previousY;s.oneWayMovement&&(_=Math.abs(_)*(o?1:-1),v=Math.abs(v)*(o?1:-1)),r.diff=_,_*=s.touchRatio,o&&(_=-_,v=-v);const g=t.touchesDirection;t.swipeDirection=_>0?"prev":"next",t.touchesDirection=v>0?"prev":"next";const m=t.params.loop&&!s.cssMode,x=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!i.isMoved){if(m&&x&&t.loopFix({direction:t.swipeDirection}),i.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const P=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});t.wrapperEl.dispatchEvent(P)}i.allowMomentumBounce=!1,s.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}let y;if(new Date().getTime(),i.isMoved&&i.allowThresholdMove&&g!==t.touchesDirection&&m&&x&&Math.abs(_)>=1){Object.assign(r,{startX:d,startY:u,currentX:d,currentY:u,startTranslate:i.currentTranslate}),i.loopSwapReset=!0,i.startTranslate=i.currentTranslate;return}t.emit("sliderMove",l),i.isMoved=!0,i.currentTranslate=_+i.startTranslate;let b=!0,L=s.resistanceRatio;if(s.touchReleaseOnEdges&&(L=0),_>0?(m&&x&&!y&&i.allowThresholdMove&&i.currentTranslate>(s.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>t.minTranslate()&&(b=!1,s.resistance&&(i.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+i.startTranslate+_)**L))):_<0&&(m&&x&&!y&&i.allowThresholdMove&&i.currentTranslate<(s.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]:t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(s.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(s.slidesPerView,10)))}),i.currentTranslate<t.maxTranslate()&&(b=!1,s.resistance&&(i.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-i.startTranslate-_)**L))),b&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(i.currentTranslate=i.startTranslate),s.threshold>0)if(Math.abs(_)>s.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,r.startX=r.currentX,r.startY=r.currentY,i.currentTranslate=i.startTranslate,r.diff=t.isHorizontal()?r.currentX-r.startX:r.currentY-r.startY;return}}else{i.currentTranslate=i.startTranslate;return}!s.followFinger||s.cssMode||((s.freeMode&&s.freeMode.enabled&&t.freeMode||s.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),s.freeMode&&s.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(i.currentTranslate),t.setTranslate(i.currentTranslate))}function NA(n){const e=this,t=e.touchEventsData;let i=n;i.originalEvent&&(i=i.originalEvent);let s;if(i.type==="touchend"||i.type==="touchcancel"){if(s=[...i.changedTouches].filter(b=>b.identifier===t.touchId)[0],!s||s.identifier!==t.touchId)return}else{if(t.touchId!==null||i.pointerId!==t.pointerId)return;s=i}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(i.type)&&!(["pointercancel","contextmenu"].includes(i.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;const{params:o,touches:a,rtlTranslate:l,slidesGrid:c,enabled:d}=e;if(!d||!o.simulateTouch&&i.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",i),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&o.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}o.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const u=Ua(),f=u-t.touchStartTime;if(e.allowClick){const b=i.path||i.composedPath&&i.composedPath();e.updateClickedSlide(b&&b[0]||i.target,b),e.emit("tap click",i),f<300&&u-t.lastClickTime<300&&e.emit("doubleTap doubleClick",i)}if(t.lastClickTime=Ua(),_d(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||a.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let p;if(o.followFinger?p=l?e.translate:-e.translate:p=-t.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:p});return}let _=0,v=e.slidesSizesGrid[0];for(let b=0;b<c.length;b+=b<o.slidesPerGroupSkip?1:o.slidesPerGroup){const L=b<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;typeof c[b+L]<"u"?p>=c[b]&&p<c[b+L]&&(_=b,v=c[b+L]-c[b]):p>=c[b]&&(_=b,v=c[c.length-1]-c[c.length-2])}let g=null,m=null;o.rewind&&(e.isBeginning?m=o.virtual&&o.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(g=0));const x=(p-c[_])/v,y=_<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(f>o.longSwipesMs){if(!o.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(x>=o.longSwipesRatio?e.slideTo(o.rewind&&e.isEnd?g:_+y):e.slideTo(_)),e.swipeDirection==="prev"&&(x>1-o.longSwipesRatio?e.slideTo(_+y):m!==null&&x<0&&Math.abs(x)>o.longSwipesRatio?e.slideTo(m):e.slideTo(_))}else{if(!o.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(i.target===e.navigation.nextEl||i.target===e.navigation.prevEl)?i.target===e.navigation.nextEl?e.slideTo(_+y):e.slideTo(_):(e.swipeDirection==="next"&&e.slideTo(g!==null?g:_+y),e.swipeDirection==="prev"&&e.slideTo(m!==null?m:_))}}function Zh(){const n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:s,snapGrid:r}=n,o=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();const a=o&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!a?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!o?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=s,n.allowSlideNext=i,n.params.watchOverflow&&r!==n.snapGrid&&n.checkOverflow()}function UA(n){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function OA(){const n=this,{wrapperEl:e,rtlTranslate:t,enabled:i}=n;if(!i)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let s;const r=n.maxTranslate()-n.minTranslate();r===0?s=0:s=(n.translate-n.minTranslate())/r,s!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function kA(n){const e=this;ba(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function FA(){const n=this;n.documentTouchHandlerProceeded||(n.documentTouchHandlerProceeded=!0,n.params.touchReleaseOnEdges&&(n.el.style.touchAction="auto"))}const pg=(n,e)=>{const t=Or(),{params:i,el:s,wrapperEl:r,device:o}=n,a=!!i.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;t[l]("touchstart",n.onDocumentTouchStart,{passive:!1,capture:a}),s[l]("touchstart",n.onTouchStart,{passive:!1}),s[l]("pointerdown",n.onTouchStart,{passive:!1}),t[l]("touchmove",n.onTouchMove,{passive:!1,capture:a}),t[l]("pointermove",n.onTouchMove,{passive:!1,capture:a}),t[l]("touchend",n.onTouchEnd,{passive:!0}),t[l]("pointerup",n.onTouchEnd,{passive:!0}),t[l]("pointercancel",n.onTouchEnd,{passive:!0}),t[l]("touchcancel",n.onTouchEnd,{passive:!0}),t[l]("pointerout",n.onTouchEnd,{passive:!0}),t[l]("pointerleave",n.onTouchEnd,{passive:!0}),t[l]("contextmenu",n.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&s[l]("click",n.onClick,!0),i.cssMode&&r[l]("scroll",n.onScroll),i.updateOnWindowResize?n[c](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",Zh,!0):n[c]("observerUpdate",Zh,!0),s[l]("load",n.onLoad,{capture:!0})};function BA(){const n=this,{params:e}=n;n.onTouchStart=IA.bind(n),n.onTouchMove=DA.bind(n),n.onTouchEnd=NA.bind(n),n.onDocumentTouchStart=FA.bind(n),e.cssMode&&(n.onScroll=OA.bind(n)),n.onClick=UA.bind(n),n.onLoad=kA.bind(n),pg(n,"on")}function HA(){pg(this,"off")}var zA={attachEvents:BA,detachEvents:HA};const Jh=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function VA(){const n=this,{realIndex:e,initialized:t,params:i,el:s}=n,r=i.breakpoints;if(!r||r&&Object.keys(r).length===0)return;const o=n.getBreakpoint(r,n.params.breakpointsBase,n.el);if(!o||n.currentBreakpoint===o)return;const l=(o in r?r[o]:void 0)||n.originalParams,c=Jh(n,i),d=Jh(n,l),u=i.enabled;c&&!d?(s.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),n.emitContainerClasses()):!c&&d&&(s.classList.add(`${i.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&i.grid.fill==="column")&&s.classList.add(`${i.containerModifierClass}grid-column`),n.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(m=>{if(typeof l[m]>"u")return;const x=i[m]&&i[m].enabled,y=l[m]&&l[m].enabled;x&&!y&&n[m].disable(),!x&&y&&n[m].enable()});const f=l.direction&&l.direction!==i.direction,p=i.loop&&(l.slidesPerView!==i.slidesPerView||f),_=i.loop;f&&t&&n.changeDirection(),_n(n.params,l);const v=n.params.enabled,g=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),u&&!v?n.disable():!u&&v&&n.enable(),n.currentBreakpoint=o,n.emit("_beforeBreakpoint",l),t&&(p?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!_&&g?(n.loopCreate(e),n.updateSlides()):_&&!g&&n.loopDestroy()),n.emit("breakpoint",l)}function GA(n,e,t){if(e===void 0&&(e="window"),!n||e==="container"&&!t)return;let i=!1;const s=bn(),r=e==="window"?s.innerHeight:t.clientHeight,o=Object.keys(n).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){const l=parseFloat(a.substr(1));return{value:r*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){const{point:l,value:c}=o[a];e==="window"?s.matchMedia(`(min-width: ${c}px)`).matches&&(i=l):c<=t.clientWidth&&(i=l)}return i||"max"}var $A={setBreakpoint:VA,getBreakpoint:GA};function WA(n,e){const t=[];return n.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(s=>{i[s]&&t.push(e+s)}):typeof i=="string"&&t.push(e+i)}),t}function XA(){const n=this,{classNames:e,params:t,rtl:i,el:s,device:r}=n,o=WA(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:i},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:r.android},{ios:r.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...o),s.classList.add(...e),n.emitContainerClasses()}function jA(){const n=this,{el:e,classNames:t}=n;e.classList.remove(...t),n.emitContainerClasses()}var qA={addClasses:XA,removeClasses:jA};function YA(){const n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:i}=t;if(i){const s=n.slides.length-1,r=n.slidesGrid[s]+n.slidesSizesGrid[s]+i*2;n.isLocked=n.size>r}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var KA={checkOverflow:YA},Qh={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function ZA(n,e){return function(i){i===void 0&&(i={});const s=Object.keys(i)[0],r=i[s];if(typeof r!="object"||r===null){_n(e,i);return}if(n[s]===!0&&(n[s]={enabled:!0}),s==="navigation"&&n[s]&&n[s].enabled&&!n[s].prevEl&&!n[s].nextEl&&(n[s].auto=!0),["pagination","scrollbar"].indexOf(s)>=0&&n[s]&&n[s].enabled&&!n[s].el&&(n[s].auto=!0),!(s in n&&"enabled"in r)){_n(e,i);return}typeof n[s]=="object"&&!("enabled"in n[s])&&(n[s].enabled=!0),n[s]||(n[s]={enabled:!1}),_n(e,i)}}const oc={eventsEmitter:qw,update:rA,translate:uA,transition:mA,slide:MA,loop:AA,grabCursor:LA,events:zA,breakpoints:$A,checkOverflow:KA,classes:qA},ac={};class Yt{constructor(){let e,t;for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];s.length===1&&s[0].constructor&&Object.prototype.toString.call(s[0]).slice(8,-1)==="Object"?t=s[0]:[e,t]=s,t||(t={}),t=_n({},t),e&&!t.el&&(t.el=e);const o=Or();if(t.el&&typeof t.el=="string"&&o.querySelectorAll(t.el).length>1){const d=[];return o.querySelectorAll(t.el).forEach(u=>{const f=_n({},t,{el:u});d.push(new Yt(f))}),d}const a=this;a.__swiper__=!0,a.support=fg(),a.device=Gw({userAgent:t.userAgent}),a.browser=Ww(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],t.modules&&Array.isArray(t.modules)&&a.modules.push(...t.modules);const l={};a.modules.forEach(d=>{d({params:t,swiper:a,extendParams:ZA(t,l),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});const c=_n({},Qh,l);return a.params=_n({},c,ac,t),a.originalParams=_n({},a.params),a.passedParams=_n({},t),a.params&&a.params.on&&Object.keys(a.params.on).forEach(d=>{a.on(d,a.params.on[d])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return a.params.direction==="horizontal"},isVertical(){return a.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:i}=this,s=Qn(t,`.${i.slideClass}, swiper-slide`),r=Fa(s[0]);return Fa(e)-r}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>t.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:t,params:i}=e;e.slides=Qn(t,`.${i.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const i=this;e=Math.min(Math.max(e,0),1);const s=i.minTranslate(),o=(i.maxTranslate()-s)*e+s;i.translateTo(o,typeof t>"u"?0:t),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(i=>{const s=e.getSlideClasses(i);t.push({slideEl:i,classNames:s}),e.emit("_slideClass",i,s)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const i=this,{params:s,slides:r,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:c}=i;let d=1;if(typeof s.slidesPerView=="number")return s.slidesPerView;if(s.centeredSlides){let u=r[c]?r[c].swiperSlideSize:0,f;for(let p=c+1;p<r.length;p+=1)r[p]&&!f&&(u+=r[p].swiperSlideSize,d+=1,u>l&&(f=!0));for(let p=c-1;p>=0;p-=1)r[p]&&!f&&(u+=r[p].swiperSlideSize,d+=1,u>l&&(f=!0))}else if(e==="current")for(let u=c+1;u<r.length;u+=1)(t?o[u]+a[u]-o[c]<l:o[u]-o[c]<l)&&(d+=1);else for(let u=c-1;u>=0;u-=1)o[c]-o[u]<l&&(d+=1);return d}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:i}=e;i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&ba(e,o)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function s(){const o=e.rtlTranslate?e.translate*-1:e.translate,a=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}let r;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)s(),i.autoHeight&&e.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){const o=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;r=e.slideTo(o.length-1,0,!1,!0)}else r=e.slideTo(e.activeIndex,0,!1,!0);r||s()}i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const i=this,s=i.params.direction;return e||(e=s==="horizontal"?"vertical":"horizontal"),e===s||e!=="horizontal"&&e!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${s}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(r=>{e==="vertical"?r.style.width="":r.style.height=""}),i.emit("changeDirection"),t&&i.update()),i}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let i=e||t.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=t,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName==="SWIPER-CONTAINER"&&(t.isElement=!0);const s=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=(()=>i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(s()):Qn(i,s())[0])();return!o&&t.params.createElements&&(o=ka("div",t.params.wrapperClass),i.append(o),Qn(i,`.${t.params.slideClass}`).forEach(a=>{o.append(a)})),Object.assign(t,{el:i,wrapperEl:o,slidesEl:t.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:o,hostEl:t.isElement?i.parentNode.host:i,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||Xi(i,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||Xi(i,"direction")==="rtl"),wrongRTL:Xi(o,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const s=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&s.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),s.forEach(r=>{r.complete?ba(t,r):r.addEventListener("load",o=>{ba(t,o.target)})}),xd(t),t.initialized=!0,xd(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const i=this,{params:s,el:r,wrapperEl:o,slides:a}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),s.loop&&i.loopDestroy(),t&&(i.removeClasses(),r.removeAttribute("style"),o.removeAttribute("style"),a&&a.length&&a.forEach(l=>{l.classList.remove(s.slideVisibleClass,s.slideFullyVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(l=>{i.off(l)}),e!==!1&&(i.el.swiper=null,Uw(i)),i.destroyed=!0),null}static extendDefaults(e){_n(ac,e)}static get extendedDefaults(){return ac}static get defaults(){return Qh}static installModule(e){Yt.prototype.__modules__||(Yt.prototype.__modules__=[]);const t=Yt.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>Yt.installModule(t)),Yt):(Yt.installModule(e),Yt)}}Object.keys(oc).forEach(n=>{Object.keys(oc[n]).forEach(e=>{Yt.prototype[e]=oc[n][e]})});Yt.use([Xw,jw]);function mg(n,e,t,i){return n.params.createElements&&Object.keys(i).forEach(s=>{if(!t[s]&&t.auto===!0){let r=Qn(n.el,`.${i[s]}`)[0];r||(r=ka("div",i[s]),r.className=i[s],n.el.append(r)),t[s]=r,e[s]=r}}),t}function hu(n){let{swiper:e,extendParams:t,on:i,emit:s}=n;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};const r=v=>(Array.isArray(v)?v:[v]).filter(g=>!!g);function o(v){let g;return v&&typeof v=="string"&&e.isElement&&(g=e.el.querySelector(v),g)?g:(v&&(typeof v=="string"&&(g=[...document.querySelectorAll(v)]),e.params.uniqueNavElements&&typeof v=="string"&&g.length>1&&e.el.querySelectorAll(v).length===1&&(g=e.el.querySelector(v))),v&&!g?v:g)}function a(v,g){const m=e.params.navigation;v=r(v),v.forEach(x=>{x&&(x.classList[g?"add":"remove"](...m.disabledClass.split(" ")),x.tagName==="BUTTON"&&(x.disabled=g),e.params.watchOverflow&&e.enabled&&x.classList[e.isLocked?"add":"remove"](m.lockClass))})}function l(){const{nextEl:v,prevEl:g}=e.navigation;if(e.params.loop){a(g,!1),a(v,!1);return}a(g,e.isBeginning&&!e.params.rewind),a(v,e.isEnd&&!e.params.rewind)}function c(v){v.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),s("navigationPrev"))}function d(v){v.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),s("navigationNext"))}function u(){const v=e.params.navigation;if(e.params.navigation=mg(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(v.nextEl||v.prevEl))return;let g=o(v.nextEl),m=o(v.prevEl);Object.assign(e.navigation,{nextEl:g,prevEl:m}),g=r(g),m=r(m);const x=(y,b)=>{y&&y.addEventListener("click",b==="next"?d:c),!e.enabled&&y&&y.classList.add(...v.lockClass.split(" "))};g.forEach(y=>x(y,"next")),m.forEach(y=>x(y,"prev"))}function f(){let{nextEl:v,prevEl:g}=e.navigation;v=r(v),g=r(g);const m=(x,y)=>{x.removeEventListener("click",y==="next"?d:c),x.classList.remove(...e.params.navigation.disabledClass.split(" "))};v.forEach(x=>m(x,"next")),g.forEach(x=>m(x,"prev"))}i("init",()=>{e.params.navigation.enabled===!1?_():(u(),l())}),i("toEdge fromEdge lock unlock",()=>{l()}),i("destroy",()=>{f()}),i("enable disable",()=>{let{nextEl:v,prevEl:g}=e.navigation;if(v=r(v),g=r(g),e.enabled){l();return}[...v,...g].filter(m=>!!m).forEach(m=>m.classList.add(e.params.navigation.lockClass))}),i("click",(v,g)=>{let{nextEl:m,prevEl:x}=e.navigation;m=r(m),x=r(x);const y=g.target;if(e.params.navigation.hideOnClick&&!x.includes(y)&&!m.includes(y)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===y||e.pagination.el.contains(y)))return;let b;m.length?b=m[0].classList.contains(e.params.navigation.hiddenClass):x.length&&(b=x[0].classList.contains(e.params.navigation.hiddenClass)),s(b===!0?"navigationShow":"navigationHide"),[...m,...x].filter(L=>!!L).forEach(L=>L.classList.toggle(e.params.navigation.hiddenClass))}});const p=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),u(),l()},_=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),f()};Object.assign(e.navigation,{enable:p,disable:_,update:l,init:u,destroy:f})}function Kr(n){return n===void 0&&(n=""),`.${n.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function rl(n){let{swiper:e,extendParams:t,on:i,emit:s}=n;const r="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:x=>x,formatFractionTotal:x=>x,bulletClass:`${r}-bullet`,bulletActiveClass:`${r}-bullet-active`,modifierClass:`${r}-`,currentClass:`${r}-current`,totalClass:`${r}-total`,hiddenClass:`${r}-hidden`,progressbarFillClass:`${r}-progressbar-fill`,progressbarOppositeClass:`${r}-progressbar-opposite`,clickableClass:`${r}-clickable`,lockClass:`${r}-lock`,horizontalClass:`${r}-horizontal`,verticalClass:`${r}-vertical`,paginationDisabledClass:`${r}-disabled`}}),e.pagination={el:null,bullets:[]};let o,a=0;const l=x=>(Array.isArray(x)?x:[x]).filter(y=>!!y);function c(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function d(x,y){const{bulletActiveClass:b}=e.params.pagination;x&&(x=x[`${y==="prev"?"previous":"next"}ElementSibling`],x&&(x.classList.add(`${b}-${y}`),x=x[`${y==="prev"?"previous":"next"}ElementSibling`],x&&x.classList.add(`${b}-${y}-${y}`)))}function u(x){const y=x.target.closest(Kr(e.params.pagination.bulletClass));if(!y)return;x.preventDefault();const b=Fa(y)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===b)return;e.slideToLoop(b)}else e.slideTo(b)}function f(){const x=e.rtl,y=e.params.pagination;if(c())return;let b=e.pagination.el;b=l(b);let L,P;const I=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,N=e.params.loop?Math.ceil(I/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(P=e.previousRealIndex||0,L=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(L=e.snapIndex,P=e.previousSnapIndex):(P=e.previousIndex||0,L=e.activeIndex||0),y.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const w=e.pagination.bullets;let M,R,O;if(y.dynamicBullets&&(o=vd(w[0],e.isHorizontal()?"width":"height",!0),b.forEach(U=>{U.style[e.isHorizontal()?"width":"height"]=`${o*(y.dynamicMainBullets+4)}px`}),y.dynamicMainBullets>1&&P!==void 0&&(a+=L-(P||0),a>y.dynamicMainBullets-1?a=y.dynamicMainBullets-1:a<0&&(a=0)),M=Math.max(L-a,0),R=M+(Math.min(w.length,y.dynamicMainBullets)-1),O=(R+M)/2),w.forEach(U=>{const X=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(ee=>`${y.bulletActiveClass}${ee}`)].map(ee=>typeof ee=="string"&&ee.includes(" ")?ee.split(" "):ee).flat();U.classList.remove(...X)}),b.length>1)w.forEach(U=>{const X=Fa(U);X===L?U.classList.add(...y.bulletActiveClass.split(" ")):e.isElement&&U.setAttribute("part","bullet"),y.dynamicBullets&&(X>=M&&X<=R&&U.classList.add(...`${y.bulletActiveClass}-main`.split(" ")),X===M&&d(U,"prev"),X===R&&d(U,"next"))});else{const U=w[L];if(U&&U.classList.add(...y.bulletActiveClass.split(" ")),e.isElement&&w.forEach((X,ee)=>{X.setAttribute("part",ee===L?"bullet-active":"bullet")}),y.dynamicBullets){const X=w[M],ee=w[R];for(let Y=M;Y<=R;Y+=1)w[Y]&&w[Y].classList.add(...`${y.bulletActiveClass}-main`.split(" "));d(X,"prev"),d(ee,"next")}}if(y.dynamicBullets){const U=Math.min(w.length,y.dynamicMainBullets+4),X=(o*U-o)/2-O*o,ee=x?"right":"left";w.forEach(Y=>{Y.style[e.isHorizontal()?ee:"top"]=`${X}px`})}}b.forEach((w,M)=>{if(y.type==="fraction"&&(w.querySelectorAll(Kr(y.currentClass)).forEach(R=>{R.textContent=y.formatFractionCurrent(L+1)}),w.querySelectorAll(Kr(y.totalClass)).forEach(R=>{R.textContent=y.formatFractionTotal(N)})),y.type==="progressbar"){let R;y.progressbarOpposite?R=e.isHorizontal()?"vertical":"horizontal":R=e.isHorizontal()?"horizontal":"vertical";const O=(L+1)/N;let U=1,X=1;R==="horizontal"?U=O:X=O,w.querySelectorAll(Kr(y.progressbarFillClass)).forEach(ee=>{ee.style.transform=`translate3d(0,0,0) scaleX(${U}) scaleY(${X})`,ee.style.transitionDuration=`${e.params.speed}ms`})}y.type==="custom"&&y.renderCustom?(w.innerHTML=y.renderCustom(e,L+1,N),M===0&&s("paginationRender",w)):(M===0&&s("paginationRender",w),s("paginationUpdate",w)),e.params.watchOverflow&&e.enabled&&w.classList[e.isLocked?"add":"remove"](y.lockClass)})}function p(){const x=e.params.pagination;if(c())return;const y=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let b=e.pagination.el;b=l(b);let L="";if(x.type==="bullets"){let P=e.params.loop?Math.ceil(y/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&P>y&&(P=y);for(let I=0;I<P;I+=1)x.renderBullet?L+=x.renderBullet.call(e,I,x.bulletClass):L+=`<${x.bulletElement} ${e.isElement?'part="bullet"':""} class="${x.bulletClass}"></${x.bulletElement}>`}x.type==="fraction"&&(x.renderFraction?L=x.renderFraction.call(e,x.currentClass,x.totalClass):L=`<span class="${x.currentClass}"></span> / <span class="${x.totalClass}"></span>`),x.type==="progressbar"&&(x.renderProgressbar?L=x.renderProgressbar.call(e,x.progressbarFillClass):L=`<span class="${x.progressbarFillClass}"></span>`),e.pagination.bullets=[],b.forEach(P=>{x.type!=="custom"&&(P.innerHTML=L||""),x.type==="bullets"&&e.pagination.bullets.push(...P.querySelectorAll(Kr(x.bulletClass)))}),x.type!=="custom"&&s("paginationRender",b[0])}function _(){e.params.pagination=mg(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const x=e.params.pagination;if(!x.el)return;let y;typeof x.el=="string"&&e.isElement&&(y=e.el.querySelector(x.el)),!y&&typeof x.el=="string"&&(y=[...document.querySelectorAll(x.el)]),y||(y=x.el),!(!y||y.length===0)&&(e.params.uniqueNavElements&&typeof x.el=="string"&&Array.isArray(y)&&y.length>1&&(y=[...e.el.querySelectorAll(x.el)],y.length>1&&(y=y.filter(b=>ug(b,".swiper")[0]===e.el)[0])),Array.isArray(y)&&y.length===1&&(y=y[0]),Object.assign(e.pagination,{el:y}),y=l(y),y.forEach(b=>{x.type==="bullets"&&x.clickable&&b.classList.add(...(x.clickableClass||"").split(" ")),b.classList.add(x.modifierClass+x.type),b.classList.add(e.isHorizontal()?x.horizontalClass:x.verticalClass),x.type==="bullets"&&x.dynamicBullets&&(b.classList.add(`${x.modifierClass}${x.type}-dynamic`),a=0,x.dynamicMainBullets<1&&(x.dynamicMainBullets=1)),x.type==="progressbar"&&x.progressbarOpposite&&b.classList.add(x.progressbarOppositeClass),x.clickable&&b.addEventListener("click",u),e.enabled||b.classList.add(x.lockClass)}))}function v(){const x=e.params.pagination;if(c())return;let y=e.pagination.el;y&&(y=l(y),y.forEach(b=>{b.classList.remove(x.hiddenClass),b.classList.remove(x.modifierClass+x.type),b.classList.remove(e.isHorizontal()?x.horizontalClass:x.verticalClass),x.clickable&&(b.classList.remove(...(x.clickableClass||"").split(" ")),b.removeEventListener("click",u))})),e.pagination.bullets&&e.pagination.bullets.forEach(b=>b.classList.remove(...x.bulletActiveClass.split(" ")))}i("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const x=e.params.pagination;let{el:y}=e.pagination;y=l(y),y.forEach(b=>{b.classList.remove(x.horizontalClass,x.verticalClass),b.classList.add(e.isHorizontal()?x.horizontalClass:x.verticalClass)})}),i("init",()=>{e.params.pagination.enabled===!1?m():(_(),p(),f())}),i("activeIndexChange",()=>{typeof e.snapIndex>"u"&&f()}),i("snapIndexChange",()=>{f()}),i("snapGridLengthChange",()=>{p(),f()}),i("destroy",()=>{v()}),i("enable disable",()=>{let{el:x}=e.pagination;x&&(x=l(x),x.forEach(y=>y.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),i("lock unlock",()=>{f()}),i("click",(x,y)=>{const b=y.target,L=l(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&L&&L.length>0&&!b.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&b===e.navigation.nextEl||e.navigation.prevEl&&b===e.navigation.prevEl))return;const P=L[0].classList.contains(e.params.pagination.hiddenClass);s(P===!0?"paginationShow":"paginationHide"),L.forEach(I=>I.classList.toggle(e.params.pagination.hiddenClass))}});const g=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:x}=e.pagination;x&&(x=l(x),x.forEach(y=>y.classList.remove(e.params.pagination.paginationDisabledClass))),_(),p(),f()},m=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:x}=e.pagination;x&&(x=l(x),x.forEach(y=>y.classList.add(e.params.pagination.paginationDisabledClass))),v()};Object.assign(e.pagination,{enable:g,disable:m,render:p,update:f,init:_,destroy:v})}function JA(){return new Yt(".js-article-item-slider",{modules:[rl],speed:600,spaceBetween:20,slidesPerView:1,pagination:{clickable:!0,el:".slider-pagination",renderBullet(e,t){return`
                    <div class="slider-pagination__item ${t}"></div>
                `}}})}function QA(){return new Yt(".js-tape-slider",{slidesPerView:"auto",speed:600,spaceBetween:0,centeredSlides:!0,centeredSlidesBounds:!0})}function e3(){return new Yt(".js-product-item-slider",{modules:[rl,hu],speed:600,spaceBetween:20,slidesPerView:1,navigation:{prevEl:".slider-prev",nextEl:".slider-next"},pagination:{clickable:!0,el:".slider-pagination",renderBullet(e,t){return`
                    <div class="slider-pagination__item ${t}"></div>
                `}}})}function gg(){return new Yt(".js-slide-show",{modules:[rl,hu],speed:600,spaceBetween:0,slidesPerView:1,navigation:{prevEl:".slider-prev",nextEl:".slider-next"},pagination:{clickable:!0,el:".slider-pagination",renderBullet(e,t){return`
                    <div class="slider-pagination__item ${t}"></div>
                `}},on:{init(e){e.slideTo(lg(1,6)-1)}}})}function t3(){return new Yt(".js-main-banner-slider",{modules:[rl,hu],speed:600,spaceBetween:0,slidesPerView:1,simulateTouch:!1,navigation:{prevEl:".slider-prev",nextEl:".slider-next"},pagination:{clickable:!0,el:".slider-pagination",renderBullet(e,t){return`
                    <div class="slider-pagination__item ${t}"></div>
                `}}})}const n3={class:"swiper w-full js-slide-show"},i3={class:"swiper-wrapper"},s3={class:"floating-block text-white text-left min-w-[270px] absolute left-10 top-10 md:left-16 md:top-16"},r3=h("div",{class:"floating-block__label"},"Divinare",-1),o3=h("div",{class:"floating-block__title md:text-[20px]"},[_e("Встраиваемый"),h("br"),_e(" светильник Giorgetta"),h("br"),_e(" 1769/03 PL-1")],-1),a3=h("div",{class:"floating-block__price text-right"},"990 ₽",-1),l3={class:"floating-block text-white text-left min-w-[270px] absolute right-10 bottom-20 md:right-16 md:bottom-40"},c3=h("div",{class:"floating-block__label"},"Divinare",-1),d3=h("div",{class:"floating-block__title md:text-[20px]"},[_e("Встраиваемый"),h("br"),_e(" светильник Giorgetta"),h("br"),_e(" 1769/03 PL-1")],-1),u3=h("div",{class:"floating-block__price text-right"},"990 ₽",-1),f3=h("div",{class:"slider-pagination"},null,-1),h3=Ne({__name:"MainSlideShow",setup(n){return Ur(gg),(e,t)=>{const i=ke("router-link");return J(),ne("div",n3,[h("div",i3,[(J(),ne($e,null,Rt(3,s=>h("div",{key:s,style:fn({"background-image":`url(${Fe(z)}img/slide-show-${s}.png)`}),class:"swiper-slide bg-cover bg-center bg-no-repeat relative h-[680px] md:h-[800px]"},[h("div",s3,[j(i,{to:{name:"product-item",params:{id:1}}}),r3,o3,a3]),h("div",l3,[j(i,{to:{name:"product-item",params:{id:1}}}),c3,d3,u3])],4)),64))]),f3])}}}),p3={class:"instagram-block relative text-center pb-6"},m3=ct('<div class="centered pt-20 border-t border-neutral border-opacity-50 md:pt-40"><div class="h1">Мы в Instagram:</div><div class="mb-8"> Присоединяйтесь, чтобы узнать о нас<br> больше. Мы будем вам всегдя рады! </div><div class="mb-20 md:mb-[116px]"><a href="https://www.instagram.com/" target="_blank" class="w-full app-button app-button--secondary sm:w-auto">instagram*</a></div></div>',1),g3=Ne({__name:"InstagramBlock",setup(n){return(e,t)=>(J(),ne("section",p3,[m3,h("div",{class:"text-center h-[220px] bg-left",style:fn({"background-image":`url(${Fe(z)}img/inst-photo-line.png)`})},null,4)]))}}),_g=Ct([{value:">1 000",label:"товаров"},{value:"20",label:"партнеров"},{value:"30",label:"поставщиков"},{value:"189",label:"пунктов выдачи"}]),_3={class:"main-about-block pt-10 pb-[100px]"},v3={class:"centered"},x3=h("div",{"data-animated-block":"fadeInRight",class:"h1 mb-10 leading-[.9] lg:text-[98px] xl:max-w-[80%]"},[_e("Качество"),h("br"),_e("Широкий выбор"),h("br"),_e("Комплексный подход")],-1),b3={class:"xl:flex xl:gap-4"},y3={class:"xl:flex-1 xl:min-w-0"},S3={class:"grid grid-cols-2 gap-y-5 pt-5 pb-12 border-t border-neutral border-opacity-40 xl:pb-0"},M3=h("span",{class:"h-[1px] bg-neutral bg-opacity-40 col-span-2 row-start-2"},null,-1),E3={class:"text-[36px] leading-[1.0] font-semibold mb-2 md:text-[48px]"},T3=["innerHTML"],w3={class:"lg:flex-1 lg:min-w-0"},A3={"data-animated-block":"fadeInDown"},C3=["src"],R3=ct('<div class="mt-16 xl:flex xl:gap-4" data-animated-block="fadeInDown"><div class="xl:flex-1 xl:min-w-0"><div class="h6">О нас</div></div><div class="xl:flex-1 xl:min-w-0"><div class="text-style-base mb-10"> SDL СветМаркет – это российская торговая компания, занимающаяся продажей осветительных приборов для дома и офиса. Наши предметы освещения для квартиры или дома соответствуют высшим стандартам качества и рассчитаны на долгосрочную работу. В каталогах представлены потолочные люстры, бра (настенные светильники), торшеры, настольные лампы и другие товары для создания системы освещения от отечественных и зарубежных брендов. </div><a href="#" class="app-button app-button--secondary">Узнать больше</a></div></div>',1),L3=Ne({__name:"MainAboutBlock",setup(n){return(e,t)=>(J(),ne("section",_3,[h("div",v3,[x3,h("div",b3,[h("div",y3,[h("div",S3,[M3,(J(!0),ne($e,null,Rt(Fe(_g),(i,s)=>(J(),ne("div",{key:s,class:"border-r border-neutral border-opacity-40 pt-8 pr-4 odd:pl-4 md:odd:border-opacity-0","data-animated-block":"fadeInRight"},[h("div",E3,_t(i.value),1),h("div",{class:"text-[14px] leading-[1.0] tracking-[-0.28px] md:text-[16px]",innerHTML:i.label},null,8,T3)]))),128))])]),h("div",w3,[h("div",A3,[h("img",{class:"w-full",src:`${Fe(z)}img/main-about-pic.png`,alt:""},null,8,C3)])])]),R3])]))}}),P3={class:"swiper w-full js-tape-slider"},I3={class:"swiper-wrapper"},D3={class:"bg-neutral-100 relative group"},N3=["src"],Ba=Ne({__name:"TapeSlider",setup(n){const e=Ct([{img:`${z}img/product-pic-2.png`},{img:`${z}img/product-pic-3.png`},{img:`${z}img/product-pic-4.png`},{img:`${z}img/product-pic-2.png`},{img:`${z}img/product-pic-3.png`},{img:`${z}img/product-pic-4.png`},{img:`${z}img/product-pic-2.png`},{img:`${z}img/product-pic-3.png`},{img:`${z}img/product-pic-4.png`},{img:`${z}img/product-pic-2.png`},{img:`${z}img/product-pic-3.png`},{img:`${z}img/product-pic-4.png`}]);return Ur(QA),(t,i)=>{const s=ke("router-link");return J(),ne("div",P3,[h("div",I3,[(J(!0),ne($e,null,Rt(e.value,(r,o)=>(J(),ne("div",{key:o,class:"swiper-slide w-[160px] py-3 px-2 md:w-[220px]"},[h("div",D3,[j(s,{to:{name:"product-item",params:{id:1}},class:"absolute left-0 right-0 top-0 bottom-0 z-[5]"}),h("img",{class:"transition-all duration-300 group-hover:drop-shadow-lg w-full",src:r.img,alt:""},null,8,N3)])]))),128))])])}}}),U3={class:"relative"},O3=h("div",{class:"three-lamp three-lamp--main-banner"},null,-1),k3={class:"swiper js-main-banner-slider"},F3={class:"swiper-wrapper pointer-events-none md:pointer-events-auto"},B3={class:"swiper-slide flex flex-col bg-dark h-[680px] md:h-[720px]"},H3={class:"pointer-events-auto text-center text-white mt-auto px-5 max-w-[700px] mx-auto"},z3=h("div",{class:"uppercase text-[14px] font-light mb-8"},"Специальные предложения",-1),V3=h("div",{class:"text-stone font-semibold leading-[1.1] text-[28px] md:text-[36px] xl:text-[48px]"},[_e(" Самые актуальные"),h("br"),_e(" новинки "),h("span",{class:"text-white"},"уже в наличии")],-1),G3={class:"mt-8"},$3={class:"pointer-events-auto text-center text-dark mt-auto px-5 max-w-[700px] mx-auto"},W3=h("div",{class:"uppercase text-[14px] font-light mb-8"},"Специальные предложения",-1),X3=h("div",{class:"font-semibold leading-[1.1] text-[64px] md:text-[96px]"},"10%",-1),j3=h("div",{class:"font-semibold leading-[1.1] text-[28px] md:text-[48px]"},[_e("скидка"),h("br"),_e(),h("span",{class:"text-stone"},"на первый заказ")],-1),q3={class:"mt-8"},Y3={class:"pointer-events-auto text-center text-white my-auto px-5 max-w-[700px] mx-auto"},K3=h("div",{class:"uppercase text-[14px] font-light mb-8"},"Специальные предложения",-1),Z3=h("div",{class:"font-semibold leading-[1.1] text-[28px] md:text-[36px] xl:text-[48px]"},[_e(" Бесплатный подбор"),h("br"),_e(" освещения по вашему"),h("br"),_e(" дизайн-проекту ")],-1),J3={class:"mt-8"},Q3=ct('<div class="slider-prev"><div class="svg-icon"><svg><use xlink:href="#arrow-left"></use></svg></div></div><div class="slider-next"><div class="svg-icon"><svg><use xlink:href="#arrow-right"></use></svg></div></div><div class="slider-pagination bottom-auto top-8 z-[40]"></div>',3),eC=Ne({__name:"MainPageBanners",setup(n){return Ur(t3,200),(e,t)=>{const i=ke("router-link");return J(),ne("div",U3,[O3,h("div",k3,[h("div",F3,[h("div",B3,[h("div",H3,[z3,V3,h("div",G3,[j(i,{class:"app-button app-button--light",to:{name:"catalog"}},{default:Me(()=>[_e("в каталог")]),_:1})])]),j(Ba,{class:"mt-auto pointer-events-auto"})]),h("div",{class:"swiper-slide flex flex-col bg-neutral-100 bg-right-bottom bg-no-repeat h-[680px] md:h-[720px]",style:fn({"background-image":`url(${Fe(z)}banners/banner-discount.png)`})},[h("div",$3,[W3,X3,j3,h("div",q3,[j(i,{class:"app-button app-button--secondary",to:{name:"catalog"}},{default:Me(()=>[_e("в каталог")]),_:1})])]),j(Ba,{class:"mt-auto pointer-events-auto"})],4),h("div",{class:"swiper-slide flex flex-col bg-dark bg-center bg-no-repeat bg-cover h-[680px] md:h-[720px]",style:fn({"background-image":`url(${Fe(z)}banners/banner-main.png)`})},[h("div",Y3,[K3,Z3,h("div",J3,[j(i,{class:"app-button app-button--light",to:{name:"catalog"}},{default:Me(()=>[_e("в каталог")]),_:1})])])],4)]),Q3])])}}}),tC={class:"centered"},nC={class:"products-block pt-5 mb-10 border-t border-neutral-alpha md:mb-20"},iC=h("div",{class:"flex flex-col items-start gap-4 mb-8 md:mb-14 md:items-center md:justify-between md:flex-row"},[h("div",{class:"h1 mb-0"},"Распродажа"),h("a",{href:"#",class:"app-button app-button--secondary"},"Смотреть все")],-1),sC=h("div",{class:"flex justify-center mt-10 lg:mt-16"},[h("a",{href:"#",class:"app-button app-button--secondary"},"Смотреть все")],-1),rC={class:"products-block pt-5 mb-10 border-t border-neutral-alpha md:mb-20"},oC=h("div",{class:"flex flex-col items-start gap-4 mb-8 md:mb-14 md:items-center md:justify-between md:flex-row"},[h("div",{class:"h1 mb-0"},"Новинки"),h("a",{href:"#",class:"app-button app-button--secondary"},"Смотреть все")],-1),aC=h("div",{class:"flex justify-center mt-10 lg:mt-16"},[h("a",{href:"#",class:"app-button app-button--secondary"},"Смотреть все")],-1),lC=Ne({__name:"Main",setup(n){return(e,t)=>(J(),ne($e,null,[j(dw),j(xw),j(eC),j(Tw),h("div",tC,[h("div",nC,[iC,j(Cr,{columns:4,list:Fe(jT)},null,8,["list"]),sC]),h("div",rC,[oC,j(Cr,{columns:4,list:Fe(qT)},null,8,["list"]),aC])]),j(h3),j(L3),j(g3)],64))}}),cC={class:"partners-block pt-5 pb-20"},dC={class:"centered"},uC=h("div",{class:"mb-5 h-[1px] bg-neutral-alpha"},null,-1),fC=h("div",{class:"h1 mb-[60px] md:mb-[180px] xl:mb-[220px]"},"Партнеры",-1),hC={class:"grid grid-cols-4 gap-2.5 md:gap-5 xl:grid-cols-6"},pC=["href"],mC=["src"],gC=Ne({__name:"Partners",setup(n){const e=[{link:"#",img:`${z}partners/acolyt.png`},{link:"#",img:`${z}partners/artelamp.png`},{link:"#",img:`${z}partners/bogates.png`},{link:"#",img:`${z}partners/divinare.png`},{link:"#",img:`${z}partners/evoluce.png`},{link:"#",img:`${z}partners/led4u.png`},{link:"#",img:`${z}partners/lightstar.png`},{link:"#",img:`${z}partners/lofit.png`},{link:"#",img:`${z}partners/lumion.png`},{link:"#",img:`${z}partners/maytoni.png`},{link:"#",img:`${z}partners/modelux.png`},{link:"#",img:`${z}partners/novotech.png`},{link:"#",img:`${z}partners/acolyt.png`},{link:"#",img:`${z}partners/artelamp.png`},{link:"#",img:`${z}partners/bogates.png`},{link:"#",img:`${z}partners/divinare.png`},{link:"#",img:`${z}partners/evoluce.png`},{link:"#",img:`${z}partners/led4u.png`},{link:"#",img:`${z}partners/lightstar.png`},{link:"#",img:`${z}partners/lofit.png`},{link:"#",img:`${z}partners/lumion.png`},{link:"#",img:`${z}partners/maytoni.png`},{link:"#",img:`${z}partners/modelux.png`},{link:"#",img:`${z}partners/novotech.png`}];return(t,i)=>(J(),ne("section",cC,[h("div",dC,[uC,fC,h("div",hC,[(J(),ne($e,null,Rt(e,(s,r)=>h("a",{key:r,href:s.link,class:"px-3 py-5 flex items-center justify-center bg-neutral-100 transition-shadow hover:shadow-lg"},[h("img",{class:"mix-blend-multiply",src:s.img,alt:""},null,8,mC)],8,pC)),64))])])]))}}),_C={class:"swiper w-full js-slide-show"},vC={class:"swiper-wrapper"},xC={class:"centered text-white"},bC=h("div",{class:"h-[1px] bg-neutral-alpha my-5"},null,-1),yC={class:"h1"},SC=h("a",{href:"#",class:"app-button app-button--light"},"смотреть",-1),MC=h("div",{class:"slider-pagination"},null,-1),lc=Ne({__name:"AboutSlideShow",setup(n){return Ur(gg),(e,t)=>(J(),ne("div",_C,[h("div",vC,[(J(),ne($e,null,Rt(5,i=>h("div",{key:i,style:fn({"background-image":`url(${Fe(z)}img/slide-show-${i}.png)`}),class:"swiper-slide bg-cover bg-center bg-no-repeat relative h-[680px] md:h-[800px]"},[h("div",xC,[bC,h("div",yC,"Заголовок "+_t(i),1),SC])],4)),64))]),MC]))}}),EC={class:"py-5 overflow-hidden"},TC={class:"centered"},wC={class:"lg:flex lg:gap-5"},AC={class:"pb-8 lg:flex-1 lg:min-w-0 lg:pb-0"},CC=h("h2",{class:"mb-10","data-animated-block":"fadeInLeft"},"Поможем подобрать освещение по фото и дизайн-проекту бесплатно",-1),RC=h("div",{class:"text-style-base","data-animated-block":"fadeInLeft"}," К каждому покупателю мы применяем индивидуальный подход. Чтобы помочь вам в создании грамотной системы освещения дома или в офисе, мы проводим консультацию и изучаем ваши потребности и запросы. Мы можем подобрать для вас товар на любой бюджет, к тому же у нас действует гибкая система скидок. ",-1),LC={"data-animated-block":"fadeInLeft"},PC={class:"mt-10 app-button app-button--primary"},IC={class:"lg:flex-1 lg:min-w-0 lg:-order-1","data-animated-block":"fadeInRight"},DC=["src"],NC=Ne({__name:"TextPictureBlock",setup(n){return(e,t)=>{const i=Os("modal-call");return J(),ne("section",EC,[h("div",TC,[h("div",wC,[h("div",AC,[CC,RC,h("div",LC,[is((J(),ne("button",PC,[_e("проконсультироваться")])),[[i,{name:"callbackModal"}]])])]),h("div",IC,[h("img",{src:`${Fe(z)}img/about-content-pic.png`,alt:""},null,8,DC)])])])])}}}),UC={class:"description-block py-5 overflow-hidden"},OC={class:"centered"},kC=h("div",{class:"pt-5 border-t border-neutral-alpha mb-10 text-[14px] leading-[1.3] xl:mb-[100px]"},"Преимущества:",-1),FC={class:"mb-4 font-semibold leading-[1.0] tracking-[-0.84px] text-[28px] md:text-[48px] xl:text-[76px] xl:flex-1 xl:min-w-0 xl:mb-0","data-animated-block":"fadeInRight"},BC={class:"text-[14px] leading-[1.3] tracking-[-0.28px] md:pb-5 xl:w-[274px] xl:flex-none xl:pb-0","data-animated-block":"zoomIn"},HC=Ne({__name:"DescriptionBlock",setup(n){const e=Ct([{title:"Качество",text:"На нашем сайте вы можете приобрести качественные осветительные приборы от известных брендов домой или в офис."},{title:"Широкий выбор",text:"На нашем сайте вы можете приобрести качественные осветительные приборы от известных брендов домой или в офис."},{title:"Регулярные новинки",text:"На нашем сайте вы можете приобрести качественные осветительные приборы от известных брендов домой или в офис."},{title:"Гарантия",text:"На нашем сайте вы можете приобрести качественные осветительные приборы от известных брендов домой или в офис."},{title:"Индивидуальный подход",text:"На нашем сайте вы можете приобрести качественные осветительные приборы от известных брендов домой или в офис."}]);return(t,i)=>(J(),ne("section",UC,[h("div",OC,[kC,(J(!0),ne($e,null,Rt(e.value,(s,r)=>(J(),ne("div",{key:r,class:"py-2 border-b border-neutral-alpha mb-4 xl:flex xl:gap-3"},[h("div",FC,_t(s.title),1),h("div",BC,_t(s.text),1)]))),128))])]))}}),zC={class:"about-present-block py-10 flex group overflow-hidden relative z-[5] min-h-[600px] md:min-h-[792px] xl:min-h-[1030px]"},VC={class:"centered my-auto"},GC=h("h1",{class:"text-[48px] leading-[1.0] mb-8 md:text-[96px]","data-animated-block":"fadeInUp"},[_e("SDL"),h("br"),_e("СветМаркет")],-1),$C={class:"relative bg-neutral max-w-[254px] mx-auto mb-5","data-animated-block":"fadeInUp"},WC=["src"],XC={"data-animated-block":"fadeInUp"},jC=Ne({__name:"AboutPresentBlock",setup(n){return(e,t)=>{const i=ke("router-link");return J(),ne("div",zC,[h("div",{class:"absolute left-0 right-0 top-0 bottom-0 -z-[2] bg-cover bg-no-repeat bg-center transition-all duration-[0.4s] group-hover:scale-[1.05]",style:fn(`background-image: url(${Fe(z)}img/about-present-pic.png)`)},null,4),h("div",VC,[GC,h("div",$C,[j(i,{class:"absolute inset-0",to:{name:"catalog"}}),h("img",{src:`${Fe(z)}img/product-pic-2.png`,alt:""},null,8,WC)]),h("div",XC,[j(i,{class:"app-button app-button--primary",to:{name:"catalog"}},{default:Me(()=>[_e("в каталог")]),_:1})])])])}}}),qC={class:"py-9"},YC={class:"centered"},KC=h("h2",{class:"text-[20px] mb-10 md:text-[36px] xl:text-[48px] xl:mb-[140px]","data-animated-block":"fadeInRight"},[_e("– это российская торговая"),h("br"),_e("компания, занимающаяся"),h("br"),_e(" продажей осветительных"),h("br"),_e(" приборов для дома и офиса.")],-1),ZC={class:"grid grid-cols-2 gap-5 pt-5 border-t border-neutral border-opacity-40"},JC={class:"col-span-2 md:mb-10 xl:col-span-1"},QC={class:"grid grid-cols-2 gap-y-5"},e4=h("span",{class:"h-[1px] bg-neutral bg-opacity-40 col-span-2 row-start-2"},null,-1),t4={class:"text-[36px] leading-[1.0] font-semibold mb-2 md:text-[48px]"},n4=["innerHTML"],i4={class:"col-span-2 md:col-span-1 xl:row-span-2","data-animated-block":"fadeInUp"},s4={class:"mb-10"},r4=["src"],o4=h("div",{class:"text-style-base mb-6"}," Наши предметы освещения для квартиры, дома или офиса соответствуют высшим стандартам качества и рассчитаны на долгосрочную работу. ",-1),a4={class:"col-span-2 md:col-span-1","data-animated-block":"fadeInUp"},l4={class:"mb-10"},c4=["src"],d4=h("div",{class:"text-style-base"}," Ассортимент включает проверенную продукцию из России, Италии, Испании, Германии, Австрии, Венгрии, Чехии, США и других стран. Мы регулярно обновляем каталог и добавляем новые позиции. ",-1),u4=Ne({__name:"AboutDescriptionBlock",setup(n){return(e,t)=>{const i=ke("router-link");return J(),ne("section",qC,[h("div",YC,[KC,h("div",ZC,[h("div",JC,[h("div",QC,[e4,(J(!0),ne($e,null,Rt(Fe(_g),(s,r)=>(J(),ne("div",{key:r,class:"border-r border-neutral border-opacity-40 pt-8 pr-4 odd:pl-4 md:odd:border-opacity-0","data-animated-block":"fadeInRight"},[h("div",t4,_t(s.value),1),h("div",{class:"text-[14px] leading-[1.0] tracking-[-0.28px] md:text-[16px]",innerHTML:s.label},null,8,n4)]))),128))])]),h("div",i4,[h("div",s4,[h("img",{src:`${Fe(z)}img/about-block-pic-1.png`,alt:""},null,8,r4)]),o4,j(i,{class:"app-button app-button--secondary w-full sm:w-auto",to:{name:"catalog"}},{default:Me(()=>[_e("В каталог")]),_:1})]),h("div",a4,[h("div",l4,[h("img",{src:`${Fe(z)}img/about-block-pic-2.png`,alt:""},null,8,c4)]),d4])])])])}}}),f4={class:"text-center text-white max-w-[520px] px-4 mx-auto"},h4=h("div",{class:"pt-5 mb-[100px]"},"Ассортимент магазина:",-1),p4=h("div",{class:"text-[48px] mb-3 leading-[0.9] font-semibold md:text-[96px]","data-animated-block":"fadeInDown"},"33 982",-1),m4=h("div",{class:"text-[28px] text-white text-opacity-50 mb-10 font-semibold leading-[1.1] md:text-[36px]","data-animated-block":"fadeInDown"},"уникальных товаров для Вас и Ваших близких",-1),g4={"data-animated-block":"zoomIn"},_4=Ne({__name:"About",setup(n){return(e,t)=>{const i=ke("router-link");return J(),ne($e,null,[j(jC,{class:"text-white text-center"}),j(u4),j(HC),j(ag,null,{default:Me(()=>[h("div",f4,[h4,p4,m4,h("div",g4,[j(i,{to:{name:"catalog"},class:"app-button app-button--light"},{default:Me(()=>[_e("в каталог")]),_:1})])]),j(Ba,{class:"mt-20"})]),_:1}),j(lc),j(lc),j(lc),j(NC),j(gC)],64)}}}),v4={class:"py-12 lg:py-20"},x4={class:"centered"},b4={class:"max-w-[400px] text-center mx-auto"},y4=h("h1",null,"Страница не найдена",-1),S4=h("div",{class:"text-style-base mb-10"}," Пожалуйста, воспользуйтесь поиском по сайту или вернитесь на главную ",-1),M4=Ne({__name:"404",setup(n){return(e,t)=>{const i=ke("router-link");return J(),ne("main",v4,[h("div",x4,[h("div",b4,[y4,S4,j(i,{to:{name:"main"},class:"app-button app-button--secondary"},{default:Me(()=>[_e("На главную")]),_:1})])]),j(Ba,{class:"mt-10"})])}}});class E4{constructor(e){tn(this,"canvas",null);tn(this,"settings",{canvasClass:"rd-toast-canvas",groupContainerClass:"rd-toast-container",iconClass:"rd-toast-item-icon",showClass:"show",hideClass:"hide",toastClass:"rd-toast-item",toastContentClass:"rd-toast-item-content",icon:"",type:"info",position:"bottom-right",duration:5e3,hideOnClick:!1});this.settings={...this.settings,...e},this.init()}show(e="info",t="",i={}){var l,c;const s={...this.settings,...i,type:e},r=(l=this.canvas)==null?void 0:l.querySelector(`.${this.settings.groupContainerClass}.position-${s.position}`),o=this.createToast(t,s);if(r)return r.append(o),o;const a=this.createContainer(s);return a.append(o),(c=this.canvas)==null||c.append(a),o}drop(e,t={}){const i={...this.settings,...t};this.removeToast(e,i)}createToast(e,t){const i=document.createElement("div"),s=[t.toastClass||"",`type-${t.type}`,`position-${t.position}`||"",t.showClass||""];i.classList.add(...s),i.innerHTML=`<div class="${t.toastContentClass}">${e}</div>`,t.icon&&i.insertAdjacentHTML("afterbegin",`<div class="${t.iconClass}">${t.icon}</div>`);const r=setTimeout(()=>{this.removeToast(i,t)},t.duration);return t.hideOnClick&&i.addEventListener("click",o=>{clearTimeout(r),this.removeToast(i,t)}),i}removeToast(e,t){t.showClass&&e.classList.remove(t.showClass),t.hideClass&&e.classList.add(t.hideClass);let i=getComputedStyle(e).getPropertyValue("animation-duration");setTimeout(()=>{e.remove()},parseFloat(i)*1e3)}createContainer(e){const t=document.createElement("div");return t.classList.add(this.settings.groupContainerClass,`position-${e.position}`),t}init(){const e=document.querySelector(`.${this.settings.canvasClass}`);if(e){this.canvas=e;return}this.canvas=document.createElement("div"),this.canvas.classList.add(this.settings.canvasClass),document.body.append(this.canvas)}}const Rs=new E4({hideOnClick:!0,position:"bottom-right"}),T4={class:"py-12 lg:py-20"},w4={class:"centered"},A4=h("h1",null,"Заголовок H1",-1),C4=h("h2",null,"Заголовок H2",-1),R4=h("h3",null,"Заголовок H3",-1),L4=h("h4",null,"Заголовок H4",-1),P4=h("h5",null,"Заголовок H5",-1),I4=h("h6",null,"Заголовок H6",-1),D4=h("br",null,null,-1),N4={class:"flex flex-wrap items-center gap-4"},U4={type:"button",class:"app-button app-button--dark"},O4=ct('<br><p class="text-style-base"> Lorem ipsum dolor sit amet consectetur, adipisicing elit. Sapiente ea hic iste, ipsa quod delectus porro obcaecati odio odit ratione alias, nostrum voluptatum nisi aspernatur. Sit id nobis nesciunt neque. </p><p class="text-style-base"> Lorem ipsum dolor sit amet consectetur, adipisicing elit. Sapiente ea hic iste, ipsa quod delectus porro obcaecati odio odit ratione alias, nostrum voluptatum nisi aspernatur. Sit id nobis nesciunt neque. </p><div class="flex items-center flex-wrap gap-3 mb-10"><a href="#" class="app-button app-button--primary">Кнопка</a><a href="#" class="app-button app-button--secondary">Кнопка</a><a href="#" class="app-button app-button--dark">Кнопка</a><div class="p-3 bg-brand rounded-full"><a href="#" class="app-button app-button--light">Кнопка на фоне</a></div><button class="app-button app-button--dark disabled">Кнопка</button></div><div class="font-bold mb-4">Округлые иконки</div><div class="flex flex-wrap items-center gap-3 mb-10"><div class="rounded-icon"><div class="svg-icon"><svg><use xlink:href="#cart"></use></svg></div></div><div class="rounded-icon"><div class="svg-icon"><svg><use xlink:href="#user"></use></svg></div></div><div class="rounded-icon"><div class="svg-icon"><svg><use xlink:href="#heart-filled"></use></svg></div></div></div><div class="font-bold mb-4">Округлые иконки на темном фоне</div><div class="flex flex-wrap items-center gap-3 mb-10"><div class="flex flex-wrap items-center p-3 gap-3 bg-dark rounded-full"><div class="rounded-icon rounded-icon--light"><div class="svg-icon"><svg><use xlink:href="#geo"></use></svg></div></div><div class="rounded-icon rounded-icon--light"><div class="svg-icon"><svg><use xlink:href="#close"></use></svg></div></div><div class="rounded-icon rounded-icon--light"><div class="svg-icon"><svg><use xlink:href="#heart"></use></svg></div></div></div></div><div class="font-bold mb-4">Элементы форм</div><div class="mb-4 max-w-[400px]"><input type="text" class="app-form-control" placeholder="Текстовое поле"></div><div class="mb-4 max-w-[400px]"><input type="text" class="app-form-control is-error" placeholder="Текстовое поле"></div><div class="mb-4 flex gap-4 items-center"><div class="app-checkmark"><input type="radio" checked name="demo"><div class="svg-icon"><svg><use xlink:href="#radio"></use></svg></div></div><div class="app-checkmark"><input type="radio" name="demo"><div class="svg-icon"><svg><use xlink:href="#radio"></use></svg></div></div><div class="app-checkmark"><input type="checkbox"><div class="svg-icon"><svg><use xlink:href="#checkmark"></use></svg></div></div><div class="app-checkmark"><input type="radio" checked name="demo2" disabled><div class="svg-icon"><svg><use xlink:href="#radio"></use></svg></div></div><div class="app-checkmark"><input type="checkbox" checked disabled><div class="svg-icon"><svg><use xlink:href="#checkmark"></use></svg></div></div></div>',12),k4=Ne({__name:"Styles",setup(n){function e(){Rs.show("info","Обычное уведомление"),Rs.show("success","Успешное уведомление"),Rs.show("warning","Предупреждающее уведомление"),Rs.show("error","Уведомление об ошибке")}return(t,i)=>{const s=Os("modal-call");return J(),ne("main",T4,[h("div",w4,[A4,C4,R4,L4,P4,I4,D4,h("p",N4,[is((J(),ne("button",U4,[_e("Модальное окно")])),[[s,{name:"testModal"}]]),h("button",{type:"button",class:"app-button app-button--secondary",onClick:e},"Уведомления")]),O4])])}}});async function F4(){ymaps.ready(()=>{const n=new ymaps.Map("contacts-map",{center:[59.94422,30.354145],zoom:12,controls:[]}),e=new ymaps.Placemark([59.94422,30.354145],{balloonContent:"",iconCaption:""},{iconLayout:"default#imageWithContent",iconImageOffset:[-15,-15],iconImageHref:"img/geo-marker.svg",iconImageSize:[30,30]});n.geoObjects.add(e),n.behaviors.disable("scrollZoom"),n.behaviors.disable("drag")})}const B4={class:"py-12 lg:py-20 relative overflow-hidden"},H4=h("div",{class:"three-lamp three-lamp--main-right"},null,-1),z4=h("div",{class:"three-lamp three-lamp--main-left"},null,-1),V4={class:"centered"},G4={class:"font-semibold text-center flex flex-col items-center max-w-[540px] mx-auto"},$4=ct('<div class="text-base font-normal mb-20 lg:mb-32">Контактная информация:</div><a class="text-[28px] leading-[1.1] tracking-[-0.8px] lg:text-[48px]" href="tel:88126678226">8 (812) 667-82-26</a><div class="text-dark text-opacity-40 text-[14px] tracking-[-0.28px]">пн-пт: 9.00-19.00; сб-вс: выходные</div><a class="mt-3 text-[28px] leading-[1.1] tracking-[-0.8px] lg:text-[48px]" href="mailto:osvetim@mail.com"> osvetim@mail.com </a><div class="mt-3 text-[20px] lg:text-[28px] leading-[1.0]"> г. Москва, Волоколамское шоссе, д.103, ТЦ &quot;Гвоздь&quot;, 3 этаж, 33. </div>',5),W4={class:"mt-20 app-button app-button--secondary"},X4=ct('<div class="mt-10 flex justify-center items-center flex-wrap gap-1 lg:mt-20"><a href="#" class="rounded-icon"><div class="svg-icon"><svg><use xlink:href="#vk"></use></svg></div></a><a href="#" class="rounded-icon"><div class="svg-icon"><svg><use xlink:href="#inst"></use></svg></div></a><a href="#" class="rounded-icon"><div class="svg-icon"><svg><use xlink:href="#tg"></use></svg></div></a></div>',1),j4=h("div",{id:"contacts-map",class:"bg-neutral grayscale",style:{height:"520px",width:"100%"}},null,-1),q4=Ne({__name:"Contacts",setup(n){return ks(()=>{F4()}),(e,t)=>{const i=Os("modal-call");return J(),ne($e,null,[h("main",B4,[H4,z4,h("div",V4,[h("div",G4,[$4,is((J(),ne("button",W4,[_e("написать нам")])),[[i,{name:"callbackModal"}]]),X4])])]),j4],64)}}}),Y4={},K4={class:"py-12 lg:py-20"},Z4=ct('<div class="centered"><h1 class="lg:mb-10">Публичный договор-оферта</h1><p class="text-[18px] lg:text-[20px] font-semibold"> Публичный договор оферты не требует подписания и имеет точно такую же юридическую силу, как и «обыкновенный» подписанный договор в соответствии с Гражданским Кодексом Российской Федерации.<br><br> Настоящий договор между Интернет-магазином «Большой свет», именуемым в дальнейшем «Продавец» и пользователем услуг Интернет-Магазина, именуемым в дальнейшем «Покупатель» определяет условия приобретения товаров через сайт интернет-магазина https://sdlsvetmarket.ru </p><br><br><div class="text-style-base"><h6>1. Общие положения</h6><p> 1.1. ООО «Большой свет» публикует настоящий договор купли-продажи, являющийся публичным договором - офертой (предложением) в адрес физических лиц в соответствии со ст. 435 и пунктом 2 статьи 437 Гражданского Кодекса Российской Федерации (далее - ГК РФ).<br> 1.2. Настоящая публичная оферта (именуемая в дальнейшем «Оферта») определяет все существенные условия договора между ООО «Большой свет» и лицом, акцептовавшим Оферту.<br> 1.3. Настоящий договор заключается между Покупателем и Интернет-магазином в момент оформления заказа.<br> 1.4. Оферта может быть акцептована (принята) любым физическим лицом, имеющим намерение приобрести товары, реализуемые ООО «Большой свет» через Интернет-магазин, расположенный на сайте https://sdlsvetmarket.ru<br> 1.5. Покупатель безоговорочно принимает все условия, содержащиеся в оферте в целом (т.е. в полном объеме и без исключений).<br> 1.6. В случае принятия условий настоящего договора (т.е. публичной оферты Интернет-магазина), физическое лицо, производящее акцепт оферты, становится Покупателем.<br> 1.7. Акцептом является получение Продавцом сообщения о намерении физического лица приобрести товар на условиях, предложенных Продавцом.<br> 1.8. Оферта, все приложения к ней, а также вся дополнительная информация о товарах ООО «Большой свет», опубликована на сайте https://sdlsvetmarket.ru </p><br><h6>2. Статус интернет-магазина «Большой свет» (https://sdlsvetmarket.ru)</h6><p> 2.1. Интернет-магазин является собственностью ООО «Большой свет» и предназначен для организации дистанционного способа продажи товаров через сеть Интернет.<br> 2.2. Интернет-магазин не требует от Покупателя специальных действий для использования ресурса Интернет-магазина для просмотра товара, расчета и оформления заказа, таких как регистрация или заключение договора на пользование ресурсом Интернет-магазина.<br> 2.3. Интернет-магазин не несет ответственности за содержание и достоверность информации, предоставленной Покупателем при оформлении заказа. </p><br><h6>3. Статус покупателя</h6><p> 3.1. Покупатель несет ответственность за достоверность предоставленной при оформлении заказа информации, и ее чистоту от претензий третьих лиц.<br> 3.2. Использование ресурса Интернет-магазина для просмотра и выбора товара, а так же для оформления заказа является для Покупателя безвозмездным.<br> 3.3. Товар приобретается Покупателем исключительно для личных, семейных, домашних нужд, не связанных с осуществлением предпринимательской деятельности.<br></p><br><h6>4. Предмет оферты</h6><p> 4.1. Продавец, на основании заказов Покупателя, продаёт Покупателю товар в соответствии с условиями и по ценам, установленным Продавцом в оферте и приложениях к ней.<br> 4.2. Доставка товаров, заказанных и оплаченных Покупателем, осуществляется Продавцом или отправляется Почтой России либо доставляется курьерскими службами. Покупателю при оформлении заказа предоставляется право выбора способа доставки.<br> 4.3. К отношениям между Покупателем и Продавцом применяются положения ГК РФ о розничной купле-продаже (§ 2 глава 30), Закон РФ «О защите прав потребителей» от 07.02.1992 №2300-1, а также иные нормативные правовые акты, принятые в соответствии с ними. <br> 4.4. Физическое или юридическое лицо считается принявшим все условия оферты (акцепт оферты) и приложений к ней в полном объеме и без исключений с момента получения Продавцом сообщения о намерении Покупателя приобрести товар на условиях, предложенных Продавцом. В случае акцепта оферты физическое лицо считается заключившим с Продавцом договор купли-продажи заказанных товаров и приобретает статус Покупателя. </p><br><h6>5. Порядок заключения договора купли-продажи</h6><p> 5.1. Покупатель может оформить заказ самостоятельно на сайте Интернет-магазина, либо через менеджера по телефонам и другим контактным данным, указанным на сайте, на условиях Договора купли-продажи (публичной оферты Интернет-магазина).<br> 5.2. При оформлении заказа в Интернет-магазине, Покупатель обязан предоставить о себе информацию: <ul class="list-disc my-3 pl-4"><li>Ф.И.О. Покупателя Товара;</li><li>Адрес доставки Товара;</li><li>Контактный телефон и электронную почту Покупателя Товара.</li></ul> 5.3. Волеизъявление Покупателя осуществляется посредством внесения последним соответствующих данных в форму заказа в Интернет-магазине, либо подачей заявки через менеджера Интернет-магазина или по E-mail. </p><br><h6>6. Информация о товаре</h6><p> 6.1. Товар представлен на сайте через фото-образцы. Каждый фото-образец сопровождается текстовой информацией: наименованием, ценой и описанием товара.<br> 6.2. Все информационные материалы, представленные в Интернет-магазине, носят справочный характер и не могут в полной мере передавать информацию о свойствах и характеристиках товара, включая цвета, размеры и формы. В случае возникновения у Покупателя вопросов, касающихся свойств и характеристик товара.<br> 6.3. По просьбе Покупателя менеджер интернет-магазина обязан предоставить (по телефону или посредством электронной почты) прочую информацию, необходимую и достаточную, с точки зрения Покупателя, для принятия им решения о покупке товара.<br> 6.4. Покупатель уведомлен о том, что приобретая товар со скидкой, установленной в связи с его недостатками (дефектами), он лишается права ссылаться на них в дальнейшем. </p><br><h6>7. Порядок приобретения товара</h6><p> 7.1. Покупатель вправе оформить заказ на любой товар, представленный в Интернет-магазине. Каждый товар может быть заказан в любом количестве. Исключения из указанного правила указаны в описании каждого товара в случае проведения акций, снятия товара с продажи и т.п.<br> 7.2. Заказ может быть оформлен Покупателем по телефонам, указанным на сайте, или оформлен самостоятельно на сайте.<br> 7.3. После оформления заказа Продавец подтверждает заказ Покупателя путем отправления на e-mail Покупателя информации, подтверждающий принятие заказа, с указанием наименования, цены выбранного товара и общей суммы заказа или менеджер Интернет-магазина связывается с Покупателем по телефону. </p><br><h6>8. Цена товара и скидки</h6><p> 8.1. Цена товара в Интернет-магазине указана в рублях РФ за единицу товара.<br> 8.2. Указанная на сайте цена товара может быть изменена Интернет-магазином в одностороннем порядке, при этом цена на заказанный и оплаченный Покупателем товар изменению не подлежит.<br> 8.3. Полная стоимость заказа состоит из каталожной стоимости товара и стоимости доставки.<br> 8.4. На товары с маркировкой PRO* скидки не предоставляются.<br> 8.5. На товары, участвующие в акциях, скидки не предоставляются. </p><br><h6>9. Оплата товара</h6><p> 9.1. Способы и порядок оплаты товара указаны на сайте в разделе «Оплата и доставка». При необходимости порядок и условия оплаты заказанного товара оговариваются Покупателем с менеджером Интернет-магазина.<br> 9.2. При безналичной форме оплаты Покупатель обязан оплатить выставленный счет в течении двух банковских дней. В случае не оплаты заказ аннулируется. При безналичной форме оплаты обязанность Покупателя по уплате цены товара считается исполненной с момента зачисления соответствующих денежных средств на расчетный счет, указанный Продавцом.<br> 9.3. Покупатель оплачивает заказ любым способом, выбранным в Интернет-магазине.<br> 9.4. Расчеты Сторон при оплате заказа осуществляются в российских рублях. </p><br><h6>10. Доставка товаров</h6><p> 10.1. Способы, порядок и сроки доставки товара указаны на сайте в разделе «Оплата и доставка».<br> 10.2. Доставка товара Курьером: при доставке товар вручается Покупателю или Представителю, право собственности и риск случайной гибели, утраты или повреждения товара переходит с Продавца на Покупателя с момента передачи товара Покупателю или Представителю.<br> 10.3. Вы можете получить ваш заказ в ближайшем отделении почты России. При оформлении заказа укажите точный адрес и получателя посылки (ФИО). Доставка почтой России осуществляется при полной предоплате или наложенным платежом с предварительной оплатой доставки товара. Стоимость доставки рассчитывается во время оформления заказа. Доставка товара Почтой России: право собственности и риск случайной гибели, утраты или повреждения товара переходит с Продавца на Покупателя с момента передачи товара Покупателю в Отделении Почты России.<br> 10.4. Доставка почтой России осуществляется при полной предоплате или наложенным платежом с предварительной оплатой доставки товара. Во время оформления рассчитывается примерная стоимость доставки.<br> 10.5. Интернет-магазин «Большой свет» не несет ответственности за нарушение сроков доставки Почтой России, Курьерской службы EMS и других транспортных компаний.<br> 10.6. В соответствии с почтовыми правилами РФ, посылка/бандероль, не востребованная получателем в течение одного месяца, возвращается на адрес отправителя. Независимо от того, получали Вы извещение с почты или нет, Вам будет необходимо оплатить наши почтовые расходы в соответствии с п.3 ст. 497 ГК РФ и п.4 ст.26.1 Закона РФ о Защите прав потребителей. Осуществляя отправку заказа к нам в магазин, Вы автоматически соглашаетесь с его условиями. </p><br><h6>11. Возврат товара</h6><p> 11.1. В соответствии с Законом &quot;О защите прав потребителей&quot; (от 27.06.2011 N 162-ФЗ), покупатель может вернуть товар, приобретенный в нашем магазине.<br> 11.2. Потребитель не вправе отказаться от товара надлежащего качества, имеющего индивидуально-определенные свойства, если указанный товар может быть использован исключительно приобретающим его потребителем.<br> 11.3. При отказе потребителя от некачественного товара продавец должен возвратить ему денежную сумму, уплаченную потребителем по договору, за исключением расходов продавца на доставку от потребителя возвращенного товара, не позднее чем через десять дней со дня получения от потребителя некачественного товара.<br> 11.4. Возвращенный товар будет принят только тогда, когда он вернулся в оригинальной неповрежденной упаковке, с полным содержанием и доказательством покупки. Возврату не подлежат краски, тату машинки, машинки для перманентного макияжа и предметы гигиены надлежащего качества. </p><br><h6>12. Ответственность сторон</h6><p> 12.1. Стороны несут ответственность в соответствии с законодательством РФ.<br> 12.2. Продавец не несет ответственности за ущерб, причиненный Покупателю вследствие ненадлежащего использования им товаров, заказанных в Интернет-магазине.<br> 12.3. Стороны освобождаются от ответственности за неисполнение или ненадлежащее исполнение обязательств по договору на время действия непреодолимой силы.<br> 12.4. При обращении Покупателя по факту приобретения некачественного товара, Покупатель несет полную материальную ответственность перед Продавцом в том случае, если независимая экспертиза установит умышленное нанесение повреждений. В этом случае Покупатель в судебном порядке понесет расходы за оплату услуг независимой экспертизы, стоимости товара, доставки и морального ущерба. </p><br><h6>13. Прочие условия</h6><p> 13.1. К отношениям между Покупателем и Продавцом применяется законодательство Российской Федерации.<br> 13.2. В случае возникновения вопросов и претензий со стороны Покупателя, он должен обратиться по телефону: 8 (950) 007-04-13<br> 13.3. Настоящий договор вступает в силу с даты акцепта Покупателем настоящей оферты и действует до полного исполнения обязательств Сторонами.<br> 13.4. Все споры и разногласия, возникающие при исполнении Сторонами обязательств по настоящему договору, решаются путем переговоров. В случае невозможности их устранения, Стороны имеют право обратиться за судебной защитой своих интересов.<br> 13.5. Интернет-магазин оставляет за собой право расширять и сокращать товарное предложение на сайте, регулировать доступ к покупке любых товаров, а также приостанавливать или прекращать продажу любых товаров по своему собственному усмотрению. </p><br><h6>14. Адрес и реквизиты продавца</h6><p> Полное наименование: Общество с ограниченной ответственностью «Большой свет»<br> Сокращенное наименование: ООО «Большой свет»<br> Юридический адрес: 194355, Российская Федерация, г. Санкт-Петербург, ул. Композиторов, д. 12, литер А, пом. 54-Н<br> Часы работы: пн-пт 10:00–20:00; сб,вс 11:00–18:00<br> Почтовый адрес: 194355, Российская Федерация, г. Санкт-Петербург, ул. Композиторов, д. 12, литер А, пом. 54-Н<br> Телефон/факс: 8 (950) 007-04-14<br> ИНН/КПП: 7802707654 / 780201001<br> ОГРН: 1207800064746<br> Расчётный счет: 40702810155000046212<br> Корреспондентский счет: 30101810500000000653<br> БИК банка: 044030653<br> Банк: СЕВЕРО-ЗАПАДНЫЙ БАНК ПАО СБЕРБАНК г. Санкт-Петербург<br> Директор: Михайловская Ольга Андреевна (Действует на основании Устава)<br> E-mail:info@sdlgroup.ru </p></div></div>',1),J4=[Z4];function Q4(n,e){return J(),ne("main",K4,J4)}const eR=Pn(Y4,[["render",Q4]]),tR={},nR={class:"py-12 lg:py-20"},iR=ct('<div class="centered"><h1 class="lg:mb-10">Политика конфиденциальности</h1><p class="text-[18px] lg:text-[20px] font-semibold"> Публичный договор оферты не требует подписания и имеет точно такую же юридическую силу, как и «обыкновенный» подписанный договор в соответствии с Гражданским Кодексом Российской Федерации.<br><br> Настоящий договор между Интернет-магазином «Большой свет», именуемым в дальнейшем «Продавец» и пользователем услуг Интернет-Магазина, именуемым в дальнейшем «Покупатель» определяет условия приобретения товаров через сайт интернет-магазина https://sdlsvetmarket.ru </p><br><br><div class="text-style-base"><h6>1. Общие положения</h6><p> 1.1. ООО «Большой свет» публикует настоящий договор купли-продажи, являющийся публичным договором - офертой (предложением) в адрес физических лиц в соответствии со ст. 435 и пунктом 2 статьи 437 Гражданского Кодекса Российской Федерации (далее - ГК РФ).<br> 1.2. Настоящая публичная оферта (именуемая в дальнейшем «Оферта») определяет все существенные условия договора между ООО «Большой свет» и лицом, акцептовавшим Оферту.<br> 1.3. Настоящий договор заключается между Покупателем и Интернет-магазином в момент оформления заказа.<br> 1.4. Оферта может быть акцептована (принята) любым физическим лицом, имеющим намерение приобрести товары, реализуемые ООО «Большой свет» через Интернет-магазин, расположенный на сайте https://sdlsvetmarket.ru<br> 1.5. Покупатель безоговорочно принимает все условия, содержащиеся в оферте в целом (т.е. в полном объеме и без исключений).<br> 1.6. В случае принятия условий настоящего договора (т.е. публичной оферты Интернет-магазина), физическое лицо, производящее акцепт оферты, становится Покупателем.<br> 1.7. Акцептом является получение Продавцом сообщения о намерении физического лица приобрести товар на условиях, предложенных Продавцом.<br> 1.8. Оферта, все приложения к ней, а также вся дополнительная информация о товарах ООО «Большой свет», опубликована на сайте https://sdlsvetmarket.ru </p><br><h6>2. Статус интернет-магазина «Большой свет» (https://sdlsvetmarket.ru)</h6><p> 2.1. Интернет-магазин является собственностью ООО «Большой свет» и предназначен для организации дистанционного способа продажи товаров через сеть Интернет.<br> 2.2. Интернет-магазин не требует от Покупателя специальных действий для использования ресурса Интернет-магазина для просмотра товара, расчета и оформления заказа, таких как регистрация или заключение договора на пользование ресурсом Интернет-магазина.<br> 2.3. Интернет-магазин не несет ответственности за содержание и достоверность информации, предоставленной Покупателем при оформлении заказа. </p><br><h6>3. Статус покупателя</h6><p> 3.1. Покупатель несет ответственность за достоверность предоставленной при оформлении заказа информации, и ее чистоту от претензий третьих лиц.<br> 3.2. Использование ресурса Интернет-магазина для просмотра и выбора товара, а так же для оформления заказа является для Покупателя безвозмездным.<br> 3.3. Товар приобретается Покупателем исключительно для личных, семейных, домашних нужд, не связанных с осуществлением предпринимательской деятельности.<br></p><br><h6>4. Предмет оферты</h6><p> 4.1. Продавец, на основании заказов Покупателя, продаёт Покупателю товар в соответствии с условиями и по ценам, установленным Продавцом в оферте и приложениях к ней.<br> 4.2. Доставка товаров, заказанных и оплаченных Покупателем, осуществляется Продавцом или отправляется Почтой России либо доставляется курьерскими службами. Покупателю при оформлении заказа предоставляется право выбора способа доставки.<br> 4.3. К отношениям между Покупателем и Продавцом применяются положения ГК РФ о розничной купле-продаже (§ 2 глава 30), Закон РФ «О защите прав потребителей» от 07.02.1992 №2300-1, а также иные нормативные правовые акты, принятые в соответствии с ними. <br> 4.4. Физическое или юридическое лицо считается принявшим все условия оферты (акцепт оферты) и приложений к ней в полном объеме и без исключений с момента получения Продавцом сообщения о намерении Покупателя приобрести товар на условиях, предложенных Продавцом. В случае акцепта оферты физическое лицо считается заключившим с Продавцом договор купли-продажи заказанных товаров и приобретает статус Покупателя. </p><br><h6>5. Порядок заключения договора купли-продажи</h6><p> 5.1. Покупатель может оформить заказ самостоятельно на сайте Интернет-магазина, либо через менеджера по телефонам и другим контактным данным, указанным на сайте, на условиях Договора купли-продажи (публичной оферты Интернет-магазина).<br> 5.2. При оформлении заказа в Интернет-магазине, Покупатель обязан предоставить о себе информацию: <ul class="list-disc my-3 pl-4"><li>Ф.И.О. Покупателя Товара;</li><li>Адрес доставки Товара;</li><li>Контактный телефон и электронную почту Покупателя Товара.</li></ul> 5.3. Волеизъявление Покупателя осуществляется посредством внесения последним соответствующих данных в форму заказа в Интернет-магазине, либо подачей заявки через менеджера Интернет-магазина или по E-mail. </p><br><h6>6. Информация о товаре</h6><p> 6.1. Товар представлен на сайте через фото-образцы. Каждый фото-образец сопровождается текстовой информацией: наименованием, ценой и описанием товара.<br> 6.2. Все информационные материалы, представленные в Интернет-магазине, носят справочный характер и не могут в полной мере передавать информацию о свойствах и характеристиках товара, включая цвета, размеры и формы. В случае возникновения у Покупателя вопросов, касающихся свойств и характеристик товара.<br> 6.3. По просьбе Покупателя менеджер интернет-магазина обязан предоставить (по телефону или посредством электронной почты) прочую информацию, необходимую и достаточную, с точки зрения Покупателя, для принятия им решения о покупке товара.<br> 6.4. Покупатель уведомлен о том, что приобретая товар со скидкой, установленной в связи с его недостатками (дефектами), он лишается права ссылаться на них в дальнейшем. </p><br><h6>7. Порядок приобретения товара</h6><p> 7.1. Покупатель вправе оформить заказ на любой товар, представленный в Интернет-магазине. Каждый товар может быть заказан в любом количестве. Исключения из указанного правила указаны в описании каждого товара в случае проведения акций, снятия товара с продажи и т.п.<br> 7.2. Заказ может быть оформлен Покупателем по телефонам, указанным на сайте, или оформлен самостоятельно на сайте.<br> 7.3. После оформления заказа Продавец подтверждает заказ Покупателя путем отправления на e-mail Покупателя информации, подтверждающий принятие заказа, с указанием наименования, цены выбранного товара и общей суммы заказа или менеджер Интернет-магазина связывается с Покупателем по телефону. </p><br><h6>8. Цена товара и скидки</h6><p> 8.1. Цена товара в Интернет-магазине указана в рублях РФ за единицу товара.<br> 8.2. Указанная на сайте цена товара может быть изменена Интернет-магазином в одностороннем порядке, при этом цена на заказанный и оплаченный Покупателем товар изменению не подлежит.<br> 8.3. Полная стоимость заказа состоит из каталожной стоимости товара и стоимости доставки.<br> 8.4. На товары с маркировкой PRO* скидки не предоставляются.<br> 8.5. На товары, участвующие в акциях, скидки не предоставляются. </p><br><h6>9. Оплата товара</h6><p> 9.1. Способы и порядок оплаты товара указаны на сайте в разделе «Оплата и доставка». При необходимости порядок и условия оплаты заказанного товара оговариваются Покупателем с менеджером Интернет-магазина.<br> 9.2. При безналичной форме оплаты Покупатель обязан оплатить выставленный счет в течении двух банковских дней. В случае не оплаты заказ аннулируется. При безналичной форме оплаты обязанность Покупателя по уплате цены товара считается исполненной с момента зачисления соответствующих денежных средств на расчетный счет, указанный Продавцом.<br> 9.3. Покупатель оплачивает заказ любым способом, выбранным в Интернет-магазине.<br> 9.4. Расчеты Сторон при оплате заказа осуществляются в российских рублях. </p><br><h6>10. Доставка товаров</h6><p> 10.1. Способы, порядок и сроки доставки товара указаны на сайте в разделе «Оплата и доставка».<br> 10.2. Доставка товара Курьером: при доставке товар вручается Покупателю или Представителю, право собственности и риск случайной гибели, утраты или повреждения товара переходит с Продавца на Покупателя с момента передачи товара Покупателю или Представителю.<br> 10.3. Вы можете получить ваш заказ в ближайшем отделении почты России. При оформлении заказа укажите точный адрес и получателя посылки (ФИО). Доставка почтой России осуществляется при полной предоплате или наложенным платежом с предварительной оплатой доставки товара. Стоимость доставки рассчитывается во время оформления заказа. Доставка товара Почтой России: право собственности и риск случайной гибели, утраты или повреждения товара переходит с Продавца на Покупателя с момента передачи товара Покупателю в Отделении Почты России.<br> 10.4. Доставка почтой России осуществляется при полной предоплате или наложенным платежом с предварительной оплатой доставки товара. Во время оформления рассчитывается примерная стоимость доставки.<br> 10.5. Интернет-магазин «Большой свет» не несет ответственности за нарушение сроков доставки Почтой России, Курьерской службы EMS и других транспортных компаний.<br> 10.6. В соответствии с почтовыми правилами РФ, посылка/бандероль, не востребованная получателем в течение одного месяца, возвращается на адрес отправителя. Независимо от того, получали Вы извещение с почты или нет, Вам будет необходимо оплатить наши почтовые расходы в соответствии с п.3 ст. 497 ГК РФ и п.4 ст.26.1 Закона РФ о Защите прав потребителей. Осуществляя отправку заказа к нам в магазин, Вы автоматически соглашаетесь с его условиями. </p><br><h6>11. Возврат товара</h6><p> 11.1. В соответствии с Законом &quot;О защите прав потребителей&quot; (от 27.06.2011 N 162-ФЗ), покупатель может вернуть товар, приобретенный в нашем магазине.<br> 11.2. Потребитель не вправе отказаться от товара надлежащего качества, имеющего индивидуально-определенные свойства, если указанный товар может быть использован исключительно приобретающим его потребителем.<br> 11.3. При отказе потребителя от некачественного товара продавец должен возвратить ему денежную сумму, уплаченную потребителем по договору, за исключением расходов продавца на доставку от потребителя возвращенного товара, не позднее чем через десять дней со дня получения от потребителя некачественного товара.<br> 11.4. Возвращенный товар будет принят только тогда, когда он вернулся в оригинальной неповрежденной упаковке, с полным содержанием и доказательством покупки. Возврату не подлежат краски, тату машинки, машинки для перманентного макияжа и предметы гигиены надлежащего качества. </p><br><h6>12. Ответственность сторон</h6><p> 12.1. Стороны несут ответственность в соответствии с законодательством РФ.<br> 12.2. Продавец не несет ответственности за ущерб, причиненный Покупателю вследствие ненадлежащего использования им товаров, заказанных в Интернет-магазине.<br> 12.3. Стороны освобождаются от ответственности за неисполнение или ненадлежащее исполнение обязательств по договору на время действия непреодолимой силы.<br> 12.4. При обращении Покупателя по факту приобретения некачественного товара, Покупатель несет полную материальную ответственность перед Продавцом в том случае, если независимая экспертиза установит умышленное нанесение повреждений. В этом случае Покупатель в судебном порядке понесет расходы за оплату услуг независимой экспертизы, стоимости товара, доставки и морального ущерба. </p><br><h6>13. Прочие условия</h6><p> 13.1. К отношениям между Покупателем и Продавцом применяется законодательство Российской Федерации.<br> 13.2. В случае возникновения вопросов и претензий со стороны Покупателя, он должен обратиться по телефону: 8 (950) 007-04-13<br> 13.3. Настоящий договор вступает в силу с даты акцепта Покупателем настоящей оферты и действует до полного исполнения обязательств Сторонами.<br> 13.4. Все споры и разногласия, возникающие при исполнении Сторонами обязательств по настоящему договору, решаются путем переговоров. В случае невозможности их устранения, Стороны имеют право обратиться за судебной защитой своих интересов.<br> 13.5. Интернет-магазин оставляет за собой право расширять и сокращать товарное предложение на сайте, регулировать доступ к покупке любых товаров, а также приостанавливать или прекращать продажу любых товаров по своему собственному усмотрению. </p><br><h6>14. Адрес и реквизиты продавца</h6><p> Полное наименование: Общество с ограниченной ответственностью «Большой свет»<br> Сокращенное наименование: ООО «Большой свет»<br> Юридический адрес: 194355, Российская Федерация, г. Санкт-Петербург, ул. Композиторов, д. 12, литер А, пом. 54-Н<br> Часы работы: пн-пт 10:00–20:00; сб,вс 11:00–18:00<br> Почтовый адрес: 194355, Российская Федерация, г. Санкт-Петербург, ул. Композиторов, д. 12, литер А, пом. 54-Н<br> Телефон/факс: 8 (950) 007-04-14<br> ИНН/КПП: 7802707654 / 780201001<br> ОГРН: 1207800064746<br> Расчётный счет: 40702810155000046212<br> Корреспондентский счет: 30101810500000000653<br> БИК банка: 044030653<br> Банк: СЕВЕРО-ЗАПАДНЫЙ БАНК ПАО СБЕРБАНК г. Санкт-Петербург<br> Директор: Михайловская Ольга Андреевна (Действует на основании Устава)<br> E-mail:info@sdlgroup.ru </p></div></div>',1),sR=[iR];function rR(n,e){return J(),ne("main",nR,sR)}const oR=Pn(tR,[["render",rR]]),aR={},lR={class:"py-12 lg:py-20"},cR={class:"centered"},dR=h("div",{class:"grid gap-5 xl:grid-cols-2"},[h("div",{class:"p-5 bg-neutral-100 rounded-lg flex items-start xl:p-8"},[h("div",{class:"flex-none mr-5 w-11 h-11 rounded-full border border-neutral flex items-center justify-center font-semibold uppercase text-[16px]"},"1"),h("div",{class:"flex-1 min-w-0"},[h("div",{class:"font-semibold mb-5 leading-[1.0] lg:text-[28px]"},"Курьерская доставка:"),h("div",{class:"mb-5"},[h("div",{class:"font-semibold mb-1.5 lg:text-[20px]"},"Доставка по Санкт-Петербургу(в пределах КАД):"),h("div",{class:"text-style-base"},[_e(" 500 ₽ — при заказе от 1 000 ₽ до 3 000 ₽"),h("br"),_e(" Бесплатно — при заказе от 3 000 ₽ ")])]),h("div",null,[h("div",{class:"font-semibold mb-1.5 lg:text-[20px]"},"Доставка по Ленинградской области:"),h("div",{class:"text-style-base"},[_e(" 1000 ₽ — при заказе от 1000 до 10 000 ₽"),h("br"),_e(" Бесплатно — при заказе от 10 000 ₽ ")])])])]),h("div",{class:"p-5 bg-neutral-100 rounded-lg flex items-start xl:p-8"},[h("div",{class:"flex-none mr-5 w-11 h-11 rounded-full border border-neutral flex items-center justify-center font-semibold uppercase text-[16px]"},"2"),h("div",{class:"flex-1 min-w-0"},[h("div",{class:"font-semibold mb-5 leading-[1.0] lg:text-[28px]"},"Пункты выдачи СДЭК:"),h("div",{class:"mb-5"},[h("div",{class:"font-semibold mb-1.5 lg:text-[20px]"},"Доставка по Санкт-Петербургу(в пределах КАД):"),h("div",{class:"text-style-base"}," Бесплатно — при заказе от 3 000 ₽ ")]),h("div",null,[h("div",{class:"font-semibold mb-1.5 lg:text-[20px]"},"Доставка по России:"),h("div",{class:"text-style-base"}," Бесплатно — при заказе от 10 000 ₽ ")])])])],-1),uR=h("div",{class:"grid gap-5 xl:grid-cols-2"},[h("div",{class:"p-5 bg-neutral-100 rounded-lg flex items-start xl:p-8"},[h("div",{class:"flex-none mr-5 w-11 h-11 rounded-full border border-neutral flex items-center justify-center font-semibold uppercase text-[16px]"},"1"),h("div",{class:"flex-1 min-w-0"},[h("div",{class:"font-semibold leading-[1.0] lg:text-[28px]"},"Оплата при получении наличными или картой")])]),h("div",{class:"p-5 bg-neutral-100 rounded-lg flex items-start xl:p-8"},[h("div",{class:"flex-none mr-5 w-11 h-11 rounded-full border border-neutral flex items-center justify-center font-semibold uppercase text-[16px]"},"2"),h("div",{class:"flex-1 min-w-0"},[h("div",{class:"font-semibold leading-[1.0] lg:text-[28px]"},"По предоплате на сайте через PayAnyWay")])])],-1),fR=h("p",null,' Возврат товара возможен в течении 14 календарных дней со дня покупки (в соответствии со статьей 26.1. Закона "О защите прав потребителей"), при условии полного сохранения товарного вида (нет следов использования, не нарушена целостность и комплектность упаковки). ',-1),hR=h("p",null," Возврат товара надлежащего качества возможен лишь при условии сохранения его потребительских свойств и товарного вида (отсутствие следов эксплуатации и носки, наличие оригинальной и неповрежденной упаковки и ярлыков). ",-1),pR=h("p",null," Возврат осуществляется на основании заполненного заявления и товарного чека, подтверждающего факт и условия покупки. ",-1),mR=h("p",null," Срок возврата денежных средств зависит от способа возврата и составляет не более 10 дней с даты поступления возвращенного товара на склад Продавца вместе с заполненным Покупателем заявлением на возврат. ",-1),gR=h("p",null," Информация о гарантийном сроке на конкретную модель, предоставляемая производителем, прилагается к товару. ",-1),_R=h("p",null," Товар с браком/неверной комплектации должен быть возвращен нам с оригинальными ярлыками и в оригинальной упаковке. ",-1),vR=h("p",null," В случае возврата товара ненадлежащего качества, мы берем на себя расходы по пересылке товара обратно нам. ",-1),xR=h("p",null," Если возвращаемый товар был предоплачен, возврат осуществляется на ту карту, с которой была предоплата или на тот qiwi кошелек, на который был выставлен счет. ",-1),bR=h("p",null," Некоторые категории товаров не подлежат возврату и обмену, согласно постановлению Правительства РФ от 19 января 1998 г. №55. ",-1),yR=h("div",{class:"lg:columns-2"},[h("div",{class:"opacity-80 mb-3 text-[14px] md:text-base lg:pr-5 lg:inline-block lg:w-full"},[h("div",{class:"font-semibold"},"Полное наименование:"),h("div",null,"Общество с ограниченной ответственностью «Большой свет»")]),h("div",{class:"opacity-80 mb-3 text-[14px] md:text-base lg:pr-5 lg:inline-block lg:w-full"},[h("div",{class:"font-semibold"},"Сокращенное наименование:"),h("div",null,"ООО «Большой свет»")]),h("div",{class:"opacity-80 mb-3 text-[14px] md:text-base lg:pr-5 lg:inline-block lg:w-full"},[h("div",{class:"font-semibold"},"Юридический адрес:"),h("div",null,"194355, Российская Федерация, г. Санкт-Петербург, ул. Композиторов, д. 12, литер А, пом. 54-Н:")]),h("div",{class:"opacity-80 mb-3 text-[14px] md:text-base lg:pr-5 lg:inline-block lg:w-full"},[h("div",{class:"font-semibold"},"Часы работы:"),h("div",null,"пн-пт 10:00–19:00; сб 12:00–18:00; воскресенье - выходной")]),h("div",{class:"opacity-80 mb-3 text-[14px] md:text-base lg:pr-5 lg:inline-block lg:w-full"},[h("div",{class:"font-semibold"},"Почтовый адрес:"),h("div",null,"194355, Российская Федерация, г. Санкт-Петербург, ул. Композиторов, д. 12, литер А, пом. 54-Н:")]),h("div",{class:"opacity-80 mb-3 text-[14px] md:text-base lg:pr-5 lg:inline-block lg:w-full"},[h("div",{class:"font-semibold"},"Телефон/факс:"),h("div",null,"8 (950) 007-04-14")]),h("div",{class:"opacity-80 mb-3 text-[14px] md:text-base lg:pr-5 lg:inline-block lg:w-full"},[h("div",{class:"font-semibold"},"ИНН/КПП:"),h("div",null,"7802707654 / 780201001")]),h("div",{class:"opacity-80 mb-3 text-[14px] md:text-base lg:pr-5 lg:inline-block lg:w-full"},[h("div",{class:"font-semibold"},"ОГРН:"),h("div",null,"1207800064746")]),h("div",{class:"opacity-80 mb-3 text-[14px] md:text-base lg:pr-5 lg:inline-block lg:w-full"},[h("div",{class:"font-semibold"},"Расчётный счет:"),h("div",null,"40702810155000046212")]),h("div",{class:"opacity-80 mb-3 text-[14px] md:text-base lg:pr-5 lg:inline-block lg:w-full"},[h("div",{class:"font-semibold"},"Корреспондентский счет:"),h("div",null,"30101810500000000653")]),h("div",{class:"opacity-80 mb-3 text-[14px] md:text-base lg:pr-5 lg:inline-block lg:w-full"},[h("div",{class:"font-semibold"},"БИК банка:"),h("div",null,"044030653")]),h("div",{class:"opacity-80 mb-3 text-[14px] md:text-base lg:pr-5 lg:inline-block lg:w-full"},[h("div",{class:"font-semibold"},"Банк:"),h("div",null,"СЕВЕРО-ЗАПАДНЫЙ БАНК ПАО СБЕРБАНК г. Санкт-Петербург")]),h("div",{class:"opacity-80 mb-3 text-[14px] md:text-base lg:pr-5 lg:inline-block lg:w-full"},[h("div",{class:"font-semibold"},"Директор:"),h("div",null,"Михайловская Ольга Андреевна (Действует на основании Устава)")]),h("div",{class:"opacity-80 mb-3 text-[14px] md:text-base lg:pr-5 lg:inline-block lg:w-full"},[h("div",{class:"font-semibold"},"E-mail:"),h("div",null,"info@sdlgroup.ru")])],-1);function SR(n,e){const t=ke("Accordion"),i=ke("PickUpPoints");return J(),ne("main",lR,[h("div",cR,[j(t,null,{title:Me(()=>[_e("Информация о доставке")]),body:Me(()=>[dR]),_:1}),j(t,null,{title:Me(()=>[_e("Пункты выдачи в вашем городе")]),body:Me(({isOpen:s})=>[j(i,{"show-message":s},null,8,["show-message"])]),_:1}),j(t,null,{title:Me(()=>[_e("Информация об оплате")]),body:Me(()=>[uR]),_:1}),j(t,null,{title:Me(()=>[_e("Возврат")]),body:Me(()=>[fR,hR,pR,mR,gR,_R,vR,xR,bR]),_:1}),j(t,null,{title:Me(()=>[_e("Реквизиты")]),body:Me(()=>[yR]),_:1})])])}const MR=Pn(aR,[["render",SR]]),ER={class:"py-12 lg:py-20"},TR={class:"centered"},wR=h("h1",null,"Новости:",-1),AR={class:"articles-list grid gap-6 md:grid-cols-2 xl:grid-cols-3"},CR={class:"text-[22px] font-semibold leading-[1.0] mb-4 md:text-[28px]"},RR={class:"text-style-base"},LR={class:"pt-5 mt-auto flex items-end justify-between gap-2.5 md:flex-col md:items-start xl:flex-row xl:items-end xl:pt-20"},PR=["datetime"],IR={class:"w-[194px]"},DR=["src"],NR=Ne({__name:"ArticlesList",setup(n){const e=Ct([{id:1,title:"Итоги выставки INTERLIGHT RUSSIA 2023",text:"Выражаем искреннюю благодарность за то, то посетили наш стенд на международной выставке INTERLIGHT RUSSIA 2023!",date:"27.11.2023",img:"article-pic.png"},{id:2,title:"Каталог LOFT IT осень-зима 2023",text:"Уважаемые партнеры! Спешим сообщить вам о том, что мы выпустили новый каталог LOFT IT осень-зима 2023. Ознакомиться с электронной версией можно по ссылке или в разделе «Каталог» нашего сайта.",date:"27.11.2023",img:"article-pic.png"},{id:3,title:"Итоги MosBuild 2023",text:"Уважаемые партнеры! Спешим сообщить вам о том, что мы выпустили новый каталог LOFT IT осень-зима 2023. Ознакомиться с электронной версией можно по ссылке или в разделе «Каталог» нашего сайта.",date:"27.11.2023",img:"article-pic.png"},{id:4,title:"Итоги выставки INTERLIGHT RUSSIA 2023",text:"Уважаемые партнеры! Спешим сообщить вам о том, что мы выпустили новый каталог LOFT IT осень-зима 2023. Ознакомиться с электронной версией можно по ссылке или в разделе «Каталог» нашего сайта.",date:"27.11.2023",img:"article-pic.png"},{id:5,title:"Итоги выставки INTERLIGHT RUSSIA 2023",text:"Уважаемые партнеры! Спешим сообщить вам о том, что мы выпустили новый каталог LOFT IT осень-зима 2023. Ознакомиться с электронной версией можно по ссылке или в разделе «Каталог» нашего сайта.",date:"27.11.2023",img:"article-pic.png"},{id:6,title:"Итоги выставки INTERLIGHT RUSSIA 2023",text:"Уважаемые партнеры! Спешим сообщить вам о том, что мы выпустили новый каталог LOFT IT осень-зима 2023. Ознакомиться с электронной версией можно по ссылке или в разделе «Каталог» нашего сайта.",date:"27.11.2023",img:"article-pic.png"}]);return(t,i)=>{const s=ke("router-link"),r=ke("Pagination");return J(),ne("main",ER,[h("section",TR,[wR,h("div",AR,[(J(!0),ne($e,null,Rt(e.value,(o,a)=>(J(),ne("article",{class:"articles-item flex flex-col relative bg-neutral-100 p-7 transition-all duration-300 hover:shadow-lg",key:a},[j(s,{class:"absolute inset-0 z-[5]",to:`articles/${o.id}`},null,8,["to"]),h("div",CR,_t(o.title),1),h("div",RR,_t(o.text),1),h("div",LR,[h("time",{class:"text-[12px] uppercase font-medium opacity-50 xl:order-last",datetime:o.date},_t(o.date),9,PR),h("div",IR,[h("img",{class:"max-w-full",src:`${Fe(z)}img/${o.img}`,alt:""},null,8,DR)])])]))),128))]),j(r,{class:"mt-12 justify-center"})])])}}}),UR={class:"py-12 lg:py-20"},OR={class:"centered"},kR={class:"lg:flex"},FR=h("div",{class:"pb-10 lg:pb-0 lg:w-1/2 lg:pr-24"},[h("h1",{class:"mb-3"},"Итоги выставки INTERLIGHT RUSSIA 2023"),h("time",{class:"block text-[12px] font-medium mb-8 opacity-50"},"27.11.2023"),h("div",{class:"text-style-base"},[h("p",null," На нашем сайте вы можете приобрести качественные осветительные приборы от известных брендов домой или в офис. У нас вы найдете как минималистичные светильники, так и лампы оригинальной формы и дизайна. При помощи удобного поиска вы можете подобрать подходящий вам светильник на определенную мощность, площадь освещения, напряжение, тип цоколя с конкретными дизайнерскими решениями. На странице каждого товара представлены подробные технические характеристики, а также фотографии, чтобы вы могли понять, подойдет ли прибор к вашему интерьеру. "),h("p",null," Наш ассортимент включает проверенную продукцию из России, Италии, Испании, Германии, Австрии, Венгрии, Чехии, США и других стран. Мы регулярно обновляем каталог и добавляем новые позиции. Как только у брендов, с которыми мы сотрудничаем, появляется новая продукция, она сразу же доступна к продаже в нашем интернет-магазине. На каждый товар действует гарантия. ")])],-1),BR={class:"lg:w-1/2"},HR={class:"swiper js-article-item-slider"},zR={class:"swiper-wrapper"},VR=["src"],GR=h("div",{class:"slider-pagination"},null,-1),$R=Ne({__name:"ArticlesItem",setup(n){return Ur(JA),(e,t)=>(J(),ne("main",UR,[h("div",OR,[h("article",kR,[FR,h("div",BR,[h("div",HR,[h("div",zR,[(J(),ne($e,null,Rt(3,i=>h("div",{class:"swiper-slide",key:i},[h("img",{src:`${Fe(z)}img/article-item-slide.png`,alt:""},null,8,VR)])),64))]),GR])])])])]))}}),WR={class:"centered"},XR={class:"h-full flex flex-col p-5 bg-white rounded-lg lg:max-w-[610px] lg:p-10"},jR=h("h1",null,[_e("Добро пожаловать "),h("br"),_e("в OSVETIM")],-1),qR={class:"mb-8 text-dark text-opacity-40 font-semibold lg:mb-12"},YR=ct('<div class="mt-auto flex flex-wrap items-center gap-1"><a href="#" class="rounded-icon"><div class="svg-icon"><svg><use xlink:href="#vk"></use></svg></div></a><a href="#" class="rounded-icon"><div class="svg-icon"><svg><use xlink:href="#inst"></use></svg></div></a><a href="#" class="rounded-icon"><div class="svg-icon"><svg><use xlink:href="#tg"></use></svg></div></a></div>',1),KR=Ne({__name:"Login",setup(n){return(e,t)=>{const i=ke("router-link"),s=ke("LoginForm");return J(),ne("div",{class:"py-8 flex-1 flex bg-no-repeat bg-cover bg-center bg-dark",style:fn({"background-image":`url(${Fe(z)}img/login-bg.png)`})},[h("div",WR,[h("div",XR,[jR,h("div",qR,[_e(" В первый раз здесь? "),j(i,{to:{name:"registration"},class:"text-inherit hover:underline"},{default:Me(()=>[_e("Зарегистрируйтесь")]),_:1})]),j(s),YR])])],4)}}}),ZR={class:"centered"},JR={class:"h-full flex flex-col p-5 bg-white rounded-lg lg:max-w-[610px] lg:p-10"},QR=h("h1",null,"Восстановление пароля",-1),e5=h("div",{class:"mb-8 text-dark text-opacity-40 font-semibold lg:mb-12"}," Укажите адрес эл. почты, который вы использовали при оформлении заказов. Мы вышлем вам инструкцию по восстановлению пароля. ",-1),t5=ct('<div class="mt-auto flex flex-wrap items-center gap-1"><a href="#" class="rounded-icon"><div class="svg-icon"><svg><use xlink:href="#vk"></use></svg></div></a><a href="#" class="rounded-icon"><div class="svg-icon"><svg><use xlink:href="#inst"></use></svg></div></a><a href="#" class="rounded-icon"><div class="svg-icon"><svg><use xlink:href="#tg"></use></svg></div></a></div>',1),n5=Ne({__name:"PasswordRecovery",setup(n){return(e,t)=>{const i=ke("PasswordRecoveryForm");return J(),ne("div",{class:"py-8 flex-1 flex bg-no-repeat bg-cover bg-center bg-dark",style:fn({"background-image":`url(${Fe(z)}img/login-bg.png)`})},[h("div",ZR,[h("div",JR,[QR,e5,j(i),t5])])],4)}}}),i5={class:"centered"},s5={class:"h-full flex flex-col p-5 bg-white rounded-lg lg:max-w-[610px] lg:p-10"},r5=h("h1",null,"Регистрация",-1),o5={class:"mb-8 text-dark text-opacity-40 font-semibold lg:mb-12"},a5=ct('<div class="mt-auto flex flex-wrap items-center gap-1"><a href="#" class="rounded-icon"><div class="svg-icon"><svg><use xlink:href="#vk"></use></svg></div></a><a href="#" class="rounded-icon"><div class="svg-icon"><svg><use xlink:href="#inst"></use></svg></div></a><a href="#" class="rounded-icon"><div class="svg-icon"><svg><use xlink:href="#tg"></use></svg></div></a></div>',1),l5=Ne({__name:"Registration",setup(n){return(e,t)=>{const i=ke("router-link"),s=ke("RegistrationForm");return J(),ne("div",{class:"py-8 flex-1 flex bg-no-repeat bg-cover bg-center bg-dark",style:fn({"background-image":`url(${Fe(z)}img/registration-bg.png)`})},[h("div",i5,[h("div",s5,[r5,h("div",o5,[_e(" Уже есть аккаунт ? "),j(i,{to:{name:"login"},class:"text-inherit hover:underline"},{default:Me(()=>[_e("Авторизуйтесь")]),_:1})]),j(s),a5])])],4)}}}),c5={class:"flex items-center gap-4 text-dark select-none"},d5=["onClick"],u5={class:"text-[20px] font-bold text-center min-w-[22px]"},f5=["onClick"],vg=Ne({__name:"CountButtons",props:{buttonsClass:{default:""}},setup(n){const e=Ln({count:1});function t(){e.count++}function i(){e.count>1&&e.count--}return(s,r)=>(J(),ne("div",c5,[h("div",{class:Dt(["rounded-icon text-dark text-[18px] font-bold",s.buttonsClass]),onClick:Jt(i,["stop","prevent"])},"-",10,d5),h("div",u5,_t(e.count),1),h("div",{class:Dt(["rounded-icon text-dark text-[18px] font-bold",s.buttonsClass]),onClick:Jt(t,["stop","prevent"])},"+",10,f5)]))}}),h5={class:"py-12 lg:py-20"},p5={class:"centered"},m5=h("h1",null,"Корзина:",-1),g5={class:"xl:flex"},_5={class:"xl:flex-1 xl:min-w-0 xl:pr-14"},v5={class:"cart-items-list space-y-10"},x5={class:"group relative mr-5 text-center w-[72px] md:w-[200px]"},b5=h("a",{href:"#",class:"absolute inset-0 z-[5]"},null,-1),y5=["src"],S5={class:"flex-1 min-w-0 md:border-b border-neutral pb-4"},M5=ct('<div class="lg:flex mb-4"><div class="text-[14px] font-semibold leading-[1.0] md:text-[20px] lg:max-w-[60%]"> Коннектор прямой (соединители в комплекте) для магнитного шинопровода Over 135032 </div><div class="text-[20px] mt-4 font-semibold leading-[1.2] lg:flex-none lg:text-right lg:ml-auto lg:mt-0"><div>990 ₽</div><div class="text-dark text-opacity-40 line-through">3 990 ₽</div></div></div><div class="text-[10px] font-medium text-dark text-opacity-40 uppercase mb-4 md:text-[12px]">Артикул: LOFT1714W-BL</div>',2),E5={class:"flex items-center gap-4 select-none relative z-10 -ml-[94px] md:ml-auto"},T5=ct('<div class="flex items-center gap-2 ml-auto"><div class="rounded-icon"><div class="svg-icon"><svg><use xlink:href="#heart-filled"></use></svg></div></div><div class="rounded-icon"><div class="svg-icon"><svg><use xlink:href="#close"></use></svg></div></div></div>',1),w5={class:"pt-8 xl:pt-0 xl:w-[380px] xl:flex-none"},A5={class:"p-5 rounded-lg bg-neutral-100 xl:p-10 xl:sticky xl:top-[134px]"},C5=ct('<div class="h4">Ваш заказ:</div><div class="flex justify-between items-end mb-1"><div class="text-[14px] text-dark text-opacity-50 font-semibold">Товары (4):</div><div class="h4 mb-0">34 328 ₽</div></div><div class="flex justify-between items-end mb-6"><div class="text-[14px] text-dark text-opacity-50 font-semibold">Скидка:</div><div class="h6 mb-0 text-brand">-2 000 ₽</div></div><div class="flex justify-between items-end mb-1"><div class="text-[14px] text-dark text-opacity-50 font-semibold">Вес:</div><div class="h6 mb-0">5,97 кг</div></div><div class="flex justify-between items-end mb-6"><div class="text-[14px] text-dark text-opacity-50 font-semibold">Габариты:</div><div class="h6 mb-0">0,03308 м3</div></div><div class="mb-7"><form action="#"><input type="text" class="app-form-control" placeholder="Промокод"></form></div>',6),R5=Ne({__name:"Cart",setup(n){return(e,t)=>{const i=ke("router-link");return J(),ne("main",h5,[h("div",p5,[m5,h("div",g5,[h("div",_5,[h("div",v5,[(J(),ne($e,null,Rt(4,s=>h("div",{key:s,class:"cart-item flex border-b border-neutral md:border-none"},[h("div",x5,[b5,h("img",{class:"transition-all duration-300 object-cover inline-block group-hover:drop-shadow-lg",src:`${Fe(z)}img/cart-pic-1.png`,alt:""},null,8,y5)]),h("div",S5,[M5,h("div",E5,[j(vg),T5])])])),64))])]),h("div",w5,[h("div",A5,[C5,h("div",null,[j(i,{class:"app-button app-button--dark",to:{name:"order"}},{default:Me(()=>[_e(" перейти к оформлению ")]),_:1})])])])])])])}}}),L5={},P5={class:"py-12 lg:py-20"},I5={class:"centered"},D5=h("h1",null,"Оформление заказа:",-1),N5={class:"xl:flex"},U5={class:"xl:flex-1 xl:min-w-0 xl:pr-14"},O5={class:"xl:w-[380px] xl:flex-none"},k5={class:"p-5 rounded-lg bg-neutral-100 xl:p-10 xl:sticky xl:top-[134px]"},F5=ct('<div class="h4">Ваш заказ:</div><div class="flex justify-between items-end mb-1"><div class="text-[14px] text-dark text-opacity-50 font-semibold">Товары (4):</div><div class="h4 mb-0">34 328 ₽</div></div><div class="flex justify-between items-end mb-6"><div class="text-[14px] text-dark text-opacity-50 font-semibold">Скидка:</div><div class="h6 mb-0 text-brand">-2 000 ₽</div></div><div class="flex justify-between items-end mb-1"><div class="text-[14px] text-dark text-opacity-50 font-semibold">Вес:</div><div class="h6 mb-0">5,97 кг</div></div><div class="flex justify-between items-end mb-6"><div class="text-[14px] text-dark text-opacity-50 font-semibold">Габариты:</div><div class="h6 mb-0">0,03308 м3</div></div>',5),B5={class:"pr-8 md:pr-12"};function H5(n,e){const t=ke("OrderForm"),i=ke("router-link"),s=ke("PickUpPoints"),r=ke("AppModal");return J(),ne($e,null,[h("main",P5,[h("div",I5,[D5,h("div",N5,[h("div",U5,[j(t)]),h("div",O5,[h("div",k5,[F5,h("div",null,[j(i,{class:"app-button app-button--secondary",to:{name:"order-success"}},{default:Me(()=>[_e("Оформить заказ")]),_:1})])])])])])]),j(r,{name:"pickUpPointsModal",width:1024},{default:Me(({isOpen:o})=>[h("div",B5,[j(s,{selectPickUpPoint:!0,"show-message":o},null,8,["show-message"])])]),_:1})],64)}const z5=Pn(L5,[["render",H5]]),V5={},G5={class:"text-[16px] lg:text-[20px] font-semibold leading-[1.1]"};function $5(n,e){const t=ke("router-link");return J(),ne("ul",G5,[h("li",null,[j(t,{class:"[&.is-active-link]:text-dark block py-2.5 border-b border-neutral text-stone",to:{name:"orders-history"}},{default:Me(()=>[_e("История заказов ")]),_:1})]),h("li",null,[j(t,{class:"[&.is-active-link]:text-dark block py-2.5 border-b border-neutral text-stone",to:{name:"personal-data"}},{default:Me(()=>[_e("Мои данные")]),_:1})]),h("li",null,[j(t,{class:"[&.is-active-link]:text-dark block py-2.5 border-b border-neutral text-stone",to:{name:"personal-password"}},{default:Me(()=>[_e("Пароль")]),_:1})])])}const pu=Pn(V5,[["render",$5]]),W5={},X5=h("div",{class:"text-[28px] pr-2 font-semibold tracking-[-1.08px]"},"История заказов",-1),j5=h("div",{class:"rounded-icon"},[h("div",{class:"svg-icon -rotate-90"},[h("svg",null,[h("use",{"xlink:href":"#arrow-down"})])])],-1),q5=h("div",{class:"text-[28px] pr-2 font-semibold tracking-[-1.08px]"},"Мои данные",-1),Y5=h("div",{class:"rounded-icon"},[h("div",{class:"svg-icon -rotate-90"},[h("svg",null,[h("use",{"xlink:href":"#arrow-down"})])])],-1),K5=h("div",{class:"text-[28px] pr-2 font-semibold tracking-[-1.08px]"},"Пароль",-1),Z5=h("div",{class:"rounded-icon"},[h("div",{class:"svg-icon -rotate-90"},[h("svg",null,[h("use",{"xlink:href":"#arrow-down"})])])],-1);function J5(n,e){const t=ke("router-link");return J(),ne($e,null,[j(t,{to:{name:"orders-history"},class:"flex items-center justify-between py-2.5 border-b border-neutral [&.is-active-link]:text-brand"},{default:Me(()=>[X5,j5]),_:1}),j(t,{to:{name:"personal-data"},class:"flex items-center justify-between py-2.5 border-b border-neutral [&.is-active-link]:text-brand"},{default:Me(()=>[q5,Y5]),_:1}),j(t,{to:{name:"personal-password"},class:"flex items-center justify-between py-2.5 border-b border-neutral [&.is-active-link]:text-brand"},{default:Me(()=>[K5,Z5]),_:1})],64)}const mu=Pn(W5,[["render",J5]]),Q5={class:"order-item flex"},e6={class:"relative text-center mr-5 w-[72px] md:w-[200px] md:mb-0 group"},t6=h("a",{href:"#",class:"absolute inset-0 z-[5]"},null,-1),n6=["src"],i6={class:"flex-1 flex flex-col items-start min-w-0 border-b border-neutral [&.is-active-link]:text-brand pb-5"},s6={class:"mb-5 lg:flex lg:w-full"},r6={class:"text-[14px] font-semibold leading-[1.0] md:text-[28px]"},o6=h("div",{class:"mt-2.5 text-[10px] font-medium text-dark text-opacity-40 md:text-[14px]"},"доставлен 25 сентября 2023",-1),a6=h("div",{class:"text-[14px] mt-4 font-semibold leading-[1.2] md:text-[20px] lg:flex-none lg:text-right lg:ml-auto lg:mt-0"},[h("div",null,"990 ₽"),h("div",{class:"text-dark text-opacity-40 line-through"},"3 990 ₽")],-1),l6={key:0,class:"cursor-pointer text-dark text-opacity-50 border-b border-dark border-opacity-50 text-[14px] font-semibold leading-[1.1] mt-auto md:text-[20px]"},c6={key:1,class:"text-[20px] font-semibold leading-[1.2] mt-auto"},xg=Ne({__name:"OrderItem",props:{placement:{default:"page"}},setup(n){const e=n;return(t,i)=>{const s=Os("modal-call");return J(),ne("div",Q5,[h("div",e6,[t6,h("img",{class:"transition-all duration-300 object-cover inline-block group-hover:drop-shadow-lg",src:`${Fe(z)}img/cart-pic-1.png`,alt:""},null,8,n6)]),h("div",i6,[h("div",s6,[h("div",null,[h("div",r6," Заказ №"+_t(Date.now()),1),o6]),a6]),e.placement==="page"?is((J(),ne("div",l6,[_e("Состав заказа")])),[[s,{name:"orderDetailsModal",orderID:Date.now()}]]):Ei("",!0),e.placement==="modal"?(J(),ne("div",c6,_t(Fe(lg)(1,10))+" шт",1)):Ei("",!0)])])}}}),d6={class:"py-12 lg:py-20"},u6={class:"centered"},f6=h("h1",null,"История заказов:",-1),h6={class:"xl:flex"},p6={class:"mb-10 xl:w-[380px] xl:flex-none xl:mb-0"},m6={class:"hidden p-5 rounded-lg bg-neutral-100 xl:p-10 xl:sticky xl:top-[134px] xl:block"},g6={class:"xl:hidden"},_6={class:"xl:flex-1 xl:min-w-0 xl:pl-14"},v6={class:"orders-items-list space-y-10"},x6={class:"mt-8"},b6=Ne({__name:"OrdersHistory",setup(n){return(e,t)=>(J(),ne("main",d6,[h("div",u6,[f6,h("div",h6,[h("div",p6,[h("nav",m6,[j(pu)]),h("div",g6,[j(mu)])]),h("div",_6,[h("div",v6,[(J(),ne($e,null,Rt(4,i=>j(xg,{key:i})),64))]),h("div",x6,[h("a",{href:"#",onClick:t[0]||(t[0]=Jt(i=>e.$router.go(-1),["prevent"])),class:"app-button app-button--secondary w-full sm:w-auto xl:hidden"},"вернуться назад")])])])])]))}}),y6={},S6={class:"overflow-hidden relative py-12 flex-1 flex flex-col lg:py-20"},M6=h("div",{class:"three-lamp three-lamp--main-right"},null,-1),E6=h("div",{class:"three-lamp three-lamp--main-left"},null,-1),T6={class:"text-center max-w-[270px] m-auto"},w6=h("h1",null,"Спасибо за заказ!",-1),A6=h("p",{class:"text-style-base"},"Наш менеджер свяжется с вами в ближайшее время.",-1),C6=ct('<div class="flex justify-center items-center flex-wrap mt-4 gap-1"><a href="#" class="rounded-icon"><div class="svg-icon"><svg><use xlink:href="#vk"></use></svg></div></a><a href="#" class="rounded-icon"><div class="svg-icon"><svg><use xlink:href="#inst"></use></svg></div></a><a href="#" class="rounded-icon"><div class="svg-icon"><svg><use xlink:href="#tg"></use></svg></div></a></div>',1);function R6(n,e){const t=ke("router-link");return J(),ne("main",S6,[M6,E6,h("div",T6,[w6,A6,j(t,{class:"app-button app-button--secondary",to:{name:"main"}},{default:Me(()=>[_e("На главную")]),_:1})]),C6])}const L6=Pn(y6,[["render",R6]]),P6={class:"py-12 lg:py-20"},I6={class:"centered"},D6=h("h1",null,"Мои данные:",-1),N6={class:"xl:flex"},U6={class:"mb-10 xl:w-[380px] xl:flex-none xl:mb-0"},O6={class:"hidden p-5 rounded-lg bg-neutral-100 xl:p-10 xl:sticky xl:top-[134px] xl:block"},k6={class:"xl:hidden"},F6={class:"xl:flex-1 xl:min-w-0 xl:pl-14"},B6=Ne({__name:"PersonalData",setup(n){return(e,t)=>{const i=ke("PersonalDataForm");return J(),ne("main",P6,[h("div",I6,[D6,h("div",N6,[h("div",U6,[h("nav",O6,[j(pu)]),h("div",k6,[j(mu)])]),h("div",F6,[j(i)])])])])}}}),H6={class:"py-12 lg:py-20"},z6={class:"centered"},V6=h("h1",null,"Пароль:",-1),G6={class:"xl:flex"},$6={class:"mb-10 xl:w-[380px] xl:flex-none xl:mb-0"},W6={class:"hidden p-5 rounded-lg bg-neutral-100 xl:p-10 xl:sticky xl:top-[134px] xl:block"},X6={class:"xl:hidden"},j6={class:"xl:flex-1 xl:min-w-0 xl:pl-14"},q6=Ne({__name:"PersonalPassword",setup(n){return(e,t)=>{const i=ke("PersonalPasswordForm");return J(),ne("main",H6,[h("div",z6,[V6,h("div",G6,[h("div",$6,[h("nav",W6,[j(pu)]),h("div",X6,[j(mu)])]),h("div",j6,[j(i)])])])])}}}),Y6={class:"py-12 lg:py-20"},K6={class:"centered"},Z6=h("div",{class:"flex flex-col gap-4 mb-8 md:flex-row md:items-center md:justify-between md:flex-wrap"},[h("h1",{class:"mb-0"},"Избранное:"),h("div",{class:"text-[16px] text-dark text-opacity-50 font-semibold md:text-[20px]"},"10 позиций")],-1),J6={class:"flex mb-5 md:justify-end"},Q6=Ne({__name:"Favorites",setup(n){return(e,t)=>{const i=ke("AppSort"),s=ke("Pagination");return J(),ne("main",Y6,[h("div",K6,[Z6,h("div",J6,[j(i,{"sort-items":[{text:"По популярности ↓",key:"popular",value:"desc",current:!0},{text:"По популярности ↑",key:"popular",value:"asc",current:!1},{text:"По цене ↓",key:"price",value:"desc",current:!1},{text:"По цене ↑",key:"price",value:"asc",current:!1}]})]),j(Cr,{list:Fe($T),columns:4},null,8,["list"]),j(s,{class:"justify-center mt-10 lg:mt-14"})])])}}}),eL={class:"pb-2.5 border-b border-neutral-alpha"},tL=h("div",{class:"text-[12px] leading-[1.4] uppercase mb-5 text-dark"},"Параметры:",-1),nL={class:"text-[20px] font-semibold leading-[1.1] tracking-[-0.8px] space-y-1"},iL=["onClick"],sL={key:0,class:"py-3"},rL={key:1,class:"grid grid-cols-2 gap-4 py-3"},oL=h("label",{class:"inline-flex items-center gap-2"},[h("div",{class:"app-checkmark w-[22px] h-[22px]"},[h("input",{type:"checkbox",name:"some_checkbox"}),h("div",{class:"svg-icon"},[h("svg",null,[h("use",{"xlink:href":"#checkmark"})])])]),h("div",null,"Выбор 1")],-1),aL=h("label",{class:"inline-flex items-center gap-2"},[h("div",{class:"app-checkmark w-[22px] h-[22px]"},[h("input",{type:"checkbox",name:"some_checkbox"}),h("div",{class:"svg-icon"},[h("svg",null,[h("use",{"xlink:href":"#checkmark"})])])]),h("div",null,"Выбор 2")],-1),lL=h("label",{class:"inline-flex items-center gap-2"},[h("div",{class:"app-checkmark w-[22px] h-[22px]"},[h("input",{type:"checkbox",name:"some_checkbox"}),h("div",{class:"svg-icon"},[h("svg",null,[h("use",{"xlink:href":"#checkmark"})])])]),h("div",null,"Выбор 3")],-1),cL=h("label",{class:"inline-flex items-center gap-2"},[h("div",{class:"app-checkmark w-[22px] h-[22px]"},[h("input",{type:"checkbox",name:"some_checkbox"}),h("div",{class:"svg-icon"},[h("svg",null,[h("use",{"xlink:href":"#checkmark"})])])]),h("div",null,"Выбор 4")],-1),dL=[oL,aL,lL,cL],uL={key:2,class:"flex py-2 gap-4"},fL=h("div",{class:"flex-1 min-w-0"},[h("input",{class:"app-form-control",type:"text",placeholder:"от"})],-1),hL=h("div",{class:"flex-1 min-w-0"},[h("input",{class:"app-form-control",type:"text",placeholder:"до"})],-1),pL=[fL,hL],ep=Ne({__name:"CatalogFilters",setup(n){const e=Ln({select:""}),t=Ct([{name:"Тип лампы"},{name:"Стиль"},{name:"Цоколь"},{name:"Бренд"},{name:"Цена"},{name:"Материал"},{name:"Цветовая температура, К"},{name:"Световой поток, Лм"},{name:"Мощность лампы, W"},{name:"Количество ламп"},{name:"Напряжение, W"}]);return(i,s)=>{const r=ke("AppSelect"),o=ke("Details");return J(),ne("div",eL,[tL,h("div",nL,[(J(!0),ne($e,null,Rt(t.value,(a,l)=>(J(),Qi(o,null,{title:Me(({toggle:c})=>[h("div",{onClick:c,class:"cursor-pointer"},_t(a.name),9,iL)]),content:Me(()=>[l===0?(J(),ne("div",sL,[j(r,{modelValue:e.select,"onUpdate:modelValue":s[0]||(s[0]=c=>e.select=c),options:[{value:"",text:""},{value:"asc",text:"Пункт 1"},{value:"desc",text:"Пункт 2"},{value:"rating_asc",text:"Пункт 3"},{value:"rating_desc",text:"Пункт 4"},{value:"some_one",text:"Пункт 5"},{value:"some_two",text:"Пункт 6"}]},null,8,["modelValue"])])):l===1?(J(),ne("div",rL,dL)):(J(),ne("div",uL,pL))]),_:2},1024))),256))])])}}}),mL={class:"mb-10 pb-2.5 border-b border-neutral-alpha"},gL=h("div",{class:"text-[12px] leading-[1.4] uppercase mb-5 text-dark"},"Категории:",-1),_L={class:"text-[20px] font-semibold leading-[1.1] tracking-[-0.8px] space-y-1"},vL={href:"#",class:"text-dark decor-link"},xL={class:"text-[14px] text-dark text-opacity-40 ml-2"},bL=h("ul",{class:"px-5 py-2.5 text-[16px] font-semibold leading-[1.1] tracking-[-0.8px] space-y-1"},[h("li",{class:"flex items-center"},[h("a",{href:"#",class:"decor-link"},"Подвесные"),h("span",{class:"text-[14px] text-dark text-opacity-40 ml-2"},"270")]),h("li",{class:"flex items-center"},[h("a",{href:"#",class:"decor-link"},"Потолочные"),h("span",{class:"text-[14px] text-dark text-opacity-40 ml-2"},"13")]),h("li",{class:"flex items-center"},[h("a",{href:"#",class:"decor-link"},"Каскадные"),h("span",{class:"text-[14px] text-dark text-opacity-40 ml-2"},"455")]),h("li",{class:"flex items-center"},[h("a",{href:"#",class:"decor-link"},"Хрустальные"),h("span",{class:"text-[14px] text-dark text-opacity-40 ml-2"},"78")]),h("li",{class:"flex items-center"},[h("a",{href:"#",class:"decor-link"},"Большие"),h("span",{class:"text-[14px] text-dark text-opacity-40 ml-2"},"123")]),h("li",{class:"flex items-center"},[h("a",{href:"#",class:"decor-link"},"На штанге"),h("span",{class:"text-[14px] text-dark text-opacity-40 ml-2"},"4855")]),h("li",{class:"flex items-center"},[h("a",{href:"#",class:"decor-link"},"Светодиодные"),h("span",{class:"text-[14px] text-dark text-opacity-40 ml-2"},"1258")]),h("li",{class:"flex items-center"},[h("a",{href:"#",class:"decor-link"},"Кольца"),h("span",{class:"text-[14px] text-dark text-opacity-40 ml-2"},"7")])],-1),yL={class:"mb-10 pb-2.5 border-b border-neutral-alpha"},SL=h("div",{class:"text-[12px] leading-[1.4] uppercase mb-5 text-dark"},"Категории:",-1),ML={class:"text-[20px] font-semibold leading-[1.1] tracking-[-0.8px] space-y-1"},EL={href:"#",class:"text-dark decor-link"},TL={class:"text-[14px] text-dark text-opacity-40 ml-2"},wL=h("ul",{class:"px-5 py-2.5 text-[16px] font-semibold leading-[1.1] tracking-[-0.8px] space-y-1"},[h("li",{class:"flex items-center"},[h("a",{href:"#",class:"decor-link"},"Подвесные"),h("span",{class:"text-[14px] text-dark text-opacity-40 ml-2"},"270")]),h("li",{class:"flex items-center"},[h("a",{href:"#",class:"decor-link"},"Потолочные"),h("span",{class:"text-[14px] text-dark text-opacity-40 ml-2"},"13")]),h("li",{class:"flex items-center"},[h("a",{href:"#",class:"decor-link"},"Каскадные"),h("span",{class:"text-[14px] text-dark text-opacity-40 ml-2"},"455")]),h("li",{class:"flex items-center"},[h("a",{href:"#",class:"decor-link"},"Хрустальные"),h("span",{class:"text-[14px] text-dark text-opacity-40 ml-2"},"78")]),h("li",{class:"flex items-center"},[h("a",{href:"#",class:"decor-link"},"Большие"),h("span",{class:"text-[14px] text-dark text-opacity-40 ml-2"},"123")]),h("li",{class:"flex items-center"},[h("a",{href:"#",class:"decor-link"},"На штанге"),h("span",{class:"text-[14px] text-dark text-opacity-40 ml-2"},"4855")]),h("li",{class:"flex items-center"},[h("a",{href:"#",class:"decor-link"},"Светодиодные"),h("span",{class:"text-[14px] text-dark text-opacity-40 ml-2"},"1258")]),h("li",{class:"flex items-center"},[h("a",{href:"#",class:"decor-link"},"Кольца"),h("span",{class:"text-[14px] text-dark text-opacity-40 ml-2"},"7")])],-1),AL=Ne({__name:"CatalogAside",setup(n){const e=Ct([{name:"Люстры",count:"3671"},{name:"Светильники",count:"288"},{name:"Торшеры",count:"70"},{name:"Настенные светильники",count:"220"},{name:"Уличный свет",count:"70"},{name:"Настольные лампы",count:"758"},{name:"Трековое освещение",count:"2188"},{name:"Встраиваемые",count:"32"},{name:"Комплектующие",count:"7589"}]),t=Ct([{name:"Новинки",count:"48"},{name:"Распродажа",count:"54"}]);return(i,s)=>{const r=ke("Details");return J(),ne($e,null,[h("nav",mL,[gL,h("div",_L,[(J(!0),ne($e,null,Rt(e.value,o=>(J(),Qi(r,null,{title:Me(()=>[h("a",vL,_t(o.name),1),h("span",xL,_t(o.count),1)]),content:Me(()=>[bL]),_:2},1024))),256))])]),h("nav",yL,[SL,h("div",ML,[(J(!0),ne($e,null,Rt(t.value,o=>(J(),Qi(r,null,{title:Me(()=>[h("a",EL,_t(o.name),1),h("span",TL,_t(o.count),1)]),content:Me(()=>[wL]),_:2},1024))),256))])])],64)}}}),CL={class:"py-12 lg:py-20"},RL={class:"centered"},LL=h("div",{class:"flex flex-col gap-4 mb-8 md:flex-row md:items-center md:justify-between md:flex-wrap"},[h("h1",{class:"mb-0"},"Бра с плафонами:"),h("div",{class:"text-[16px] text-dark text-opacity-50 font-semibold md:text-[20px]"},"18 позиций")],-1),PL={class:"xl:flex xl:gap-5"},IL={class:"hidden xl:block xl:flex-none xl:w-[310px]"},DL={class:"xl:flex-1 xl:min-w-0"},NL={class:"flex mb-5 justify-between xl:justify-end"},UL={class:"w-[600px] max-w-full mx-auto"},OL=Ne({__name:"Catalog",setup(n){return(e,t)=>{const i=ke("MobileFiltersBurger"),s=ke("AppSort"),r=ke("Pagination"),o=ke("Offcanvas");return J(),ne($e,null,[h("main",CL,[h("div",RL,[LL,h("div",PL,[h("aside",IL,[j(AL),j(ep)]),h("div",DL,[h("div",NL,[j(i,{class:"xl:hidden"}),j(s,{dropdownClass:"right-0 origin-top-right","sort-items":[{text:"По популярности ↓",key:"popular",value:"desc",current:!0},{text:"По популярности ↑",key:"popular",value:"asc",current:!1},{text:"По цене ↓",key:"price",value:"desc",current:!1},{text:"По цене ↑",key:"price",value:"asc",current:!1}]})]),j(Cr,{list:Fe(YT),columns:3},null,8,["list"]),j(r,{class:"mt-10 lg:mt-14"})])])])]),j(o,{name:"mobileCatalogFilters"},{default:Me(()=>[h("div",UL,[j(ep)])]),_:1})],64)}}}),kL={class:"product-view py-12 lg:py-20"},FL={class:"centered"},BL={class:"mb-10 md:flex lg:mb-24"},HL={class:"flex-none md:w-[310px] lg:w-[400px] xl:w-[640px]"},zL={class:"swiper js-product-item-slider select-none"},VL=ct('<div class="pointer-events-none absolute top-4 right-4 flex items-center gap-2 z-[10]"><div class="rounded-icon"><div class="svg-icon svg-icon--nostyle"><svg><use xlink:href="#percent"></use></svg></div></div><div class="rounded-icon"><div class="svg-icon"><svg><use xlink:href="#spot"></use></svg></div></div></div>',1),GL={class:"swiper-wrapper"},$L={class:"relative flex items-center justify-center bg-neutral-100 h-full"},WL=["src"],XL=ct('<div class="slider-prev"><div class="svg-icon"><svg><use xlink:href="#arrow-left"></use></svg></div></div><div class="slider-next"><div class="svg-icon"><svg><use xlink:href="#arrow-right"></use></svg></div></div><div class="slider-pagination"></div>',3),jL={class:"pt-10 md:pt-0 md:min-w-0 md:pl-5 md:flex md:flex-1 md:flex-col"},qL=ct('<div class="mb-6 md:flex md:items-start"><h1 class="mb-0">Loft It Бра Eye LOFT1714W-BL</h1><div class="hidden lg:flex flex-none flex-col items-end md:pl-2"><div class="rounded-icon"><div class="svg-icon"><svg><use xlink:href="#heart-filled"></use></svg></div></div><div class="mt-5 text-[20px] leading-[1.2] font-semibold xl:text-[28px]">990 ₽</div><a href="#" class="text-[10px] underline">Нашли дешевле?</a></div></div><div class="mb-8 text-[12px] uppercase text-dark text-opacity-60 leading-[1.4]"><div>Артикул: LOFT1714W-BL</div><div>Штрихкод: 6961136016027</div></div><div class="mb-4"><div class="py-2 border-b border-neutral text-[14px] font-semibold leading-[1.1] tracking-[-0.28px] flex items-end justify-between lg:text-[20px]"><div class="text-dark text-opacity-50">Наличие (на складе):</div><div>5 шт.</div></div><div class="py-2 border-b border-neutral text-[14px] font-semibold leading-[1.1] tracking-[-0.28px] flex items-end justify-between lg:text-[20px]"><div class="text-dark text-opacity-50">Коллекция:</div><div>Eye</div></div><div class="py-2 border-b border-neutral text-[14px] font-semibold leading-[1.1] tracking-[-0.28px] flex items-end justify-between lg:text-[20px]"><div class="text-dark text-opacity-50">Производитель:</div><div>Loft it</div></div></div>',3),YL={href:"#",class:"underline self-start text-[14px] font-semibold leading-[1.1] tracking-[-0.28px] flex items-end justify-between lg:text-[20px]"},KL={class:"mt-auto pt-5 lg:pt-8"},ZL={class:"flex items-end gap-4 mb-5 text-dark text-opacity-50 text-[14px] leading-[1.3] lg:text-[20px] lg:font-semibold lg:gap-10 lg:mb-10"},JL=h("div",{class:"rounded-icon mr-auto lg:hidden"},[h("div",{class:"svg-icon"},[h("svg",null,[h("use",{"xlink:href":"#heart-filled"})])])],-1),QL=h("div",{class:"mb-2.5"},"Количество:",-1),eP=h("div",{class:"self-stretch"},[h("div",{class:"mb-2.5"},"Цена:"),h("div",{class:"text-[20px] text-dark font-semibold leading-[1.1] lg:text-[36px]"},"990 ₽")],-1),tP=h("div",{class:"flex flex-col items-stretch gap-2 lg:flex-row md:max-w-[80%] lg:max-w-none"},[h("button",{type:"button",class:"whitespace-nowrap app-button app-button--primary"},"Добавить в корзину"),h("button",{type:"button",class:"whitespace-nowrap app-button app-button--secondary"},"Купить в 1 клик")],-1),nP={id:"product-chars",class:"pt-5 border-t border-neutral-alpha"},iP=h("div",{class:"h1"},"Характеристики",-1),sP={class:"md:flex md:gap-5"},rP=h("div",{class:"md:flex-1 md:min-w-0"},[h("div",{class:"py-2 border-b border-neutral text-[14px] font-semibold leading-[1.1] tracking-[-0.28px] flex items-end justify-between lg:text-[20px]"},[h("div",{class:"text-dark text-opacity-50"},"Бренд:"),h("div",null,"Loft it ")]),h("div",{class:"py-2 border-b border-neutral text-[14px] font-semibold leading-[1.1] tracking-[-0.28px] flex items-end justify-between lg:text-[20px]"},[h("div",{class:"text-dark text-opacity-50"},"Стиль:"),h("div",null,"Хай-тек")]),h("div",{class:"py-2 border-b border-neutral text-[14px] font-semibold leading-[1.1] tracking-[-0.28px] flex items-end justify-between lg:text-[20px]"},[h("div",{class:"text-dark text-opacity-50"},"Страна производства:"),h("div",null,"Китай")]),h("div",{class:"py-2 border-b border-neutral text-[14px] font-semibold leading-[1.1] tracking-[-0.28px] flex items-end justify-between lg:text-[20px]"},[h("div",{class:"text-dark text-opacity-50"},"Коллекция:"),h("div",null,"Eye")])],-1),oP={class:"md:flex-1 md:min-w-0 hidden md:block"},aP=["src"],lP=h("h3",null,"Внешний вид",-1),cP=h("p",null," Lorem ipsum dolor sit amet consectetur, adipisicing elit. Reiciendis voluptas vero inventore et. Fuga fugiat hic ab soluta facere saepe cumque commodi adipisci. Eum tenetur neque qui quis libero veniam? ",-1),dP=h("h3",null,"Габариты",-1),uP=h("p",null," Lorem ipsum dolor sit amet consectetur, adipisicing elit. Reiciendis voluptas vero inventore et. Fuga fugiat hic ab soluta facere saepe cumque commodi adipisci. Eum tenetur neque qui quis libero veniam? ",-1),fP=h("h3",null,"Электрика",-1),hP=h("p",null," Lorem ipsum dolor sit amet consectetur, adipisicing elit. Reiciendis voluptas vero inventore et. Fuga fugiat hic ab soluta facere saepe cumque commodi adipisci. Eum tenetur neque qui quis libero veniam? ",-1),pP=h("h3",null,"Доп. информация",-1),mP=h("p",null," Lorem ipsum dolor sit amet consectetur, adipisicing elit. Reiciendis voluptas vero inventore et. Fuga fugiat hic ab soluta facere saepe cumque commodi adipisci. Eum tenetur neque qui quis libero veniam? ",-1),gP=h("h3",null,"Размер упаковки",-1),_P=h("p",null," Lorem ipsum dolor sit amet consectetur, adipisicing elit. Reiciendis voluptas vero inventore et. Fuga fugiat hic ab soluta facere saepe cumque commodi adipisci. Eum tenetur neque qui quis libero veniam? ",-1),vP={class:"mt-8 pt-5 border-t border-neutral-alpha lg:mt-20"},xP=h("div",{class:"flex flex-col items-start gap-4 mb-8 md:mb-14 md:items-center md:justify-between md:flex-row"},[h("div",{class:"h1 mb-0"},"Товары из коллекции"),h("a",{href:"#",class:"app-button app-button--secondary"},"Смотреть все")],-1),bP={class:"mt-8 pt-5 border-t border-neutral-alpha lg:mt-20"},yP=h("div",{class:"flex flex-col items-start gap-4 mb-8 md:mb-14 md:items-center md:justify-between md:flex-row"},[h("div",{class:"h1 mb-0"},"Товары из категории"),h("a",{href:"#",class:"app-button app-button--secondary"},"Смотреть все")],-1),SP=Ne({__name:"ProductView",setup(n){const e=Ct([`${z}img/product-pic-1.png`,`${z}img/product-pic-2.png`,`${z}img/product-pic-3.png`,`${z}img/product-pic-4.png`]);return Ur(e3),(t,i)=>{const s=ke("CountButtons"),r=ke("AppTabs"),o=Os("scroll-to");return J(),ne("main",kL,[h("div",FL,[h("div",BL,[h("div",HL,[h("div",zL,[VL,h("div",GL,[(J(!0),ne($e,null,Rt(e.value,(a,l)=>(J(),ne("div",{key:l,class:"swiper-slide h-auto"},[h("div",$L,[h("img",{src:a,alt:""},null,8,WL)])]))),128))]),XL])]),h("div",jL,[qL,is((J(),ne("a",YL,[_e("Все характеристики")])),[[o,{target:"#product-chars",offsetY:140}]]),h("div",KL,[h("div",ZL,[JL,h("div",null,[QL,j(s,{buttonsClass:"w-[24px] h-[24px] lg:w-[44px] lg:h-[44px]"})]),eP]),tP])])]),h("div",nP,[iP,j(r,{items:[{label:"Основные",key:"general"},{label:"Внешний вид",key:"view"},{label:"Габариты",key:"dimensions"},{label:"Электрика",key:"electrics"},{label:"Доп. информация",key:"add"},{label:"Размер упаковки",key:"packing_size"}]},{general:Me(()=>[h("div",sP,[rP,h("div",oP,[h("img",{src:`${Fe(z)}img/product-char-pic.png`,alt:""},null,8,aP)])])]),view:Me(()=>[lP,cP]),dimensions:Me(()=>[dP,uP]),electrics:Me(()=>[fP,hP]),add:Me(()=>[pP,mP]),packing_size:Me(()=>[gP,_P]),_:1},8,["items"])]),h("div",vP,[xP,j(Cr,{columns:4,list:Fe(WT)},null,8,["list"])]),h("div",bP,[yP,j(Cr,{columns:4,list:Fe(XT)},null,8,["list"])])])])}}}),MP=[{path:z,component:qh,children:[{path:"",name:"main",component:lC},{path:"about",name:"about",component:_4},{path:"login",name:"login",component:KR},{path:"registration",name:"registration",component:l5},{path:"password-recovery",name:"password-recovery",component:n5},{path:"catalog",name:"catalog",component:OL},{path:"catalog/:id",name:"product-item",component:SP},{path:"articles",name:"articles",component:NR},{path:"articles/:id",name:"articles-item",component:$R},{path:"delivery-and-payment",name:"delivery-and-payment",component:MR},{path:"contacts",name:"contacts",component:q4},{path:"public-offer",name:"public-offer",component:eR},{path:"privacy-policy",name:"privacy-policy",component:oR},{path:"favorites",name:"favorites",component:Q6},{path:"cart",name:"cart",component:R5},{path:"order",name:"order",component:z5},{path:"orders-history",name:"orders-history",component:b6},{path:"order-success",name:"order-success",component:L6},{path:"personal-data",name:"personal-data",component:B6},{path:"personal-password",name:"personal-password",component:q6},{path:"styles",name:"styles",component:k4}]},{path:"/:pathMatch(.*)*",component:qh,children:[{path:"",component:M4,name:"not-found"}]}],gu=ev({history:g0(),routes:MP,linkExactActiveClass:"is-active-link",scrollBehavior(){return{top:0}}});gu.beforeEach(()=>{_m()});gu.afterEach(()=>{setTimeout(()=>{iv(),qE()},300)});function tp(n,e){e.preventDefault();let t=document.querySelector(n.target),i=n.offsetY||0,s=+(t.getBoundingClientRect().top+window.scrollY-i);t&&window.scrollTo({top:s,behavior:"smooth"})}const EP={mounted(n,e){n.addEventListener("click",tp.bind(void 0,e.value))},unmounted(n,e){n.removeEventListener("click",tp.bind(void 0,e.value))}},Vn=Ct({});function _u(n){n&&Vn.value[n]!==void 0&&(Vn.value[n]=!Vn.value[n],document.body.classList[Vn.value[n]===!0?"add":"remove"]("is-modal-open"))}function Ha(n){n&&Vn.value[n]!==void 0&&(Vn.value[n]=!1),document.body.classList.remove("is-modal-open")}const ya=Ct(null);function np(n,e){e.preventDefault(),n.value.name&&_u(n.value.name),n.value.orderID&&(ya.value=+n.value.orderID)}const TP={mounted(n,e){n.addEventListener("click",np.bind(void 0,e))},unmounted(n,e){n.removeEventListener("click",np.bind(void 0,e))}},wP={},AP={style:{position:"absolute",left:"-9999px",top:"-9999px","pointer-events":"none"},id:"svg_sprite",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},CP=ct('<symbol id="user" viewBox="0 0 24 24"><path d="M17.0329 14.1978C17.2913 14.1979 17.5472 14.2475 17.7859 14.3437C18.0247 14.4399 18.2415 14.5808 18.4242 14.7584C18.6069 14.936 18.7517 15.1469 18.8505 15.3789C18.9493 15.6109 19.0001 15.8596 19 16.1107V16.5995C19 17.3596 18.72 18.095 18.2125 18.6722C16.8386 20.2306 14.7499 21 11.9969 21C9.24402 21 7.15613 20.2306 5.7858 18.6705C5.2788 18.0936 5.00018 17.3599 5 16.6012V16.1098C5 15.6027 5.20734 15.1164 5.57641 14.7578C5.94548 14.3992 6.44605 14.1978 6.968 14.1978H17.0329ZM17.0329 15.473H6.96712C6.8809 15.4729 6.79551 15.4893 6.71583 15.5214C6.63616 15.5534 6.56376 15.6003 6.5028 15.6596C6.44183 15.7188 6.3935 15.7891 6.36055 15.8665C6.32761 15.9439 6.31072 16.0269 6.31083 16.1107V16.6012C6.31083 17.0561 6.47884 17.4965 6.78336 17.8425C7.8798 19.0914 9.60104 19.7247 11.9961 19.7247C14.3928 19.7247 16.1141 19.0914 17.214 17.8433C17.5191 17.4967 17.6867 17.0556 17.6865 16.5995V16.1098C17.6865 15.9411 17.6176 15.7792 17.4949 15.6599C17.3722 15.5405 17.2066 15.4733 17.0329 15.473ZM11.9969 4C12.5715 4 13.1404 4.10995 13.6713 4.32358C14.2021 4.5372 14.6844 4.85032 15.0907 5.24505C15.497 5.63977 15.8193 6.10838 16.0392 6.62412C16.259 7.13986 16.3722 7.69262 16.3722 8.25085C16.3722 8.80908 16.259 9.36184 16.0392 9.87758C15.8193 10.3933 15.497 10.8619 15.0907 11.2567C14.6844 11.6514 14.2021 11.9645 13.6713 12.1781C13.1404 12.3917 12.5715 12.5017 11.9969 12.5017C10.8365 12.5017 9.72367 12.0538 8.90315 11.2567C8.08263 10.4595 7.62166 9.37825 7.62166 8.25085C7.62166 7.12346 8.08263 6.04223 8.90315 5.24505C9.72367 4.44786 10.8365 4 11.9969 4ZM11.9969 5.27526C11.5947 5.27526 11.1965 5.35222 10.8249 5.50176C10.4533 5.6513 10.1157 5.87048 9.83129 6.14679C9.54689 6.4231 9.32129 6.75112 9.16738 7.11214C9.01346 7.47316 8.93425 7.86009 8.93425 8.25085C8.93425 8.64161 9.01346 9.02855 9.16738 9.38956C9.32129 9.75058 9.54689 10.0786 9.83129 10.3549C10.1157 10.6312 10.4533 10.8504 10.8249 10.9999C11.1965 11.1495 11.5947 11.2264 11.9969 11.2264C12.8092 11.2264 13.5882 10.9129 14.1626 10.3549C14.737 9.79688 15.0596 9.04003 15.0596 8.25085C15.0596 7.46167 14.737 6.70482 14.1626 6.14679C13.5882 5.58875 12.8092 5.27526 11.9969 5.27526Z"></path></symbol><symbol id="heart" viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.27586 4C9.12131 3.99947 9.95473 4.20695 10.7057 4.60525C11.1844 4.8592 11.6208 5.18601 12.0005 5.57318C12.9548 4.60092 14.2718 4 15.7241 4C18.6313 4 21 6.40897 21 9.39543C21 12.0093 19.4997 14.4082 17.7363 16.2269C15.9651 18.0537 13.8019 19.4279 12.2264 19.9626C12.0793 20.0125 11.9207 20.0125 11.7736 19.9626C10.1981 19.4279 8.0349 18.0537 6.26375 16.2269C4.50035 14.4082 3 12.0093 3 9.39543C3 6.40914 5.3689 4.00028 8.27586 4ZM10.0432 5.9332C9.49776 5.6439 8.89169 5.49289 8.27637 5.49333C6.15598 5.49333 4.44828 7.24712 4.44828 9.39543C4.44828 11.4303 5.63759 13.4689 7.28798 15.1711C8.83923 16.7711 10.6866 17.9574 12 18.4621C13.3134 17.9574 15.1608 16.7711 16.712 15.1711C18.3624 13.4689 19.5517 11.4303 19.5517 9.39543C19.5517 7.24712 17.8445 5.49333 15.7241 5.49333C14.4273 5.49333 13.2826 6.15003 12.5903 7.1545C12.4543 7.35171 12.2342 7.46879 11.9995 7.46863C11.7649 7.46848 11.5449 7.35112 11.4092 7.15374C11.057 6.64134 10.5886 6.22248 10.0432 5.9332Z"></path></symbol><symbol id="heart-filled" viewBox="0 0 24 24"><path d="M8.27586 4C9.12131 3.99947 9.95473 4.20695 10.7057 4.60525C11.1844 4.8592 11.6208 5.18601 12.0005 5.57318C12.9548 4.60092 14.2718 4 15.7241 4C18.6313 4 21 6.40897 21 9.39543C21 12.0093 19.4997 14.4082 17.7363 16.2269C15.9651 18.0537 13.8019 19.4279 12.2264 19.9626C12.0793 20.0125 11.9207 20.0125 11.7736 19.9626C10.1981 19.4279 8.0349 18.0537 6.26375 16.2269C4.50035 14.4082 3 12.0093 3 9.39543C3 6.40914 5.3689 4.00028 8.27586 4Z"></path></symbol><symbol id="cart" viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.4 5.6H17.6C17.8122 5.6 18.0157 5.68429 18.1657 5.83431C18.3157 5.98434 18.4 6.18783 18.4 6.4V17.6C18.4 17.8122 18.3157 18.0157 18.1657 18.1657C18.0157 18.3157 17.8122 18.4 17.6 18.4H6.4C6.18783 18.4 5.98434 18.3157 5.83431 18.1657C5.68429 18.0157 5.6 17.8122 5.6 17.6V6.4C5.6 6.18783 5.68429 5.98434 5.83431 5.83431C5.98434 5.68429 6.18783 5.6 6.4 5.6ZM4 6.4C4 5.76348 4.25286 5.15303 4.70294 4.70294C5.15303 4.25286 5.76348 4 6.4 4H17.6C18.2365 4 18.847 4.25286 19.2971 4.70294C19.7471 5.15303 20 5.76348 20 6.4V17.6C20 18.2365 19.7471 18.847 19.2971 19.2971C18.847 19.7471 18.2365 20 17.6 20H6.4C5.76348 20 5.15303 19.7471 4.70294 19.2971C4.25286 18.847 4 18.2365 4 17.6V6.4ZM12 12C9.7912 12 8 9.8512 8 7.2H9.6C9.6 9.2528 10.936 10.4 12 10.4C13.064 10.4 14.4 9.2528 14.4 7.2H16C16 9.8512 14.2088 12 12 12Z"></path></symbol><symbol id="burger" viewBox="0 0 24 24"><rect x="1" y="7" width="22" height="2"></rect><rect x="1" y="11" width="22" height="2"></rect><rect x="1" y="15" width="22" height="2"></rect></symbol><symbol id="dot" viewBox="0 0 5 5"><circle cx="2.5" cy="2.5" r="2.5"></circle></symbol><symbol id="geo" viewBox="0 0 24 24"><path d="M12 12C11.23 12 10.6 11.37 10.6 10.6C10.6 9.83 11.23 9.2 12 9.2C12.77 9.2 13.4 9.83 13.4 10.6C13.4 11.37 12.77 12 12 12ZM16.2 10.74C16.2 8.199 14.345 6.4 12 6.4C9.65499 6.4 7.79999 8.199 7.79999 10.74C7.79999 12.378 9.16499 14.548 12 17.138C14.835 14.548 16.2 12.378 16.2 10.74ZM12 5C14.94 5 17.6 7.254 17.6 10.74C17.6 13.064 15.731 15.815 12 19C8.26899 15.815 6.39999 13.064 6.39999 10.74C6.39999 7.254 9.05999 5 12 5Z"></path></symbol><symbol id="search" viewBox="0 0 24 24"><path d="M19 19L15.6221 15.6221M15.6221 15.6221C16.1999 15.0444 16.6583 14.3584 16.971 13.6035C17.2837 12.8486 17.4446 12.0394 17.4446 11.2223C17.4446 10.4052 17.2837 9.59606 16.971 8.84114C16.6583 8.08621 16.1999 7.40027 15.6221 6.82247C15.0444 6.24468 14.3584 5.78635 13.6035 5.47365C12.8486 5.16094 12.0394 5 11.2223 5C10.4052 5 9.59606 5.16094 8.84114 5.47365C8.08621 5.78635 7.40027 6.24468 6.82247 6.82247C5.65556 7.98938 5 9.57205 5 11.2223C5 12.8726 5.65556 14.4552 6.82247 15.6221C7.98938 16.7891 9.57205 17.4446 11.2223 17.4446C12.8726 17.4446 14.4552 16.7891 15.6221 15.6221Z" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path></symbol><symbol id="close" viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.0057 13.2985L15.2386 16.532C15.4102 16.7036 15.6428 16.8 15.8854 16.8C16.128 16.8 16.3607 16.7036 16.5323 16.532C16.7038 16.3605 16.8002 16.1278 16.8002 15.8852C16.8002 15.6426 16.7038 15.4099 16.5323 15.2384L13.2981 12.0054L16.5317 8.77249C16.6166 8.68754 16.6839 8.58671 16.7298 8.47574C16.7758 8.36477 16.7994 8.24584 16.7994 8.12574C16.7993 8.00564 16.7757 7.88673 16.7297 7.77578C16.6837 7.66483 16.6163 7.56403 16.5314 7.47913C16.4464 7.39422 16.3456 7.32688 16.2346 7.28095C16.1236 7.23502 16.0047 7.21139 15.8846 7.21142C15.7645 7.21145 15.6456 7.23513 15.5346 7.28111C15.4237 7.3271 15.3229 7.39449 15.238 7.47943L12.0057 10.7124L8.77272 7.47943C8.68841 7.39205 8.58753 7.32234 8.47599 7.27436C8.36444 7.22638 8.24446 7.2011 8.12304 7.19999C8.00161 7.19888 7.88119 7.22196 7.76878 7.26789C7.65638 7.31381 7.55424 7.38167 7.46834 7.46749C7.38244 7.55331 7.31449 7.65538 7.26846 7.76774C7.22242 7.8801 7.19923 8.00051 7.20023 8.12193C7.20122 8.24335 7.22639 8.36336 7.27427 8.47495C7.32214 8.58654 7.39176 8.68748 7.47906 8.77188L10.7132 12.0054L7.47967 15.2384C7.30812 15.4099 7.21174 15.6426 7.21174 15.8852C7.21174 16.1278 7.30812 16.3605 7.47967 16.532C7.65122 16.7036 7.88389 16.8 8.1265 16.8C8.36911 16.8 8.60178 16.7036 8.77333 16.532L12.0057 13.2979V13.2985Z"></path></symbol><symbol id="vk" viewBox="0 0 24 24"><path d="M15.0752 2H8.93923C3.33523 2 2.00223 3.333 2.00223 8.927V15.063C2.00223 20.666 3.32523 22 8.92923 22H15.0652C20.6682 22 22.0022 20.677 22.0022 15.073V8.937C22.0022 3.333 20.6792 2 15.0752 2ZM18.1482 16.27H16.6892C16.1372 16.27 15.9712 15.823 14.9812 14.833C14.1172 14 13.7522 13.896 13.5332 13.896C13.2312 13.896 13.1482 13.979 13.1482 14.396V15.708C13.1482 16.063 13.0332 16.271 12.1062 16.271C11.2066 16.2105 10.3342 15.9372 9.56083 15.4735C8.7875 15.0098 8.1354 14.3691 7.65823 13.604C6.5254 12.194 5.73717 10.5391 5.35623 8.771C5.35623 8.552 5.43923 8.354 5.85623 8.354H7.31423C7.68923 8.354 7.82423 8.521 7.97123 8.906C8.67923 10.99 9.88723 12.802 10.3772 12.802C10.5652 12.802 10.6472 12.719 10.6472 12.25V10.104C10.5852 9.125 10.0652 9.042 10.0652 8.688C10.0719 8.59463 10.1147 8.50753 10.1845 8.44518C10.2543 8.38283 10.3457 8.35012 10.4392 8.354H12.7312C13.0442 8.354 13.1482 8.51 13.1482 8.885V11.781C13.1482 12.094 13.2832 12.198 13.3772 12.198C13.5652 12.198 13.7102 12.094 14.0542 11.75C14.7931 10.8489 15.3968 9.84508 15.8462 8.77C15.8922 8.64086 15.9791 8.5303 16.0938 8.45519C16.2084 8.38008 16.3445 8.34454 16.4812 8.354H17.9402C18.3772 8.354 18.4702 8.573 18.3772 8.885C17.8467 10.0734 17.1903 11.2015 16.4192 12.25C16.2622 12.49 16.1992 12.615 16.4192 12.896C16.5642 13.115 17.0752 13.542 17.4192 13.948C17.9191 14.4466 18.3343 15.0236 18.6482 15.656C18.7732 16.062 18.5642 16.27 18.1482 16.27Z"></path></symbol><symbol id="inst" viewBox="0 0 24 24"><path d="M13.0241 2.00074C13.7539 1.99794 14.4836 2.00528 15.2131 2.02274L15.4071 2.02974C15.6311 2.03774 15.8521 2.04774 16.1191 2.05974C17.1831 2.10974 17.9091 2.27774 18.5461 2.52474C19.2061 2.77874 19.7621 3.12274 20.3181 3.67874C20.8265 4.17835 21.2199 4.78269 21.4711 5.44974C21.7181 6.08674 21.8861 6.81374 21.9361 7.87774C21.9481 8.14374 21.9581 8.36574 21.9661 8.58974L21.9721 8.78374C21.9899 9.51293 21.9976 10.2423 21.9951 10.9717L21.9961 11.7177V13.0277C21.9986 13.7575 21.9909 14.4872 21.9731 15.2167L21.9671 15.4107C21.9591 15.6347 21.9491 15.8557 21.9371 16.1227C21.8871 17.1867 21.7171 17.9127 21.4711 18.5497C21.2208 19.2175 20.8272 19.8223 20.3181 20.3217C19.8181 20.8301 19.2134 21.2235 18.5461 21.4747C17.9091 21.7217 17.1831 21.8897 16.1191 21.9397C15.8521 21.9517 15.6311 21.9617 15.4071 21.9697L15.2131 21.9757C14.4836 21.9935 13.7539 22.0012 13.0241 21.9987L12.2781 21.9997H10.9691C10.2394 22.0022 9.50965 21.9945 8.78012 21.9767L8.58612 21.9707C8.34873 21.9621 8.11139 21.9521 7.87412 21.9407C6.81012 21.8907 6.08412 21.7207 5.44612 21.4747C4.77881 21.2241 4.17436 20.8306 3.67512 20.3217C3.16617 19.822 2.77235 19.2173 2.52112 18.5497C2.27412 17.9127 2.10612 17.1867 2.05612 16.1227C2.04498 15.8855 2.03498 15.6481 2.02612 15.4107L2.02112 15.2167C2.00269 14.4872 1.99435 13.7575 1.99612 13.0277V10.9717C1.99333 10.2423 2.00066 9.51294 2.01812 8.78374L2.02512 8.58974C2.03312 8.36574 2.04312 8.14374 2.05512 7.87774C2.10512 6.81274 2.27312 6.08774 2.52012 5.44974C2.77149 4.78236 3.16609 4.17819 3.67612 3.67974C4.17502 3.17049 4.77908 2.77631 5.44612 2.52474C6.08412 2.27774 6.80912 2.10974 7.87412 2.05974L8.58612 2.02974L8.78012 2.02474C9.50931 2.00632 10.2387 1.99798 10.9681 1.99974L13.0241 2.00074ZM11.9961 7.00074C11.3336 6.99137 10.6759 7.11377 10.0611 7.36081C9.44632 7.60785 8.88677 7.97462 8.41497 8.4398C7.94317 8.90497 7.56852 9.45928 7.31281 10.0705C7.0571 10.6817 6.92541 11.3377 6.92541 12.0002C6.92541 12.6628 7.0571 13.3188 7.31281 13.93C7.56852 14.5412 7.94317 15.0955 8.41497 15.5607C8.88677 16.0259 9.44632 16.3926 10.0611 16.6397C10.6759 16.8867 11.3336 17.0091 11.9961 16.9997C13.3222 16.9997 14.594 16.473 15.5317 15.5353C16.4693 14.5976 16.9961 13.3258 16.9961 11.9997C16.9961 10.6737 16.4693 9.40189 15.5317 8.46421C14.594 7.52653 13.3222 7.00074 11.9961 7.00074ZM11.9961 9.00074C12.3946 8.9934 12.7906 9.06554 13.1609 9.21295C13.5312 9.36036 13.8685 9.58008 14.1529 9.85929C14.4373 10.1385 14.6633 10.4716 14.8176 10.8391C14.9718 11.2066 15.0513 11.6012 15.0514 11.9997C15.0515 12.3983 14.9721 12.7929 14.818 13.1605C14.6638 13.528 14.438 13.8612 14.1536 14.1405C13.8693 14.4198 13.5321 14.6396 13.1618 14.7871C12.7916 14.9347 12.3956 15.007 11.9971 14.9997C11.2015 14.9997 10.4384 14.6837 9.8758 14.1211C9.31319 13.5585 8.99712 12.7954 8.99712 11.9997C8.99712 11.2041 9.31319 10.441 9.8758 9.87842C10.4384 9.31581 11.2015 8.99974 11.9971 8.99974L11.9961 9.00074ZM17.2461 5.50074C16.9235 5.51365 16.6184 5.65089 16.3947 5.88371C16.171 6.11653 16.0461 6.42688 16.0461 6.74974C16.0461 7.07261 16.171 7.38295 16.3947 7.61577C16.6184 7.84859 16.9235 7.98583 17.2461 7.99874C17.5776 7.99874 17.8956 7.86705 18.13 7.63263C18.3644 7.39821 18.4961 7.08026 18.4961 6.74874C18.4961 6.41722 18.3644 6.09928 18.13 5.86486C17.8956 5.63044 17.5776 5.49874 17.2461 5.49874V5.50074Z"></path></symbol><symbol id="tg" viewBox="0 0 24 24"><path d="M12.0022 2C6.48223 2 2.00223 6.48 2.00223 12C2.00223 17.52 6.48223 22 12.0022 22C17.5222 22 22.0022 17.52 22.0022 12C22.0022 6.48 17.5222 2 12.0022 2ZM16.6422 8.8C16.4922 10.38 15.8422 14.22 15.5122 15.99C15.3722 16.74 15.0922 16.99 14.8322 17.02C14.2522 17.07 13.8122 16.64 13.2522 16.27C12.3722 15.69 11.8722 15.33 11.0222 14.77C10.0322 14.12 10.6722 13.76 11.2422 13.18C11.3922 13.03 13.9522 10.7 14.0022 10.49C14.0092 10.4582 14.0083 10.4252 13.9995 10.3938C13.9908 10.3624 13.9746 10.3337 13.9522 10.31C13.8922 10.26 13.8122 10.28 13.7422 10.29C13.6522 10.31 12.2522 11.24 9.52223 13.08C9.12223 13.35 8.76223 13.49 8.44223 13.48C8.08223 13.47 7.40223 13.28 6.89223 13.11C6.26223 12.91 5.77223 12.8 5.81223 12.45C5.83223 12.27 6.08223 12.09 6.55223 11.9C9.47223 10.63 11.4122 9.79 12.3822 9.39C15.1622 8.23 15.7322 8.03 16.1122 8.03C16.1922 8.03 16.3822 8.05 16.5022 8.15C16.6022 8.23 16.6322 8.34 16.6422 8.42C16.6322 8.48 16.6522 8.66 16.6422 8.8Z"></path></symbol><symbol id="arrow-down" viewBox="0 0 24 24"><path d="M11.399 15.601C11.7309 15.933 12.2691 15.933 12.601 15.601L18.0104 10.1917C18.3424 9.85973 18.3424 9.32154 18.0104 8.98959C17.6785 8.65765 17.1403 8.65765 16.8083 8.98959L12 13.7979L7.19167 8.98959C6.85973 8.65765 6.32154 8.65765 5.98959 8.98959C5.65765 9.32154 5.65765 9.85973 5.98959 10.1917L11.399 15.601ZM11.15 14L11.15 15L12.85 15L12.85 14L11.15 14Z"></path></symbol><symbol id="arrow-left" viewBox="0 0 8 14"><path d="M0.398959 7.60104C0.0670136 7.2691 0.0670136 6.7309 0.398959 6.39896L5.80833 0.989592C6.14027 0.657647 6.67846 0.657647 7.01041 0.989592C7.34235 1.32154 7.34235 1.85973 7.01041 2.19167L2.20208 7L7.01041 11.8083C7.34235 12.1403 7.34235 12.6785 7.01041 13.0104C6.67846 13.3424 6.14027 13.3424 5.80833 13.0104L0.398959 7.60104ZM2 7.85H1V6.15H2V7.85Z"></path></symbol><symbol id="arrow-right" viewBox="0 0 8 14"><path d="M7.60104 7.60104C7.93299 7.2691 7.93299 6.7309 7.60104 6.39896L2.19167 0.989592C1.85973 0.657647 1.32154 0.657647 0.989592 0.989592C0.657647 1.32154 0.657647 1.85973 0.989592 2.19167L5.79792 7L0.989592 11.8083C0.657647 12.1403 0.657647 12.6785 0.989592 13.0104C1.32154 13.3424 1.85973 13.3424 2.19167 13.0104L7.60104 7.60104ZM6 7.85H7V6.15H6V7.85Z"></path></symbol><symbol id="checkmark" viewBox="0 -4 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.06066 6.4393C2.47487 5.85355 1.52513 5.85355 0.93934 6.4393C0.353553 7.0251 0.353553 7.9749 0.93934 8.5607L7.93934 15.5607C8.52513 16.1464 9.47487 16.1464 10.0607 15.5607L23.0607 2.56066C23.6464 1.97487 23.6464 1.02513 23.0607 0.43934C22.4749 -0.14645 21.5251 -0.14645 20.9393 0.43934L9 12.3787L3.06066 6.4393z"></path></symbol><symbol id="radio" viewBox="0 0 10 10"><circle cx="5" cy="5" r="5"></circle></symbol><symbol id="percent" viewBox="0 0 24 24"><rect x="6" y="17.481" width="16.2365" height="1.4" rx="0.7" transform="rotate(-45 6 17.481)" fill="#A47B5B"></rect><circle cx="9" cy="9.27295" r="2.35" stroke="#A47B5B" stroke-width="1.3"></circle><circle cx="16" cy="15.2729" r="2.35" stroke="#A47B5B" stroke-width="1.3"></circle></symbol><symbol id="spot" viewBox="0 0 24 24"><path d="M15.9621 14.5085C15.8185 15.3107 15.4325 16.0497 14.8562 16.6259C14.2798 17.2021 13.5408 17.5879 12.7385 17.7313C12.7081 17.7362 12.6773 17.7387 12.6465 17.7389C12.5075 17.7389 12.3737 17.6867 12.2715 17.5926C12.1693 17.4985 12.1061 17.3694 12.0946 17.2309C12.0831 17.0925 12.1241 16.9547 12.2094 16.8451C12.2947 16.7354 12.418 16.6618 12.5551 16.6388C13.7023 16.4456 14.6757 15.4722 14.8703 14.3229C14.8949 14.1781 14.976 14.0489 15.0959 13.9638C15.2157 13.8788 15.3644 13.8448 15.5093 13.8695C15.6542 13.8941 15.7833 13.9752 15.8684 14.095C15.9534 14.2149 15.9874 14.3636 15.9628 14.5085H15.9621ZM18.1852 13.8618C18.1852 15.4777 17.5433 17.0274 16.4007 18.1699C15.2581 19.3125 13.7084 19.9544 12.0926 19.9544C10.4767 19.9544 8.92706 19.3125 7.78448 18.1699C6.6419 17.0274 6 15.4777 6 13.8618C6 11.9288 6.76157 9.95219 8.26118 7.98733C8.30865 7.92512 8.36876 7.87367 8.43756 7.83637C8.50636 7.79908 8.58228 7.77678 8.66032 7.77096C8.73836 7.76514 8.81675 7.77592 8.89032 7.8026C8.96389 7.82927 9.03097 7.87123 9.08714 7.92572L10.7571 9.54648L12.2802 5.36406C12.3106 5.28064 12.3607 5.20576 12.4261 5.14574C12.4915 5.08571 12.5704 5.04229 12.6562 5.01915C12.7419 4.996 12.8319 4.99381 12.9187 5.01275C13.0054 5.03169 13.0864 5.0712 13.1546 5.12797C14.6688 6.38457 18.1852 9.74588 18.1852 13.8618ZM17.0774 13.8618C17.0774 10.6708 14.5996 7.91325 13.0473 6.50019L11.5055 10.7283C11.4738 10.8151 11.421 10.8927 11.3517 10.9539C11.2824 11.015 11.1989 11.0579 11.1088 11.0785C11.0187 11.0992 10.9249 11.097 10.8359 11.0721C10.7469 11.0472 10.6655 11.0004 10.5992 10.936L8.77351 9.165C7.66785 10.7608 7.10774 12.3387 7.10774 13.8618C7.10774 15.1839 7.63293 16.4518 8.56777 17.3867C9.50261 18.3215 10.7705 18.8467 12.0926 18.8467C13.4147 18.8467 14.6826 18.3215 15.6174 17.3867C16.5522 16.4518 17.0774 15.1839 17.0774 13.8618Z"></path></symbol><symbol id="light" viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.2351 5.14282C14.5024 5.14293 14.7638 5.22217 14.9867 5.37067C15.2096 5.51918 15.3842 5.7304 15.4888 5.97802L15.5276 6.08088L17.9476 13.3892C17.9964 13.5365 18.0114 13.693 17.9915 13.8469C17.9716 14.0008 17.9173 14.1482 17.8327 14.2781C17.7482 14.4079 17.6355 14.5168 17.5032 14.5966C17.3709 14.6763 17.2224 14.7249 17.0687 14.7387L16.9781 14.7428H12.6817V17.4857H14.7257C14.8993 17.4859 15.0664 17.5528 15.1926 17.6728C15.3189 17.7928 15.3949 17.9567 15.4051 18.1312C15.4152 18.3057 15.3588 18.4775 15.2474 18.6115C15.1359 18.7455 14.9778 18.8317 14.8054 18.8523L14.7257 18.8571H9.27507C9.10142 18.8569 8.93439 18.79 8.80812 18.67C8.68184 18.55 8.60585 18.3861 8.59568 18.2116C8.5855 18.0371 8.6419 17.8653 8.75336 17.7313C8.86482 17.5973 9.02292 17.5111 9.19536 17.4905L9.27507 17.4857H11.319V14.7428H7.02262C6.86819 14.7429 6.71575 14.7078 6.57675 14.6401C6.43775 14.5724 6.3158 14.4738 6.22007 14.3519C6.12434 14.2299 6.05731 14.0877 6.02402 13.936C5.99074 13.7842 5.99206 13.6268 6.02788 13.4756L6.05309 13.3892L8.47316 6.08088C8.55764 5.82541 8.71498 5.60061 8.92556 5.43453C9.13613 5.26845 9.39062 5.16843 9.6573 5.14694L9.76563 5.14282H14.2338H14.2351ZM14.2351 6.51425H9.76563L7.49546 13.3714H16.5066L14.2351 6.51425Z"></path></symbol><symbol id="delivery" viewBox="0 0 24 24"><path d="M4.59302 7.22458V6.62012C4.43574 6.62012 4.28491 6.6838 4.17369 6.79716C4.06248 6.91052 4 7.06427 4 7.22458H4.59302ZM13.2907 7.22458H13.8837C13.8837 7.06427 13.8212 6.91052 13.71 6.79716C13.5988 6.6838 13.448 6.62012 13.2907 6.62012V7.22458ZM13.2907 8.83648V8.23202C13.1334 8.23202 12.9826 8.2957 12.8714 8.40906C12.7602 8.52242 12.6977 8.67617 12.6977 8.83648H13.2907ZM4.59302 7.82904H13.2907V6.62012H4.59302V7.82904ZM12.6977 7.22458V16.896H13.8837V7.22458H12.6977ZM5.18605 15.2841V7.22458H4V15.2841H5.18605ZM13.2907 9.44095H17.2442V8.23202H13.2907V9.44095ZM19.814 12.0603V15.2841H21V12.0603H19.814ZM13.8837 16.896V8.83648H12.6977V16.896H13.8837ZM17.9432 17.6085C17.8514 17.702 17.7424 17.7763 17.6225 17.8269C17.5025 17.8776 17.374 17.9036 17.2442 17.9036C17.1144 17.9036 16.9858 17.8776 16.8659 17.8269C16.746 17.7763 16.637 17.702 16.5452 17.6085L15.7071 18.4628C16.1149 18.8784 16.6679 19.1119 17.2446 19.1119C17.8213 19.1119 18.3743 18.8784 18.7821 18.4628L17.9432 17.6085ZM16.5452 16.1835C16.637 16.09 16.746 16.0157 16.8659 15.9651C16.9858 15.9144 17.1144 15.8884 17.2442 15.8884C17.374 15.8884 17.5025 15.9144 17.6225 15.9651C17.7424 16.0157 17.8514 16.09 17.9432 16.1835L18.7813 15.3292C18.3735 14.9136 17.8205 14.6801 17.2438 14.6801C16.6671 14.6801 16.1141 14.9136 15.7063 15.3292L16.5452 16.1835ZM8.45479 17.6085C8.36301 17.702 8.25404 17.7763 8.13411 17.8269C8.01418 17.8776 7.88563 17.9036 7.75581 17.9036C7.626 17.9036 7.49745 17.8776 7.37752 17.8269C7.25759 17.7763 7.14862 17.702 7.05684 17.6085L6.2187 18.4628C6.62648 18.8784 7.17953 19.1119 7.75621 19.1119C8.33288 19.1119 8.88594 18.8784 9.29372 18.4628L8.45479 17.6085ZM7.05684 16.1835C7.14862 16.09 7.25759 16.0157 7.37752 15.9651C7.49745 15.9144 7.626 15.8884 7.75581 15.8884C7.88563 15.8884 8.01418 15.9144 8.13411 15.9651C8.25404 16.0157 8.36301 16.09 8.45479 16.1835L9.29293 15.3292C8.88515 14.9136 8.33209 14.6801 7.75542 14.6801C7.17874 14.6801 6.62569 14.9136 6.21791 15.3292L7.05684 16.1835ZM17.9432 16.1835C18.1361 16.3802 18.2326 16.6373 18.2326 16.896H19.4186C19.4186 16.3294 19.2059 15.7612 18.7821 15.3284L17.9432 16.1835ZM18.2326 16.896C18.2326 17.1547 18.1361 17.4118 17.9432 17.6085L18.7821 18.4628C18.9843 18.2572 19.1439 18.013 19.2532 17.7442C19.3626 17.4753 19.4188 17.1871 19.4186 16.896H18.2326ZM15.6628 16.2915H13.2907V17.5005H15.6628V16.2915ZM16.5452 17.6085C16.4532 17.515 16.3803 17.404 16.3306 17.2817C16.281 17.1594 16.2555 17.0283 16.2558 16.896H15.0698C15.0698 17.4626 15.2825 18.0308 15.7063 18.4636L16.5452 17.6085ZM16.2558 16.896C16.2558 16.6373 16.3523 16.3802 16.5452 16.1835L15.7063 15.3292C15.5041 15.5348 15.3445 15.779 15.2351 16.0478C15.1258 16.3167 15.0696 16.6049 15.0698 16.896H16.2558ZM7.05684 17.6085C6.96485 17.515 6.89192 17.404 6.84225 17.2817C6.79258 17.1594 6.76716 17.0283 6.76744 16.896H5.5814C5.5814 17.4626 5.79409 18.0308 6.21791 18.4636L7.05684 17.6085ZM6.76744 16.896C6.76744 16.6373 6.86391 16.3802 7.05684 16.1835L6.2187 15.3292C6.01655 15.5348 5.85619 15.779 5.74683 16.0479C5.63747 16.3167 5.58125 16.6049 5.5814 16.896H6.76744ZM13.2907 16.2915H9.33721V17.5005H13.2907V16.2915ZM8.45479 16.1835C8.64772 16.3802 8.74419 16.6373 8.74419 16.896H9.93023C9.93023 16.3294 9.71754 15.7612 9.29372 15.3284L8.45479 16.1835ZM8.74419 16.896C8.74419 17.1547 8.64772 17.4118 8.45479 17.6085L9.29293 18.4628C9.49508 18.2572 9.65543 18.013 9.7648 17.7441C9.87416 17.4753 9.93038 17.187 9.93023 16.896H8.74419ZM19.814 15.2841C19.814 15.8402 19.3712 16.2915 18.8256 16.2915V17.5005C19.4023 17.5005 19.9553 17.2669 20.3631 16.8513C20.7709 16.4356 21 15.8719 21 15.2841H19.814ZM17.2442 9.44095C17.9257 9.44095 18.5794 9.71691 19.0613 10.2081C19.5432 10.6994 19.814 11.3656 19.814 12.0603H21C21 11.045 20.6043 10.0712 19.8999 9.35329C19.1956 8.63535 18.2403 8.23202 17.2442 8.23202V9.44095ZM4 15.2841C4 15.8719 4.22909 16.4356 4.63687 16.8513C5.04466 17.2669 5.59773 17.5005 6.17442 17.5005V16.2915C5.62884 16.2915 5.18605 15.8402 5.18605 15.2841H4Z" fill="#A47B5B"></path><path d="M8.94233 6.4181C8.94233 5.77684 8.69242 5.16185 8.24756 4.70842C7.80271 4.25498 7.19936 4.00024 6.57024 4.00024C6.36053 4.00024 6.15942 4.08516 6.01113 4.2363C5.86285 4.38745 5.77954 4.59244 5.77954 4.8062C5.77954 5.44745 6.02946 6.06244 6.47431 6.51588C6.91916 6.96931 7.52252 7.22405 8.15163 7.22405H8.94233M8.94233 6.4181V7.22405M8.94233 6.4181C8.94233 5.77684 9.19225 5.16185 9.6371 4.70842C10.082 4.25498 10.6853 4.00024 11.3144 4.00024C11.5241 4.00024 11.7252 4.08516 11.8735 4.2363C12.0218 4.38745 12.1051 4.59244 12.1051 4.8062C12.1051 5.44745 11.8552 6.06244 11.4104 6.51588C10.9655 6.96931 10.3621 7.22405 9.73303 7.22405H8.94233" stroke="#A47B5B" stroke-width="1.11883" stroke-linejoin="round"></path></symbol><symbol id="pay" viewBox="0 0 24 24"><path d="M11.577 5.08934C11.8478 4.98533 12.1438 4.97177 12.4225 5.0506L12.5406 5.08934L17.3445 6.9386C17.5881 7.03236 17.8007 7.19525 17.9575 7.40828C18.1144 7.62131 18.209 7.87572 18.2305 8.14186L18.2353 8.2581V12.0362C18.2352 13.1778 17.935 14.2982 17.3662 15.2791C16.7974 16.26 15.9811 17.0651 15.0036 17.6094L14.821 17.7073L12.5193 18.8887C12.3925 18.9537 12.2541 18.9911 12.1126 18.9986C11.9712 19.0061 11.8297 18.9836 11.6971 18.9324L11.5983 18.8887L9.29654 17.7073C8.30186 17.1967 7.45992 16.42 6.85958 15.459C6.25925 14.4981 5.9228 13.3885 5.88576 12.2476L5.88232 12.0362V8.2581C5.88233 7.99119 5.95619 7.72977 6.0953 7.50428C6.23441 7.27879 6.43306 7.0985 6.66811 6.98439L6.77311 6.9386L11.577 5.08934ZM12.0588 6.40883L7.25487 8.2581V12.0362C7.25489 12.9204 7.48646 13.7882 7.92533 14.549C8.36421 15.3097 8.99424 15.9353 9.74948 16.3603L9.91076 16.447L12.0588 17.5495L14.2068 16.447C14.9773 16.0516 15.6301 15.4508 16.0967 14.7075C16.5634 13.9642 16.8268 13.1058 16.8593 12.2222L16.8627 12.0362V8.2581L12.0588 6.40883ZM14.4148 9.62197C14.5383 9.49562 14.704 9.42227 14.8783 9.4168C15.0526 9.41134 15.2223 9.47418 15.3531 9.59256C15.4839 9.71093 15.5659 9.87597 15.5824 10.0542C15.5989 10.2323 15.5488 10.4103 15.4421 10.5519L15.3852 10.6181L11.7932 14.3061C11.6624 14.4404 11.488 14.5206 11.3033 14.5317C11.1186 14.5427 10.9364 14.4837 10.7912 14.3659L10.7254 14.3061L9.07556 12.6125C8.95117 12.486 8.87858 12.3155 8.87264 12.1359C8.8667 11.9562 8.92787 11.7811 9.04362 11.6462C9.15938 11.5114 9.32096 11.4271 9.4953 11.4105C9.66964 11.3939 9.84355 11.4464 9.98144 11.5572L10.046 11.6156L11.2593 12.8612L14.4148 9.62197Z"></path></symbol><symbol id="logo" viewBox="0 0 101 15"><path d="M0.5 7.98869C0.5 3.60022 3.50616 0.812012 7.60978 0.812012C11.7134 0.812012 14.4169 3.33684 14.4169 7.63085C14.4169 11.9249 11.429 14.7894 7.32722 14.7894C3.22542 14.7894 0.5 12.3045 0.5 7.98869ZM7.77932 14.526C10.4446 14.526 12.809 12.6224 12.809 8.21574C12.809 3.80911 10.2003 1.07539 7.11757 1.07539C4.45231 1.07539 2.1079 2.979 2.1079 7.36747C2.1079 12.0012 4.69842 14.526 7.77932 14.526Z"></path><path d="M19.8237 14.2625L19.275 10.4953H19.3698C20.0315 13.0201 21.3733 14.4696 23.7177 14.4696C25.5516 14.4696 26.5725 13.5469 26.5725 12.0574C26.5725 10.5679 25.5133 9.4581 22.8098 8.40276C19.9932 7.32926 18.8575 6.17946 18.8575 4.61552C18.8575 2.54299 20.8245 0.810124 23.8489 0.810124C25.1342 0.810124 26.1933 1.0735 26.7603 1.26241L27.0629 0H27.1577V4.10874H27.0629C26.7038 2.16881 25.5498 1.05716 23.4697 1.05716C21.3897 1.05716 20.1992 2.05619 20.1992 3.67643C20.1992 5.16408 21.2384 6.2394 23.8672 7.2566C26.4759 8.25563 27.7046 9.42359 27.7046 11.0802C27.7046 12.9638 26.1168 14.7911 22.9976 14.7911C21.541 14.7911 20.2375 14.4151 19.8219 14.2643L19.8237 14.2625Z"></path><path d="M31.9618 1.56602L31.0156 1.19002V1.09557H34.8731V1.19002L33.5496 1.56602L38.2202 12.6426L40.262 7.46212C42.2855 2.35616 41.9264 1.64049 39.9776 1.24451L39.6932 1.1882V1.09375H43.8151V1.1882L42.8689 1.5642L37.5931 14.7896H37.5749L31.9618 1.56602Z"></path><path d="M46.9355 14.4134L48.2591 14.0374V1.56589L46.9355 1.18989V1.09544H54.8383L55.0279 0.00195312H55.1227L55.6514 3.91997H55.5566L55.4618 3.65659C54.8183 1.86742 54.1565 1.30251 51.1504 1.30251H49.7138V7.19861H51.4147C52.9278 7.19861 53.5331 6.5774 53.7409 5.31498H53.8357V9.59084H53.7409C53.5331 8.10319 52.9278 7.40568 51.4147 7.40568H49.7138V14.3008H51.2269C54.8201 14.3008 55.841 13.4344 56.6158 11.38L56.7853 10.9277H56.8801L56.1619 14.5079H46.9355V14.4134Z"></path><path d="M63.2338 14.4136L64.8782 14.0376V1.30265H64.3294C61.6077 1.30265 60.8128 1.98017 59.9432 3.82747L59.8102 4.11083H59.7154L60.7928 0.00390625H60.8876L60.9641 1.09739H70.247L70.3235 0.00390625H70.4183L71.4957 4.11083H71.4009L71.2679 3.82747C70.3983 1.98199 69.6034 1.30265 66.8817 1.30265H66.3329V14.0376L67.9773 14.4136V14.508H63.232V14.4136H63.2338Z"></path><path d="M75.0889 14.4132L76.4124 14.0372V1.56567L75.0889 1.18967V1.09521H79.1925V1.18967L77.869 1.56567V14.0372L79.1925 14.4132V14.5077H75.0889V14.4132Z"></path><path d="M85.7155 1.75471L85.072 7.63265C84.4668 13.2091 85.0538 14.001 87.0008 14.3589L87.3034 14.4152V14.5096H82.8789V14.4152L84.1076 14.0392L85.5059 1.56762L84.0311 1.19162V1.09717H86.9625L91.8591 12.6823L96.7175 1.09717H99.3463V1.19162L97.948 1.56762L99.2715 14.0392L100.5 14.4152V14.5096H96.4914V14.4152L97.8149 14.0392L96.5297 2.0962L91.3122 15.0001H91.2739L85.7155 1.75653V1.75471Z"></path></symbol><symbol id="filters" viewBox="0 0 24 24"><path d="M11 18H13C13.55 18 14 17.55 14 17C14 16.45 13.55 16 13 16H11C10.45 16 10 16.45 10 17C10 17.55 10.45 18 11 18ZM3 7C3 7.55 3.45 8 4 8H20C20.55 8 21 7.55 21 7C21 6.45 20.55 6 20 6H4C3.45 6 3 6.45 3 7ZM7 13H17C17.55 13 18 12.55 18 12C18 11.45 17.55 11 17 11H7C6.45 11 6 11.45 6 12C6 12.55 6.45 13 7 13Z"></path></symbol><symbol id="spinner" viewBox="0 0 24 24"><path opacity="0.3" fill-rule="evenodd" clip-rule="evenodd" d="M12 19C15.866 19 19 15.866 19 12C19 8.13401 15.866 5 12 5C8.13401 5 5 8.13401 5 12C5 15.866 8.13401 19 12 19ZM12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"></path><path d="M2 12C2 6.47715 6.47715 2 12 2V5C8.13401 5 5 8.13401 5 12H2Z"></path></symbol>',25),RP=[CP];function LP(n,e){return J(),ne("svg",AP,RP)}const PP=Pn(wP,[["render",LP]]),IP={},DP=h("div",{class:"h2"},"Заголовок",-1),NP=h("p",null," Lorem, ipsum dolor sit amet consectetur adipisicing elit. Omnis enim quo at fugiat ab quaerat quas odit, tenetur suscipit esse placeat quidem delectus doloribus dolorum. Obcaecati quia tenetur molestiae aspernatur. ",-1),UP=h("div",{class:"h2"},"Напишите нам",-1),OP=h("div",{class:"h2"},"Выберите город",-1);function kP(n,e){const t=ke("AppModal"),i=ke("CallbackForm"),s=ke("GeoLocationList"),r=ke("OrderDetails");return J(),ne($e,null,[j(t,{name:"testModal"},{default:Me(()=>[DP,NP]),_:1}),j(t,{name:"callbackModal"},{default:Me(()=>[UP,j(i)]),_:1}),j(t,{name:"geoLocationModal"},{default:Me(()=>[OP,j(s)]),_:1}),j(t,{name:"orderDetailsModal",width:1080},{default:Me(()=>[j(r)]),_:1})],64)}const FP=Pn(IP,[["render",kP]]),BP={},HP={class:"mb-8 w-[600px] max-w-full mx-auto"},zP={class:"text-[20px] leading-[1.1] flex flex-col"},VP={class:"border-b border-neutral-alpha"},GP={class:"border-b border-neutral-alpha"},$P={class:"border-b border-neutral-alpha"},WP={class:"border-b border-neutral-alpha"},XP={class:"border-b border-neutral-alpha"},jP={class:"mt-auto flex flex-col items-center"},qP=h("div",{class:"text-center flex flex-col items-center"},[h("a",{class:"text-[20px] font-semibold leading-[1.1] tracking-[-0.8px]",href:"tel:88126678226"}," 8 (812) 667-82-26 "),h("div",{class:"flex items-center leading-[1.4] text-[12px] text-accent"},[h("div",{class:"svg-icon flex-none mr-1 w-[6px] h-[6px]"},[h("svg",null,[h("use",{"xlink:href":"#dot"})])]),h("div",{class:"font-medium tracking-[0.24px]"},"10.00-20.00")])],-1);function YP(n,e){const t=ke("router-link"),i=ke("GeoLocation"),s=ke("Offcanvas");return J(),Qi(s,{name:"mobileMenu"},{default:Me(()=>[h("nav",HP,[h("ul",zP,[h("li",VP,[j(t,{to:{name:"catalog"},class:"block py-2 font-semibold [&.is-active-link]:text-brand hover:text-brand"},{default:Me(()=>[_e("Каталог")]),_:1})]),h("li",GP,[j(t,{to:{name:"about"},class:"block py-2 font-semibold [&.is-active-link]:text-brand hover:text-brand"},{default:Me(()=>[_e("О нас")]),_:1})]),h("li",$P,[j(t,{to:{name:"articles"},class:"block py-2 font-semibold [&.is-active-link]:text-brand hover:text-brand"},{default:Me(()=>[_e("Новости")]),_:1})]),h("li",WP,[j(t,{to:{name:"delivery-and-payment"},class:"block py-2 font-semibold [&.is-active-link]:text-brand hover:text-brand"},{default:Me(()=>[_e("Доставка и оплата")]),_:1})]),h("li",XP,[j(t,{to:{name:"contacts"},class:"block py-2 font-semibold [&.is-active-link]:text-brand hover:text-brand"},{default:Me(()=>[_e("Контакты")]),_:1})])])]),h("div",jP,[j(i,{class:"mb-8 font-medium"}),qP])]),_:1})}const KP=Pn(BP,[["render",YP]]),ZP=Ne({__name:"App",setup(n){return(e,t)=>{const i=ke("router-view");return J(),ne($e,null,[j(i),j(KP),j(FP),j(PP)],64)}}}),JP=h("div",{class:"svg-icon"},[h("svg",null,[h("use",{"xlink:href":"#arrow-down"})])],-1),QP=[JP],e8={key:0,class:"app-details__content"},t8={style:{"min-height":"0"}},n8=Ne({__name:"Details",props:{open:{type:Boolean,default:!1},arrowVisible:{type:Boolean,default:!0},titleClass:{default:""}},setup(n){const e=G1(),t=n,i=Ln({isOpen:!1});function s(){i.isOpen=!i.isOpen}return Id(()=>{i.isOpen=t.open}),(r,o)=>(J(),ne("div",{class:Dt(["app-details",{"is-open":i.isOpen}])},[h("div",{class:Dt(["app-details__title",r.titleClass])},[Ji(r.$slots,"title",{toggle:s}),t.arrowVisible&&Fe(e).content?(J(),ne("div",{key:0,class:"app-details__arrow",onClick:s},QP)):Ei("",!0)],2),Fe(e).content?(J(),ne("div",e8,[h("div",t8,[Ji(r.$slots,"content")])])):Ei("",!0)],2))}}),vu=Ct([{city:"Санкт-Петербург",latlng:[59.94422,30.354145],pickUpPoints:[{address:"Большая Московская ул, 112",workHours:"пн-вс: 08:00-22:00",latlng:[59.925971,30.346653]},{address:"Певческий переулок, 5",workHours:"пн-вс: 08:00-22:00",latlng:[59.958998,30.327555]},{address:"Набережная реки Смоленки, 5-7И",workHours:"пн-вс: 08:00-22:00",latlng:[59.949668,30.26007]},{address:"Улица Профессора Попова, 43",workHours:"пн-вс: 08:00-22:00",latlng:[59.971204,30.291324]},{address:"Студенческая улица, 5",workHours:"пн-вс: 08:00-22:00",latlng:[59.986224,30.330847]},{address:"Парголовский переулок, 16",workHours:"пн-вс: 08:00-22:00",latlng:[60.020455,30.293383]}]},{city:"Москва",latlng:[55.755864,37.617698],pickUpPoints:[{address:"Никольская улица, 15с1",workHours:"пн-вс: 08:00-22:00",latlng:[55.757484,37.622657]},{address:"Садовая-Спасская улица, 19/1",workHours:"пн-вс: 08:00-22:00",latlng:[55.7696,37.647526]},{address:"Делегатская улица, 20",workHours:"пн-вс: 08:00-22:00",latlng:[55.776402,37.615703]},{address:"1-я Миусская улица, 22с4",workHours:"пн-вс: 08:00-22:00",latlng:[55.780499,37.59443]},{address:"2-й Лесной переулок, 11с1",workHours:"пн-вс: 08:00-22:00",latlng:[55.780896,37.587315]}]},{city:"Абакан",latlng:[53.721152,91.442396],pickUpPoints:[]},{city:"Архангельск",latlng:[64.539911,40.515762],pickUpPoints:[]},{city:"Астрахань",latlng:[46.347614,48.030178],pickUpPoints:[]},{city:"Барнаул",latlng:[53.346785,83.776856],pickUpPoints:[]},{city:"Белгород",latlng:[50.595414,36.587277],pickUpPoints:[]},{city:"Благовещенск",latlng:[50.257456,127.534611],pickUpPoints:[]},{city:"Великий Новгород",latlng:[58.522857,31.269816],pickUpPoints:[]},{city:"Владивосток",latlng:[43.115542,131.885494],pickUpPoints:[]},{city:"Владимир",latlng:[56.129057,40.406635],pickUpPoints:[]},{city:"Воронеж",latlng:[51.660781,39.200296],pickUpPoints:[]},{city:"Иваново",latlng:[57.000353,40.97393],pickUpPoints:[]},{city:"Ижевск",latlng:[56.852676,53.2069],pickUpPoints:[]},{city:"Иркутск",latlng:[52.289588,104.280606],pickUpPoints:[]},{city:"Йошкар-Ола",latlng:[56.6316,47.886178],pickUpPoints:[]},{city:"Казань",latlng:[55.796127,49.106414],pickUpPoints:[]}]),i8=an(()=>vu.value.reduce((e,t)=>e+t.pickUpPoints.length,0)),Fn=Ct(vu.value[0]),s8=Ct(null),r8=["onClick"],o8=h("svg",null,[h("use",{"xlink:href":"#geo"})],-1),a8=[o8],l8=Ne({__name:"GeoLocation",props:{iconClass:{default:"text-brand"}},setup(n){function e(){_u("geoLocationModal")}return(t,i)=>(J(),ne("div",{class:"flex items-center cursor-pointer",onClick:Jt(e,["prevent"])},[h("div",{class:Dt(["svg-icon mr-[2px]",t.iconClass])},a8,2),h("div",null,_t(Fe(Fn).city),1)],8,r8))}}),c8={class:"space-y-2"},d8=["onClick"],u8=Ne({__name:"GeoLocationList",setup(n){function e(t){Fn.value=t,Ha("geoLocationModal")}return(t,i)=>(J(),ne("ul",c8,[(J(!0),ne($e,null,Rt(Fe(vu),(s,r)=>(J(),ne("li",{key:r,class:Dt(["text-[16px] leading-[1.1] font-semibold",{"text-brand":s.city===Fe(Fn).city}])},[h("a",{href:"#",class:"decor-link",onClick:Jt(o=>e(s),["prevent"])},_t(s.city),9,d8)],2))),128))]))}}),f8=["onSubmit","onKeydown"],h8=h("svg",null,[h("use",{"xlink:href":"#search"})],-1),p8=[h8],m8=h("svg",null,[h("use",{"xlink:href":"#close"})],-1),g8=[m8],_8=Ne({__name:"AppSearch",setup(n){const e=Ct(),t=Ln({isOpen:!1});function i(){t.isOpen=!t.isOpen,t.isOpen&&setTimeout(()=>{var r;(r=e==null?void 0:e.value)==null||r.focus({preventScroll:!0})},10)}async function s(){}return(r,o)=>(J(),ne($e,null,[h("form",{class:Dt(["app-search",{"is-open":t.isOpen}]),onSubmit:Jt(s,["prevent"]),onKeydown:rm(i,["esc"])},[h("input",{ref_key:"inputRef",ref:e,class:"w-full border-none h-full outline-none text-center",type:"text",placeholder:"Введите поисковый запрос"},null,512)],42,f8),t.isOpen===!1?(J(),ne("div",{key:0,class:"svg-icon svg-icon--stroke svg-icon--nofill text-brand cursor-pointer",onClick:i},p8)):Ei("",!0),t.isOpen===!0?(J(),ne("div",{key:1,class:"svg-icon text-brand cursor-pointer",onClick:i},g8)):Ei("",!0)],64))}}),v8={class:"app-acc__title"},x8=h("div",{class:"rounded-icon transition-all duration-300 pointer"},[h("div",{class:"svg-icon"},[h("svg",null,[h("use",{"xlink:href":"#arrow-down"})])])],-1),b8={class:"app-acc__body"},y8={style:{"min-height":"0"}},S8=Ne({__name:"Accordion",props:{open:{type:Boolean}},setup(n){const e=n,t=Ln({isOpen:!1});function i(){t.isOpen=!t.isOpen}return Id(()=>{t.isOpen!==e.open&&(t.isOpen=e.open)}),(s,r)=>(J(),ne("div",{class:Dt(["app-acc",{"is-open":t.isOpen}])},[h("div",{class:"app-acc__top",onClick:i},[h("div",v8,[Ji(s.$slots,"title")]),x8]),h("div",b8,[h("div",y8,[Ji(s.$slots,"body",{isOpen:t.isOpen,toggle:i})])])],2))}}),M8={class:"app-tabs"},E8={class:"app-tabs__titles flex flex-wrap gap-1 mb-8 md:gap-2 md:mb-12"},T8=["onClick"],w8={class:"app-tabs__bodies"},A8={class:"app-tabs__bodies-item"},C8=Ne({__name:"AppTabs",props:{activeKey:{default:""},items:{default:()=>[]}},setup(n){const e=n,t=Ln({activeKey:""});function i(s){t.activeKey=s}return ks(()=>{t.activeKey=e.activeKey||e.items[0].key}),(s,r)=>(J(),ne("div",M8,[h("div",E8,[(J(!0),ne($e,null,Rt(s.items,(o,a)=>(J(),ne("button",{type:"button",class:Dt(["app-button app-button--secondary text-dark font-semibold normal-case text-[14px] py-2 px-4 md:py-2.5 md:px-5 md:text-[20px]",t.activeKey===o.key?"text-opacity-100":"text-opacity-50"]),key:a,onClick:l=>i(o.key)},_t(o.label),11,T8))),128))]),h("div",w8,[(J(!0),ne($e,null,Rt(s.items,(o,a)=>(J(),Qi(Hd,{key:a,name:"tabs"},{default:Me(()=>[is(h("div",A8,[Ji(s.$slots,o.key)],512),[[P_,o.key===t.activeKey]])]),_:2},1024))),128))])]))}}),R8={},L8={class:"app-pagination"},P8=ct('<a href="#" class="app-pagination__item app-pagination__item--prev"><div class="svg-icon rotate-90"><svg><use xlink:href="#arrow-down"></use></svg></div></a><a href="#" class="app-pagination__item is-active">1</a><a href="#" class="app-pagination__item">2</a><a href="#" class="app-pagination__item">3</a><a href="#" class="app-pagination__item">...</a><a href="#" class="app-pagination__item">10</a><a href="#" class="app-pagination__item app-pagination__item--next"><div class="svg-icon -rotate-90"><svg><use xlink:href="#arrow-down"></use></svg></div></a>',7),I8=[P8];function D8(n,e){return J(),ne("div",L8,I8)}const N8=Pn(R8,[["render",D8]]),U8={class:"app-sort__value"},O8=h("div",{class:"app-sort__arrow"},[h("div",{class:"svg-icon"},[h("svg",null,[h("use",{"xlink:href":"#arrow-down"})])])],-1),k8=["onClick"],F8=Ne({__name:"AppSort",props:{sortItems:{default:()=>[]},dropdownClass:{default:"left-0 origin-top-left md:left-auto md:right-0 md:origin-top-right"}},emits:["change"],setup(n,{emit:e}){const t=n,i=e,s=Ln({isOpen:!1,sortList:[]}),r=an(()=>s.sortList.find(c=>c.current));function o(c){s.isOpen=!1,!c.current&&(s.sortList.forEach(d=>d.current=!1),c.current=!0,i("change",c))}function a(){s.isOpen=!s.isOpen}function l(c){const d=c.target;!d.classList.contains("app-sort")&&!d.closest(".app-sort")&&(s.isOpen=!1)}return ks(()=>{s.sortList=t.sortItems,document.addEventListener("click",l)}),Nd(()=>{document.removeEventListener("click",l)}),(c,d)=>{var u;return J(),ne("div",{class:Dt(["app-sort",{"is-open":s.isOpen}])},[h("div",{class:"app-sort__current",onClick:a},[h("div",U8,_t((u=r.value)==null?void 0:u.text),1),O8]),s.sortList.length?(J(),ne("div",{key:0,class:Dt(["app-sort__dropdown",c.dropdownClass])},[h("ul",null,[(J(!0),ne($e,null,Rt(s.sortList,(f,p)=>(J(),ne("li",{key:p,class:Dt({"text-brand":f.current}),onClick:_=>o(f)},_t(f.text),11,k8))),128))])],2)):Ei("",!0)],2)}}}),B8={class:"app-select"},H8=["value"],z8=["value"],V8=h("div",{class:"app-select__arrow svg-icon"},[h("svg",null,[h("use",{"xlink:href":"#arrow-down"})])],-1),G8=Ne({__name:"AppSelect",props:{modelValue:{default:""},options:{default:()=>[]}},emits:["update:modelValue"],setup(n,{emit:e}){const t=n,i=e,s=an(()=>{var a;return((a=t.options.find(l=>l.value===t.modelValue))==null?void 0:a.text)||""});function r(o){const a=o.target;i("update:modelValue",a.value)}return(o,a)=>(J(),ne("div",B8,[h("select",{value:o.modelValue,onChange:r},[(J(!0),ne($e,null,Rt(o.options,(l,c)=>(J(),ne("option",{value:l.value,key:c},_t(l.text),9,z8))),128))],40,H8),h("div",{class:Dt(["app-select__value",s.value?"text-dark":"text-dark text-opacity-50"])},_t(s.value||"Выберите пункт"),3),V8]))}}),$8={key:0,class:"svg-icon w-8 h-8"},W8=h("svg",null,[h("use",{"xlink:href":"#close"})],-1),X8=[W8],j8={key:1,class:"svg-icon"},q8=h("svg",null,[h("use",{"xlink:href":"#burger"})],-1),Y8=[q8],K8=Ne({__name:"MobileMenuBurger",setup(n){return(e,t)=>(J(),ne("button",{type:"button",class:"rounded-icon",onClick:t[0]||(t[0]=i=>Fe($d)("mobileMenu"))},[Fe(wn).mobileMenu?(J(),ne("div",$8,X8)):(J(),ne("div",j8,Y8))]))}}),Z8=h("div",{class:"svg-icon text-brand mr-2"},[h("svg",null,[h("use",{"xlink:href":"#filters"})])],-1),J8=h("div",{class:"text-[16px] tracking-[-0.32px] font-semibold"},"Фильтры",-1),Q8=[Z8,J8],eI=Ne({__name:"MobileFiltersBurger",setup(n){return(e,t)=>(J(),ne("div",{class:"flex items-center",onClick:t[0]||(t[0]=i=>Fe($d)("mobileCatalogFilters"))},Q8))}}),tI={class:"order-details lg:px-16 lg:py-12"},nI={key:0,class:"flex items-center justify-center min-h-[220px]"},iI=h("div",{class:"svg-icon animate-spin w-14 h-14 text-brand"},[h("svg",null,[h("use",{"xlink:href":"#spinner"})])],-1),sI=[iI],rI={key:0,class:"h2 mb-10"},oI={class:"orders-items-list space-y-10"},aI=ct('<div class="mt-10 flex items-center justify-between leading-[1.1] font-semibold md:justify-end"><div class="text-[14px] text-dark text-opacity-40 md:mr-[110px]">Товары (4):</div><div class="text-right"><div class="text-[28px] mb-2">34 328 ₽</div><div class="text-[20px] text-dark text-opacity-40 line-through">3 990 ₽</div></div></div>',1),lI=Ne({__name:"OrderDetails",setup(n){const e=Ln({loading:!1,orderDetails:{}});async function t(){setTimeout(()=>{e.loading=!1,e.orderDetails.id=Date.now(),ya.value=null},500)}return cr(ya,()=>{ya.value!==null&&(e.loading=!0,t())}),(i,s)=>{var r;return J(),ne("div",tI,[e.loading?(J(),ne("div",nI,sI)):(J(),ne($e,{key:1},[(r=e.orderDetails)!=null&&r.id?(J(),ne("div",rI,"Состав заказа №"+_t(e.orderDetails.id)+":",1)):Ei("",!0),h("div",oI,[(J(),ne($e,null,Rt(4,o=>j(xg,{key:o,placement:"modal"})),64))]),aI],64))])}}}),cI={class:"app-offcanvas__body"},dI=Ne({__name:"Offcanvas",props:{name:{}},setup(n){const e=n;wn.value[e.name]=!1;function t(i){i.target.classList.contains("app-offcanvas")&&$d(e.name)}return(i,s)=>(J(),ne("div",{class:Dt(["app-offcanvas",{"is-open":Fe(wn)[e.name]}]),onClick:t},[h("div",cI,[Ji(i.$slots,"default")])],2))}}),uI=h("div",{class:"svg-icon w-4 h-4"},[h("svg",null,[h("use",{"xlink:href":"#arrow-left"})])],-1),fI=h("div",null,"назад",-1),hI=[uI,fI],pI=Ne({__name:"OffcanvasClose",setup(n){return(e,t)=>(J(),ne("div",{class:Dt(["offcanvas-close text-brand text-14 flex gap-2 items-center cursor-pointer transition-all duration-300",Fe(nv)?"opacity-1 pointer-events-auto translate-x-0":"opacity-0 pointer-events-none -translate-x-[120%]"]),onClick:t[0]||(t[0]=i=>Fe(_m)())},hI,2))}}),mI=["onKeydown"],gI={class:"app-modal__body"},_I=h("div",{class:"rounded-icon w-8 h-8 md:w-11 md:h-11"},[h("div",{class:"svg-icon md:w-8 md:h-8"},[h("svg",null,[h("use",{"xlink:href":"#close"})])])],-1),vI=[_I],xI=Ne({__name:"AppModal",props:{width:{default:480},name:{default:"defaultModal"}},setup(n){const e=n;Vn.value[e.name]=!1;const t=Ct();function i(){Ha(e.name)}function s(r){const o=r.target;(o.classList.contains("app-modal")||!o.closest(".app-modal"))&&Ha(e.name)}return Vp(()=>{var r,o;Vn.value[e.name]===!0&&((r=t==null?void 0:t.value)==null||r.focus()),Vn.value[e.name]===!1&&((o=t==null?void 0:t.value)==null||o.blur())}),(r,o)=>(J(),ne("div",{tabindex:"0",class:Dt(["app-modal",{"is-open":Fe(Vn)[e.name]}]),ref_key:"appModalRef",ref:t,style:fn({"--app-modal-width":`${e.width}px`}),onClick:s,onKeydown:rm(i,["esc"])},[h("div",gI,[h("div",{class:"app-modal__close",onClick:i},vI),Ji(r.$slots,"default",{onClose:i,isOpen:Fe(Vn)[e.name]})])],46,mI))}}),bI={class:"flex flex-col gap-5 lg:flex-row"},yI={class:"lg:w-[320px] lg:flex-none"},SI={class:"flex items-center font-semibold justify-between mb-2 pb-2 border-b border-neutral border-opacity-50"},MI={class:"flex gap-1 font-semibold text-[14px] leading-[1.1] text-dark text-opacity-40"},EI=h("div",null,"из",-1),TI={class:"overflow-y-auto pr-2 max-h-[215px] md:max-h-[242px] xl:max-h-[440px]"},wI=["onClick"],AI={class:"opacity-80 text-[14px] mb-2 font-semibold leading-[1.1] tracking-[-0.28px] md:text-[20px]"},CI={class:"opacity-80 text-[14px] leading-[1.1] tracking-[-0.28px] md:text-[16px]"},RI=h("div",{class:"lg:flex-1 lg:min-w-0"},[h("div",{id:"pickup-points-map",style:{height:"480px",width:"100%"}})],-1),LI=Ne({__name:"PickUpPoints",props:{showMessage:{type:Boolean,default:!0},selectPickUpPoint:{type:Boolean,default:!1}},setup(n){const e=n;let t={};cr(Fn,()=>{i()});function i(){var r,o;(r=t.constructor)!=null&&r.name&&(t.geoObjects.removeAll(),Fn.value.pickUpPoints.length===0&&e.showMessage&&Rs.show("error",`В городе ${Fn.value.city} не найдено пунктов выдачи`),t.setCenter(Fn.value.latlng,10,{duration:400,checkZoomRange:!0}),(o=Fn.value.pickUpPoints)==null||o.forEach(a=>{const l=new ymaps.Placemark(a.latlng,{balloonContent:`
                <div class="font-base font-semibold text-[14px] ${e.selectPickUpPoint?"cursor-pointer":""}">
                    <div class="mb-2.5">${a.address}</div>
                    ${e.selectPickUpPoint?'<div class="inline-block underline text-brand js-select-point">Выбрать пункт</div>':""}
                </div>
            `,iconCaption:""},{iconLayout:"default#imageWithContent",iconImageOffset:[-15,-15],iconImageHref:"img/geo-marker.svg",iconImageSize:[30,30],balloonCloseButton:!1,hideIconOnBalloonOpen:!1});l.balloon.events.add(["click"],function(c){try{c.originalEvent.target.properties._data.balloonContent.includes("js-select-point")&&(s8.value=a,Ha("pickUpPointsModal"),Rs.show("success",`Выбран пункт самовывоза - ${a.address}`,{duration:1e4}))}catch(d){console.log(d)}}),t.geoObjects.add(l)}),t.geoObjects.getBounds()&&t.setBounds(t.geoObjects.getBounds()))}function s(r){var o;(o=t.constructor)!=null&&o.name&&t.setCenter(r.latlng,16,{duration:400,checkZoomRange:!0})}return ks(()=>{ymaps.ready(()=>{t=new ymaps.Map("pickup-points-map",{center:Fn.value.latlng,zoom:10,controls:[]}),i()})}),(r,o)=>{var l;const a=ke("GeoLocation");return J(),ne("div",bI,[h("div",yI,[h("div",SI,[j(a),h("div",MI,[h("div",null,_t(((l=Fe(Fn).pickUpPoints)==null?void 0:l.length)||0),1),EI,h("div",null,_t(Fe(i8)),1)])]),h("div",TI,[(J(!0),ne($e,null,Rt(Fe(Fn).pickUpPoints,(c,d)=>(J(),ne("div",{key:d,class:"transition-all duration-300 cursor-pointer py-4 border-b border-dark border-opacity-10 hover:border-opacity-100",onClick:u=>s(c)},[h("div",AI,_t(c.address),1),h("div",CI,_t(c.workHours),1)],8,wI))),128))])]),RI])}}}),PI=["onSubmit"],II=h("div",{class:"app-form-field mb-4"},[h("input",{type:"text",class:"app-form-control text-[16px] font-normal",placeholder:"Введите свой логин"})],-1),DI=h("div",{class:"app-form-field mb-6"},[h("input",{type:"password",class:"app-form-control text-[16px] font-normal",placeholder:"Введите свой пароль"})],-1),NI={class:"mb-12 flex items-center gap-7"},UI=h("button",{type:"submit",class:"app-button app-button--secondary"},"Войти",-1),OI=Ne({__name:"LoginForm",setup(n){async function e(){}return(t,i)=>{const s=ke("router-link");return J(),ne("form",{onSubmit:Jt(e,["prevent"])},[II,DI,h("div",NI,[UI,j(s,{to:{name:"password-recovery"},class:"text-dark text-opacity-40 font-semibold underline hover:no-underline"},{default:Me(()=>[_e("Забыли пароль?")]),_:1})])],40,PI)}}}),kI=["onSubmit"],FI=ct('<div class="app-form-field mb-4" aria-label="Поле обязательно для заполнения" data-cooltipz-dir="top-right" data-cooltipz-theme="danger" data-cooltipz-visible><input type="text" class="app-form-control text-[16px] font-normal" placeholder="Ваше имя"></div><div class="app-form-field mb-4"><input type="email" class="app-form-control text-[16px] font-normal" placeholder="Эл. почта"></div><div class="app-form-field mb-4"><input type="password" class="app-form-control text-[16px] font-normal" placeholder="Пароль"></div><div class="app-form-field mb-4"><input type="password" class="app-form-control text-[16px] font-normal" placeholder="Повторите пароль"></div>',4),BI={class:"mb-6 flex items-center text-[12px] text-black"},HI=h("div",{class:"app-checkmark mr-2"},[h("input",{type:"checkbox"}),h("div",{class:"svg-icon"},[h("svg",null,[h("use",{"xlink:href":"#checkmark"})])])],-1),zI=h("div",{class:"mb-12 flex items-center gap-7"},[h("button",{type:"submit",class:"app-button app-button--secondary"},"Зарегистрироваться")],-1),VI=Ne({__name:"RegistrationForm",setup(n){async function e(){}return(t,i)=>{const s=ke("router-link");return J(),ne("form",{onSubmit:Jt(e,["prevent"])},[FI,h("label",BI,[HI,h("div",null,[_e(" я согласен с условиями "),j(s,{to:{name:"privacy-policy"},class:"underline hover:no-underline"},{default:Me(()=>[_e("политики конфиденциальности")]),_:1})])]),zI],40,kI)}}}),GI=["onSubmit"],$I=h("div",{class:"app-form-field mb-6"},[h("input",{type:"email",class:"app-form-control text-[16px] font-normal",placeholder:"Введите Ваш e-mail"})],-1),WI={class:"mb-12 flex items-center gap-7"},XI=h("button",{type:"submit",class:"app-button app-button--secondary"},"Восстановить",-1),jI=Ne({__name:"PasswordRecoveryForm",setup(n){async function e(){}return(t,i)=>(J(),ne("form",{onSubmit:Jt(e,["prevent"])},[$I,h("div",WI,[XI,h("a",{href:"#",class:"text-dark text-opacity-40 font-semibold underline hover:no-underline",onClick:i[0]||(i[0]=Jt(s=>t.$router.go(-1),["prevent"]))},"Вернуться назад")])],40,GI))}}),qI=["onSubmit"],YI=ct('<fieldset class="border-t border-neutral-alpha pt-5 pb-10"><legend class="h2 float-left">Личная информация:</legend><div class="clear-both"></div><div class="lg:max-w-[50%]"><div class="app-form-field mb-4"><input type="text" class="app-form-control" placeholder="Имя"></div><div class="app-form-field mb-4"><input type="text" class="app-form-control" placeholder="Фамилия"></div><div class="app-form-field mb-4"><input type="tel" class="app-form-control" placeholder="Телефон"></div><div class="app-form-field mb-4"><input type="email" class="app-form-control" placeholder="Эл. почта"></div><div class="app-form-field mb-4"><textarea class="app-form-control" placeholder="Комментарий"></textarea></div></div></fieldset>',1),KI={class:"border-t border-neutral-alpha pt-5 pb-10"},ZI=h("legend",{class:"h2 float-left"},"Способ доставки:",-1),JI=h("div",{class:"clear-both"},null,-1),QI={class:"flex flex-col items-start text-[16px] leading-[1.0] font-semibold lg:text-[20px]"},e9=ct('<label class="flex items-center mb-2"><div class="app-checkmark w-[22px] h-[22px] mr-3"><input type="radio" checked name="delivery"><div class="svg-icon"><svg><use xlink:href="#radio"></use></svg></div></div><div>Самовывоз</div></label><label class="flex items-center mb-2"><div class="app-checkmark w-[22px] h-[22px] mr-3"><input type="radio" name="delivery"><div class="svg-icon"><svg><use xlink:href="#radio"></use></svg></div></div><div>Курьерская доставка</div></label>',2),t9={class:"mt-6"},n9={type:"button",class:"app-button app-button--secondary"},i9=ct('<fieldset class="border-t border-neutral-alpha pt-5 pb-10"><legend class="h2 float-left">Способ оплаты:</legend><div class="clear-both"></div><div class="flex flex-col items-start text-[16px] leading-[1.0] font-semibold lg:text-[20px]"><label class="flex items-center mb-2"><div class="app-checkmark w-[22px] h-[22px] mr-3"><input type="radio" checked name="payment"><div class="svg-icon"><svg><use xlink:href="#radio"></use></svg></div></div><div>При получении (наличные или карта)</div></label><label class="flex items-center mb-2"><div class="app-checkmark w-[22px] h-[22px] mr-3"><input type="radio" name="payment"><div class="svg-icon"><svg><use xlink:href="#radio"></use></svg></div></div><div>Картой на сайте</div></label><div class="mt-6"><button type="submit" class="app-button app-button--dark">Оформить заказ</button></div><label class="flex items-center mt-2 text-dark text-opacity-50 text-[10px]"><div class="app-checkmark w-[22px] h-[22px] mr-3"><input type="checkbox" checked name="agreement"><div class="svg-icon"><svg><use xlink:href="#checkmark"></use></svg></div></div><div> Нажимая на кнопку «Отправить заказ» вы<br> соглашаетесь с условиями публичной оферты </div></label></div></fieldset>',1),s9=Ne({__name:"OrderForm",setup(n){async function e(){}return(t,i)=>{const s=Os("modal-call");return J(),ne("form",{onSubmit:Jt(e,["prevent"])},[YI,h("fieldset",KI,[ZI,JI,h("div",QI,[e9,h("div",t9,[is((J(),ne("button",n9,[_e("Выбрать пункт самовывоза")])),[[s,{name:"pickUpPointsModal"}]])])])]),i9],40,qI)}}}),r9=["onSubmit"],o9=ct('<label><div class="text-dark text-opacity-50 text-[14px]">Фамилия:</div><input type="text" class="app-form-control text-[20px]" value="Иванов"></label><label><div class="text-dark text-opacity-50 text-[14px]">Имя:</div><input type="text" class="app-form-control text-[20px]" value="Имя"></label><label><div class="text-dark text-opacity-50 text-[14px]">Отчество:</div><input type="tel" class="app-form-control text-[20px]" value="Иванович"></label><label><div class="text-dark text-opacity-50 text-[14px]">Телефон:</div><input type="tel" class="app-form-control text-[20px]" value="+7 911 600 00 00"></label><label><div class="text-dark text-opacity-50 text-[14px]">E-mail:</div><input type="email" class="app-form-control text-[20px]" value="ivanivan@gmail.com"></label><label class="flex items-center text-dark text-opacity-50 text-[14px] font-semibold md:col-span-2"><div class="app-checkmark w-[24px] h-[24px] mr-3"><input type="checkbox" checked name="agreement"><div class="svg-icon"><svg><use xlink:href="#checkmark"></use></svg></div></div><div>Получать рассылку</div></label>',6),a9={class:"flex flex-col flex-wrap gap-4 sm:flex-row sm:items-center md:col-span-2"},l9=h("button",{type:"submit",class:"app-button app-button--dark"},"Сохранить",-1),c9=Ne({__name:"PersonalDataForm",setup(n){async function e(){}return(t,i)=>(J(),ne("form",{class:"grid gap-7 md:grid-cols-2",onSubmit:Jt(e,["prevent"])},[o9,h("div",a9,[l9,h("a",{href:"#",onClick:i[0]||(i[0]=Jt(s=>t.$router.go(-1),["prevent"])),class:"app-button app-button--secondary xl:hidden"},"вернуться назад")])],40,r9))}}),d9=["onSubmit"],u9=h("label",null,[h("div",{class:"text-dark text-opacity-50 text-[14px]"},"Введите новый пароль:"),h("input",{type:"password",class:"app-form-control text-[20px]",value:"test_password"})],-1),f9=h("label",null,[h("div",{class:"text-dark text-opacity-50 text-[14px]"},"Повторите пароль:"),h("input",{type:"password",class:"app-form-control text-[20px]",value:"test_password"})],-1),h9={class:"flex flex-col flex-wrap gap-4 sm:flex-row sm:items-center md:col-span-2"},p9=h("button",{type:"submit",class:"app-button app-button--dark"},"Сохранить",-1),m9=Ne({__name:"PersonalPasswordForm",setup(n){async function e(){}return(t,i)=>(J(),ne("form",{class:"flex flex-col gap-7 lg:max-w-[420px]",onSubmit:Jt(e,["prevent"])},[u9,f9,h("div",h9,[p9,h("a",{href:"#",onClick:i[0]||(i[0]=Jt(s=>t.$router.go(-1),["prevent"])),class:"app-button app-button--secondary xl:hidden"},"вернуться назад")])],40,d9))}}),g9=["onSubmit"],_9=ct('<div class="app-form-field mb-4"><input type="text" class="app-form-control text-[16px]" placeholder="Имя"></div><div class="app-form-field mb-6"><input type="tel" class="app-form-control text-[16px]" placeholder="Телефон"></div><div class="app-form-field mb-6"><input type="email" class="app-form-control text-[16px]" placeholder="Email"></div><div class="app-form-field mb-6"><textarea class="app-form-control text-[16px] h-[116px]" placeholder="Комментарий"></textarea></div><div><button type="submit" class="app-button app-button--secondary">Отправить</button></div>',5),v9=[_9],x9=Ne({__name:"CallbackForm",setup(n){async function e(){_u("callbackModal"),Rs.show("success","Мы свяжемся с вами в ближайшее время")}return(t,i)=>(J(),ne("form",{onSubmit:Jt(e,["prevent"])},v9,40,g9))}});Z_(ZP).directive("scroll-to",EP).directive("modal-call",TP).component("Details",n8).component("CountButtons",vg).component("LoginForm",OI).component("CallbackForm",x9).component("RegistrationForm",VI).component("PasswordRecoveryForm",jI).component("PersonalDataForm",c9).component("PersonalPasswordForm",m9).component("OrderForm",s9).component("OrderDetails",lI).component("AppSearch",_8).component("GeoLocation",l8).component("GeoLocationList",u8).component("Accordion",S8).component("AppTabs",C8).component("Pagination",N8).component("AppSort",F8).component("AppSelect",G8).component("MobileFiltersBurger",eI).component("MobileMenuBurger",K8).component("Offcanvas",dI).component("OffcanvasClose",pI).component("AppModal",xI).component("PickUpPoints",LI).use(gu).mount("#app");document.addEventListener("DOMContentLoaded",()=>{});window.onload=()=>{};
